let u=null,r=null,p=null,d=null,f="";const b="selectedSearchEngineId",v="selectedSearchGroupId",w="selectedEngineIdForGroup:";function _(e){if(!e)return"";const t=e.closest(".search-group");return t&&Array.from(t.classList).filter(c=>c!=="search-group")[0]||""}function C(e){if(!e)return;document.querySelectorAll("#search-bg .search-group").forEach(c=>{const n=c.classList.contains(e);c.classList.toggle("s-current",n),c.style.display=n?"block":"none"}),document.querySelectorAll("#search-list-menu .s-type-list.big label").forEach(c=>c.classList.toggle("active",(c.dataset.id||"")===e))}function h(e){if(!e)return;C(e);let t=null;const o=localStorage.getItem(w+e)||"";if(o){const c=document.getElementById(o);c&&c.name==="type"&&(t=c)}if(!t){const c=localStorage.getItem(b)||"";if(c){const n=document.getElementById(c);n&&n.name==="type"&&_(n)===e&&(t=n)}}t||(t=document.querySelector(`.search-group.${e} input[name="type"]`)),t&&(t.checked=!0,E());try{localStorage.setItem(v,e)}catch{}}function E(){const e=document.querySelector('input[name="type"]:checked');if(e){f=e.value||"";const o=e.getAttribute("data-placeholder");o&&u&&(u.placeholder=o);try{localStorage.setItem(b,e.id)}catch{}const c=document.querySelector("#search-bg .super-search-fm");c&&(c.action=f);const n=_(e);if(n){try{localStorage.setItem(v,n)}catch{}try{localStorage.setItem(w+n,e.id)}catch{}C(n)}return}const t=document.querySelector("#search-bg .super-search-fm");t&&(f=t.action||"")}function A(e){let t="";const o=document.querySelector('input[name="type"]:checked');if(o&&(t=o.value||""),!t){const n=document.querySelector("#search-bg .super-search-fm");n&&(t=n.action||"")}if(!t)return;const c=t+encodeURIComponent(e);window.open(c,"_blank")}function g(){u=document.getElementById("search-text"),r=document.getElementById("word"),p=document.getElementById("m_search-text"),d=document.getElementById("m_word");const e=document.querySelectorAll(".super-search-fm"),t=document.querySelectorAll('input[name="type"]'),o=document.querySelectorAll('input[name="type2"]');if(!e.length)return!1;try{const n=document.querySelector('#search-bg input[name="type"][checked]');if(!!!(n&&n.id==="type-local")){const l=localStorage.getItem(b);if(l){const a=document.getElementById(l);a&&(a.checked=!0)}const i=localStorage.getItem(v)||"";i&&h(i)}}catch{}E(),t.length&&t.forEach(n=>n.addEventListener("change",E));const c=document.querySelectorAll("#search-list-menu .s-type-list.big label");if(c.length&&c.forEach(n=>{n.addEventListener("click",s=>{const l=n.dataset.id||"";l&&h(l)})}),o.length&&o.forEach(n=>n.addEventListener("change",()=>{const s=document.querySelector('input[name="type2"]:checked'),l=s?.getAttribute("data-placeholder")||"",i=document.getElementById("m_search-text");l&&i&&(i.placeholder=l);const a=document.querySelector("#search-modal .super-search-fm");a&&s&&(a.action=s.value||"");const y=i?.value.trim()||"";if(y)if(!!!(s&&s.id==="m_type-local"))S(y,d);else{d&&(d.style.display="none");const m=d?.parentElement;m&&(m.style.display="none")}})),e.forEach(n=>{n.addEventListener("submit",s=>{s.preventDefault();const l=n.querySelector('input[type="text"]')||u,i=l&&l.value.trim()||"";if(!i)return;const a=n.closest(".s-search")||document,y=a.querySelector('input[name="type"]:checked'),k=a.querySelector('input[name="type2"]:checked'),m=y?.value||k?.value||n.action||"";if(!m)return;const G=m+encodeURIComponent(i);window.open(G,"_blank")})}),u){const n=u;n.addEventListener("keyup",()=>{const s=n.value.trim();if(!s){r&&(r.style.display="none");return}const l=document.querySelector('#search-bg input[name="type"]:checked');if(l&&l.id==="type-local"){r&&(r.style.display="none");return}B(s)})}if(p){const n=p;n.addEventListener("keyup",()=>{const s=n.value.trim();if(!s){d&&(d.style.display="none");const a=d?.parentElement;a&&(a.style.display="none");return}const l=document.querySelector('#search-modal input[name="type2"]:checked');if(!!(l&&l.id==="m_type-local")){d&&(d.style.display="none");const a=d?.parentElement;a&&(a.style.display="none");return}S(s,d)})}if(!document.querySelector('#search-bg input[name="type"]:checked')){const s=document.querySelector("#search-list-menu .s-type-list.big label")?.dataset.id||"";s&&h(s)}return!0}g()||document.addEventListener("DOMContentLoaded",()=>{if(!g()){const e=new MutationObserver(()=>{g()&&e.disconnect()});e.observe(document.documentElement,{childList:!0,subtree:!0})}});let R=0;function B(e){const t=`__bdSugCb_${Date.now()}_${R++}`,o=document.createElement("script");window[t]=c=>{try{L(Array.isArray(c?.s)?c.s:[])}finally{delete window[t],o.remove()}},o.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(e)}&cb=${t}`,o.onerror=()=>{L([]),delete window[t],o.remove()},document.head.appendChild(o)}function S(e,t){const o=`__bdSugCb_${Date.now()}_${R++}`,c=document.createElement("script");window[o]=n=>{try{q(t,Array.isArray(n?.s)?n.s:[])}finally{delete window[o],c.remove()}},c.src=`https://suggestion.baidu.com/su?wd=${encodeURIComponent(e)}&cb=${o}`,c.onerror=()=>{q(t,[]),delete window[o],c.remove()},document.head.appendChild(c)}function L(e){if(r){if(r.innerHTML="",!e||!e.length){r&&(r.style.display="none");return}r&&(r.style.display="block"),e.forEach((t,o)=>{const c=document.createElement("li"),n=document.createElement("span");n.textContent=String(o+1),c.appendChild(n),c.appendChild(document.createTextNode(t)),c.addEventListener("click",()=>{const s=u;s&&(s.value=t),r&&(r.style.display="none"),A(t)}),r.appendChild(c)})}}function q(e,t){if(!e)return;e.innerHTML="";const o=e.parentElement;if(!t||!t.length){e.style.display="none",o&&(o.style.display="none");return}e.style.display="block",t.forEach((c,n)=>{const s=document.createElement("li"),l=document.createElement("span");l.textContent=String(n+1),s.appendChild(l),s.appendChild(document.createTextNode(c)),s.addEventListener("click",()=>{const i=p;i&&(i.value=c),e.style.display="none",A(c)}),e.appendChild(s)}),o&&(o.style.display="block")}document.addEventListener("click",e=>{const t=e.target,o=document.querySelector(".io-grey-mode");r&&o&&t&&o.contains(t)&&(r.style.display="none")});const I=document.getElementById("search-modal");I&&I.addEventListener("shown.bs.modal",()=>{const e=p?.value.trim()||"";if(!e)return;const t=document.querySelector('#search-modal input[name="type2"]:checked');!!(t&&t.id==="m_type-local")||S(e,d)});
