const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DAnc6_hP.js","assets/index.dom-C3-224fz.js"])))=>i.map(i=>d[i]);
function QM(e,n){for(var i=0;i<n.length;i++){const r=n[i];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();var Vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xE={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nA;function JM(){if(nA)return Qp;nA=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(r,o,a){var u=null;if(a!==void 0&&(u=""+a),o.key!==void 0&&(u=""+o.key),"key"in o){a={};for(var c in o)c!=="key"&&(a[c]=o[c])}else a=o;return o=a.ref,{$$typeof:e,type:r,key:u,ref:o!==void 0?o:null,props:a}}return Qp.Fragment=n,Qp.jsx=i,Qp.jsxs=i,Qp}var iA;function tR(){return iA||(iA=1,xE.exports=JM()),xE.exports}var O=tR(),CE={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rA;function eR(){if(rA)return qe;rA=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),w=Symbol.iterator;function x(F){return F===null||typeof F!="object"?null:(F=w&&F[w]||F["@@iterator"],typeof F=="function"?F:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,b={};function B(F,J,tt){this.props=F,this.context=J,this.refs=b,this.updater=tt||T}B.prototype.isReactComponent={},B.prototype.setState=function(F,J){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,J,"setState")},B.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function A(){}A.prototype=B.prototype;function H(F,J,tt){this.props=F,this.context=J,this.refs=b,this.updater=tt||T}var R=H.prototype=new A;R.constructor=H,D(R,B.prototype),R.isPureReactComponent=!0;var k=Array.isArray;function W(){}var U={H:null,A:null,T:null,S:null},nt=Object.prototype.hasOwnProperty;function st(F,J,tt){var it=tt.ref;return{$$typeof:e,type:F,key:J,ref:it!==void 0?it:null,props:tt}}function ft(F,J){return st(F.type,J,F.props)}function Et(F){return typeof F=="object"&&F!==null&&F.$$typeof===e}function ct(F){var J={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(tt){return J[tt]})}var mt=/\/+/g;function wt(F,J){return typeof F=="object"&&F!==null&&F.key!=null?ct(""+F.key):J.toString(36)}function V(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(W,W):(F.status="pending",F.then(function(J){F.status==="pending"&&(F.status="fulfilled",F.value=J)},function(J){F.status==="pending"&&(F.status="rejected",F.reason=J)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function P(F,J,tt,it,xt){var gt=typeof F;(gt==="undefined"||gt==="boolean")&&(F=null);var Lt=!1;if(F===null)Lt=!0;else switch(gt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(F.$$typeof){case e:case n:Lt=!0;break;case p:return Lt=F._init,P(Lt(F._payload),J,tt,it,xt)}}if(Lt)return xt=xt(F),Lt=it===""?"."+wt(F,0):it,k(xt)?(tt="",Lt!=null&&(tt=Lt.replace(mt,"$&/")+"/"),P(xt,J,tt,"",function(Pt){return Pt})):xt!=null&&(Et(xt)&&(xt=ft(xt,tt+(xt.key==null||F&&F.key===xt.key?"":(""+xt.key).replace(mt,"$&/")+"/")+Lt)),J.push(xt)),1;Lt=0;var $t=it===""?".":it+":";if(k(F))for(var ot=0;ot<F.length;ot++)it=F[ot],gt=$t+wt(it,ot),Lt+=P(it,J,tt,gt,xt);else if(ot=x(F),typeof ot=="function")for(F=ot.call(F),ot=0;!(it=F.next()).done;)it=it.value,gt=$t+wt(it,ot++),Lt+=P(it,J,tt,gt,xt);else if(gt==="object"){if(typeof F.then=="function")return P(V(F),J,tt,it,xt);throw J=String(F),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function _(F,J,tt){if(F==null)return F;var it=[],xt=0;return P(F,it,"","",function(gt){return J.call(tt,gt,xt++)}),it}function N(F){if(F._status===-1){var J=F._result;J=J(),J.then(function(tt){(F._status===0||F._status===-1)&&(F._status=1,F._result=tt)},function(tt){(F._status===0||F._status===-1)&&(F._status=2,F._result=tt)}),F._status===-1&&(F._status=0,F._result=J)}if(F._status===1)return F._result.default;throw F._result}var $=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Q={map:_,forEach:function(F,J,tt){_(F,function(){J.apply(this,arguments)},tt)},count:function(F){var J=0;return _(F,function(){J++}),J},toArray:function(F){return _(F,function(J){return J})||[]},only:function(F){if(!Et(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return qe.Activity=m,qe.Children=Q,qe.Component=B,qe.Fragment=i,qe.Profiler=o,qe.PureComponent=H,qe.StrictMode=r,qe.Suspense=h,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,qe.__COMPILER_RUNTIME={__proto__:null,c:function(F){return U.H.useMemoCache(F)}},qe.cache=function(F){return function(){return F.apply(null,arguments)}},qe.cacheSignal=function(){return null},qe.cloneElement=function(F,J,tt){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var it=D({},F.props),xt=F.key;if(J!=null)for(gt in J.key!==void 0&&(xt=""+J.key),J)!nt.call(J,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&J.ref===void 0||(it[gt]=J[gt]);var gt=arguments.length-2;if(gt===1)it.children=tt;else if(1<gt){for(var Lt=Array(gt),$t=0;$t<gt;$t++)Lt[$t]=arguments[$t+2];it.children=Lt}return st(F.type,xt,it)},qe.createContext=function(F){return F={$$typeof:u,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},qe.createElement=function(F,J,tt){var it,xt={},gt=null;if(J!=null)for(it in J.key!==void 0&&(gt=""+J.key),J)nt.call(J,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(xt[it]=J[it]);var Lt=arguments.length-2;if(Lt===1)xt.children=tt;else if(1<Lt){for(var $t=Array(Lt),ot=0;ot<Lt;ot++)$t[ot]=arguments[ot+2];xt.children=$t}if(F&&F.defaultProps)for(it in Lt=F.defaultProps,Lt)xt[it]===void 0&&(xt[it]=Lt[it]);return st(F,gt,xt)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(F){return{$$typeof:c,render:F}},qe.isValidElement=Et,qe.lazy=function(F){return{$$typeof:p,_payload:{_status:-1,_result:F},_init:N}},qe.memo=function(F,J){return{$$typeof:g,type:F,compare:J===void 0?null:J}},qe.startTransition=function(F){var J=U.T,tt={};U.T=tt;try{var it=F(),xt=U.S;xt!==null&&xt(tt,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(W,$)}catch(gt){$(gt)}finally{J!==null&&tt.types!==null&&(J.types=tt.types),U.T=J}},qe.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},qe.use=function(F){return U.H.use(F)},qe.useActionState=function(F,J,tt){return U.H.useActionState(F,J,tt)},qe.useCallback=function(F,J){return U.H.useCallback(F,J)},qe.useContext=function(F){return U.H.useContext(F)},qe.useDebugValue=function(){},qe.useDeferredValue=function(F,J){return U.H.useDeferredValue(F,J)},qe.useEffect=function(F,J){return U.H.useEffect(F,J)},qe.useEffectEvent=function(F){return U.H.useEffectEvent(F)},qe.useId=function(){return U.H.useId()},qe.useImperativeHandle=function(F,J,tt){return U.H.useImperativeHandle(F,J,tt)},qe.useInsertionEffect=function(F,J){return U.H.useInsertionEffect(F,J)},qe.useLayoutEffect=function(F,J){return U.H.useLayoutEffect(F,J)},qe.useMemo=function(F,J){return U.H.useMemo(F,J)},qe.useOptimistic=function(F,J){return U.H.useOptimistic(F,J)},qe.useReducer=function(F,J,tt){return U.H.useReducer(F,J,tt)},qe.useRef=function(F){return U.H.useRef(F)},qe.useState=function(F){return U.H.useState(F)},qe.useSyncExternalStore=function(F,J,tt){return U.H.useSyncExternalStore(F,J,tt)},qe.useTransition=function(){return U.H.useTransition()},qe.version="19.2.0",qe}var oA;function t5(){return oA||(oA=1,CE.exports=eR()),CE.exports}var K=t5();const Ae=hf(K),nR=QM({__proto__:null,default:Ae},[K]);var EE={exports:{}},Jp={},SE={exports:{}},TE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sA;function iR(){return sA||(sA=1,function(e){function n(P,_){var N=P.length;P.push(_);t:for(;0<N;){var $=N-1>>>1,Q=P[$];if(0<o(Q,_))P[$]=_,P[N]=Q,N=$;else break t}}function i(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var _=P[0],N=P.pop();if(N!==_){P[0]=N;t:for(var $=0,Q=P.length,F=Q>>>1;$<F;){var J=2*($+1)-1,tt=P[J],it=J+1,xt=P[it];if(0>o(tt,N))it<Q&&0>o(xt,tt)?(P[$]=xt,P[it]=N,$=it):(P[$]=tt,P[J]=N,$=J);else if(it<Q&&0>o(xt,N))P[$]=xt,P[it]=N,$=it;else break t}}return _}function o(P,_){var N=P.sortIndex-_.sortIndex;return N!==0?N:P.id-_.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var h=[],g=[],p=1,m=null,w=3,x=!1,T=!1,D=!1,b=!1,B=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function R(P){for(var _=i(g);_!==null;){if(_.callback===null)r(g);else if(_.startTime<=P)r(g),_.sortIndex=_.expirationTime,n(h,_);else break;_=i(g)}}function k(P){if(D=!1,R(P),!T)if(i(h)!==null)T=!0,W||(W=!0,ct());else{var _=i(g);_!==null&&V(k,_.startTime-P)}}var W=!1,U=-1,nt=5,st=-1;function ft(){return b?!0:!(e.unstable_now()-st<nt)}function Et(){if(b=!1,W){var P=e.unstable_now();st=P;var _=!0;try{t:{T=!1,D&&(D=!1,A(U),U=-1),x=!0;var N=w;try{e:{for(R(P),m=i(h);m!==null&&!(m.expirationTime>P&&ft());){var $=m.callback;if(typeof $=="function"){m.callback=null,w=m.priorityLevel;var Q=$(m.expirationTime<=P);if(P=e.unstable_now(),typeof Q=="function"){m.callback=Q,R(P),_=!0;break e}m===i(h)&&r(h),R(P)}else r(h);m=i(h)}if(m!==null)_=!0;else{var F=i(g);F!==null&&V(k,F.startTime-P),_=!1}}break t}finally{m=null,w=N,x=!1}_=void 0}}finally{_?ct():W=!1}}}var ct;if(typeof H=="function")ct=function(){H(Et)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,wt=mt.port2;mt.port1.onmessage=Et,ct=function(){wt.postMessage(null)}}else ct=function(){B(Et,0)};function V(P,_){U=B(function(){P(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):nt=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return w},e.unstable_next=function(P){switch(w){case 1:case 2:case 3:var _=3;break;default:_=w}var N=w;w=_;try{return P()}finally{w=N}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(P,_){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var N=w;w=P;try{return _()}finally{w=N}},e.unstable_scheduleCallback=function(P,_,N){var $=e.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?$+N:$):N=$,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=N+Q,P={id:p++,callback:_,priorityLevel:P,startTime:N,expirationTime:Q,sortIndex:-1},N>$?(P.sortIndex=N,n(g,P),i(h)===null&&P===i(g)&&(D?(A(U),U=-1):D=!0,V(k,N-$))):(P.sortIndex=Q,n(h,P),T||x||(T=!0,W||(W=!0,ct()))),P},e.unstable_shouldYield=ft,e.unstable_wrapCallback=function(P){var _=w;return function(){var N=w;w=_;try{return P.apply(this,arguments)}finally{w=N}}}}(TE)),TE}var aA;function rR(){return aA||(aA=1,SE.exports=iR()),SE.exports}var AE={exports:{}},Ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lA;function oR(){if(lA)return Ur;lA=1;var e=t5();function n(h){var g="https://react.dev/errors/"+h;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)g+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var r={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function a(h,g,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:m==null?null:""+m,children:h,containerInfo:g,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,g){if(h==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ur.createPortal=function(h,g){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return a(h,g,null,p)},Ur.flushSync=function(h){var g=u.T,p=r.p;try{if(u.T=null,r.p=2,h)return h()}finally{u.T=g,r.p=p,r.d.f()}},Ur.preconnect=function(h,g){typeof h=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(h,g))},Ur.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Ur.preinit=function(h,g){if(typeof h=="string"&&g&&typeof g.as=="string"){var p=g.as,m=c(p,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;p==="style"?r.d.S(h,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:m,integrity:w,fetchPriority:x}):p==="script"&&r.d.X(h,{crossOrigin:m,integrity:w,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ur.preinitModule=function(h,g){if(typeof h=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var p=c(g.as,g.crossOrigin);r.d.M(h,{crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(h)},Ur.preload=function(h,g){if(typeof h=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var p=g.as,m=c(p,g.crossOrigin);r.d.L(h,p,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ur.preloadModule=function(h,g){if(typeof h=="string")if(g){var p=c(g.as,g.crossOrigin);r.d.m(h,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:p,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(h)},Ur.requestFormReset=function(h){r.d.r(h)},Ur.unstable_batchedUpdates=function(h,g){return h(g)},Ur.useFormState=function(h,g,p){return u.H.useFormState(h,g,p)},Ur.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ur.version="19.2.0",Ur}var uA;function G4(){if(uA)return AE.exports;uA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),AE.exports=oR(),AE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cA;function sR(){if(cA)return Jp;cA=1;var e=rR(),n=t5(),i=G4();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function u(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(s.tag===31){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(r(188))}function g(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,v=l;;){var C=f.return;if(C===null)break;var S=C.alternate;if(S===null){if(v=C.return,v!==null){f=v;continue}break}if(C.child===S.child){for(S=C.child;S;){if(S===f)return h(C),s;if(S===v)return h(C),l;S=S.sibling}throw Error(r(188))}if(f.return!==v.return)f=C,v=S;else{for(var L=!1,X=C.child;X;){if(X===f){L=!0,f=C,v=S;break}if(X===v){L=!0,v=C,f=S;break}X=X.sibling}if(!L){for(X=S.child;X;){if(X===f){L=!0,f=S,v=C;break}if(X===v){L=!0,v=S,f=C;break}X=X.sibling}if(!L)throw Error(r(189))}}if(f.alternate!==v)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function p(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=p(s),l!==null)return l;s=s.sibling}return null}var m=Object.assign,w=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),H=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),st=Symbol.for("react.activity"),ft=Symbol.for("react.memo_cache_sentinel"),Et=Symbol.iterator;function ct(s){return s===null||typeof s!="object"?null:(s=Et&&s[Et]||s["@@iterator"],typeof s=="function"?s:null)}var mt=Symbol.for("react.client.reference");function wt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===mt?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case B:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case W:return"SuspenseList";case st:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case T:return"Portal";case H:return s.displayName||"Context";case A:return(s._context.displayName||"Context")+".Consumer";case R:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case U:return l=s.displayName||null,l!==null?l:wt(s.type)||"Memo";case nt:l=s._payload,s=s._init;try{return wt(s(l))}catch{}}return null}var V=Array.isArray,P=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N={pending:!1,data:null,method:null,action:null},$=[],Q=-1;function F(s){return{current:s}}function J(s){0>Q||(s.current=$[Q],$[Q]=null,Q--)}function tt(s,l){Q++,$[Q]=s.current,s.current=l}var it=F(null),xt=F(null),gt=F(null),Lt=F(null);function $t(s,l){switch(tt(gt,l),tt(xt,s),tt(it,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?bh(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=bh(l),s=zr(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}J(it),tt(it,s)}function ot(){J(it),J(xt),J(gt)}function Pt(s){s.memoizedState!==null&&tt(Lt,s);var l=it.current,f=zr(l,s.type);l!==f&&(tt(xt,s),tt(it,f))}function Rt(s){xt.current===s&&(J(it),J(xt)),Lt.current===s&&(J(Lt),kc._currentValue=N)}var It,he;function Nt(s){if(It===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);It=l&&l[1]||"",he=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+s+he}var ge=!1;function ae(s,l){if(!s||ge)return"";ge=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(l){var zt=function(){throw Error()};if(Object.defineProperty(zt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(zt,[])}catch(Ot){var Bt=Ot}Reflect.construct(s,[],zt)}else{try{zt.call()}catch(Ot){Bt=Ot}s.call(zt.prototype)}}else{try{throw Error()}catch(Ot){Bt=Ot}(zt=s())&&typeof zt.catch=="function"&&zt.catch(function(){})}}catch(Ot){if(Ot&&Bt&&typeof Ot.stack=="string")return[Ot.stack,Bt.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=v.DetermineComponentFrameRoot(),L=S[0],X=S[1];if(L&&X){var at=L.split(`
`),bt=X.split(`
`);for(C=v=0;v<at.length&&!at[v].includes("DetermineComponentFrameRoot");)v++;for(;C<bt.length&&!bt[C].includes("DetermineComponentFrameRoot");)C++;if(v===at.length||C===bt.length)for(v=at.length-1,C=bt.length-1;1<=v&&0<=C&&at[v]!==bt[C];)C--;for(;1<=v&&0<=C;v--,C--)if(at[v]!==bt[C]){if(v!==1||C!==1)do if(v--,C--,0>C||at[v]!==bt[C]){var kt=`
`+at[v].replace(" at new "," at ");return s.displayName&&kt.includes("<anonymous>")&&(kt=kt.replace("<anonymous>",s.displayName)),kt}while(1<=v&&0<=C);break}}}finally{ge=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?Nt(f):""}function ee(s,l){switch(s.tag){case 26:case 27:case 5:return Nt(s.type);case 16:return Nt("Lazy");case 13:return s.child!==l&&l!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return ae(s.type,!1);case 11:return ae(s.type.render,!1);case 1:return ae(s.type,!0);case 31:return Nt("Activity");default:return""}}function xe(s){try{var l="",f=null;do l+=ee(s,f),f=s,s=s.return;while(s);return l}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var le=Object.prototype.hasOwnProperty,Re=e.unstable_scheduleCallback,ve=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,ti=e.unstable_requestPaint,Fn=e.unstable_now,Kn=e.unstable_getCurrentPriorityLevel,Br=e.unstable_ImmediatePriority,ji=e.unstable_UserBlockingPriority,An=e.unstable_NormalPriority,Wn=e.unstable_LowPriority,Zr=e.unstable_IdlePriority,Js=e.log,ta=e.unstable_setDisableYieldValue,Qr=null,di=null;function Pr(s){if(typeof Js=="function"&&ta(s),di&&typeof di.setStrictMode=="function")try{di.setStrictMode(Qr,s)}catch{}}var Ei=Math.clz32?Math.clz32:e1,Ps=Math.log,wd=Math.LN2;function e1(s){return s>>>=0,s===0?32:31-(Ps(s)/wd|0)|0}var Jr=256,kl=262144,Il=4194304;function Ms(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function _u(s,l,f){var v=s.pendingLanes;if(v===0)return 0;var C=0,S=s.suspendedLanes,L=s.pingedLanes;s=s.warmLanes;var X=v&134217727;return X!==0?(v=X&~S,v!==0?C=Ms(v):(L&=X,L!==0?C=Ms(L):f||(f=X&~s,f!==0&&(C=Ms(f))))):(X=v&~S,X!==0?C=Ms(X):L!==0?C=Ms(L):f||(f=v&~s,f!==0&&(C=Ms(f)))),C===0?0:l!==0&&l!==C&&(l&S)===0&&(S=C&-C,f=l&-l,S>=f||S===32&&(f&4194048)!==0)?l:C}function Hl(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function n1(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cf(){var s=Il;return Il<<=1,(Il&62914560)===0&&(Il=4194304),s}function Ef(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function Nl(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function i1(s,l,f,v,C,S){var L=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var X=s.entanglements,at=s.expirationTimes,bt=s.hiddenUpdates;for(f=L&~f;0<f;){var kt=31-Ei(f),zt=1<<kt;X[kt]=0,at[kt]=-1;var Bt=bt[kt];if(Bt!==null)for(bt[kt]=null,kt=0;kt<Bt.length;kt++){var Ot=Bt[kt];Ot!==null&&(Ot.lane&=-536870913)}f&=~zt}v!==0&&Fu(s,v,0),S!==0&&C===0&&s.tag!==0&&(s.suspendedLanes|=S&~(L&~l))}function Fu(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var v=31-Ei(l);s.entangledLanes|=l,s.entanglements[v]=s.entanglements[v]|1073741824|f&261930}function xd(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var v=31-Ei(f),C=1<<v;C&l|s[v]&l&&(s[v]|=l),f&=~C}}function ku(s,l){var f=l&-l;return f=(f&42)!==0?1:Iu(f),(f&(s.suspendedLanes|l))!==0?0:f}function Iu(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Sf(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Cd(){var s=_.p;return s!==0?s:(s=window.event,s===void 0?32:B2(s.type))}function Ed(s,l){var f=_.p;try{return _.p=s,l()}finally{_.p=f}}var Rs=Math.random().toString(36).slice(2),Fi="__reactFiber$"+Rs,or="__reactProps$"+Rs,Ia="__reactContainer$"+Rs,Hu="__reactEvents$"+Rs,r1="__reactListeners$"+Rs,o1="__reactHandles$"+Rs,Sd="__reactResources$"+Rs,Gl="__reactMarker$"+Rs;function Tf(s){delete s[Fi],delete s[or],delete s[Hu],delete s[r1],delete s[o1]}function Ha(s){var l=s[Fi];if(l)return l;for(var f=s.parentNode;f;){if(l=f[Ia]||f[Fi]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=f2(s);s!==null;){if(f=s[Fi])return f;s=f2(s)}return l}s=f,f=s.parentNode}return null}function ts(s){if(s=s[Fi]||s[Ia]){var l=s.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return s}return null}function Na(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function mr(s){var l=s[Sd];return l||(l=s[Sd]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Si(s){s[Gl]=!0}var ea=new Set,Td={};function to(s,l){es(s,l),es(s+"Capture",l)}function es(s,l){for(Td[s]=l,s=0;s<l.length;s++)ea.add(l[s])}var Ad=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Dd={},Nu={};function s1(s){return le.call(Nu,s)?!0:le.call(Dd,s)?!1:Ad.test(s)?Nu[s]=!0:(Dd[s]=!0,!1)}function Gu(s,l,f){if(s1(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var v=l.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function Y(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function lt(s,l,f,v){if(v===null)s.removeAttribute(f);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+v)}}function et(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function vt(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function St(s,l,f){var v=Object.getOwnPropertyDescriptor(s.constructor.prototype,l);if(!s.hasOwnProperty(l)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,S=v.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return C.call(this)},set:function(L){f=""+L,S.call(this,L)}}),Object.defineProperty(s,l,{enumerable:v.enumerable}),{getValue:function(){return f},setValue:function(L){f=""+L},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function pt(s){if(!s._valueTracker){var l=vt(s)?"checked":"value";s._valueTracker=St(s,l,""+s[l])}}function Ht(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),v="";return s&&(v=vt(s)?s.checked?"true":"false":s.value),s=v,s!==f?(l.setValue(s),!0):!1}function Xt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Zt=/[\n"\\]/g;function qt(s){return s.replace(Zt,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Jt(s,l,f,v,C,S,L,X){s.name="",L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?s.type=L:s.removeAttribute("type"),l!=null?L==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+et(l)):s.value!==""+et(l)&&(s.value=""+et(l)):L!=="submit"&&L!=="reset"||s.removeAttribute("value"),l!=null?$e(s,L,et(l)):f!=null?$e(s,L,et(f)):v!=null&&s.removeAttribute("value"),C==null&&S!=null&&(s.defaultChecked=!!S),C!=null&&(s.checked=C&&typeof C!="function"&&typeof C!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?s.name=""+et(X):s.removeAttribute("name")}function ue(s,l,f,v,C,S,L,X){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.type=S),l!=null||f!=null){if(!(S!=="submit"&&S!=="reset"||l!=null)){pt(s);return}f=f!=null?""+et(f):"",l=l!=null?""+et(l):f,X||l===s.value||(s.value=l),s.defaultValue=l}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,s.checked=X?s.checked:!!v,s.defaultChecked=!!v,L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(s.name=L),pt(s)}function $e(s,l,f){l==="number"&&Xt(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function tn(s,l,f,v){if(s=s.options,l){l={};for(var C=0;C<f.length;C++)l["$"+f[C]]=!0;for(f=0;f<s.length;f++)C=l.hasOwnProperty("$"+s[f].value),s[f].selected!==C&&(s[f].selected=C),C&&v&&(s[f].defaultSelected=!0)}else{for(f=""+et(f),l=null,C=0;C<s.length;C++){if(s[C].value===f){s[C].selected=!0,v&&(s[C].defaultSelected=!0);return}l!==null||s[C].disabled||(l=s[C])}l!==null&&(l.selected=!0)}}function mn(s,l,f){if(l!=null&&(l=""+et(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+et(f):""}function Zn(s,l,f,v){if(l==null){if(v!=null){if(f!=null)throw Error(r(92));if(V(v)){if(1<v.length)throw Error(r(93));v=v[0]}f=v}f==null&&(f=""),l=f}f=et(l),s.defaultValue=f,v=s.textContent,v===f&&v!==""&&v!==null&&(s.value=v),pt(s)}function wn(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var vr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function na(s,l,f){var v=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?v?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":v?s.setProperty(l,f):typeof f!="number"||f===0||vr.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function zu(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var v in f)!f.hasOwnProperty(v)||l!=null&&l.hasOwnProperty(v)||(v.indexOf("--")===0?s.setProperty(v,""):v==="float"?s.cssFloat="":s[v]="");for(var C in l)v=l[C],l.hasOwnProperty(C)&&f[C]!==v&&na(s,C,v)}else for(var S in l)l.hasOwnProperty(S)&&na(s,S,l[S])}function ju(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),a1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zl(s){return a1.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function ns(){}var $u=null;function l1(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var jl=null,Vu=null;function Pv(s){var l=ts(s);if(l&&(s=l.stateNode)){var f=s[or]||null;t:switch(s=l.stateNode,l.type){case"input":if(Jt(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+qt(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var v=f[l];if(v!==s&&v.form===s.form){var C=v[or]||null;if(!C)throw Error(r(90));Jt(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(l=0;l<f.length;l++)v=f[l],v.form===s.form&&Ht(v)}break t;case"textarea":mn(s,f.value,f.defaultValue);break t;case"select":l=f.value,l!=null&&tn(s,!!f.multiple,l,!1)}}}var u1=!1;function Mv(s,l,f){if(u1)return s(l,f);u1=!0;try{var v=s(l);return v}finally{if(u1=!1,(jl!==null||Vu!==null)&&(P0(),jl&&(l=jl,s=Vu,Vu=jl=null,Pv(l),s)))for(l=0;l<s.length;l++)Pv(s[l])}}function Ul(s,l){var f=s.stateNode;if(f===null)return null;var v=f[or]||null;if(v===null)return null;f=v[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(s=s.type,v=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!v;break t;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c1=!1;if(ia)try{var Af={};Object.defineProperty(Af,"passive",{get:function(){c1=!0}}),window.addEventListener("test",Af,Af),window.removeEventListener("test",Af,Af)}catch{c1=!1}var Ga=null,f1=null,kn=null;function Un(){if(kn)return kn;var s,l=f1,f=l.length,v,C="value"in Ga?Ga.value:Ga.textContent,S=C.length;for(s=0;s<f&&l[s]===C[s];s++);var L=f-s;for(v=1;v<=L&&l[f-v]===C[S-v];v++);return kn=C.slice(s,1<v?1-v:void 0)}function bd(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Bd(){return!0}function Rv(){return!1}function Mr(s){function l(f,v,C,S,L){this._reactName=f,this._targetInst=C,this.type=v,this.nativeEvent=S,this.target=L,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(f=s[X],this[X]=f?f(S):S[X]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Bd:Rv,this.isPropagationStopped=Rv,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),l}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Mr($l),Wu=m({},$l,{view:0,detail:0}),xC=Mr(Wu),ki,Df,is,bf=m({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==is&&(is&&s.type==="mousemove"?(ki=s.screenX-is.screenX,Df=s.screenY-is.screenY):Df=ki=0,is=s),ki)},movementY:function(s){return"movementY"in s?s.movementY:Df}}),Md=Mr(bf),bo=m({},bf,{dataTransfer:0}),Ov=Mr(bo),Lv=m({},Wu,{relatedTarget:0}),Rd=Mr(Lv),_v=m({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),Fv=Mr(_v),kv=m({},$l,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),eo=Mr(kv),CC=m({},$l,{data:0}),no=Mr(CC),EC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Iv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Od(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=za[s])?!!l[s]:!1}function Bf(){return Od}var ei=m({},Wu,{key:function(s){if(s.key){var l=EC[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=bd(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Iv[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(s){return s.type==="keypress"?bd(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?bd(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),ja=Mr(ei),h1=m({},bf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hv=Mr(h1),d1=m({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),SC=Mr(d1),TC=m({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=Mr(TC),Nv=m({},bf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ld=Mr(Nv),Xu=m({},$l,{newState:0,oldState:0}),DC=Mr(Xu),Gv=[9,13,27,32],_d=ia&&"CompositionEvent"in window,Vl=null;ia&&"documentMode"in document&&(Vl=document.documentMode);var g1=ia&&"TextEvent"in window&&!Vl,p1=ia&&(!_d||Vl&&8<Vl&&11>=Vl),zv=" ",Fd=!1;function kd(s,l){switch(s){case"keyup":return Gv.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jv(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wl=!1;function io(s,l){switch(s){case"compositionend":return jv(l);case"keypress":return l.which!==32?null:(Fd=!0,zv);case"textInput":return s=l.data,s===zv&&Fd?null:s;default:return null}}function m1(s,l){if(Wl)return s==="compositionend"||!_d&&kd(s,l)?(s=Un(),kn=f1=Ga=null,Wl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return p1&&l.locale!=="ko"?null:l.data;default:return null}}var Pf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function v1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Pf[s.type]:l==="textarea"}function y1(s,l,f,v){jl?Vu?Vu.push(v):Vu=[v]:jl=v,l=Sh(l,"onChange"),0<l.length&&(f=new Pd("onChange","change",null,f,v),s.push({event:f,listeners:l}))}var Mf=null,Rf=null;function bC(s){n2(s,0)}function Id(s){var l=Na(s);if(Ht(l))return s}function Uv(s,l){if(s==="change")return l}var Xl=!1;if(ia){var w1;if(ia){var x1="oninput"in document;if(!x1){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),x1=typeof Hd.oninput=="function"}w1=x1}else w1=!1;Xl=w1&&(!document.documentMode||9<document.documentMode)}function C1(){Mf&&(Mf.detachEvent("onpropertychange",ra),Rf=Mf=null)}function ra(s){if(s.propertyName==="value"&&Id(Rf)){var l=[];y1(l,Rf,s,l1(s)),Mv(bC,l)}}function Nd(s,l,f){s==="focusin"?(C1(),Mf=l,Rf=f,Mf.attachEvent("onpropertychange",ra)):s==="focusout"&&C1()}function BC(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Id(Rf)}function PC(s,l){if(s==="click")return Id(l)}function MC(s,l){if(s==="input"||s==="change")return Id(l)}function qu(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var ai=typeof Object.is=="function"?Object.is:qu;function Yu(s,l){if(ai(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),v=Object.keys(l);if(f.length!==v.length)return!1;for(v=0;v<f.length;v++){var C=f[v];if(!le.call(l,C)||!ai(s[C],l[C]))return!1}return!0}function $v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vv(s,l){var f=$v(s);s=0;for(var v;f;){if(f.nodeType===3){if(v=s+f.textContent.length,s<=l&&v>=l)return{node:f,offset:l-s};s=v}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=$v(f)}}function Wv(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Wv(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function Xv(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Xt(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Xt(s.document)}return l}function E1(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var Ku=ia&&"documentMode"in document&&11>=document.documentMode,yt=null,Ft=null,Mt=null,oe=!1;function Ne(s,l,f){var v=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;oe||yt==null||yt!==Xt(v)||(v=yt,"selectionStart"in v&&E1(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Mt&&Yu(Mt,v)||(Mt=v,v=Sh(Ft,"onSelect"),0<v.length&&(l=new Pd("onSelect","select",null,l,f),s.push({event:l,listeners:v}),l.target=yt)))}function rn(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var ni={animationend:rn("Animation","AnimationEnd"),animationiteration:rn("Animation","AnimationIteration"),animationstart:rn("Animation","AnimationStart"),transitionrun:rn("Transition","TransitionRun"),transitionstart:rn("Transition","TransitionStart"),transitioncancel:rn("Transition","TransitionCancel"),transitionend:rn("Transition","TransitionEnd")},Rn={},Gd={};ia&&(Gd=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function ql(s){if(Rn[s])return Rn[s];if(!ni[s])return s;var l=ni[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in Gd)return Rn[s]=l[f];return s}var ro=ql("animationend"),Of=ql("animationiteration"),qv=ql("animationstart"),Zu=ql("transitionrun"),zd=ql("transitionstart"),jd=ql("transitioncancel"),bn=ql("transitionend"),Yv=new Map,Ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ud.push("scrollEnd");function Rr(s,l){Yv.set(s,l),to(l,[s])}var $d=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Bo=[],Qu=0,Ju=0;function rs(){for(var s=Qu,l=Ju=Qu=0;l<s;){var f=Bo[l];Bo[l++]=null;var v=Bo[l];Bo[l++]=null;var C=Bo[l];Bo[l++]=null;var S=Bo[l];if(Bo[l++]=null,v!==null&&C!==null){var L=v.pending;L===null?C.next=C:(C.next=L.next,L.next=C),v.pending=C}S!==0&&S1(f,C,S)}}function Yl(s,l,f,v){Bo[Qu++]=s,Bo[Qu++]=l,Bo[Qu++]=f,Bo[Qu++]=v,Ju|=v,s.lanes|=v,s=s.alternate,s!==null&&(s.lanes|=v)}function Vd(s,l,f,v){return Yl(s,l,f,v),Lf(s)}function Os(s,l){return Yl(s,null,null,l),Lf(s)}function S1(s,l,f){s.lanes|=f;var v=s.alternate;v!==null&&(v.lanes|=f);for(var C=!1,S=s.return;S!==null;)S.childLanes|=f,v=S.alternate,v!==null&&(v.childLanes|=f),S.tag===22&&(s=S.stateNode,s===null||s._visibility&1||(C=!0)),s=S,S=S.return;return s.tag===3?(S=s.stateNode,C&&l!==null&&(C=31-Ei(f),s=S.hiddenUpdates,v=s[C],v===null?s[C]=[l]:v.push(l),l.lane=f|536870912),S):null}function Lf(s){if(50<mh)throw mh=0,Ep=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var oa={};function Kv(s,l,f,v){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(s,l,f,v){return new Kv(s,l,f,v)}function sa(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Po(s,l){var f=s.alternate;return f===null?(f=Yi(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function Zv(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Wd(s,l,f,v,C,S){var L=0;if(v=s,typeof s=="function")sa(s)&&(L=1);else if(typeof s=="string")L=fE(s,f,it.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case st:return s=Yi(31,f,l,C),s.elementType=st,s.lanes=S,s;case D:return Kl(f.children,C,S,l);case b:L=8,C|=24;break;case B:return s=Yi(12,f,l,C|2),s.elementType=B,s.lanes=S,s;case k:return s=Yi(13,f,l,C),s.elementType=k,s.lanes=S,s;case W:return s=Yi(19,f,l,C),s.elementType=W,s.lanes=S,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:L=10;break t;case A:L=9;break t;case R:L=11;break t;case U:L=14;break t;case nt:L=16,v=null;break t}L=29,f=Error(r(130,s===null?"null":typeof s,"")),v=null}return l=Yi(L,f,l,C),l.elementType=s,l.type=v,l.lanes=S,l}function Kl(s,l,f,v){return s=Yi(7,s,v,l),s.lanes=f,s}function tc(s,l,f){return s=Yi(6,s,null,l),s.lanes=f,s}function _f(s){var l=Yi(18,null,null,0);return l.stateNode=s,l}function Ff(s,l,f){return l=Yi(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Qv=new WeakMap;function oo(s,l){if(typeof s=="object"&&s!==null){var f=Qv.get(s);return f!==void 0?f:(l={value:s,source:l,stack:xe(l)},Qv.set(s,l),l)}return{value:s,source:l,stack:xe(l)}}var ec=[],nc=0,gi=null,Pi=0,Mo=[],Ro=0,aa=null,Ls=1,Oo="";function so(s,l){ec[nc++]=Pi,ec[nc++]=gi,gi=s,Pi=l}function Xd(s,l,f){Mo[Ro++]=Ls,Mo[Ro++]=Oo,Mo[Ro++]=aa,aa=s;var v=Ls;s=Oo;var C=32-Ei(v)-1;v&=~(1<<C),f+=1;var S=32-Ei(l)+C;if(30<S){var L=C-C%5;S=(v&(1<<L)-1).toString(32),v>>=L,C-=L,Ls=1<<32-Ei(l)+C|f<<C|v,Oo=S+s}else Ls=1<<S|f<<C|v,Oo=s}function Ua(s){s.return!==null&&(so(s,1),Xd(s,1,0))}function Zl(s){for(;s===gi;)gi=ec[--nc],ec[nc]=null,Pi=ec[--nc],ec[nc]=null;for(;s===aa;)aa=Mo[--Ro],Mo[Ro]=null,Oo=Mo[--Ro],Mo[Ro]=null,Ls=Mo[--Ro],Mo[Ro]=null}function ic(s,l){Mo[Ro++]=Ls,Mo[Ro++]=Oo,Mo[Ro++]=aa,Ls=l.id,Oo=l.overflow,aa=s}var Mi=null,Bn=null,hn=!1,$a=null,Lo=!1,T1=Error(r(519));function Va(s){var l=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xa(oo(l,s)),T1}function kf(s){var l=s.stateNode,f=s.type,v=s.memoizedProps;switch(l[Fi]=s,l[or]=v,f){case"dialog":sn("cancel",l),sn("close",l);break;case"iframe":case"object":case"embed":sn("load",l);break;case"video":case"audio":for(f=0;f<Eh.length;f++)sn(Eh[f],l);break;case"source":sn("error",l);break;case"img":case"image":case"link":sn("error",l),sn("load",l);break;case"details":sn("toggle",l);break;case"input":sn("invalid",l),ue(l,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":sn("invalid",l);break;case"textarea":sn("invalid",l),Zn(l,v.value,v.defaultValue,v.children)}f=v.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||v.suppressHydrationWarning===!0||o2(l.textContent,f)?(v.popover!=null&&(sn("beforetoggle",l),sn("toggle",l)),v.onScroll!=null&&sn("scroll",l),v.onScrollEnd!=null&&sn("scrollend",l),v.onClick!=null&&(l.onclick=ns),l=!0):l=!1,l||Va(s,!0)}function rc(s){for(Mi=s.return;Mi;)switch(Mi.tag){case 5:case 31:case 13:Lo=!1;return;case 27:case 3:Lo=!0;return;default:Mi=Mi.return}}function Ql(s){if(s!==Mi)return!1;if(!hn)return rc(s),hn=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||ul(s.type,s.memoizedProps)),f=!f),f&&Bn&&Va(s),rc(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Bn=c2(s)}else if(l===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));Bn=c2(s)}else l===27?(l=Bn,Oe(s.type)?(s=jp,jp=null,Bn=s):Bn=l):Bn=Mi?Go(s.stateNode.nextSibling):null;return!0}function q(){Bn=Mi=null,hn=!1}function Wa(){var s=$a;return s!==null&&(Hr===null?Hr=s:Hr.push.apply(Hr,s),$a=null),s}function Xa(s){$a===null?$a=[s]:$a.push(s)}var Or=F(null),Ve=null,la=null;function qa(s,l,f){tt(Or,l._currentValue),l._currentValue=f}function ua(s){s._currentValue=Or.current,J(Or)}function ca(s,l,f){for(;s!==null;){var v=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,v!==null&&(v.childLanes|=l)):v!==null&&(v.childLanes&l)!==l&&(v.childLanes|=l),s===f)break;s=s.return}}function A1(s,l,f,v){var C=s.child;for(C!==null&&(C.return=s);C!==null;){var S=C.dependencies;if(S!==null){var L=C.child;S=S.firstContext;t:for(;S!==null;){var X=S;S=C;for(var at=0;at<l.length;at++)if(X.context===l[at]){S.lanes|=f,X=S.alternate,X!==null&&(X.lanes|=f),ca(S.return,f,s),v||(L=null);break t}S=X.next}}else if(C.tag===18){if(L=C.return,L===null)throw Error(r(341));L.lanes|=f,S=L.alternate,S!==null&&(S.lanes|=f),ca(L,f,s),L=null}else L=C.child;if(L!==null)L.return=C;else for(L=C;L!==null;){if(L===s){L=null;break}if(C=L.sibling,C!==null){C.return=L.return,L=C;break}L=L.return}C=L}}function oc(s,l,f,v){s=null;for(var C=l,S=!1;C!==null;){if(!S){if((C.flags&524288)!==0)S=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var L=C.alternate;if(L===null)throw Error(r(387));if(L=L.memoizedProps,L!==null){var X=C.type;ai(C.pendingProps.value,L.value)||(s!==null?s.push(X):s=[X])}}else if(C===Lt.current){if(L=C.alternate,L===null)throw Error(r(387));L.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(s!==null?s.push(kc):s=[kc])}C=C.return}s!==null&&A1(l,s,f,v),l.flags|=262144}function qd(s){for(s=s.firstContext;s!==null;){if(!ai(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jl(s){Ve=s,la=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Ki(s){return Jv(Ve,s)}function _o(s,l){return Ve===null&&Jl(s),Jv(s,l)}function Jv(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},la===null){if(s===null)throw Error(r(308));la=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else la=la.next=l;return f}var RC=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,v){s.push(v)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},OC=e.unstable_scheduleCallback,LC=e.unstable_NormalPriority,Ri={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function os(){return{controller:new RC,data:new Map,refCount:0}}function If(s){s.refCount--,s.refCount===0&&OC(LC,function(){s.controller.abort()})}var Hf=null,D1=0,sc=0,ac=null;function tu(s,l){if(Hf===null){var f=Hf=[];D1=0,sc=mo(),ac={status:"pending",value:void 0,then:function(v){f.push(v)}}}return D1++,l.then(ty,ty),l}function ty(){if(--D1===0&&Hf!==null){ac!==null&&(ac.status="fulfilled");var s=Hf;Hf=null,sc=0,ac=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function _C(s,l){var f=[],v={status:"pending",value:null,reason:null,then:function(C){f.push(C)}};return s.then(function(){v.status="fulfilled",v.value=l;for(var C=0;C<f.length;C++)(0,f[C])(l)},function(C){for(v.status="rejected",v.reason=C,C=0;C<f.length;C++)(0,f[C])(void 0)}),v}var Fo=P.S;P.S=function(s,l){Hy=Fn(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&tu(s,l),Fo!==null&&Fo(s,l)};var eu=F(null);function b1(){var s=eu.current;return s!==null?s:Vn.pooledCache}function Yd(s,l){l===null?tt(eu,eu.current):tt(eu,l.pool)}function ey(){var s=b1();return s===null?null:{parent:Ri._currentValue,pool:s}}var lc=Error(r(460)),Kd=Error(r(474)),Nf=Error(r(542)),Zd={then:function(){}};function ny(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qd(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(ns,ns),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,B1(s),s;default:if(typeof l.status=="string")l.then(ns,ns);else{if(s=Vn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(v){if(l.status==="pending"){var C=l;C.status="fulfilled",C.value=v}},function(v){if(l.status==="pending"){var C=l;C.status="rejected",C.reason=v}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,B1(s),s}throw _s=l,lc}}function ss(s){try{var l=s._init;return l(s._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(_s=f,lc):f}}var _s=null;function iy(){if(_s===null)throw Error(r(459));var s=_s;return _s=null,s}function B1(s){if(s===lc||s===Nf)throw Error(r(483))}var uc=null,ao=0;function cc(s){var l=ao;return ao+=1,uc===null&&(uc=[]),Qd(uc,s,l)}function as(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function yr(s,l){throw l.$$typeof===w?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function ry(s){function l(Ct,dt){if(s){var Dt=Ct.deletions;Dt===null?(Ct.deletions=[dt],Ct.flags|=16):Dt.push(dt)}}function f(Ct,dt){if(!s)return null;for(;dt!==null;)l(Ct,dt),dt=dt.sibling;return null}function v(Ct){for(var dt=new Map;Ct!==null;)Ct.key!==null?dt.set(Ct.key,Ct):dt.set(Ct.index,Ct),Ct=Ct.sibling;return dt}function C(Ct,dt){return Ct=Po(Ct,dt),Ct.index=0,Ct.sibling=null,Ct}function S(Ct,dt,Dt){return Ct.index=Dt,s?(Dt=Ct.alternate,Dt!==null?(Dt=Dt.index,Dt<dt?(Ct.flags|=67108866,dt):Dt):(Ct.flags|=67108866,dt)):(Ct.flags|=1048576,dt)}function L(Ct){return s&&Ct.alternate===null&&(Ct.flags|=67108866),Ct}function X(Ct,dt,Dt,Gt){return dt===null||dt.tag!==6?(dt=tc(Dt,Ct.mode,Gt),dt.return=Ct,dt):(dt=C(dt,Dt),dt.return=Ct,dt)}function at(Ct,dt,Dt,Gt){var Ee=Dt.type;return Ee===D?kt(Ct,dt,Dt.props.children,Gt,Dt.key):dt!==null&&(dt.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===nt&&ss(Ee)===dt.type)?(dt=C(dt,Dt.props),as(dt,Dt),dt.return=Ct,dt):(dt=Wd(Dt.type,Dt.key,Dt.props,null,Ct.mode,Gt),as(dt,Dt),dt.return=Ct,dt)}function bt(Ct,dt,Dt,Gt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Dt.containerInfo||dt.stateNode.implementation!==Dt.implementation?(dt=Ff(Dt,Ct.mode,Gt),dt.return=Ct,dt):(dt=C(dt,Dt.children||[]),dt.return=Ct,dt)}function kt(Ct,dt,Dt,Gt,Ee){return dt===null||dt.tag!==7?(dt=Kl(Dt,Ct.mode,Gt,Ee),dt.return=Ct,dt):(dt=C(dt,Dt),dt.return=Ct,dt)}function zt(Ct,dt,Dt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=tc(""+dt,Ct.mode,Dt),dt.return=Ct,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case x:return Dt=Wd(dt.type,dt.key,dt.props,null,Ct.mode,Dt),as(Dt,dt),Dt.return=Ct,Dt;case T:return dt=Ff(dt,Ct.mode,Dt),dt.return=Ct,dt;case nt:return dt=ss(dt),zt(Ct,dt,Dt)}if(V(dt)||ct(dt))return dt=Kl(dt,Ct.mode,Dt,null),dt.return=Ct,dt;if(typeof dt.then=="function")return zt(Ct,cc(dt),Dt);if(dt.$$typeof===H)return zt(Ct,_o(Ct,dt),Dt);yr(Ct,dt)}return null}function Bt(Ct,dt,Dt,Gt){var Ee=dt!==null?dt.key:null;if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint")return Ee!==null?null:X(Ct,dt,""+Dt,Gt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case x:return Dt.key===Ee?at(Ct,dt,Dt,Gt):null;case T:return Dt.key===Ee?bt(Ct,dt,Dt,Gt):null;case nt:return Dt=ss(Dt),Bt(Ct,dt,Dt,Gt)}if(V(Dt)||ct(Dt))return Ee!==null?null:kt(Ct,dt,Dt,Gt,null);if(typeof Dt.then=="function")return Bt(Ct,dt,cc(Dt),Gt);if(Dt.$$typeof===H)return Bt(Ct,dt,_o(Ct,Dt),Gt);yr(Ct,Dt)}return null}function Ot(Ct,dt,Dt,Gt,Ee){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number"||typeof Gt=="bigint")return Ct=Ct.get(Dt)||null,X(dt,Ct,""+Gt,Ee);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case x:return Ct=Ct.get(Gt.key===null?Dt:Gt.key)||null,at(dt,Ct,Gt,Ee);case T:return Ct=Ct.get(Gt.key===null?Dt:Gt.key)||null,bt(dt,Ct,Gt,Ee);case nt:return Gt=ss(Gt),Ot(Ct,dt,Dt,Gt,Ee)}if(V(Gt)||ct(Gt))return Ct=Ct.get(Dt)||null,kt(dt,Ct,Gt,Ee,null);if(typeof Gt.then=="function")return Ot(Ct,dt,Dt,cc(Gt),Ee);if(Gt.$$typeof===H)return Ot(Ct,dt,Dt,_o(dt,Gt),Ee);yr(dt,Gt)}return null}function ce(Ct,dt,Dt,Gt){for(var Ee=null,Cn=null,pe=dt,Ke=dt=0,fn=null;pe!==null&&Ke<Dt.length;Ke++){pe.index>Ke?(fn=pe,pe=null):fn=pe.sibling;var En=Bt(Ct,pe,Dt[Ke],Gt);if(En===null){pe===null&&(pe=fn);break}s&&pe&&En.alternate===null&&l(Ct,pe),dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En,pe=fn}if(Ke===Dt.length)return f(Ct,pe),hn&&so(Ct,Ke),Ee;if(pe===null){for(;Ke<Dt.length;Ke++)pe=zt(Ct,Dt[Ke],Gt),pe!==null&&(dt=S(pe,dt,Ke),Cn===null?Ee=pe:Cn.sibling=pe,Cn=pe);return hn&&so(Ct,Ke),Ee}for(pe=v(pe);Ke<Dt.length;Ke++)fn=Ot(pe,Ct,Ke,Dt[Ke],Gt),fn!==null&&(s&&fn.alternate!==null&&pe.delete(fn.key===null?Ke:fn.key),dt=S(fn,dt,Ke),Cn===null?Ee=fn:Cn.sibling=fn,Cn=fn);return s&&pe.forEach(function(pl){return l(Ct,pl)}),hn&&so(Ct,Ke),Ee}function Be(Ct,dt,Dt,Gt){if(Dt==null)throw Error(r(151));for(var Ee=null,Cn=null,pe=dt,Ke=dt=0,fn=null,En=Dt.next();pe!==null&&!En.done;Ke++,En=Dt.next()){pe.index>Ke?(fn=pe,pe=null):fn=pe.sibling;var pl=Bt(Ct,pe,En.value,Gt);if(pl===null){pe===null&&(pe=fn);break}s&&pe&&pl.alternate===null&&l(Ct,pe),dt=S(pl,dt,Ke),Cn===null?Ee=pl:Cn.sibling=pl,Cn=pl,pe=fn}if(En.done)return f(Ct,pe),hn&&so(Ct,Ke),Ee;if(pe===null){for(;!En.done;Ke++,En=Dt.next())En=zt(Ct,En.value,Gt),En!==null&&(dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En);return hn&&so(Ct,Ke),Ee}for(pe=v(pe);!En.done;Ke++,En=Dt.next())En=Ot(pe,Ct,Ke,En.value,Gt),En!==null&&(s&&En.alternate!==null&&pe.delete(En.key===null?Ke:En.key),dt=S(En,dt,Ke),Cn===null?Ee=En:Cn.sibling=En,Cn=En);return s&&pe.forEach(function(wE){return l(Ct,wE)}),hn&&so(Ct,Ke),Ee}function Nn(Ct,dt,Dt,Gt){if(typeof Dt=="object"&&Dt!==null&&Dt.type===D&&Dt.key===null&&(Dt=Dt.props.children),typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case x:t:{for(var Ee=Dt.key;dt!==null;){if(dt.key===Ee){if(Ee=Dt.type,Ee===D){if(dt.tag===7){f(Ct,dt.sibling),Gt=C(dt,Dt.props.children),Gt.return=Ct,Ct=Gt;break t}}else if(dt.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===nt&&ss(Ee)===dt.type){f(Ct,dt.sibling),Gt=C(dt,Dt.props),as(Gt,Dt),Gt.return=Ct,Ct=Gt;break t}f(Ct,dt);break}else l(Ct,dt);dt=dt.sibling}Dt.type===D?(Gt=Kl(Dt.props.children,Ct.mode,Gt,Dt.key),Gt.return=Ct,Ct=Gt):(Gt=Wd(Dt.type,Dt.key,Dt.props,null,Ct.mode,Gt),as(Gt,Dt),Gt.return=Ct,Ct=Gt)}return L(Ct);case T:t:{for(Ee=Dt.key;dt!==null;){if(dt.key===Ee)if(dt.tag===4&&dt.stateNode.containerInfo===Dt.containerInfo&&dt.stateNode.implementation===Dt.implementation){f(Ct,dt.sibling),Gt=C(dt,Dt.children||[]),Gt.return=Ct,Ct=Gt;break t}else{f(Ct,dt);break}else l(Ct,dt);dt=dt.sibling}Gt=Ff(Dt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt}return L(Ct);case nt:return Dt=ss(Dt),Nn(Ct,dt,Dt,Gt)}if(V(Dt))return ce(Ct,dt,Dt,Gt);if(ct(Dt)){if(Ee=ct(Dt),typeof Ee!="function")throw Error(r(150));return Dt=Ee.call(Dt),Be(Ct,dt,Dt,Gt)}if(typeof Dt.then=="function")return Nn(Ct,dt,cc(Dt),Gt);if(Dt.$$typeof===H)return Nn(Ct,dt,_o(Ct,Dt),Gt);yr(Ct,Dt)}return typeof Dt=="string"&&Dt!==""||typeof Dt=="number"||typeof Dt=="bigint"?(Dt=""+Dt,dt!==null&&dt.tag===6?(f(Ct,dt.sibling),Gt=C(dt,Dt),Gt.return=Ct,Ct=Gt):(f(Ct,dt),Gt=tc(Dt,Ct.mode,Gt),Gt.return=Ct,Ct=Gt),L(Ct)):f(Ct,dt)}return function(Ct,dt,Dt,Gt){try{ao=0;var Ee=Nn(Ct,dt,Dt,Gt);return uc=null,Ee}catch(pe){if(pe===lc||pe===Nf)throw pe;var Cn=Yi(29,pe,null,Ct.mode);return Cn.lanes=Gt,Cn.return=Ct,Cn}finally{}}}var Ya=ry(!0),P1=ry(!1),ko=!1;function Fs(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jd(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ka(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function ls(s,l,f){var v=s.updateQueue;if(v===null)return null;if(v=v.shared,(Dn&2)!==0){var C=v.pending;return C===null?l.next=l:(l.next=C.next,C.next=l),v.pending=l,l=Lf(s),S1(s,null,f),l}return Yl(s,v,l,f),Lf(s)}function Gf(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var v=l.lanes;v&=s.pendingLanes,f|=v,l.lanes=f,xd(s,f)}}function t0(s,l){var f=s.updateQueue,v=s.alternate;if(v!==null&&(v=v.updateQueue,f===v)){var C=null,S=null;if(f=f.firstBaseUpdate,f!==null){do{var L={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};S===null?C=S=L:S=S.next=L,f=f.next}while(f!==null);S===null?C=S=l:S=S.next=l}else C=S=l;f={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:S,shared:v.shared,callbacks:v.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Ii=!1;function nu(){if(Ii){var s=ac;if(s!==null)throw s}}function fc(s,l,f,v){Ii=!1;var C=s.updateQueue;ko=!1;var S=C.firstBaseUpdate,L=C.lastBaseUpdate,X=C.shared.pending;if(X!==null){C.shared.pending=null;var at=X,bt=at.next;at.next=null,L===null?S=bt:L.next=bt,L=at;var kt=s.alternate;kt!==null&&(kt=kt.updateQueue,X=kt.lastBaseUpdate,X!==L&&(X===null?kt.firstBaseUpdate=bt:X.next=bt,kt.lastBaseUpdate=at))}if(S!==null){var zt=C.baseState;L=0,kt=bt=at=null,X=S;do{var Bt=X.lane&-536870913,Ot=Bt!==X.lane;if(Ot?(cn&Bt)===Bt:(v&Bt)===Bt){Bt!==0&&Bt===sc&&(Ii=!0),kt!==null&&(kt=kt.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});t:{var ce=s,Be=X;Bt=l;var Nn=f;switch(Be.tag){case 1:if(ce=Be.payload,typeof ce=="function"){zt=ce.call(Nn,zt,Bt);break t}zt=ce;break t;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=Be.payload,Bt=typeof ce=="function"?ce.call(Nn,zt,Bt):ce,Bt==null)break t;zt=m({},zt,Bt);break t;case 2:ko=!0}}Bt=X.callback,Bt!==null&&(s.flags|=64,Ot&&(s.flags|=8192),Ot=C.callbacks,Ot===null?C.callbacks=[Bt]:Ot.push(Bt))}else Ot={lane:Bt,tag:X.tag,payload:X.payload,callback:X.callback,next:null},kt===null?(bt=kt=Ot,at=zt):kt=kt.next=Ot,L|=Bt;if(X=X.next,X===null){if(X=C.shared.pending,X===null)break;Ot=X,X=Ot.next,Ot.next=null,C.lastBaseUpdate=Ot,C.shared.pending=null}}while(!0);kt===null&&(at=zt),C.baseState=at,C.firstBaseUpdate=bt,C.lastBaseUpdate=kt,S===null&&(C.shared.lanes=0),rl|=L,s.lanes=L,s.memoizedState=zt}}function us(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function e0(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)us(f[s],l)}var fa=F(null),ks=F(0);function M1(s,l){s=ps,tt(ks,s),tt(fa,l),ps=s|l.baseLanes}function Zi(){tt(ks,ps),tt(fa,fa.current)}function zf(){ps=ks.current,J(fa),J(ks)}var lo=F(null),Io=null;function Za(s){var l=s.alternate;tt(Ti,Ti.current&1),tt(lo,s),Io===null&&(l===null||fa.current!==null||l.memoizedState!==null)&&(Io=s)}function jf(s){tt(Ti,Ti.current),tt(lo,s),Io===null&&(Io=s)}function oy(s){s.tag===22?(tt(Ti,Ti.current),tt(lo,s),Io===null&&(Io=s)):Ho()}function Ho(){tt(Ti,Ti.current),tt(lo,lo.current)}function Lr(s){J(lo),Io===s&&(Io=null),J(Ti)}var Ti=F(0);function n0(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||N0(f)||Mc(f)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var uo=0,We=null,In=null,pi=null,Uf=!1,hc=!1,iu=!1,i0=0,dc=0,Qa=null,FC=0;function ii(){throw Error(r(321))}function r0(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!ai(s[f],l[f]))return!1;return!0}function o0(s,l,f,v,C,S){return uo=S,We=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,P.H=s===null||s.memoizedState===null?my:g0,iu=!1,S=f(v,C),iu=!1,hc&&(S=$f(l,f,v,C)),R1(s),S}function R1(s){P.H=tl;var l=In!==null&&In.next!==null;if(uo=0,pi=In=We=null,Uf=!1,dc=0,Qa=null,l)throw Error(r(300));s===null||li||(s=s.dependencies,s!==null&&qd(s)&&(li=!0))}function $f(s,l,f,v){We=s;var C=0;do{if(hc&&(Qa=null),dc=0,hc=!1,25<=C)throw Error(r(301));if(C+=1,pi=In=null,s.updateQueue!=null){var S=s.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}P.H=Qf,S=l(f,v)}while(hc);return S}function kC(){var s=P.H,l=s.useState()[0];return l=typeof l.then=="function"?pc(l):l,s=s.useState()[0],(In!==null?In.memoizedState:null)!==s&&(We.flags|=1024),l}function s0(){var s=i0!==0;return i0=0,s}function a0(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function O1(s){if(Uf){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Uf=!1}uo=0,pi=In=We=null,hc=!1,dc=i0=0,Qa=null}function sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pi===null?We.memoizedState=pi=s:pi=pi.next=s,pi}function Ai(){if(In===null){var s=We.alternate;s=s!==null?s.memoizedState:null}else s=In.next;var l=pi===null?We.memoizedState:pi.next;if(l!==null)pi=l,In=s;else{if(s===null)throw We.alternate===null?Error(r(467)):Error(r(310));In=s,s={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},pi===null?We.memoizedState=pi=s:pi=pi.next=s}return pi}function gc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pc(s){var l=dc;return dc+=1,Qa===null&&(Qa=[]),s=Qd(Qa,s,l),l=We,(pi===null?l.memoizedState:pi.next)===null&&(l=l.alternate,P.H=l===null||l.memoizedState===null?my:g0),s}function mc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return pc(s);if(s.$$typeof===H)return Ki(s)}throw Error(r(438,String(s)))}function L1(s){var l=null,f=We.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var v=We.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(l={data:v.data.map(function(C){return C.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=gc(),We.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),v=0;v<s;v++)f[v]=ft;return l.index++,f}function cs(s,l){return typeof l=="function"?l(s):l}function Xe(s){var l=Ai();return _1(l,In,s)}function _1(s,l,f){var v=s.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=f;var C=s.baseQueue,S=v.pending;if(S!==null){if(C!==null){var L=C.next;C.next=S.next,S.next=L}l.baseQueue=C=S,v.pending=null}if(S=s.baseState,C===null)s.memoizedState=S;else{l=C.next;var X=L=null,at=null,bt=l,kt=!1;do{var zt=bt.lane&-536870913;if(zt!==bt.lane?(cn&zt)===zt:(uo&zt)===zt){var Bt=bt.revertLane;if(Bt===0)at!==null&&(at=at.next={lane:0,revertLane:0,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null}),zt===sc&&(kt=!0);else if((uo&Bt)===Bt){bt=bt.next,Bt===sc&&(kt=!0);continue}else zt={lane:0,revertLane:bt.revertLane,gesture:null,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(X=at=zt,L=S):at=at.next=zt,We.lanes|=Bt,rl|=Bt;zt=bt.action,iu&&f(S,zt),S=bt.hasEagerState?bt.eagerState:f(S,zt)}else Bt={lane:zt,revertLane:bt.revertLane,gesture:bt.gesture,action:bt.action,hasEagerState:bt.hasEagerState,eagerState:bt.eagerState,next:null},at===null?(X=at=Bt,L=S):at=at.next=Bt,We.lanes|=zt,rl|=zt;bt=bt.next}while(bt!==null&&bt!==l);if(at===null?L=S:at.next=X,!ai(S,s.memoizedState)&&(li=!0,kt&&(f=ac,f!==null)))throw f;s.memoizedState=S,s.baseState=L,s.baseQueue=at,v.lastRenderedState=S}return C===null&&(v.lanes=0),[s.memoizedState,v.dispatch]}function F1(s){var l=Ai(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var v=f.dispatch,C=f.pending,S=l.memoizedState;if(C!==null){f.pending=null;var L=C=C.next;do S=s(S,L.action),L=L.next;while(L!==C);ai(S,l.memoizedState)||(li=!0),l.memoizedState=S,l.baseQueue===null&&(l.baseState=S),f.lastRenderedState=S}return[S,v]}function vc(s,l,f){var v=We,C=Ai(),S=hn;if(S){if(f===void 0)throw Error(r(407));f=f()}else f=l();var L=!ai((In||C).memoizedState,f);if(L&&(C.memoizedState=f,li=!0),C=C.queue,qf(ay.bind(null,v,C,s),[s]),C.getSnapshot!==l||L||pi!==null&&pi.memoizedState.tag&1){if(v.flags|=2048,fo(9,{destroy:void 0},sy.bind(null,v,C,f,l),null),Vn===null)throw Error(r(349));S||(uo&127)!==0||k1(v,l,f)}return f}function k1(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=We.updateQueue,l===null?(l=gc(),We.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function sy(s,l,f,v){l.value=f,l.getSnapshot=v,co(l)&&ly(s)}function ay(s,l,f){return f(function(){co(l)&&ly(s)})}function co(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!ai(s,f)}catch{return!0}}function ly(s){var l=Os(s,2);l!==null&&Nr(l,s,2)}function yc(s){var l=sr();if(typeof s=="function"){var f=s;if(s=f(),iu){Pr(!0);try{f()}finally{Pr(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:s},l}function l0(s,l,f,v){return s.baseState=f,_1(s,In,typeof v=="function"?v:cs)}function uy(s,l,f,v,C){if(Kf(s))throw Error(r(485));if(s=l.action,s!==null){var S={payload:C,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(L){S.listeners.push(L)}};P.T!==null?f(!0):S.isTransition=!1,v(S),f=l.pending,f===null?(S.next=l.pending=S,I1(l,S)):(S.next=f.next,l.pending=f.next=S)}}function I1(s,l){var f=l.action,v=l.payload,C=s.state;if(l.isTransition){var S=P.T,L={};P.T=L;try{var X=f(C,v),at=P.S;at!==null&&at(L,X),_r(s,l,X)}catch(bt){Vf(s,l,bt)}finally{S!==null&&L.types!==null&&(S.types=L.types),P.T=S}}else try{S=f(C,v),_r(s,l,S)}catch(bt){Vf(s,l,bt)}}function _r(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(v){ha(s,l,v)},function(v){return Vf(s,l,v)}):ha(s,l,f)}function ha(s,l,f){l.status="fulfilled",l.value=f,H1(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,I1(s,f)))}function Vf(s,l,f){var v=s.pending;if(s.pending=null,v!==null){v=v.next;do l.status="rejected",l.reason=f,H1(l),l=l.next;while(l!==v)}s.action=null}function H1(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function Wf(s,l){return l}function N1(s,l){if(hn){var f=Vn.formState;if(f!==null){t:{var v=We;if(hn){if(Bn){e:{for(var C=Bn,S=Lo;C.nodeType!==8;){if(!S){C=null;break e}if(C=Go(C.nextSibling),C===null){C=null;break e}}S=C.data,C=S==="F!"||S==="F"?C:null}if(C){Bn=Go(C.nextSibling),v=C.data==="F!";break t}}Va(v)}v=!1}v&&(l=f[0])}}return f=sr(),f.memoizedState=f.baseState=l,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:l},f.queue=v,f=K1.bind(null,We,v),v.dispatch=f,v=yc(!1),S=xc.bind(null,We,!1,v.queue),v=sr(),C={state:l,dispatch:null,action:s,pending:null},v.queue=C,f=uy.bind(null,We,C,S,f),C.dispatch=f,v.memoizedState=s,[l,f,!1]}function u0(s){var l=Ai();return G1(l,In,s)}function G1(s,l,f){if(l=_1(s,l,Wf)[0],s=Xe(cs)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var v=pc(l)}catch(L){throw L===lc?Nf:L}else v=l;l=Ai();var C=l.queue,S=C.dispatch;return f!==l.memoizedState&&(We.flags|=2048,fo(9,{destroy:void 0},z1.bind(null,C,f),null)),[v,S,s]}function z1(s,l){s.action=l}function c0(s){var l=Ai(),f=In;if(f!==null)return G1(l,f,s);Ai(),l=l.memoizedState,f=Ai();var v=f.queue.dispatch;return f.memoizedState=s,[l,v,!1]}function fo(s,l,f,v){return s={tag:s,create:f,deps:v,inst:l,next:null},l=We.updateQueue,l===null&&(l=gc(),We.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(v=f.next,f.next=s,s.next=v,l.lastEffect=s),s}function cy(){return Ai().memoizedState}function fs(s,l,f,v){var C=sr();We.flags|=s,C.memoizedState=fo(1|l,{destroy:void 0},f,v===void 0?null:v)}function Xf(s,l,f,v){var C=Ai();v=v===void 0?null:v;var S=C.memoizedState.inst;In!==null&&v!==null&&r0(v,In.memoizedState.deps)?C.memoizedState=fo(l,S,f,v):(We.flags|=s,C.memoizedState=fo(1|l,S,f,v))}function j1(s,l){fs(8390656,8,s,l)}function qf(s,l){Xf(2048,8,s,l)}function IC(s){We.flags|=4;var l=We.updateQueue;if(l===null)l=gc(),We.updateQueue=l,l.events=[s];else{var f=l.events;f===null?l.events=[s]:f.push(s)}}function fy(s){var l=Ai().memoizedState;return IC({ref:l,nextImpl:s}),function(){if((Dn&2)!==0)throw Error(r(440));return l.impl.apply(void 0,arguments)}}function hy(s,l){return Xf(4,2,s,l)}function U1(s,l){return Xf(4,4,s,l)}function $1(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function dy(s,l,f){f=f!=null?f.concat([s]):null,Xf(4,4,$1.bind(null,l,s),f)}function f0(){}function V1(s,l){var f=Ai();l=l===void 0?null:l;var v=f.memoizedState;return l!==null&&r0(l,v[1])?v[0]:(f.memoizedState=[s,l],s)}function wr(s,l){var f=Ai();l=l===void 0?null:l;var v=f.memoizedState;if(l!==null&&r0(l,v[1]))return v[0];if(v=s(),iu){Pr(!0);try{s()}finally{Pr(!1)}}return f.memoizedState=[v,l],v}function No(s,l,f){return f===void 0||(uo&1073741824)!==0&&(cn&261930)===0?s.memoizedState=l:(s.memoizedState=f,s=Gy(),We.lanes|=s,rl|=s,f)}function gy(s,l,f,v){return ai(f,l)?f:fa.current!==null?(s=No(s,f,v),ai(s,l)||(li=!0),s):(uo&42)===0||(uo&1073741824)!==0&&(cn&261930)===0?(li=!0,s.memoizedState=f):(s=Gy(),We.lanes|=s,rl|=s,l)}function py(s,l,f,v,C){var S=_.p;_.p=S!==0&&8>S?S:8;var L=P.T,X={};P.T=X,xc(s,!1,l,f);try{var at=C(),bt=P.S;if(bt!==null&&bt(X,at),at!==null&&typeof at=="object"&&typeof at.then=="function"){var kt=_C(at,v);wc(s,l,kt,po(s))}else wc(s,l,v,po(s))}catch(zt){wc(s,l,{then:function(){},status:"rejected",reason:zt},po())}finally{_.p=S,L!==null&&X.types!==null&&(L.types=X.types),P.T=L}}function h0(){}function Ja(s,l,f,v){if(s.tag!==5)throw Error(r(476));var C=W1(s).queue;py(s,C,l,N,f===null?h0:function(){return X1(s),f(v)})}function W1(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:N,baseState:N,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:N},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cs,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function X1(s){var l=W1(s);l.next===null&&(l=s.alternate.memoizedState),wc(s,l.next.queue,{},po())}function q1(){return Ki(kc)}function Y1(){return Ai().memoizedState}function ru(){return Ai().memoizedState}function Yf(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=po();s=Ka(f);var v=ls(l,s,f);v!==null&&(Nr(v,l,f),Gf(v,l,f)),l={cache:os()},s.payload=l;return}l=l.return}}function HC(s,l,f){var v=po();f={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Kf(s)?Zf(l,f):(f=Vd(s,l,f,v),f!==null&&(Nr(f,s,v),d0(f,l,v)))}function K1(s,l,f){var v=po();wc(s,l,f,v)}function wc(s,l,f,v){var C={lane:v,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(Kf(s))Zf(l,C);else{var S=s.alternate;if(s.lanes===0&&(S===null||S.lanes===0)&&(S=l.lastRenderedReducer,S!==null))try{var L=l.lastRenderedState,X=S(L,f);if(C.hasEagerState=!0,C.eagerState=X,ai(X,L))return Yl(s,l,C,0),Vn===null&&rs(),!1}catch{}finally{}if(f=Vd(s,l,C,v),f!==null)return Nr(f,s,v),d0(f,l,v),!0}return!1}function xc(s,l,f,v){if(v={lane:2,revertLane:mo(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Kf(s)){if(l)throw Error(r(479))}else l=Vd(s,f,v,2),l!==null&&Nr(l,s,2)}function Kf(s){var l=s.alternate;return s===We||l!==null&&l===We}function Zf(s,l){hc=Uf=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function d0(s,l,f){if((f&4194048)!==0){var v=l.lanes;v&=s.pendingLanes,f|=v,l.lanes=f,xd(s,f)}}var tl={readContext:Ki,use:mc,useCallback:ii,useContext:ii,useEffect:ii,useImperativeHandle:ii,useLayoutEffect:ii,useInsertionEffect:ii,useMemo:ii,useReducer:ii,useRef:ii,useState:ii,useDebugValue:ii,useDeferredValue:ii,useTransition:ii,useSyncExternalStore:ii,useId:ii,useHostTransitionStatus:ii,useFormState:ii,useActionState:ii,useOptimistic:ii,useMemoCache:ii,useCacheRefresh:ii};tl.useEffectEvent=ii;var my={readContext:Ki,use:mc,useCallback:function(s,l){return sr().memoizedState=[s,l===void 0?null:l],s},useContext:Ki,useEffect:j1,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,fs(4194308,4,$1.bind(null,l,s),f)},useLayoutEffect:function(s,l){return fs(4194308,4,s,l)},useInsertionEffect:function(s,l){fs(4,2,s,l)},useMemo:function(s,l){var f=sr();l=l===void 0?null:l;var v=s();if(iu){Pr(!0);try{s()}finally{Pr(!1)}}return f.memoizedState=[v,l],v},useReducer:function(s,l,f){var v=sr();if(f!==void 0){var C=f(l);if(iu){Pr(!0);try{f(l)}finally{Pr(!1)}}}else C=l;return v.memoizedState=v.baseState=C,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:C},v.queue=s,s=s.dispatch=HC.bind(null,We,s),[v.memoizedState,s]},useRef:function(s){var l=sr();return s={current:s},l.memoizedState=s},useState:function(s){s=yc(s);var l=s.queue,f=K1.bind(null,We,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:f0,useDeferredValue:function(s,l){var f=sr();return No(f,s,l)},useTransition:function(){var s=yc(!1);return s=py.bind(null,We,s.queue,!0,!1),sr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var v=We,C=sr();if(hn){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Vn===null)throw Error(r(349));(cn&127)!==0||k1(v,l,f)}C.memoizedState=f;var S={value:f,getSnapshot:l};return C.queue=S,j1(ay.bind(null,v,S,s),[s]),v.flags|=2048,fo(9,{destroy:void 0},sy.bind(null,v,S,f,l),null),f},useId:function(){var s=sr(),l=Vn.identifierPrefix;if(hn){var f=Oo,v=Ls;f=(v&~(1<<32-Ei(v)-1)).toString(32)+f,l="_"+l+"R_"+f,f=i0++,0<f&&(l+="H"+f.toString(32)),l+="_"}else f=FC++,l="_"+l+"r_"+f.toString(32)+"_";return s.memoizedState=l},useHostTransitionStatus:q1,useFormState:N1,useActionState:N1,useOptimistic:function(s){var l=sr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=xc.bind(null,We,!0,f),f.dispatch=l,[s,l]},useMemoCache:L1,useCacheRefresh:function(){return sr().memoizedState=Yf.bind(null,We)},useEffectEvent:function(s){var l=sr(),f={impl:s};return l.memoizedState=f,function(){if((Dn&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},g0={readContext:Ki,use:mc,useCallback:V1,useContext:Ki,useEffect:qf,useImperativeHandle:dy,useInsertionEffect:hy,useLayoutEffect:U1,useMemo:wr,useReducer:Xe,useRef:cy,useState:function(){return Xe(cs)},useDebugValue:f0,useDeferredValue:function(s,l){var f=Ai();return gy(f,In.memoizedState,s,l)},useTransition:function(){var s=Xe(cs)[0],l=Ai().memoizedState;return[typeof s=="boolean"?s:pc(s),l]},useSyncExternalStore:vc,useId:Y1,useHostTransitionStatus:q1,useFormState:u0,useActionState:u0,useOptimistic:function(s,l){var f=Ai();return l0(f,In,s,l)},useMemoCache:L1,useCacheRefresh:ru};g0.useEffectEvent=fy;var Qf={readContext:Ki,use:mc,useCallback:V1,useContext:Ki,useEffect:qf,useImperativeHandle:dy,useInsertionEffect:hy,useLayoutEffect:U1,useMemo:wr,useReducer:F1,useRef:cy,useState:function(){return F1(cs)},useDebugValue:f0,useDeferredValue:function(s,l){var f=Ai();return In===null?No(f,s,l):gy(f,In.memoizedState,s,l)},useTransition:function(){var s=F1(cs)[0],l=Ai().memoizedState;return[typeof s=="boolean"?s:pc(s),l]},useSyncExternalStore:vc,useId:Y1,useHostTransitionStatus:q1,useFormState:c0,useActionState:c0,useOptimistic:function(s,l){var f=Ai();return In!==null?l0(f,In,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:L1,useCacheRefresh:ru};Qf.useEffectEvent=fy;function p0(s,l,f,v){l=s.memoizedState,f=f(v,l),f=f==null?l:m({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Jf={enqueueSetState:function(s,l,f){s=s._reactInternals;var v=po(),C=Ka(v);C.payload=l,f!=null&&(C.callback=f),l=ls(s,C,v),l!==null&&(Nr(l,s,v),Gf(l,s,v))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var v=po(),C=Ka(v);C.tag=1,C.payload=l,f!=null&&(C.callback=f),l=ls(s,C,v),l!==null&&(Nr(l,s,v),Gf(l,s,v))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=po(),v=Ka(f);v.tag=2,l!=null&&(v.callback=l),l=ls(s,v,f),l!==null&&(Nr(l,s,f),Gf(l,s,f))}};function vy(s,l,f,v,C,S,L){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(v,S,L):l.prototype&&l.prototype.isPureReactComponent?!Yu(f,v)||!Yu(C,S):!0}function Z1(s,l,f,v){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,v),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,v),l.state!==s&&Jf.enqueueReplaceState(l,l.state,null)}function xr(s,l){var f=l;if("ref"in l){f={};for(var v in l)v!=="ref"&&(f[v]=l[v])}if(s=s.defaultProps){f===l&&(f=m({},f));for(var C in s)f[C]===void 0&&(f[C]=s[C])}return f}function Q1(s){$d(s)}function J1(s){console.error(s)}function yy(s){$d(s)}function th(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(v){setTimeout(function(){throw v})}}function wy(s,l,f){try{var v=s.onCaughtError;v(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function tp(s,l,f){return f=Ka(f),f.tag=3,f.payload={element:null},f.callback=function(){th(s,l)},f}function Is(s){return s=Ka(s),s.tag=3,s}function m0(s,l,f,v){var C=f.type.getDerivedStateFromError;if(typeof C=="function"){var S=v.value;s.payload=function(){return C(S)},s.callback=function(){wy(l,f,v)}}var L=f.stateNode;L!==null&&typeof L.componentDidCatch=="function"&&(s.callback=function(){wy(l,f,v),typeof C!="function"&&(ol===null?ol=new Set([this]):ol.add(this));var X=v.stack;this.componentDidCatch(v.value,{componentStack:X!==null?X:""})})}function ep(s,l,f,v,C){if(f.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(l=f.alternate,l!==null&&oc(l,f,C,!0),f=lo.current,f!==null){switch(f.tag){case 31:case 13:return Io===null?M0():f.alternate===null&&ui===0&&(ui=3),f.flags&=-257,f.flags|=65536,f.lanes=C,v===Zd?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([v]):l.add(v),Mp(s,v,C)),!1;case 22:return f.flags|=65536,v===Zd?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([v])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([v]):f.add(v)),Mp(s,v,C)),!1}throw Error(r(435,f.tag))}return Mp(s,v,C),M0(),!1}if(hn)return l=lo.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=C,v!==T1&&(s=Error(r(422),{cause:v}),Xa(oo(s,f)))):(v!==T1&&(l=Error(r(423),{cause:v}),Xa(oo(l,f))),s=s.current.alternate,s.flags|=65536,C&=-C,s.lanes|=C,v=oo(v,f),C=tp(s.stateNode,v,C),t0(s,C),ui!==4&&(ui=2)),!1;var S=Error(r(520),{cause:v});if(S=oo(S,f),gh===null?gh=[S]:gh.push(S),ui!==4&&(ui=2),l===null)return!0;v=oo(v,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=C&-C,f.lanes|=s,s=tp(f.stateNode,v,s),t0(f,s),!1;case 1:if(l=f.type,S=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ol===null||!ol.has(S))))return f.flags|=65536,C&=-C,f.lanes|=C,C=Is(C),m0(C,s,f,v),t0(f,C),!1}f=f.return}while(f!==null);return!1}var eh=Error(r(461)),li=!1;function mi(s,l,f,v){l.child=s===null?P1(l,null,f,v):Ya(l,s.child,f,v)}function De(s,l,f,v,C){f=f.render;var S=l.ref;if("ref"in v){var L={};for(var X in v)X!=="ref"&&(L[X]=v[X])}else L=v;return Jl(l),v=o0(s,l,f,L,S,C),X=s0(),s!==null&&!li?(a0(s,l,C),Hs(s,l,C)):(hn&&X&&Ua(l),l.flags|=1,mi(s,l,v,C),l.child)}function nh(s,l,f,v,C){if(s===null){var S=f.type;return typeof S=="function"&&!sa(S)&&S.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=S,v0(s,l,S,v,C)):(s=Wd(f.type,null,v,l,l.mode,C),s.ref=l.ref,s.return=l,l.child=s)}if(S=s.child,!E0(s,C)){var L=S.memoizedProps;if(f=f.compare,f=f!==null?f:Yu,f(L,v)&&s.ref===l.ref)return Hs(s,l,C)}return l.flags|=1,s=Po(S,v),s.ref=l.ref,s.return=l,l.child=s}function v0(s,l,f,v,C){if(s!==null){var S=s.memoizedProps;if(Yu(S,v)&&s.ref===l.ref)if(li=!1,l.pendingProps=v=S,E0(s,C))(s.flags&131072)!==0&&(li=!0);else return l.lanes=s.lanes,Hs(s,l,C)}return x0(s,l,f,v,C)}function el(s,l,f,v){var C=v.children,S=s!==null?s.memoizedState:null;if(s===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((l.flags&128)!==0){if(S=S!==null?S.baseLanes|f:f,s!==null){for(v=l.child=s.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;v=C&~S}else v=0,l.child=null;return y0(s,l,S,f,v)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Yd(l,S!==null?S.cachePool:null),S!==null?M1(l,S):Zi(),oy(l);else return v=l.lanes=536870912,y0(s,l,S!==null?S.baseLanes|f:f,f,v)}else S!==null?(Yd(l,S.cachePool),M1(l,S),Ho(),l.memoizedState=null):(s!==null&&Yd(l,null),Zi(),Ho());return mi(s,l,C,f),l.child}function ih(s,l){return s!==null&&s.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function y0(s,l,f,v,C){var S=b1();return S=S===null?null:{parent:Ri._currentValue,pool:S},l.memoizedState={baseLanes:f,cachePool:S},s!==null&&Yd(l,null),Zi(),oy(l),s!==null&&oc(s,l,v,!0),l.childLanes=C,null}function rh(s,l){return l=C0({mode:l.mode,children:l.children},s.mode),l.ref=s.ref,s.child=l,l.return=s,l}function Qi(s,l,f){return Ya(l,s.child,null,f),s=rh(l,l.pendingProps),s.flags|=2,Lr(l),l.memoizedState=null,s}function NC(s,l,f){var v=l.pendingProps,C=(l.flags&128)!==0;if(l.flags&=-129,s===null){if(hn){if(v.mode==="hidden")return s=rh(l,v),l.lanes=536870912,ih(null,s);if(jf(l),(s=Bn)?(s=u2(s,Lo),s=s!==null&&s.data==="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:aa!==null?{id:Ls,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},f=_f(s),f.return=l,l.child=f,Mi=l,Bn=null)):s=null,s===null)throw Va(l);return l.lanes=536870912,null}return rh(l,v)}var S=s.memoizedState;if(S!==null){var L=S.dehydrated;if(jf(l),C)if(l.flags&256)l.flags&=-257,l=Qi(s,l,f);else if(l.memoizedState!==null)l.child=s.child,l.flags|=128,l=null;else throw Error(r(558));else if(li||oc(s,l,f,!1),C=(f&s.childLanes)!==0,li||C){if(v=Vn,v!==null&&(L=ku(v,f),L!==0&&L!==S.retryLane))throw S.retryLane=L,Os(s,L),Nr(v,s,L),eh;M0(),l=Qi(s,l,f)}else s=S.treeContext,Bn=Go(L.nextSibling),Mi=l,hn=!0,$a=null,Lo=!1,s!==null&&ic(l,s),l=rh(l,v),l.flags|=4096;return l}return s=Po(s.child,{mode:v.mode,children:v.children}),s.ref=l.ref,l.child=s,s.return=l,s}function w0(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function x0(s,l,f,v,C){return Jl(l),f=o0(s,l,f,v,void 0,C),v=s0(),s!==null&&!li?(a0(s,l,C),Hs(s,l,C)):(hn&&v&&Ua(l),l.flags|=1,mi(s,l,f,C),l.child)}function xy(s,l,f,v,C,S){return Jl(l),l.updateQueue=null,f=$f(l,v,f,C),R1(s),v=s0(),s!==null&&!li?(a0(s,l,S),Hs(s,l,S)):(hn&&v&&Ua(l),l.flags|=1,mi(s,l,f,S),l.child)}function np(s,l,f,v,C){if(Jl(l),l.stateNode===null){var S=oa,L=f.contextType;typeof L=="object"&&L!==null&&(S=Ki(L)),S=new f(v,S),l.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Jf,l.stateNode=S,S._reactInternals=l,S=l.stateNode,S.props=v,S.state=l.memoizedState,S.refs={},Fs(l),L=f.contextType,S.context=typeof L=="object"&&L!==null?Ki(L):oa,S.state=l.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(p0(l,f,L,v),S.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(L=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),L!==S.state&&Jf.enqueueReplaceState(S,S.state,null),fc(l,v,S,C),nu(),S.state=l.memoizedState),typeof S.componentDidMount=="function"&&(l.flags|=4194308),v=!0}else if(s===null){S=l.stateNode;var X=l.memoizedProps,at=xr(f,X);S.props=at;var bt=S.context,kt=f.contextType;L=oa,typeof kt=="object"&&kt!==null&&(L=Ki(kt));var zt=f.getDerivedStateFromProps;kt=typeof zt=="function"||typeof S.getSnapshotBeforeUpdate=="function",X=l.pendingProps!==X,kt||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(X||bt!==L)&&Z1(l,S,v,L),ko=!1;var Bt=l.memoizedState;S.state=Bt,fc(l,v,S,C),nu(),bt=l.memoizedState,X||Bt!==bt||ko?(typeof zt=="function"&&(p0(l,f,zt,v),bt=l.memoizedState),(at=ko||vy(l,f,at,v,Bt,bt,L))?(kt||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(l.flags|=4194308)):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=v,l.memoizedState=bt),S.props=v,S.state=bt,S.context=L,v=at):(typeof S.componentDidMount=="function"&&(l.flags|=4194308),v=!1)}else{S=l.stateNode,Jd(s,l),L=l.memoizedProps,kt=xr(f,L),S.props=kt,zt=l.pendingProps,Bt=S.context,bt=f.contextType,at=oa,typeof bt=="object"&&bt!==null&&(at=Ki(bt)),X=f.getDerivedStateFromProps,(bt=typeof X=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(L!==zt||Bt!==at)&&Z1(l,S,v,at),ko=!1,Bt=l.memoizedState,S.state=Bt,fc(l,v,S,C),nu();var Ot=l.memoizedState;L!==zt||Bt!==Ot||ko||s!==null&&s.dependencies!==null&&qd(s.dependencies)?(typeof X=="function"&&(p0(l,f,X,v),Ot=l.memoizedState),(kt=ko||vy(l,f,kt,v,Bt,Ot,at)||s!==null&&s.dependencies!==null&&qd(s.dependencies))?(bt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(v,Ot,at),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(v,Ot,at)),typeof S.componentDidUpdate=="function"&&(l.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof S.componentDidUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(l.flags|=1024),l.memoizedProps=v,l.memoizedState=Ot),S.props=v,S.state=Ot,S.context=at,v=kt):(typeof S.componentDidUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(l.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||L===s.memoizedProps&&Bt===s.memoizedState||(l.flags|=1024),v=!1)}return S=v,w0(s,l),v=(l.flags&128)!==0,S||v?(S=l.stateNode,f=v&&typeof f.getDerivedStateFromError!="function"?null:S.render(),l.flags|=1,s!==null&&v?(l.child=Ya(l,s.child,null,C),l.child=Ya(l,null,f,C)):mi(s,l,f,C),l.memoizedState=S.state,s=l.child):s=Hs(s,l,C),s}function Cy(s,l,f,v){return q(),l.flags|=256,mi(s,l,f,v),l.child}var ip={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rp(s){return{baseLanes:s,cachePool:ey()}}function hs(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=go),s}function ar(s,l,f){var v=l.pendingProps,C=!1,S=(l.flags&128)!==0,L;if((L=S)||(L=s!==null&&s.memoizedState===null?!1:(Ti.current&2)!==0),L&&(C=!0,l.flags&=-129),L=(l.flags&32)!==0,l.flags&=-33,s===null){if(hn){if(C?Za(l):Ho(),(s=Bn)?(s=u2(s,Lo),s=s!==null&&s.data!=="&"?s:null,s!==null&&(l.memoizedState={dehydrated:s,treeContext:aa!==null?{id:Ls,overflow:Oo}:null,retryLane:536870912,hydrationErrors:null},f=_f(s),f.return=l,l.child=f,Mi=l,Bn=null)):s=null,s===null)throw Va(l);return Mc(s)?l.lanes=32:l.lanes=536870912,null}var X=v.children;return v=v.fallback,C?(Ho(),C=l.mode,X=C0({mode:"hidden",children:X},C),v=Kl(v,C,f,null),X.return=l,v.return=l,X.sibling=v,l.child=X,v=l.child,v.memoizedState=rp(f),v.childLanes=hs(s,L,f),l.memoizedState=ip,ih(null,v)):(Za(l),oh(l,X))}var at=s.memoizedState;if(at!==null&&(X=at.dehydrated,X!==null)){if(S)l.flags&256?(Za(l),l.flags&=-257,l=sh(s,l,f)):l.memoizedState!==null?(Ho(),l.child=s.child,l.flags|=128,l=null):(Ho(),X=v.fallback,C=l.mode,v=C0({mode:"visible",children:v.children},C),X=Kl(X,C,f,null),X.flags|=2,v.return=l,X.return=l,v.sibling=X,l.child=v,Ya(l,s.child,null,f),v=l.child,v.memoizedState=rp(f),v.childLanes=hs(s,L,f),l.memoizedState=ip,l=ih(null,v));else if(Za(l),Mc(X)){if(L=X.nextSibling&&X.nextSibling.dataset,L)var bt=L.dgst;L=bt,v=Error(r(419)),v.stack="",v.digest=L,Xa({value:v,source:null,stack:null}),l=sh(s,l,f)}else if(li||oc(s,l,f,!1),L=(f&s.childLanes)!==0,li||L){if(L=Vn,L!==null&&(v=ku(L,f),v!==0&&v!==at.retryLane))throw at.retryLane=v,Os(s,v),Nr(L,s,v),eh;N0(X)||M0(),l=sh(s,l,f)}else N0(X)?(l.flags|=192,l.child=s.child,l=null):(s=at.treeContext,Bn=Go(X.nextSibling),Mi=l,hn=!0,$a=null,Lo=!1,s!==null&&ic(l,s),l=oh(l,v.children),l.flags|=4096);return l}return C?(Ho(),X=v.fallback,C=l.mode,at=s.child,bt=at.sibling,v=Po(at,{mode:"hidden",children:v.children}),v.subtreeFlags=at.subtreeFlags&65011712,bt!==null?X=Po(bt,X):(X=Kl(X,C,f,null),X.flags|=2),X.return=l,v.return=l,v.sibling=X,l.child=v,ih(null,v),v=l.child,X=s.child.memoizedState,X===null?X=rp(f):(C=X.cachePool,C!==null?(at=Ri._currentValue,C=C.parent!==at?{parent:at,pool:at}:C):C=ey(),X={baseLanes:X.baseLanes|f,cachePool:C}),v.memoizedState=X,v.childLanes=hs(s,L,f),l.memoizedState=ip,ih(s.child,v)):(Za(l),f=s.child,s=f.sibling,f=Po(f,{mode:"visible",children:v.children}),f.return=l,f.sibling=null,s!==null&&(L=l.deletions,L===null?(l.deletions=[s],l.flags|=16):L.push(s)),l.child=f,l.memoizedState=null,f)}function oh(s,l){return l=C0({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function C0(s,l){return s=Yi(22,s,null,l),s.lanes=0,s}function sh(s,l,f){return Ya(l,s.child,null,f),s=oh(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function Ey(s,l,f){s.lanes|=l;var v=s.alternate;v!==null&&(v.lanes|=l),ca(s.return,l,f)}function op(s,l,f,v,C,S){var L=s.memoizedState;L===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:v,tail:f,tailMode:C,treeForkCount:S}:(L.isBackwards=l,L.rendering=null,L.renderingStartTime=0,L.last=v,L.tail=f,L.tailMode=C,L.treeForkCount=S)}function Cc(s,l,f){var v=l.pendingProps,C=v.revealOrder,S=v.tail;v=v.children;var L=Ti.current,X=(L&2)!==0;if(X?(L=L&1|2,l.flags|=128):L&=1,tt(Ti,L),mi(s,l,v,f),v=hn?Pi:0,!X&&s!==null&&(s.flags&128)!==0)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Ey(s,f,l);else if(s.tag===19)Ey(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(C){case"forwards":for(f=l.child,C=null;f!==null;)s=f.alternate,s!==null&&n0(s)===null&&(C=f),f=f.sibling;f=C,f===null?(C=l.child,l.child=null):(C=f.sibling,f.sibling=null),op(l,!1,C,f,S,v);break;case"backwards":case"unstable_legacy-backwards":for(f=null,C=l.child,l.child=null;C!==null;){if(s=C.alternate,s!==null&&n0(s)===null){l.child=C;break}s=C.sibling,C.sibling=f,f=C,C=s}op(l,!0,f,null,S,v);break;case"together":op(l,!1,null,null,void 0,v);break;default:l.memoizedState=null}return l.child}function Hs(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),rl|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(oc(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=Po(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=Po(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function E0(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&qd(s)))}function GC(s,l,f){switch(l.tag){case 3:$t(l,l.stateNode.containerInfo),qa(l,Ri,s.memoizedState.cache),q();break;case 27:case 5:Pt(l);break;case 4:$t(l,l.stateNode.containerInfo);break;case 10:qa(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,jf(l),null;break;case 13:var v=l.memoizedState;if(v!==null)return v.dehydrated!==null?(Za(l),l.flags|=128,null):(f&l.child.childLanes)!==0?ar(s,l,f):(Za(l),s=Hs(s,l,f),s!==null?s.sibling:null);Za(l);break;case 19:var C=(s.flags&128)!==0;if(v=(f&l.childLanes)!==0,v||(oc(s,l,f,!1),v=(f&l.childLanes)!==0),C){if(v)return Cc(s,l,f);l.flags|=128}if(C=l.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),tt(Ti,Ti.current),v)break;return null;case 22:return l.lanes=0,el(s,l,f,l.pendingProps);case 24:qa(l,Ri,s.memoizedState.cache)}return Hs(s,l,f)}function Sy(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)li=!0;else{if(!E0(s,f)&&(l.flags&128)===0)return li=!1,GC(s,l,f);li=(s.flags&131072)!==0}else li=!1,hn&&(l.flags&1048576)!==0&&Xd(l,Pi,l.index);switch(l.lanes=0,l.tag){case 16:t:{var v=l.pendingProps;if(s=ss(l.elementType),l.type=s,typeof s=="function")sa(s)?(v=xr(s,v),l.tag=1,l=np(null,l,s,v,f)):(l.tag=0,l=x0(null,l,s,v,f));else{if(s!=null){var C=s.$$typeof;if(C===R){l.tag=11,l=De(null,l,s,v,f);break t}else if(C===U){l.tag=14,l=nh(null,l,s,v,f);break t}}throw l=wt(s)||s,Error(r(306,l,""))}}return l;case 0:return x0(s,l,l.type,l.pendingProps,f);case 1:return v=l.type,C=xr(v,l.pendingProps),np(s,l,v,C,f);case 3:t:{if($t(l,l.stateNode.containerInfo),s===null)throw Error(r(387));v=l.pendingProps;var S=l.memoizedState;C=S.element,Jd(s,l),fc(l,v,null,f);var L=l.memoizedState;if(v=L.cache,qa(l,Ri,v),v!==S.cache&&A1(l,[Ri],f,!0),nu(),v=L.element,S.isDehydrated)if(S={element:v,isDehydrated:!1,cache:L.cache},l.updateQueue.baseState=S,l.memoizedState=S,l.flags&256){l=Cy(s,l,v,f);break t}else if(v!==C){C=oo(Error(r(424)),l),Xa(C),l=Cy(s,l,v,f);break t}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Bn=Go(s.firstChild),Mi=l,hn=!0,$a=null,Lo=!0,f=P1(l,null,v,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(q(),v===C){l=Hs(s,l,f);break t}mi(s,l,v,f)}l=l.child}return l;case 26:return w0(s,l),s===null?(f=p2(l.type,null,l.pendingProps,null))?l.memoizedState=f:hn||(f=l.type,s=l.pendingProps,v=Dh(gt.current).createElement(f),v[Fi]=l,v[or]=s,Ji(v,f,s),Si(v),l.stateNode=v):l.memoizedState=p2(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Pt(l),s===null&&hn&&(v=l.stateNode=h2(l.type,l.pendingProps,gt.current),Mi=l,Lo=!0,C=Bn,Oe(l.type)?(jp=C,Bn=Go(v.firstChild)):Bn=C),mi(s,l,l.pendingProps.children,f),w0(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&hn&&((C=v=Bn)&&(v=nE(v,l.type,l.pendingProps,Lo),v!==null?(l.stateNode=v,Mi=l,Bn=Go(v.firstChild),Lo=!1,C=!0):C=!1),C||Va(l)),Pt(l),C=l.type,S=l.pendingProps,L=s!==null?s.memoizedProps:null,v=S.children,ul(C,S)?v=null:L!==null&&ul(C,L)&&(l.flags|=32),l.memoizedState!==null&&(C=o0(s,l,kC,null,null,f),kc._currentValue=C),w0(s,l),mi(s,l,v,f),l.child;case 6:return s===null&&hn&&((s=f=Bn)&&(f=Pn(f,l.pendingProps,Lo),f!==null?(l.stateNode=f,Mi=l,Bn=null,s=!0):s=!1),s||Va(l)),null;case 13:return ar(s,l,f);case 4:return $t(l,l.stateNode.containerInfo),v=l.pendingProps,s===null?l.child=Ya(l,null,v,f):mi(s,l,v,f),l.child;case 11:return De(s,l,l.type,l.pendingProps,f);case 7:return mi(s,l,l.pendingProps,f),l.child;case 8:return mi(s,l,l.pendingProps.children,f),l.child;case 12:return mi(s,l,l.pendingProps.children,f),l.child;case 10:return v=l.pendingProps,qa(l,l.type,v.value),mi(s,l,v.children,f),l.child;case 9:return C=l.type._context,v=l.pendingProps.children,Jl(l),C=Ki(C),v=v(C),l.flags|=1,mi(s,l,v,f),l.child;case 14:return nh(s,l,l.type,l.pendingProps,f);case 15:return v0(s,l,l.type,l.pendingProps,f);case 19:return Cc(s,l,f);case 31:return NC(s,l,f);case 22:return el(s,l,f,l.pendingProps);case 24:return Jl(l),v=Ki(Ri),s===null?(C=b1(),C===null&&(C=Vn,S=os(),C.pooledCache=S,S.refCount++,S!==null&&(C.pooledCacheLanes|=f),C=S),l.memoizedState={parent:v,cache:C},Fs(l),qa(l,Ri,C)):((s.lanes&f)!==0&&(Jd(s,l),fc(l,null,null,f),nu()),C=s.memoizedState,S=l.memoizedState,C.parent!==v?(C={parent:v,cache:v},l.memoizedState=C,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=C),qa(l,Ri,v)):(v=S.cache,qa(l,Ri,v),v!==C.cache&&A1(l,[Ri],f,!0))),mi(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function da(s){s.flags|=4}function sp(s,l,f,v,C){if((l=(s.mode&32)!==0)&&(l=!1),l){if(s.flags|=16777216,(C&335544128)===C)if(s.stateNode.complete)s.flags|=8192;else if(vh())s.flags|=8192;else throw _s=Zd,Kd}else s.flags&=-16777217}function ap(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!x2(l))if(vh())s.flags|=8192;else throw _s=Zd,Kd}function ah(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Cf():536870912,s.lanes|=l,Ac|=l)}function lh(s,l){if(!hn)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var v=null;f!==null;)f.alternate!==null&&(v=f),f=f.sibling;v===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:v.sibling=null}}function $n(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,v=0;if(l)for(var C=s.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=s,C=C.sibling;else for(C=s.child;C!==null;)f|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=s,C=C.sibling;return s.subtreeFlags|=v,s.childLanes=f,l}function Ty(s,l,f){var v=l.pendingProps;switch(Zl(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(l),null;case 1:return $n(l),null;case 3:return f=l.stateNode,v=null,s!==null&&(v=s.memoizedState.cache),l.memoizedState.cache!==v&&(l.flags|=2048),ua(Ri),ot(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ql(l)?da(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Wa())),$n(l),null;case 26:var C=l.type,S=l.memoizedState;return s===null?(da(l),S!==null?($n(l),ap(l,S)):($n(l),sp(l,C,null,v,f))):S?S!==s.memoizedState?(da(l),$n(l),ap(l,S)):($n(l),l.flags&=-16777217):(s=s.memoizedProps,s!==v&&da(l),$n(l),sp(l,C,s,v,f)),null;case 27:if(Rt(l),f=gt.current,C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&da(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return $n(l),null}s=it.current,Ql(l)?kf(l):(s=h2(C,v,f),l.stateNode=s,da(l))}return $n(l),null;case 5:if(Rt(l),C=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==v&&da(l);else{if(!v){if(l.stateNode===null)throw Error(r(166));return $n(l),null}if(S=it.current,Ql(l))kf(l);else{var L=Dh(gt.current);switch(S){case 1:S=L.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:S=L.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":S=L.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":S=L.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":S=L.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof v.is=="string"?L.createElement("select",{is:v.is}):L.createElement("select"),v.multiple?S.multiple=!0:v.size&&(S.size=v.size);break;default:S=typeof v.is=="string"?L.createElement(C,{is:v.is}):L.createElement(C)}}S[Fi]=l,S[or]=v;t:for(L=l.child;L!==null;){if(L.tag===5||L.tag===6)S.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===l)break t;for(;L.sibling===null;){if(L.return===null||L.return===l)break t;L=L.return}L.sibling.return=L.return,L=L.sibling}l.stateNode=S;t:switch(Ji(S,C,v),C){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break t;case"img":v=!0;break t;default:v=!1}v&&da(l)}}return $n(l),sp(l,l.type,s===null?null:s.memoizedProps,l.pendingProps,f),null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==v&&da(l);else{if(typeof v!="string"&&l.stateNode===null)throw Error(r(166));if(s=gt.current,Ql(l)){if(s=l.stateNode,f=l.memoizedProps,v=null,C=Mi,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}s[Fi]=l,s=!!(s.nodeValue===f||v!==null&&v.suppressHydrationWarning===!0||o2(s.nodeValue,f)),s||Va(l,!0)}else s=Dh(s).createTextNode(v),s[Fi]=l,l.stateNode=s}return $n(l),null;case 31:if(f=l.memoizedState,s===null||s.memoizedState!==null){if(v=Ql(l),f!==null){if(s===null){if(!v)throw Error(r(318));if(s=l.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Fi]=l}else q(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$n(l),s=!1}else f=Wa(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=f),s=!0;if(!s)return l.flags&256?(Lr(l),l):(Lr(l),null);if((l.flags&128)!==0)throw Error(r(558))}return $n(l),null;case 13:if(v=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(C=Ql(l),v!==null&&v.dehydrated!==null){if(s===null){if(!C)throw Error(r(318));if(C=l.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[Fi]=l}else q(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;$n(l),C=!1}else C=Wa(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=C),C=!0;if(!C)return l.flags&256?(Lr(l),l):(Lr(l),null)}return Lr(l),(l.flags&128)!==0?(l.lanes=f,l):(f=v!==null,s=s!==null&&s.memoizedState!==null,f&&(v=l.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool),S=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(S=v.memoizedState.cachePool.pool),S!==C&&(v.flags|=2048)),f!==s&&f&&(l.child.flags|=8192),ah(l,l.updateQueue),$n(l),null);case 4:return ot(),s===null&&Fp(l.stateNode.containerInfo),$n(l),null;case 10:return ua(l.type),$n(l),null;case 19:if(J(Ti),v=l.memoizedState,v===null)return $n(l),null;if(C=(l.flags&128)!==0,S=v.rendering,S===null)if(C)lh(v,!1);else{if(ui!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(S=n0(s),S!==null){for(l.flags|=128,lh(v,!1),s=S.updateQueue,l.updateQueue=s,ah(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)Zv(f,s),f=f.sibling;return tt(Ti,Ti.current&1|2),hn&&so(l,v.treeForkCount),l.child}s=s.sibling}v.tail!==null&&Fn()>au&&(l.flags|=128,C=!0,lh(v,!1),l.lanes=4194304)}else{if(!C)if(s=n0(S),s!==null){if(l.flags|=128,C=!0,s=s.updateQueue,l.updateQueue=s,ah(l,s),lh(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!hn)return $n(l),null}else 2*Fn()-v.renderingStartTime>au&&f!==536870912&&(l.flags|=128,C=!0,lh(v,!1),l.lanes=4194304);v.isBackwards?(S.sibling=l.child,l.child=S):(s=v.last,s!==null?s.sibling=S:l.child=S,v.last=S)}return v.tail!==null?(s=v.tail,v.rendering=s,v.tail=s.sibling,v.renderingStartTime=Fn(),s.sibling=null,f=Ti.current,tt(Ti,C?f&1|2:f&1),hn&&so(l,v.treeForkCount),s):($n(l),null);case 22:case 23:return Lr(l),zf(),v=l.memoizedState!==null,s!==null?s.memoizedState!==null!==v&&(l.flags|=8192):v&&(l.flags|=8192),v?(f&536870912)!==0&&(l.flags&128)===0&&($n(l),l.subtreeFlags&6&&(l.flags|=8192)):$n(l),f=l.updateQueue,f!==null&&ah(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),v=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(v=l.memoizedState.cachePool.pool),v!==f&&(l.flags|=2048),s!==null&&J(eu),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ua(Ri),$n(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function uh(s,l){switch(Zl(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ua(Ri),ot(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Rt(l),null;case 31:if(l.memoizedState!==null){if(Lr(l),l.alternate===null)throw Error(r(340));q()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 13:if(Lr(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));q()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return J(Ti),null;case 4:return ot(),null;case 10:return ua(l.type),null;case 22:case 23:return Lr(l),zf(),s!==null&&J(eu),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ua(Ri),null;case 25:return null;default:return null}}function S0(s,l){switch(Zl(l),l.tag){case 3:ua(Ri),ot();break;case 26:case 27:case 5:Rt(l);break;case 4:ot();break;case 31:l.memoizedState!==null&&Lr(l);break;case 13:Lr(l);break;case 19:J(Ti);break;case 10:ua(l.type);break;case 22:case 23:Lr(l),zf(),s!==null&&J(eu);break;case 24:ua(Ri)}}function Ec(s,l){try{var f=l.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var C=v.next;f=C;do{if((f.tag&s)===s){v=void 0;var S=f.create,L=f.inst;v=S(),L.destroy=v}f=f.next}while(f!==C)}}catch(X){Ln(l,l.return,X)}}function ga(s,l,f){try{var v=l.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var S=C.next;v=S;do{if((v.tag&s)===s){var L=v.inst,X=L.destroy;if(X!==void 0){L.destroy=void 0,C=l;var at=f,bt=X;try{bt()}catch(kt){Ln(C,at,kt)}}}v=v.next}while(v!==S)}}catch(kt){Ln(l,l.return,kt)}}function ch(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{e0(l,f)}catch(v){Ln(s,s.return,v)}}}function lp(s,l,f){f.props=xr(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(v){Ln(s,l,v)}}function Fr(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var v=s.stateNode;break;case 30:v=s.stateNode;break;default:v=s.stateNode}typeof f=="function"?s.refCleanup=f(v):f.current=v}}catch(C){Ln(s,l,C)}}function lr(s,l){var f=s.ref,v=s.refCleanup;if(f!==null)if(typeof v=="function")try{v()}catch(C){Ln(s,l,C)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(C){Ln(s,l,C)}else f.current=null}function Ay(s){var l=s.type,f=s.memoizedProps,v=s.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&v.focus();break t;case"img":f.src?v.src=f.src:f.srcSet&&(v.srcset=f.srcSet)}}catch(C){Ln(s,s.return,C)}}function T0(s,l,f){try{var v=s.stateNode;JC(v,s.type,f,l),v[or]=l}catch(C){Ln(s,s.return,C)}}function Dy(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Oe(s.type)||s.tag===4}function up(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||Dy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Oe(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function cp(s,l,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ns));else if(v!==4&&(v===27&&Oe(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(cp(s,l,f),s=s.sibling;s!==null;)cp(s,l,f),s=s.sibling}function A0(s,l,f){var v=s.tag;if(v===5||v===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(v!==4&&(v===27&&Oe(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(A0(s,l,f),s=s.sibling;s!==null;)A0(s,l,f),s=s.sibling}function by(s){var l=s.stateNode,f=s.memoizedProps;try{for(var v=s.type,C=l.attributes;C.length;)l.removeAttributeNode(C[0]);Ji(l,v,f),l[Fi]=s,l[or]=f}catch(S){Ln(s,s.return,S)}}var pa=!1,Oi=!1,fp=!1,By=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function zC(s,l){if(s=s.containerInfo,Ah=W0,s=Xv(s),E1(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else t:{f=(f=s.ownerDocument)&&f.defaultView||window;var v=f.getSelection&&f.getSelection();if(v&&v.rangeCount!==0){f=v.anchorNode;var C=v.anchorOffset,S=v.focusNode;v=v.focusOffset;try{f.nodeType,S.nodeType}catch{f=null;break t}var L=0,X=-1,at=-1,bt=0,kt=0,zt=s,Bt=null;e:for(;;){for(var Ot;zt!==f||C!==0&&zt.nodeType!==3||(X=L+C),zt!==S||v!==0&&zt.nodeType!==3||(at=L+v),zt.nodeType===3&&(L+=zt.nodeValue.length),(Ot=zt.firstChild)!==null;)Bt=zt,zt=Ot;for(;;){if(zt===s)break e;if(Bt===f&&++bt===C&&(X=L),Bt===S&&++kt===v&&(at=L),(Ot=zt.nextSibling)!==null)break;zt=Bt,Bt=zt.parentNode}zt=Ot}f=X===-1||at===-1?null:{start:X,end:at}}else f=null}f=f||{start:0,end:0}}else f=null;for(Np={focusedElem:s,selectionRange:f},W0=!1,Ui=l;Ui!==null;)if(l=Ui,s=l.child,(l.subtreeFlags&1028)!==0&&s!==null)s.return=l,Ui=s;else for(;Ui!==null;){switch(l=Ui,S=l.alternate,s=l.flags,l.tag){case 0:if((s&4)!==0&&(s=l.updateQueue,s=s!==null?s.events:null,s!==null))for(f=0;f<s.length;f++)C=s[f],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&S!==null){s=void 0,f=l,C=S.memoizedProps,S=S.memoizedState,v=f.stateNode;try{var ce=xr(f.type,C);s=v.getSnapshotBeforeUpdate(ce,S),v.__reactInternalSnapshotBeforeUpdate=s}catch(Be){Ln(f,f.return,Be)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)H0(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":H0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Ui=s;break}Ui=l.return}}function hp(s,l,f){var v=f.flags;switch(f.tag){case 0:case 11:case 15:va(s,f),v&4&&Ec(5,f);break;case 1:if(va(s,f),v&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(L){Ln(f,f.return,L)}else{var C=xr(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(C,l,s.__reactInternalSnapshotBeforeUpdate)}catch(L){Ln(f,f.return,L)}}v&64&&ch(f),v&512&&Fr(f,f.return);break;case 3:if(va(s,f),v&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{e0(s,l)}catch(L){Ln(f,f.return,L)}}break;case 27:l===null&&v&4&&by(f);case 26:case 5:va(s,f),l===null&&v&4&&Ay(f),v&512&&Fr(f,f.return);break;case 12:va(s,f);break;case 31:va(s,f),v&4&&gp(s,f);break;case 13:va(s,f),v&4&&My(s,f),v&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=L0.bind(null,f),iE(s,f))));break;case 22:if(v=f.memoizedState!==null||pa,!v){l=l!==null&&l.memoizedState!==null||Oi,C=pa;var S=Oi;pa=v,(Oi=l)&&!S?Ns(s,f,(f.subtreeFlags&8772)!==0):va(s,f),pa=C,Oi=S}break;case 30:break;default:va(s,f)}}function dp(s){var l=s.alternate;l!==null&&(s.alternate=null,dp(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Tf(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Qn=null,kr=!1;function ma(s,l,f){for(f=f.child;f!==null;)Py(s,l,f),f=f.sibling}function Py(s,l,f){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Qr,f)}catch{}switch(f.tag){case 26:Oi||lr(f,l),ma(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Oi||lr(f,l);var v=Qn,C=kr;Oe(f.type)&&(Qn=f.stateNode,kr=!1),ma(s,l,f),Bh(f.stateNode),Qn=v,kr=C;break;case 5:Oi||lr(f,l);case 6:if(v=Qn,C=kr,Qn=null,ma(s,l,f),Qn=v,kr=C,Qn!==null)if(kr)try{(Qn.nodeType===9?Qn.body:Qn.nodeName==="HTML"?Qn.ownerDocument.body:Qn).removeChild(f.stateNode)}catch(S){Ln(f,l,S)}else try{Qn.removeChild(f.stateNode)}catch(S){Ln(f,l,S)}break;case 18:Qn!==null&&(kr?(s=Qn,zp(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),Hc(s)):zp(Qn,f.stateNode));break;case 4:v=Qn,C=kr,Qn=f.stateNode.containerInfo,kr=!0,ma(s,l,f),Qn=v,kr=C;break;case 0:case 11:case 14:case 15:ga(2,f,l),Oi||ga(4,f,l),ma(s,l,f);break;case 1:Oi||(lr(f,l),v=f.stateNode,typeof v.componentWillUnmount=="function"&&lp(f,l,v)),ma(s,l,f);break;case 21:ma(s,l,f);break;case 22:Oi=(v=Oi)||f.memoizedState!==null,ma(s,l,f),Oi=v;break;default:ma(s,l,f)}}function gp(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Hc(s)}catch(f){Ln(l,l.return,f)}}}function My(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Hc(s)}catch(f){Ln(l,l.return,f)}}function jC(s){switch(s.tag){case 31:case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new By),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new By),l;default:throw Error(r(435,s.tag))}}function D0(s,l){var f=jC(s);l.forEach(function(v){if(!f.has(v)){f.add(v);var C=YC.bind(null,s,v);v.then(C,C)}})}function Ir(s,l){var f=l.deletions;if(f!==null)for(var v=0;v<f.length;v++){var C=f[v],S=s,L=l,X=L;t:for(;X!==null;){switch(X.tag){case 27:if(Oe(X.type)){Qn=X.stateNode,kr=!1;break t}break;case 5:Qn=X.stateNode,kr=!1;break t;case 3:case 4:Qn=X.stateNode.containerInfo,kr=!0;break t}X=X.return}if(Qn===null)throw Error(r(160));Py(S,L,C),Qn=null,kr=!1,S=C.alternate,S!==null&&(S.return=null),C.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Ry(l,s),l=l.sibling}var ds=null;function Ry(s,l){var f=s.alternate,v=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ir(l,s),Jn(s),v&4&&(ga(3,s,s.return),Ec(3,s),ga(5,s,s.return));break;case 1:Ir(l,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),v&64&&pa&&(s=s.updateQueue,s!==null&&(v=s.callbacks,v!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?v:f.concat(v))));break;case 26:var C=ds;if(Ir(l,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),v&4){var S=f!==null?f.memoizedState:null;if(v=s.memoizedState,f===null)if(v===null)if(s.stateNode===null){t:{v=s.type,f=s.memoizedProps,C=C.ownerDocument||C;e:switch(v){case"title":S=C.getElementsByTagName("title")[0],(!S||S[Gl]||S[Fi]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=C.createElement(v),C.head.insertBefore(S,C.querySelector("head > title"))),Ji(S,v,f),S[Fi]=s,Si(S),v=S;break t;case"link":var L=y2("link","href",C).get(v+(f.href||""));if(L){for(var X=0;X<L.length;X++)if(S=L[X],S.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&S.getAttribute("rel")===(f.rel==null?null:f.rel)&&S.getAttribute("title")===(f.title==null?null:f.title)&&S.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){L.splice(X,1);break e}}S=C.createElement(v),Ji(S,v,f),C.head.appendChild(S);break;case"meta":if(L=y2("meta","content",C).get(v+(f.content||""))){for(X=0;X<L.length;X++)if(S=L[X],S.getAttribute("content")===(f.content==null?null:""+f.content)&&S.getAttribute("name")===(f.name==null?null:f.name)&&S.getAttribute("property")===(f.property==null?null:f.property)&&S.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&S.getAttribute("charset")===(f.charSet==null?null:f.charSet)){L.splice(X,1);break e}}S=C.createElement(v),Ji(S,v,f),C.head.appendChild(S);break;default:throw Error(r(468,v))}S[Fi]=s,Si(S),v=S}s.stateNode=v}else w2(C,s.type,s.stateNode);else s.stateNode=v2(C,v,s.memoizedProps);else S!==v?(S===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):S.count--,v===null?w2(C,s.type,s.stateNode):v2(C,v,s.memoizedProps)):v===null&&s.stateNode!==null&&T0(s,s.memoizedProps,f.memoizedProps)}break;case 27:Ir(l,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),f!==null&&v&4&&T0(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Ir(l,s),Jn(s),v&512&&(Oi||f===null||lr(f,f.return)),s.flags&32){C=s.stateNode;try{wn(C,"")}catch(ce){Ln(s,s.return,ce)}}v&4&&s.stateNode!=null&&(C=s.memoizedProps,T0(s,C,f!==null?f.memoizedProps:C)),v&1024&&(fp=!0);break;case 6:if(Ir(l,s),Jn(s),v&4){if(s.stateNode===null)throw Error(r(162));v=s.memoizedProps,f=s.stateNode;try{f.nodeValue=v}catch(ce){Ln(s,s.return,ce)}}break;case 3:if(Ph=null,C=ds,ds=G0(l.containerInfo),Ir(l,s),ds=C,Jn(s),v&4&&f!==null&&f.memoizedState.isDehydrated)try{Hc(l.containerInfo)}catch(ce){Ln(s,s.return,ce)}fp&&(fp=!1,Oy(s));break;case 4:v=ds,ds=G0(s.stateNode.containerInfo),Ir(l,s),Jn(s),ds=v;break;case 12:Ir(l,s),Jn(s);break;case 31:Ir(l,s),Jn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 13:Ir(l,s),Jn(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(ph=Fn()),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 22:C=s.memoizedState!==null;var at=f!==null&&f.memoizedState!==null,bt=pa,kt=Oi;if(pa=bt||C,Oi=kt||at,Ir(l,s),Oi=kt,pa=bt,Jn(s),v&8192)t:for(l=s.stateNode,l._visibility=C?l._visibility&-2:l._visibility|1,C&&(f===null||at||pa||Oi||ou(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){at=f=l;try{if(S=at.stateNode,C)L=S.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none";else{X=at.stateNode;var zt=at.memoizedProps.style,Bt=zt!=null&&zt.hasOwnProperty("display")?zt.display:null;X.style.display=Bt==null||typeof Bt=="boolean"?"":(""+Bt).trim()}}catch(ce){Ln(at,at.return,ce)}}}else if(l.tag===6){if(f===null){at=l;try{at.stateNode.nodeValue=C?"":at.memoizedProps}catch(ce){Ln(at,at.return,ce)}}}else if(l.tag===18){if(f===null){at=l;try{var Ot=at.stateNode;C?yo(Ot,!0):yo(at.stateNode,!1)}catch(ce){Ln(at,at.return,ce)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}v&4&&(v=s.updateQueue,v!==null&&(f=v.retryQueue,f!==null&&(v.retryQueue=null,D0(s,f))));break;case 19:Ir(l,s),Jn(s),v&4&&(v=s.updateQueue,v!==null&&(s.updateQueue=null,D0(s,v)));break;case 30:break;case 21:break;default:Ir(l,s),Jn(s)}}function Jn(s){var l=s.flags;if(l&2){try{for(var f,v=s.return;v!==null;){if(Dy(v)){f=v;break}v=v.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var C=f.stateNode,S=up(s);A0(s,S,C);break;case 5:var L=f.stateNode;f.flags&32&&(wn(L,""),f.flags&=-33);var X=up(s);A0(s,X,L);break;case 3:case 4:var at=f.stateNode.containerInfo,bt=up(s);cp(s,bt,at);break;default:throw Error(r(161))}}catch(kt){Ln(s,s.return,kt)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Oy(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Oy(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function va(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)hp(s,l.alternate,l),l=l.sibling}function ou(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:ga(4,l,l.return),ou(l);break;case 1:lr(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&lp(l,l.return,f),ou(l);break;case 27:Bh(l.stateNode);case 26:case 5:lr(l,l.return),ou(l);break;case 22:l.memoizedState===null&&ou(l);break;case 30:ou(l);break;default:ou(l)}s=s.sibling}}function Ns(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var v=l.alternate,C=s,S=l,L=S.flags;switch(S.tag){case 0:case 11:case 15:Ns(C,S,f),Ec(4,S);break;case 1:if(Ns(C,S,f),v=S,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(bt){Ln(v,v.return,bt)}if(v=S,C=v.updateQueue,C!==null){var X=v.stateNode;try{var at=C.shared.hiddenCallbacks;if(at!==null)for(C.shared.hiddenCallbacks=null,C=0;C<at.length;C++)us(at[C],X)}catch(bt){Ln(v,v.return,bt)}}f&&L&64&&ch(S),Fr(S,S.return);break;case 27:by(S);case 26:case 5:Ns(C,S,f),f&&v===null&&L&4&&Ay(S),Fr(S,S.return);break;case 12:Ns(C,S,f);break;case 31:Ns(C,S,f),f&&L&4&&gp(C,S);break;case 13:Ns(C,S,f),f&&L&4&&My(C,S);break;case 22:S.memoizedState===null&&Ns(C,S,f),Fr(S,S.return);break;case 30:break;default:Ns(C,S,f)}l=l.sibling}}function pp(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&If(f))}function mp(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&If(s))}function gs(s,l,f,v){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Ly(s,l,f,v),l=l.sibling}function Ly(s,l,f,v){var C=l.flags;switch(l.tag){case 0:case 11:case 15:gs(s,l,f,v),C&2048&&Ec(9,l);break;case 1:gs(s,l,f,v);break;case 3:gs(s,l,f,v),C&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&If(s)));break;case 12:if(C&2048){gs(s,l,f,v),s=l.stateNode;try{var S=l.memoizedProps,L=S.id,X=S.onPostCommit;typeof X=="function"&&X(L,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(at){Ln(l,l.return,at)}}else gs(s,l,f,v);break;case 31:gs(s,l,f,v);break;case 13:gs(s,l,f,v);break;case 23:break;case 22:S=l.stateNode,L=l.alternate,l.memoizedState!==null?S._visibility&2?gs(s,l,f,v):fh(s,l):S._visibility&2?gs(s,l,f,v):(S._visibility|=2,nl(s,l,f,v,(l.subtreeFlags&10256)!==0||!1)),C&2048&&pp(L,l);break;case 24:gs(s,l,f,v),C&2048&&mp(l.alternate,l);break;default:gs(s,l,f,v)}}function nl(s,l,f,v,C){for(C=C&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var S=s,L=l,X=f,at=v,bt=L.flags;switch(L.tag){case 0:case 11:case 15:nl(S,L,X,at,C),Ec(8,L);break;case 23:break;case 22:var kt=L.stateNode;L.memoizedState!==null?kt._visibility&2?nl(S,L,X,at,C):fh(S,L):(kt._visibility|=2,nl(S,L,X,at,C)),C&&bt&2048&&pp(L.alternate,L);break;case 24:nl(S,L,X,at,C),C&&bt&2048&&mp(L.alternate,L);break;default:nl(S,L,X,at,C)}l=l.sibling}}function fh(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,v=l,C=v.flags;switch(v.tag){case 22:fh(f,v),C&2048&&pp(v.alternate,v);break;case 24:fh(f,v),C&2048&&mp(v.alternate,v);break;default:fh(f,v)}l=l.sibling}}var hh=8192;function Sc(s,l,f){if(s.subtreeFlags&hh)for(s=s.child;s!==null;)_y(s,l,f),s=s.sibling}function _y(s,l,f){switch(s.tag){case 26:Sc(s,l,f),s.flags&hh&&s.memoizedState!==null&&Fc(f,ds,s.memoizedState,s.memoizedProps);break;case 5:Sc(s,l,f);break;case 3:case 4:var v=ds;ds=G0(s.stateNode.containerInfo),Sc(s,l,f),ds=v;break;case 22:s.memoizedState===null&&(v=s.alternate,v!==null&&v.memoizedState!==null?(v=hh,hh=16777216,Sc(s,l,f),hh=v):Sc(s,l,f));break;default:Sc(s,l,f)}}function Fy(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function dh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];Ui=v,Iy(v,s)}Fy(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ky(s),s=s.sibling}function ky(s){switch(s.tag){case 0:case 11:case 15:dh(s),s.flags&2048&&ga(9,s,s.return);break;case 3:dh(s);break;case 12:dh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,b0(s)):dh(s);break;default:dh(s)}}function b0(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var v=l[f];Ui=v,Iy(v,s)}Fy(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:ga(8,l,l.return),b0(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,b0(l));break;default:b0(l)}s=s.sibling}}function Iy(s,l){for(;Ui!==null;){var f=Ui;switch(f.tag){case 0:case 11:case 15:ga(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var v=f.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:If(f.memoizedState.cache)}if(v=f.child,v!==null)v.return=f,Ui=v;else t:for(f=s;Ui!==null;){v=Ui;var C=v.sibling,S=v.return;if(dp(v),v===f){Ui=null;break t}if(C!==null){C.return=S,Ui=C;break t}Ui=S}}}var UC={getCacheForType:function(s){var l=Ki(Ri),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f},cacheSignal:function(){return Ki(Ri).controller.signal}},$C=typeof WeakMap=="function"?WeakMap:Map,Dn=0,Vn=null,on=null,cn=0,On=0,ho=null,il=!1,Tc=!1,vp=!1,ps=0,ui=0,rl=0,su=0,yp=0,go=0,Ac=0,gh=null,Hr=null,wp=!1,ph=0,Hy=0,au=1/0,B0=null,ol=null,Hi=0,sl=null,Dc=null,ya=0,xp=0,Cp=null,Ny=null,mh=0,Ep=null;function po(){return(Dn&2)!==0&&cn!==0?cn&-cn:P.T!==null?mo():Cd()}function Gy(){if(go===0)if((cn&536870912)===0||hn){var s=kl;kl<<=1,(kl&3932160)===0&&(kl=262144),go=s}else go=536870912;return s=lo.current,s!==null&&(s.flags|=32),go}function Nr(s,l,f){(s===Vn&&(On===2||On===9)||s.cancelPendingCommit!==null)&&(bc(s,0),wa(s,cn,go,!1)),Nl(s,f),((Dn&2)===0||s!==Vn)&&(s===Vn&&((Dn&2)===0&&(su|=f),ui===4&&wa(s,cn,go,!1)),Gs(s))}function zy(s,l,f){if((Dn&6)!==0)throw Error(r(327));var v=!f&&(l&127)===0&&(l&s.expiredLanes)===0||Hl(s,l),C=v?WC(s,l):Tp(s,l,!0),S=v;do{if(C===0){Tc&&!v&&wa(s,l,0,!1);break}else{if(f=s.current.alternate,S&&!Uy(f)){C=Tp(s,l,!1),S=!1;continue}if(C===2){if(S=l,s.errorRecoveryDisabledLanes&S)var L=0;else L=s.pendingLanes&-536870913,L=L!==0?L:L&536870912?536870912:0;if(L!==0){l=L;t:{var X=s;C=gh;var at=X.current.memoizedState.isDehydrated;if(at&&(bc(X,L).flags|=256),L=Tp(X,L,!1),L!==2){if(vp&&!at){X.errorRecoveryDisabledLanes|=S,su|=S,C=4;break t}S=Hr,Hr=C,S!==null&&(Hr===null?Hr=S:Hr.push.apply(Hr,S))}C=L}if(S=!1,C!==2)continue}}if(C===1){bc(s,0),wa(s,l,0,!0);break}t:{switch(v=s,S=C,S){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:wa(v,l,go,!il);break t;case 2:Hr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(C=ph+300-Fn(),10<C)){if(wa(v,l,go,!il),_u(v,0,!0)!==0)break t;ya=l,v.timeoutHandle=s2(jy.bind(null,v,f,Hr,B0,wp,l,go,su,Ac,il,S,"Throttled",-0,0),C);break t}jy(v,f,Hr,B0,wp,l,go,su,Ac,il,S,null,-0,0)}}break}while(!0);Gs(s)}function jy(s,l,f,v,C,S,L,X,at,bt,kt,zt,Bt,Ot){if(s.timeoutHandle=-1,zt=l.subtreeFlags,zt&8192||(zt&16785408)===16785408){zt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},_y(l,S,zt);var ce=(S&62914560)===S?ph-Fn():(S&4194048)===S?Hy-Fn():0;if(ce=hE(zt,ce),ce!==null){ya=S,s.cancelPendingCommit=ce(Yy.bind(null,s,l,S,f,v,C,L,X,at,kt,zt,null,Bt,Ot)),wa(s,S,L,!bt);return}}Yy(s,l,S,f,v,C,L,X,at)}function Uy(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var v=0;v<f.length;v++){var C=f[v],S=C.getSnapshot;C=C.value;try{if(!ai(S(),C))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function wa(s,l,f,v){l&=~yp,l&=~su,s.suspendedLanes|=l,s.pingedLanes&=~l,v&&(s.warmLanes|=l),v=s.expirationTimes;for(var C=l;0<C;){var S=31-Ei(C),L=1<<S;v[S]=-1,C&=~L}f!==0&&Fu(s,f,l)}function P0(){return(Dn&6)===0?(Ch(0),!1):!0}function Sp(){if(on!==null){if(On===0)var s=on.return;else s=on,la=Ve=null,O1(s),uc=null,ao=0,s=on;for(;s!==null;)S0(s.alternate,s),s=s.return;on=null}}function bc(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,eE(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),ya=0,Sp(),Vn=s,on=f=Po(s.current,null),cn=l,On=0,ho=null,il=!1,Tc=Hl(s,l),vp=!1,Ac=go=yp=su=rl=ui=0,Hr=gh=null,wp=!1,(l&8)!==0&&(l|=l&32);var v=s.entangledLanes;if(v!==0)for(s=s.entanglements,v&=l;0<v;){var C=31-Ei(v),S=1<<C;l|=s[C],v&=~S}return ps=l,rs(),f}function $y(s,l){We=null,P.H=tl,l===lc||l===Nf?(l=iy(),On=3):l===Kd?(l=iy(),On=4):On=l===eh?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ho=l,on===null&&(ui=1,th(s,oo(l,s.current)))}function vh(){var s=lo.current;return s===null?!0:(cn&4194048)===cn?Io===null:(cn&62914560)===cn||(cn&536870912)!==0?s===Io:!1}function Vy(){var s=P.H;return P.H=tl,s===null?tl:s}function Wy(){var s=P.A;return P.A=UC,s}function M0(){ui=4,il||(cn&4194048)!==cn&&lo.current!==null||(Tc=!0),(rl&134217727)===0&&(su&134217727)===0||Vn===null||wa(Vn,cn,go,!1)}function Tp(s,l,f){var v=Dn;Dn|=2;var C=Vy(),S=Wy();(Vn!==s||cn!==l)&&(B0=null,bc(s,l)),l=!1;var L=ui;t:do try{if(On!==0&&on!==null){var X=on,at=ho;switch(On){case 8:Sp(),L=6;break t;case 3:case 2:case 9:case 6:lo.current===null&&(l=!0);var bt=On;if(On=0,ho=null,Bc(s,X,at,bt),f&&Tc){L=0;break t}break;default:bt=On,On=0,ho=null,Bc(s,X,at,bt)}}VC(),L=ui;break}catch(kt){$y(s,kt)}while(!0);return l&&s.shellSuspendCounter++,la=Ve=null,Dn=v,P.H=C,P.A=S,on===null&&(Vn=null,cn=0,rs()),L}function VC(){for(;on!==null;)Xy(on)}function WC(s,l){var f=Dn;Dn|=2;var v=Vy(),C=Wy();Vn!==s||cn!==l?(B0=null,au=Fn()+500,bc(s,l)):Tc=Hl(s,l);t:do try{if(On!==0&&on!==null){l=on;var S=ho;e:switch(On){case 1:On=0,ho=null,Bc(s,l,S,1);break;case 2:case 9:if(ny(S)){On=0,ho=null,qy(l);break}l=function(){On!==2&&On!==9||Vn!==s||(On=7),Gs(s)},S.then(l,l);break t;case 3:On=7;break t;case 4:On=5;break t;case 7:ny(S)?(On=0,ho=null,qy(l)):(On=0,ho=null,Bc(s,l,S,7));break;case 5:var L=null;switch(on.tag){case 26:L=on.memoizedState;case 5:case 27:var X=on;if(L?x2(L):X.stateNode.complete){On=0,ho=null;var at=X.sibling;if(at!==null)on=at;else{var bt=X.return;bt!==null?(on=bt,R0(bt)):on=null}break e}}On=0,ho=null,Bc(s,l,S,5);break;case 6:On=0,ho=null,Bc(s,l,S,6);break;case 8:Sp(),ui=6;break t;default:throw Error(r(462))}}XC();break}catch(kt){$y(s,kt)}while(!0);return la=Ve=null,P.H=v,P.A=C,Dn=f,on!==null?0:(Vn=null,cn=0,rs(),ui)}function XC(){for(;on!==null&&!Qe();)Xy(on)}function Xy(s){var l=Sy(s.alternate,s,ps);s.memoizedProps=s.pendingProps,l===null?R0(s):on=l}function qy(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=xy(f,l,l.pendingProps,l.type,void 0,cn);break;case 11:l=xy(f,l,l.pendingProps,l.type.render,l.ref,cn);break;case 5:O1(l);default:S0(f,l),l=on=Zv(l,ps),l=Sy(f,l,ps)}s.memoizedProps=s.pendingProps,l===null?R0(s):on=l}function Bc(s,l,f,v){la=Ve=null,O1(l),uc=null,ao=0;var C=l.return;try{if(ep(s,C,l,f,cn)){ui=1,th(s,oo(f,s.current)),on=null;return}}catch(S){if(C!==null)throw on=C,S;ui=1,th(s,oo(f,s.current)),on=null;return}l.flags&32768?(hn||v===1?s=!0:Tc||(cn&536870912)!==0?s=!1:(il=s=!0,(v===2||v===9||v===3||v===6)&&(v=lo.current,v!==null&&v.tag===13&&(v.flags|=16384))),yh(l,s)):R0(l)}function R0(s){var l=s;do{if((l.flags&32768)!==0){yh(l,il);return}s=l.return;var f=Ty(l.alternate,l,ps);if(f!==null){on=f;return}if(l=l.sibling,l!==null){on=l;return}on=l=s}while(l!==null);ui===0&&(ui=5)}function yh(s,l){do{var f=uh(s.alternate,s);if(f!==null){f.flags&=32767,on=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){on=s;return}on=s=f}while(s!==null);ui=6,on=null}function Yy(s,l,f,v,C,S,L,X,at){s.cancelPendingCommit=null;do wh();while(Hi!==0);if((Dn&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(S=l.lanes|l.childLanes,S|=Ju,i1(s,f,S,L,X,at),s===Vn&&(on=Vn=null,cn=0),Dc=l,sl=s,ya=f,xp=S,Cp=C,Ny=v,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,KC(An,function(){return Bp(),null})):(s.callbackNode=null,s.callbackPriority=0),v=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||v){v=P.T,P.T=null,C=_.p,_.p=2,L=Dn,Dn|=4;try{zC(s,l,f)}finally{Dn=L,_.p=C,P.T=v}}Hi=1,Ap(),Dp(),O0()}}function Ap(){if(Hi===1){Hi=0;var s=sl,l=Dc,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var v=_.p;_.p=2;var C=Dn;Dn|=4;try{Ry(l,s);var S=Np,L=Xv(s.containerInfo),X=S.focusedElem,at=S.selectionRange;if(L!==X&&X&&X.ownerDocument&&Wv(X.ownerDocument.documentElement,X)){if(at!==null&&E1(X)){var bt=at.start,kt=at.end;if(kt===void 0&&(kt=bt),"selectionStart"in X)X.selectionStart=bt,X.selectionEnd=Math.min(kt,X.value.length);else{var zt=X.ownerDocument||document,Bt=zt&&zt.defaultView||window;if(Bt.getSelection){var Ot=Bt.getSelection(),ce=X.textContent.length,Be=Math.min(at.start,ce),Nn=at.end===void 0?Be:Math.min(at.end,ce);!Ot.extend&&Be>Nn&&(L=Nn,Nn=Be,Be=L);var Ct=Vv(X,Be),dt=Vv(X,Nn);if(Ct&&dt&&(Ot.rangeCount!==1||Ot.anchorNode!==Ct.node||Ot.anchorOffset!==Ct.offset||Ot.focusNode!==dt.node||Ot.focusOffset!==dt.offset)){var Dt=zt.createRange();Dt.setStart(Ct.node,Ct.offset),Ot.removeAllRanges(),Be>Nn?(Ot.addRange(Dt),Ot.extend(dt.node,dt.offset)):(Dt.setEnd(dt.node,dt.offset),Ot.addRange(Dt))}}}}for(zt=[],Ot=X;Ot=Ot.parentNode;)Ot.nodeType===1&&zt.push({element:Ot,left:Ot.scrollLeft,top:Ot.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<zt.length;X++){var Gt=zt[X];Gt.element.scrollLeft=Gt.left,Gt.element.scrollTop=Gt.top}}W0=!!Ah,Np=Ah=null}finally{Dn=C,_.p=v,P.T=f}}s.current=l,Hi=2}}function Dp(){if(Hi===2){Hi=0;var s=sl,l=Dc,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var v=_.p;_.p=2;var C=Dn;Dn|=4;try{hp(s,l.alternate,l)}finally{Dn=C,_.p=v,P.T=f}}Hi=3}}function O0(){if(Hi===4||Hi===3){Hi=0,ti();var s=sl,l=Dc,f=ya,v=Ny;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Hi=5:(Hi=0,Dc=sl=null,bp(s,s.pendingLanes));var C=s.pendingLanes;if(C===0&&(ol=null),Sf(f),l=l.stateNode,di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Qr,l,void 0,(l.current.flags&128)===128)}catch{}if(v!==null){l=P.T,C=_.p,_.p=2,P.T=null;try{for(var S=s.onRecoverableError,L=0;L<v.length;L++){var X=v[L];S(X.value,{componentStack:X.stack})}}finally{P.T=l,_.p=C}}(ya&3)!==0&&wh(),Gs(s),C=s.pendingLanes,(f&261930)!==0&&(C&42)!==0?s===Ep?mh++:(mh=0,Ep=s):mh=0,Ch(0)}}function bp(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,If(l)))}function wh(){return Ap(),Dp(),O0(),Bp()}function Bp(){if(Hi!==5)return!1;var s=sl,l=xp;xp=0;var f=Sf(ya),v=P.T,C=_.p;try{_.p=32>f?32:f,P.T=null,f=Cp,Cp=null;var S=sl,L=ya;if(Hi=0,Dc=sl=null,ya=0,(Dn&6)!==0)throw Error(r(331));var X=Dn;if(Dn|=4,ky(S.current),Ly(S,S.current,L,f),Dn=X,Ch(0,!1),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Qr,S)}catch{}return!0}finally{_.p=C,P.T=v,bp(s,l)}}function Pp(s,l,f){l=oo(f,l),l=tp(s.stateNode,l,2),s=ls(s,l,2),s!==null&&(Nl(s,2),Gs(s))}function Ln(s,l,f){if(s.tag===3)Pp(s,s,f);else for(;l!==null;){if(l.tag===3){Pp(l,s,f);break}else if(l.tag===1){var v=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(ol===null||!ol.has(v))){s=oo(f,s),f=Is(2),v=ls(l,f,2),v!==null&&(m0(f,v,l,s),Nl(v,2),Gs(v));break}}l=l.return}}function Mp(s,l,f){var v=s.pingCache;if(v===null){v=s.pingCache=new $C;var C=new Set;v.set(l,C)}else C=v.get(l),C===void 0&&(C=new Set,v.set(l,C));C.has(f)||(vp=!0,C.add(f),s=qC.bind(null,s,l,f),l.then(s,s))}function qC(s,l,f){var v=s.pingCache;v!==null&&v.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Vn===s&&(cn&f)===f&&(ui===4||ui===3&&(cn&62914560)===cn&&300>Fn()-ph?(Dn&2)===0&&bc(s,0):yp|=f,Ac===cn&&(Ac=0)),Gs(s)}function xh(s,l){l===0&&(l=Cf()),s=Os(s,l),s!==null&&(Nl(s,l),Gs(s))}function L0(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),xh(s,f)}function YC(s,l){var f=0;switch(s.tag){case 31:case 13:var v=s.stateNode,C=s.memoizedState;C!==null&&(f=C.retryLane);break;case 19:v=s.stateNode;break;case 22:v=s.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(l),xh(s,f)}function KC(s,l){return Re(s,l)}var Pc=null,lu=null,Rp=!1,_0=!1,Op=!1,al=0;function Gs(s){s!==lu&&s.next===null&&(lu===null?Pc=lu=s:lu=lu.next=s),_0=!0,Rp||(Rp=!0,QC())}function Ch(s,l){if(!Op&&_0){Op=!0;do for(var f=!1,v=Pc;v!==null;){if(s!==0){var C=v.pendingLanes;if(C===0)var S=0;else{var L=v.suspendedLanes,X=v.pingedLanes;S=(1<<31-Ei(42|s)+1)-1,S&=C&~(L&~X),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(f=!0,Jy(v,S))}else S=cn,S=_u(v,v===Vn?S:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(S&3)===0||Hl(v,S)||(f=!0,Jy(v,S));v=v.next}while(f);Op=!1}}function ZC(){Ky()}function Ky(){_0=Rp=!1;var s=0;al!==0&&tE()&&(s=al);for(var l=Fn(),f=null,v=Pc;v!==null;){var C=v.next,S=Zy(v,l);S===0?(v.next=null,f===null?Pc=C:f.next=C,C===null&&(lu=f)):(f=v,(s!==0||(S&3)!==0)&&(_0=!0)),v=C}Hi!==0&&Hi!==5||Ch(s),al!==0&&(al=0)}function Zy(s,l){for(var f=s.suspendedLanes,v=s.pingedLanes,C=s.expirationTimes,S=s.pendingLanes&-62914561;0<S;){var L=31-Ei(S),X=1<<L,at=C[L];at===-1?((X&f)===0||(X&v)!==0)&&(C[L]=n1(X,l)):at<=l&&(s.expiredLanes|=X),S&=~X}if(l=Vn,f=cn,f=_u(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v=s.callbackNode,f===0||s===l&&(On===2||On===9)||s.cancelPendingCommit!==null)return v!==null&&v!==null&&ve(v),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||Hl(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(v!==null&&ve(v),Sf(f)){case 2:case 8:f=ji;break;case 32:f=An;break;case 268435456:f=Zr;break;default:f=An}return v=Qy.bind(null,s),f=Re(f,v),s.callbackPriority=l,s.callbackNode=f,l}return v!==null&&v!==null&&ve(v),s.callbackPriority=2,s.callbackNode=null,2}function Qy(s,l){if(Hi!==0&&Hi!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(wh()&&s.callbackNode!==f)return null;var v=cn;return v=_u(s,s===Vn?v:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),v===0?null:(zy(s,v,l),Zy(s,Fn()),s.callbackNode!=null&&s.callbackNode===f?Qy.bind(null,s):null)}function Jy(s,l){if(wh())return null;zy(s,l,!0)}function QC(){l2(function(){(Dn&6)!==0?Re(Br,ZC):Ky()})}function mo(){if(al===0){var s=sc;s===0&&(s=Jr,Jr<<=1,(Jr&261888)===0&&(Jr=256)),al=s}return al}function t2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:zl(""+s)}function e2(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function uu(s,l,f,v,C){if(l==="submit"&&f&&f.stateNode===C){var S=t2((C[or]||null).action),L=v.submitter;L&&(l=(l=L[or]||null)?t2(l.formAction):L.getAttribute("formAction"),l!==null&&(S=l,L=null));var X=new Pd("action","action",null,v,C);s.push({event:X,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(al!==0){var at=L?e2(C,L):new FormData(C);Ja(f,{pending:!0,data:at,method:C.method,action:S},null,at)}}else typeof S=="function"&&(X.preventDefault(),at=L?e2(C,L):new FormData(C),Ja(f,{pending:!0,data:at,method:C.method,action:S},S,at))},currentTarget:C}]})}}for(var Ge=0;Ge<Ud.length;Ge++){var Lp=Ud[Ge],Gr=Lp.toLowerCase(),Di=Lp[0].toUpperCase()+Lp.slice(1);Rr(Gr,"on"+Di)}Rr(ro,"onAnimationEnd"),Rr(Of,"onAnimationIteration"),Rr(qv,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Zu,"onTransitionRun"),Rr(zd,"onTransitionStart"),Rr(jd,"onTransitionCancel"),Rr(bn,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),to("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),to("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),to("onBeforeInput",["compositionend","keypress","textInput","paste"]),to("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),to("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),to("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ll=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Eh));function n2(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var v=s[f],C=v.event;v=v.listeners;t:{var S=void 0;if(l)for(var L=v.length-1;0<=L;L--){var X=v[L],at=X.instance,bt=X.currentTarget;if(X=X.listener,at!==S&&C.isPropagationStopped())break t;S=X,C.currentTarget=bt;try{S(C)}catch(kt){$d(kt)}C.currentTarget=null,S=at}else for(L=0;L<v.length;L++){if(X=v[L],at=X.instance,bt=X.currentTarget,X=X.listener,at!==S&&C.isPropagationStopped())break t;S=X,C.currentTarget=bt;try{S(C)}catch(kt){$d(kt)}C.currentTarget=null,S=at}}}}function sn(s,l){var f=l[Hu];f===void 0&&(f=l[Hu]=new Set);var v=s+"__bubble";f.has(v)||(k0(l,s,2,!1),f.add(v))}function _p(s,l,f){var v=0;l&&(v|=4),k0(f,s,v,l)}var F0="_reactListening"+Math.random().toString(36).slice(2);function Fp(s){if(!s[F0]){s[F0]=!0,ea.forEach(function(f){f!=="selectionchange"&&(ll.has(f)||_p(f,!1,s),_p(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[F0]||(l[F0]=!0,_p("selectionchange",!1,l))}}function k0(s,l,f,v){switch(B2(l)){case 2:var C=gE;break;case 8:C=pE;break;default:C=Xp}f=C.bind(null,l,f,s),C=void 0,!c1||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(C=!0),v?C!==void 0?s.addEventListener(l,f,{capture:!0,passive:C}):s.addEventListener(l,f,!0):C!==void 0?s.addEventListener(l,f,{passive:C}):s.addEventListener(l,f,!1)}function kp(s,l,f,v,C){var S=v;if((l&1)===0&&(l&2)===0&&v!==null)t:for(;;){if(v===null)return;var L=v.tag;if(L===3||L===4){var X=v.stateNode.containerInfo;if(X===C)break;if(L===4)for(L=v.return;L!==null;){var at=L.tag;if((at===3||at===4)&&L.stateNode.containerInfo===C)return;L=L.return}for(;X!==null;){if(L=Ha(X),L===null)return;if(at=L.tag,at===5||at===6||at===26||at===27){v=S=L;continue t}X=X.parentNode}}v=v.return}Mv(function(){var bt=S,kt=l1(f),zt=[];t:{var Bt=Yv.get(s);if(Bt!==void 0){var Ot=Pd,ce=s;switch(s){case"keypress":if(bd(f)===0)break t;case"keydown":case"keyup":Ot=ja;break;case"focusin":ce="focus",Ot=Rd;break;case"focusout":ce="blur",Ot=Rd;break;case"beforeblur":case"afterblur":Ot=Rd;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ot=Md;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ot=Ov;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ot=SC;break;case ro:case Of:case qv:Ot=Fv;break;case bn:Ot=AC;break;case"scroll":case"scrollend":Ot=xC;break;case"wheel":Ot=Ld;break;case"copy":case"cut":case"paste":Ot=eo;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ot=Hv;break;case"toggle":case"beforetoggle":Ot=DC}var Be=(l&4)!==0,Nn=!Be&&(s==="scroll"||s==="scrollend"),Ct=Be?Bt!==null?Bt+"Capture":null:Bt;Be=[];for(var dt=bt,Dt;dt!==null;){var Gt=dt;if(Dt=Gt.stateNode,Gt=Gt.tag,Gt!==5&&Gt!==26&&Gt!==27||Dt===null||Ct===null||(Gt=Ul(dt,Ct),Gt!=null&&Be.push(vo(dt,Gt,Dt))),Nn)break;dt=dt.return}0<Be.length&&(Bt=new Ot(Bt,ce,null,f,kt),zt.push({event:Bt,listeners:Be}))}}if((l&7)===0){t:{if(Bt=s==="mouseover"||s==="pointerover",Ot=s==="mouseout"||s==="pointerout",Bt&&f!==$u&&(ce=f.relatedTarget||f.fromElement)&&(Ha(ce)||ce[Ia]))break t;if((Ot||Bt)&&(Bt=kt.window===kt?kt:(Bt=kt.ownerDocument)?Bt.defaultView||Bt.parentWindow:window,Ot?(ce=f.relatedTarget||f.toElement,Ot=bt,ce=ce?Ha(ce):null,ce!==null&&(Nn=a(ce),Be=ce.tag,ce!==Nn||Be!==5&&Be!==27&&Be!==6)&&(ce=null)):(Ot=null,ce=bt),Ot!==ce)){if(Be=Md,Gt="onMouseLeave",Ct="onMouseEnter",dt="mouse",(s==="pointerout"||s==="pointerover")&&(Be=Hv,Gt="onPointerLeave",Ct="onPointerEnter",dt="pointer"),Nn=Ot==null?Bt:Na(Ot),Dt=ce==null?Bt:Na(ce),Bt=new Be(Gt,dt+"leave",Ot,f,kt),Bt.target=Nn,Bt.relatedTarget=Dt,Gt=null,Ha(kt)===bt&&(Be=new Be(Ct,dt+"enter",ce,f,kt),Be.target=Dt,Be.relatedTarget=Nn,Gt=Be),Nn=Gt,Ot&&ce)e:{for(Be=I0,Ct=Ot,dt=ce,Dt=0,Gt=Ct;Gt;Gt=Be(Gt))Dt++;Gt=0;for(var Ee=dt;Ee;Ee=Be(Ee))Gt++;for(;0<Dt-Gt;)Ct=Be(Ct),Dt--;for(;0<Gt-Dt;)dt=Be(dt),Gt--;for(;Dt--;){if(Ct===dt||dt!==null&&Ct===dt.alternate){Be=Ct;break e}Ct=Be(Ct),dt=Be(dt)}Be=null}else Be=null;Ot!==null&&ri(zt,Bt,Ot,Be,!1),ce!==null&&Nn!==null&&ri(zt,Nn,ce,Be,!0)}}t:{if(Bt=bt?Na(bt):window,Ot=Bt.nodeName&&Bt.nodeName.toLowerCase(),Ot==="select"||Ot==="input"&&Bt.type==="file")var Cn=Uv;else if(v1(Bt))if(Xl)Cn=MC;else{Cn=BC;var pe=Nd}else Ot=Bt.nodeName,!Ot||Ot.toLowerCase()!=="input"||Bt.type!=="checkbox"&&Bt.type!=="radio"?bt&&ju(bt.elementType)&&(Cn=Uv):Cn=PC;if(Cn&&(Cn=Cn(s,bt))){y1(zt,Cn,f,kt);break t}pe&&pe(s,Bt,bt),s==="focusout"&&bt&&Bt.type==="number"&&bt.memoizedProps.value!=null&&$e(Bt,"number",Bt.value)}switch(pe=bt?Na(bt):window,s){case"focusin":(v1(pe)||pe.contentEditable==="true")&&(yt=pe,Ft=bt,Mt=null);break;case"focusout":Mt=Ft=yt=null;break;case"mousedown":oe=!0;break;case"contextmenu":case"mouseup":case"dragend":oe=!1,Ne(zt,f,kt);break;case"selectionchange":if(Ku)break;case"keydown":case"keyup":Ne(zt,f,kt)}var Ke;if(_d)t:{switch(s){case"compositionstart":var fn="onCompositionStart";break t;case"compositionend":fn="onCompositionEnd";break t;case"compositionupdate":fn="onCompositionUpdate";break t}fn=void 0}else Wl?kd(s,f)&&(fn="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(fn="onCompositionStart");fn&&(p1&&f.locale!=="ko"&&(Wl||fn!=="onCompositionStart"?fn==="onCompositionEnd"&&Wl&&(Ke=Un()):(Ga=kt,f1="value"in Ga?Ga.value:Ga.textContent,Wl=!0)),pe=Sh(bt,fn),0<pe.length&&(fn=new no(fn,s,null,f,kt),zt.push({event:fn,listeners:pe}),Ke?fn.data=Ke:(Ke=jv(f),Ke!==null&&(fn.data=Ke)))),(Ke=g1?io(s,f):m1(s,f))&&(fn=Sh(bt,"onBeforeInput"),0<fn.length&&(pe=new no("onBeforeInput","beforeinput",null,f,kt),zt.push({event:pe,listeners:fn}),pe.data=Ke)),uu(zt,s,bt,f,kt)}n2(zt,l)})}function vo(s,l,f){return{instance:s,listener:l,currentTarget:f}}function Sh(s,l){for(var f=l+"Capture",v=[];s!==null;){var C=s,S=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||S===null||(C=Ul(s,f),C!=null&&v.unshift(vo(s,C,S)),C=Ul(s,l),C!=null&&v.push(vo(s,C,S))),s.tag===3)return v;s=s.return}return[]}function I0(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ri(s,l,f,v,C){for(var S=l._reactName,L=[];f!==null&&f!==v;){var X=f,at=X.alternate,bt=X.stateNode;if(X=X.tag,at!==null&&at===v)break;X!==5&&X!==26&&X!==27||bt===null||(at=bt,C?(bt=Ul(f,S),bt!=null&&L.unshift(vo(f,bt,at))):C||(bt=Ul(f,S),bt!=null&&L.push(vo(f,bt,at)))),f=f.return}L.length!==0&&s.push({event:l,listeners:L})}var vi=/\r\n?/g,i2=/\u0000|\uFFFD/g;function r2(s){return(typeof s=="string"?s:""+s).replace(vi,`
`).replace(i2,"")}function o2(s,l){return l=r2(l),r2(s)===l}function Hn(s,l,f,v,C,S){switch(f){case"children":typeof v=="string"?l==="body"||l==="textarea"&&v===""||wn(s,v):(typeof v=="number"||typeof v=="bigint")&&l!=="body"&&wn(s,""+v);break;case"className":Y(s,"class",v);break;case"tabIndex":Y(s,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Y(s,f,v);break;case"style":zu(s,v,S);break;case"data":if(l!=="object"){Y(s,"data",v);break}case"src":case"href":if(v===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=zl(""+v),s.setAttribute(f,v);break;case"action":case"formAction":if(typeof v=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(f==="formAction"?(l!=="input"&&Hn(s,l,"name",C.name,C,null),Hn(s,l,"formEncType",C.formEncType,C,null),Hn(s,l,"formMethod",C.formMethod,C,null),Hn(s,l,"formTarget",C.formTarget,C,null)):(Hn(s,l,"encType",C.encType,C,null),Hn(s,l,"method",C.method,C,null),Hn(s,l,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){s.removeAttribute(f);break}v=zl(""+v),s.setAttribute(f,v);break;case"onClick":v!=null&&(s.onclick=ns);break;case"onScroll":v!=null&&sn("scroll",s);break;case"onScrollEnd":v!=null&&sn("scrollend",s);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":s.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){s.removeAttribute("xlink:href");break}f=zl(""+v),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""+v):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":v===!0?s.setAttribute(f,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?s.setAttribute(f,v):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?s.setAttribute(f,v):s.removeAttribute(f);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?s.removeAttribute(f):s.setAttribute(f,v);break;case"popover":sn("beforetoggle",s),sn("toggle",s),Gu(s,"popover",v);break;case"xlinkActuate":lt(s,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":lt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":lt(s,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":lt(s,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":lt(s,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":lt(s,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":lt(s,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":lt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":lt(s,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":Gu(s,"is",v);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Uu.get(f)||f,Gu(s,f,v))}}function Ip(s,l,f,v,C,S){switch(f){case"style":zu(s,v,S);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(f=v.__html,f!=null){if(C.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof v=="string"?wn(s,v):(typeof v=="number"||typeof v=="bigint")&&wn(s,""+v);break;case"onScroll":v!=null&&sn("scroll",s);break;case"onScrollEnd":v!=null&&sn("scrollend",s);break;case"onClick":v!=null&&(s.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Td.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(C=f.endsWith("Capture"),l=f.slice(2,C?f.length-7:void 0),S=s[or]||null,S=S!=null?S[f]:null,typeof S=="function"&&s.removeEventListener(l,S,C),typeof v=="function")){typeof S!="function"&&S!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,v,C);break t}f in s?s[f]=v:v===!0?s.setAttribute(f,""):Gu(s,f,v)}}}function Ji(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sn("error",s),sn("load",s);var v=!1,C=!1,S;for(S in f)if(f.hasOwnProperty(S)){var L=f[S];if(L!=null)switch(S){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Hn(s,l,S,L,f,null)}}C&&Hn(s,l,"srcSet",f.srcSet,f,null),v&&Hn(s,l,"src",f.src,f,null);return;case"input":sn("invalid",s);var X=S=L=C=null,at=null,bt=null;for(v in f)if(f.hasOwnProperty(v)){var kt=f[v];if(kt!=null)switch(v){case"name":C=kt;break;case"type":L=kt;break;case"checked":at=kt;break;case"defaultChecked":bt=kt;break;case"value":S=kt;break;case"defaultValue":X=kt;break;case"children":case"dangerouslySetInnerHTML":if(kt!=null)throw Error(r(137,l));break;default:Hn(s,l,v,kt,f,null)}}ue(s,S,X,at,bt,L,C,!1);return;case"select":sn("invalid",s),v=L=S=null;for(C in f)if(f.hasOwnProperty(C)&&(X=f[C],X!=null))switch(C){case"value":S=X;break;case"defaultValue":L=X;break;case"multiple":v=X;default:Hn(s,l,C,X,f,null)}l=S,f=L,s.multiple=!!v,l!=null?tn(s,!!v,l,!1):f!=null&&tn(s,!!v,f,!0);return;case"textarea":sn("invalid",s),S=C=v=null;for(L in f)if(f.hasOwnProperty(L)&&(X=f[L],X!=null))switch(L){case"value":v=X;break;case"defaultValue":C=X;break;case"children":S=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(91));break;default:Hn(s,l,L,X,f,null)}Zn(s,v,C,S);return;case"option":for(at in f)if(f.hasOwnProperty(at)&&(v=f[at],v!=null))switch(at){case"selected":s.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:Hn(s,l,at,v,f,null)}return;case"dialog":sn("beforetoggle",s),sn("toggle",s),sn("cancel",s),sn("close",s);break;case"iframe":case"object":sn("load",s);break;case"video":case"audio":for(v=0;v<Eh.length;v++)sn(Eh[v],s);break;case"image":sn("error",s),sn("load",s);break;case"details":sn("toggle",s);break;case"embed":case"source":case"link":sn("error",s),sn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(bt in f)if(f.hasOwnProperty(bt)&&(v=f[bt],v!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Hn(s,l,bt,v,f,null)}return;default:if(ju(l)){for(kt in f)f.hasOwnProperty(kt)&&(v=f[kt],v!==void 0&&Ip(s,l,kt,v,f,void 0));return}}for(X in f)f.hasOwnProperty(X)&&(v=f[X],v!=null&&Hn(s,l,X,v,f,null))}function JC(s,l,f,v){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,S=null,L=null,X=null,at=null,bt=null,kt=null;for(Ot in f){var zt=f[Ot];if(f.hasOwnProperty(Ot)&&zt!=null)switch(Ot){case"checked":break;case"value":break;case"defaultValue":at=zt;default:v.hasOwnProperty(Ot)||Hn(s,l,Ot,null,v,zt)}}for(var Bt in v){var Ot=v[Bt];if(zt=f[Bt],v.hasOwnProperty(Bt)&&(Ot!=null||zt!=null))switch(Bt){case"type":S=Ot;break;case"name":C=Ot;break;case"checked":bt=Ot;break;case"defaultChecked":kt=Ot;break;case"value":L=Ot;break;case"defaultValue":X=Ot;break;case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(r(137,l));break;default:Ot!==zt&&Hn(s,l,Bt,Ot,v,zt)}}Jt(s,L,X,at,bt,kt,S,C);return;case"select":Ot=L=X=Bt=null;for(S in f)if(at=f[S],f.hasOwnProperty(S)&&at!=null)switch(S){case"value":break;case"multiple":Ot=at;default:v.hasOwnProperty(S)||Hn(s,l,S,null,v,at)}for(C in v)if(S=v[C],at=f[C],v.hasOwnProperty(C)&&(S!=null||at!=null))switch(C){case"value":Bt=S;break;case"defaultValue":X=S;break;case"multiple":L=S;default:S!==at&&Hn(s,l,C,S,v,at)}l=X,f=L,v=Ot,Bt!=null?tn(s,!!f,Bt,!1):!!v!=!!f&&(l!=null?tn(s,!!f,l,!0):tn(s,!!f,f?[]:"",!1));return;case"textarea":Ot=Bt=null;for(X in f)if(C=f[X],f.hasOwnProperty(X)&&C!=null&&!v.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Hn(s,l,X,null,v,C)}for(L in v)if(C=v[L],S=f[L],v.hasOwnProperty(L)&&(C!=null||S!=null))switch(L){case"value":Bt=C;break;case"defaultValue":Ot=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==S&&Hn(s,l,L,C,v,S)}mn(s,Bt,Ot);return;case"option":for(var ce in f)if(Bt=f[ce],f.hasOwnProperty(ce)&&Bt!=null&&!v.hasOwnProperty(ce))switch(ce){case"selected":s.selected=!1;break;default:Hn(s,l,ce,null,v,Bt)}for(at in v)if(Bt=v[at],Ot=f[at],v.hasOwnProperty(at)&&Bt!==Ot&&(Bt!=null||Ot!=null))switch(at){case"selected":s.selected=Bt&&typeof Bt!="function"&&typeof Bt!="symbol";break;default:Hn(s,l,at,Bt,v,Ot)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Be in f)Bt=f[Be],f.hasOwnProperty(Be)&&Bt!=null&&!v.hasOwnProperty(Be)&&Hn(s,l,Be,null,v,Bt);for(bt in v)if(Bt=v[bt],Ot=f[bt],v.hasOwnProperty(bt)&&Bt!==Ot&&(Bt!=null||Ot!=null))switch(bt){case"children":case"dangerouslySetInnerHTML":if(Bt!=null)throw Error(r(137,l));break;default:Hn(s,l,bt,Bt,v,Ot)}return;default:if(ju(l)){for(var Nn in f)Bt=f[Nn],f.hasOwnProperty(Nn)&&Bt!==void 0&&!v.hasOwnProperty(Nn)&&Ip(s,l,Nn,void 0,v,Bt);for(kt in v)Bt=v[kt],Ot=f[kt],!v.hasOwnProperty(kt)||Bt===Ot||Bt===void 0&&Ot===void 0||Ip(s,l,kt,Bt,v,Ot);return}}for(var Ct in f)Bt=f[Ct],f.hasOwnProperty(Ct)&&Bt!=null&&!v.hasOwnProperty(Ct)&&Hn(s,l,Ct,null,v,Bt);for(zt in v)Bt=v[zt],Ot=f[zt],!v.hasOwnProperty(zt)||Bt===Ot||Bt==null&&Ot==null||Hn(s,l,zt,Bt,v,Ot)}function Hp(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Th(){if(typeof performance.getEntriesByType=="function"){for(var s=0,l=0,f=performance.getEntriesByType("resource"),v=0;v<f.length;v++){var C=f[v],S=C.transferSize,L=C.initiatorType,X=C.duration;if(S&&X&&Hp(L)){for(L=0,X=C.responseEnd,v+=1;v<f.length;v++){var at=f[v],bt=at.startTime;if(bt>X)break;var kt=at.transferSize,zt=at.initiatorType;kt&&Hp(zt)&&(at=at.responseEnd,L+=kt*(at<X?1:(X-bt)/(at-bt)))}if(--v,l+=8*(S+L)/(C.duration/1e3),s++,10<s)break}}if(0<s)return l/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Ah=null,Np=null;function Dh(s){return s.nodeType===9?s:s.ownerDocument}function bh(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zr(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function ul(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Gp=null;function tE(){var s=window.event;return s&&s.type==="popstate"?s===Gp?!1:(Gp=s,!0):(Gp=null,!1)}var s2=typeof setTimeout=="function"?setTimeout:void 0,eE=typeof clearTimeout=="function"?clearTimeout:void 0,a2=typeof Promise=="function"?Promise:void 0,l2=typeof queueMicrotask=="function"?queueMicrotask:typeof a2<"u"?function(s){return a2.resolve(null).then(s).catch(xa)}:s2;function xa(s){setTimeout(function(){throw s})}function Oe(s){return s==="head"}function zp(s,l){var f=l,v=0;do{var C=f.nextSibling;if(s.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"||f==="/&"){if(v===0){s.removeChild(C),Hc(l);return}v--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")v++;else if(f==="html")Bh(s.ownerDocument.documentElement);else if(f==="head"){f=s.ownerDocument.head,Bh(f);for(var S=f.firstChild;S;){var L=S.nextSibling,X=S.nodeName;S[Gl]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&S.rel.toLowerCase()==="stylesheet"||f.removeChild(S),S=L}}else f==="body"&&Bh(s.ownerDocument.body);f=C}while(f);Hc(l)}function yo(s,l){var f=s;s=0;do{var v=f.nextSibling;if(f.nodeType===1?l?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(l?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),v&&v.nodeType===8)if(f=v.data,f==="/$"){if(s===0)break;s--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||s++;f=v}while(f)}function H0(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":H0(f),Tf(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function nE(s,l,f,v){for(;s.nodeType===1;){var C=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!v&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(v){if(!s[Gl])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(S=s.getAttribute("rel"),S==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(S!==C.rel||s.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||s.getAttribute("title")!==(C.title==null?null:C.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(S=s.getAttribute("src"),(S!==(C.src==null?null:C.src)||s.getAttribute("type")!==(C.type==null?null:C.type)||s.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&S&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var S=C.name==null?null:""+C.name;if(C.type==="hidden"&&s.getAttribute("name")===S)return s}else return s;if(s=Go(s.nextSibling),s===null)break}return null}function Pn(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Go(s.nextSibling),s===null))return null;return s}function u2(s,l){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!l||(s=Go(s.nextSibling),s===null))return null;return s}function N0(s){return s.data==="$?"||s.data==="$~"}function Mc(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function iE(s,l){var f=s.ownerDocument;if(s.data==="$~")s._reactRetry=l;else if(s.data!=="$?"||f.readyState!=="loading")l();else{var v=function(){l(),f.removeEventListener("DOMContentLoaded",v)};f.addEventListener("DOMContentLoaded",v),s._reactRetry=v}}function Go(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return s}var jp=null;function c2(s){s=s.nextSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="/$"||f==="/&"){if(l===0)return Go(s.nextSibling);l--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||l++}s=s.nextSibling}return null}function f2(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(l===0)return s;l--}else f!=="/$"&&f!=="/&"||l++}s=s.previousSibling}return null}function h2(s,l,f){switch(l=Dh(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Bh(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Tf(s)}var zo=new Map,d2=new Set;function G0(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ca=_.d;_.d={f:rE,r:oE,D:Up,C:sE,L:aE,m:lE,X:jr,S:$i,M:uE};function rE(){var s=Ca.f(),l=P0();return s||l}function oE(s){var l=ts(s);l!==null&&l.tag===5&&l.type==="form"?X1(l):Ca.r(s)}var cl=typeof document>"u"?null:document;function g2(s,l,f){var v=cl;if(v&&typeof l=="string"&&l){var C=qt(l);C='link[rel="'+s+'"][href="'+C+'"]',typeof f=="string"&&(C+='[crossorigin="'+f+'"]'),d2.has(C)||(d2.add(C),s={rel:s,crossOrigin:f,href:l},v.querySelector(C)===null&&(l=v.createElement("link"),Ji(l,"link",s),Si(l),v.head.appendChild(l)))}}function Up(s){Ca.D(s),g2("dns-prefetch",s,null)}function sE(s,l){Ca.C(s,l),g2("preconnect",s,l)}function aE(s,l,f){Ca.L(s,l,f);var v=cl;if(v&&s&&l){var C='link[rel="preload"][as="'+qt(l)+'"]';l==="image"&&f&&f.imageSrcSet?(C+='[imagesrcset="'+qt(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(C+='[imagesizes="'+qt(f.imageSizes)+'"]')):C+='[href="'+qt(s)+'"]';var S=C;switch(l){case"style":S=Rc(s);break;case"script":S=Lc(s)}zo.has(S)||(s=m({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),zo.set(S,s),v.querySelector(C)!==null||l==="style"&&v.querySelector(Oc(S))||l==="script"&&v.querySelector(_c(S))||(l=v.createElement("link"),Ji(l,"link",s),Si(l),v.head.appendChild(l)))}}function lE(s,l){Ca.m(s,l);var f=cl;if(f&&s){var v=l&&typeof l.as=="string"?l.as:"script",C='link[rel="modulepreload"][as="'+qt(v)+'"][href="'+qt(s)+'"]',S=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Lc(s)}if(!zo.has(S)&&(s=m({rel:"modulepreload",href:s},l),zo.set(S,s),f.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(_c(S)))return}v=f.createElement("link"),Ji(v,"link",s),Si(v),f.head.appendChild(v)}}}function $i(s,l,f){Ca.S(s,l,f);var v=cl;if(v&&s){var C=mr(v).hoistableStyles,S=Rc(s);l=l||"default";var L=C.get(S);if(!L){var X={loading:0,preload:null};if(L=v.querySelector(Oc(S)))X.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":l},f),(f=zo.get(S))&&$p(s,f);var at=L=v.createElement("link");Si(at),Ji(at,"link",s),at._p=new Promise(function(bt,kt){at.onload=bt,at.onerror=kt}),at.addEventListener("load",function(){X.loading|=1}),at.addEventListener("error",function(){X.loading|=2}),X.loading|=4,z0(L,l,v)}L={type:"stylesheet",instance:L,count:1,state:X},C.set(S,L)}}}function jr(s,l){Ca.X(s,l);var f=cl;if(f&&s){var v=mr(f).hoistableScripts,C=Lc(s),S=v.get(C);S||(S=f.querySelector(_c(C)),S||(s=m({src:s,async:!0},l),(l=zo.get(C))&&j0(s,l),S=f.createElement("script"),Si(S),Ji(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(C,S))}}function uE(s,l){Ca.M(s,l);var f=cl;if(f&&s){var v=mr(f).hoistableScripts,C=Lc(s),S=v.get(C);S||(S=f.querySelector(_c(C)),S||(s=m({src:s,async:!0,type:"module"},l),(l=zo.get(C))&&j0(s,l),S=f.createElement("script"),Si(S),Ji(S,"link",s),f.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},v.set(C,S))}}function p2(s,l,f,v){var C=(C=gt.current)?G0(C):null;if(!C)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Rc(f.href),f=mr(C).hoistableStyles,v=f.get(l),v||(v={type:"style",instance:null,count:0,state:null},f.set(l,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Rc(f.href);var S=mr(C).hoistableStyles,L=S.get(s);if(L||(C=C.ownerDocument||C,L={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(s,L),(S=C.querySelector(Oc(s)))&&!S._p&&(L.instance=S,L.state.loading=5),zo.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},zo.set(s,f),S||cE(C,s,f,L.state))),l&&v===null)throw Error(r(528,""));return L}if(l&&v!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Lc(f),f=mr(C).hoistableScripts,v=f.get(l),v||(v={type:"script",instance:null,count:0,state:null},f.set(l,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Rc(s){return'href="'+qt(s)+'"'}function Oc(s){return'link[rel="stylesheet"]['+s+"]"}function m2(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function cE(s,l,f,v){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?v.loading=1:(l=s.createElement("link"),v.preload=l,l.addEventListener("load",function(){return v.loading|=1}),l.addEventListener("error",function(){return v.loading|=2}),Ji(l,"link",f),Si(l),s.head.appendChild(l))}function Lc(s){return'[src="'+qt(s)+'"]'}function _c(s){return"script[async]"+s}function v2(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var v=s.querySelector('style[data-href~="'+qt(f.href)+'"]');if(v)return l.instance=v,Si(v),v;var C=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return v=(s.ownerDocument||s).createElement("style"),Si(v),Ji(v,"style",C),z0(v,f.precedence,s),l.instance=v;case"stylesheet":C=Rc(f.href);var S=s.querySelector(Oc(C));if(S)return l.state.loading|=4,l.instance=S,Si(S),S;v=m2(f),(C=zo.get(C))&&$p(v,C),S=(s.ownerDocument||s).createElement("link"),Si(S);var L=S;return L._p=new Promise(function(X,at){L.onload=X,L.onerror=at}),Ji(S,"link",v),l.state.loading|=4,z0(S,f.precedence,s),l.instance=S;case"script":return S=Lc(f.src),(C=s.querySelector(_c(S)))?(l.instance=C,Si(C),C):(v=f,(C=zo.get(S))&&(v=m({},f),j0(v,C)),s=s.ownerDocument||s,C=s.createElement("script"),Si(C),Ji(C,"link",v),s.head.appendChild(C),l.instance=C);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(v=l.instance,l.state.loading|=4,z0(v,f.precedence,s));return l.instance}function z0(s,l,f){for(var v=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,S=C,L=0;L<v.length;L++){var X=v[L];if(X.dataset.precedence===l)S=X;else if(S!==C)break}S?S.parentNode.insertBefore(s,S.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function $p(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function j0(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Ph=null;function y2(s,l,f){if(Ph===null){var v=new Map,C=Ph=new Map;C.set(f,v)}else C=Ph,v=C.get(f),v||(v=new Map,C.set(f,v));if(v.has(s))return v;for(v.set(s,null),f=f.getElementsByTagName(s),C=0;C<f.length;C++){var S=f[C];if(!(S[Gl]||S[Fi]||s==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var L=S.getAttribute(l)||"";L=s+L;var X=v.get(L);X?X.push(S):v.set(L,[S])}}return v}function w2(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function fE(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function x2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function Fc(s,l,f,v){if(f.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var C=Rc(v.href),S=l.querySelector(Oc(C));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(s.count++,s=U0.bind(s),l.then(s,s)),f.state.loading|=4,f.instance=S,Si(S);return}S=l.ownerDocument||l,v=m2(v),(C=zo.get(C))&&$p(v,C),S=S.createElement("link"),Si(S);var L=S;L._p=new Promise(function(X,at){L.onload=X,L.onerror=at}),Ji(S,"link",v),f.instance=S}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(f,l),(l=f.state.preload)&&(f.state.loading&3)===0&&(s.count++,f=U0.bind(s),l.addEventListener("load",f),l.addEventListener("error",f))}}var Vp=0;function hE(s,l){return s.stylesheets&&s.count===0&&V0(s,s.stylesheets),0<s.count||0<s.imgCount?function(f){var v=setTimeout(function(){if(s.stylesheets&&V0(s,s.stylesheets),s.unsuspend){var S=s.unsuspend;s.unsuspend=null,S()}},6e4+l);0<s.imgBytes&&Vp===0&&(Vp=62500*Th());var C=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&V0(s,s.stylesheets),s.unsuspend)){var S=s.unsuspend;s.unsuspend=null,S()}},(s.imgBytes>Vp?50:800)+l);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(v),clearTimeout(C)}}:null}function U0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $0=null;function V0(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$0=new Map,l.forEach(C2,s),$0=null,U0.call(s))}function C2(s,l){if(!(l.state.loading&4)){var f=$0.get(s);if(f)var v=f.get(null);else{f=new Map,$0.set(s,f);for(var C=s.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<C.length;S++){var L=C[S];(L.nodeName==="LINK"||L.getAttribute("media")!=="not all")&&(f.set(L.dataset.precedence,L),v=L)}v&&f.set(null,v)}C=l.instance,L=C.getAttribute("data-precedence"),S=f.get(L)||v,S===v&&f.set(null,C),f.set(L,C),this.count++,v=U0.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),S?S.parentNode.insertBefore(C,S.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(C,s.firstChild)),l.state.loading|=4}}var kc={$$typeof:H,Provider:null,Consumer:null,_currentValue:N,_currentValue2:N,_threadCount:0};function dE(s,l,f,v,C,S,L,X,at){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ef(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ef(0),this.hiddenUpdates=Ef(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=S,this.onRecoverableError=L,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function E2(s,l,f,v,C,S,L,X,at,bt,kt,zt){return s=new dE(s,l,f,L,at,bt,kt,zt,X),l=1,S===!0&&(l|=24),S=Yi(3,null,null,l),s.current=S,S.stateNode=s,l=os(),l.refCount++,s.pooledCache=l,l.refCount++,S.memoizedState={element:v,isDehydrated:f,cache:l},Fs(S),s}function S2(s){return s?(s=oa,s):oa}function T2(s,l,f,v,C,S){C=S2(C),v.context===null?v.context=C:v.pendingContext=C,v=Ka(l),v.payload={element:f},S=S===void 0?null:S,S!==null&&(v.callback=S),f=ls(s,v,l),f!==null&&(Nr(f,s,l),Gf(f,s,l))}function A2(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function Wp(s,l){A2(s,l),(s=s.alternate)&&A2(s,l)}function D2(s){if(s.tag===13||s.tag===31){var l=Os(s,67108864);l!==null&&Nr(l,s,67108864),Wp(s,67108864)}}function b2(s){if(s.tag===13||s.tag===31){var l=po();l=Iu(l);var f=Os(s,l);f!==null&&Nr(f,s,l),Wp(s,l)}}var W0=!0;function gE(s,l,f,v){var C=P.T;P.T=null;var S=_.p;try{_.p=2,Xp(s,l,f,v)}finally{_.p=S,P.T=C}}function pE(s,l,f,v){var C=P.T;P.T=null;var S=_.p;try{_.p=8,Xp(s,l,f,v)}finally{_.p=S,P.T=C}}function Xp(s,l,f,v){if(W0){var C=qp(v);if(C===null)kp(s,l,v,X0,f),P2(s,v);else if(M2(C,s,l,f,v))v.stopPropagation();else if(P2(s,v),l&4&&-1<mE.indexOf(s)){for(;C!==null;){var S=ts(C);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var L=Ms(S.pendingLanes);if(L!==0){var X=S;for(X.pendingLanes|=2,X.entangledLanes|=2;L;){var at=1<<31-Ei(L);X.entanglements[1]|=at,L&=~at}Gs(S),(Dn&6)===0&&(au=Fn()+500,Ch(0))}}break;case 31:case 13:X=Os(S,2),X!==null&&Nr(X,S,2),P0(),Wp(S,2)}if(S=qp(v),S===null&&kp(s,l,v,X0,f),S===C)break;C=S}C!==null&&v.stopPropagation()}else kp(s,l,v,null,f)}}function qp(s){return s=l1(s),Yp(s)}var X0=null;function Yp(s){if(X0=null,s=Ha(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=u(l),s!==null)return s;s=null}else if(f===31){if(s=c(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return X0=s,null}function B2(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Kn()){case Br:return 2;case ji:return 8;case An:case Wn:return 32;case Zr:return 268435456;default:return 32}default:return 32}}var Kp=!1,fl=null,hl=null,dl=null,Mh=new Map,Rh=new Map,gl=[],mE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P2(s,l){switch(s){case"focusin":case"focusout":fl=null;break;case"dragenter":case"dragleave":hl=null;break;case"mouseover":case"mouseout":dl=null;break;case"pointerover":case"pointerout":Mh.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(l.pointerId)}}function cu(s,l,f,v,C,S){return s===null||s.nativeEvent!==S?(s={blockedOn:l,domEventName:f,eventSystemFlags:v,nativeEvent:S,targetContainers:[C]},l!==null&&(l=ts(l),l!==null&&D2(l)),s):(s.eventSystemFlags|=v,l=s.targetContainers,C!==null&&l.indexOf(C)===-1&&l.push(C),s)}function M2(s,l,f,v,C){switch(l){case"focusin":return fl=cu(fl,s,l,f,v,C),!0;case"dragenter":return hl=cu(hl,s,l,f,v,C),!0;case"mouseover":return dl=cu(dl,s,l,f,v,C),!0;case"pointerover":var S=C.pointerId;return Mh.set(S,cu(Mh.get(S)||null,s,l,f,v,C)),!0;case"gotpointercapture":return S=C.pointerId,Rh.set(S,cu(Rh.get(S)||null,s,l,f,v,C)),!0}return!1}function Zp(s){var l=Ha(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=u(f),l!==null){s.blockedOn=l,Ed(s.priority,function(){b2(f)});return}}else if(l===31){if(l=c(f),l!==null){s.blockedOn=l,Ed(s.priority,function(){b2(f)});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function q0(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=qp(s.nativeEvent);if(f===null){f=s.nativeEvent;var v=new f.constructor(f.type,f);$u=v,f.target.dispatchEvent(v),$u=null}else return l=ts(f),l!==null&&D2(l),s.blockedOn=f,!1;l.shift()}return!0}function R2(s,l,f){q0(s)&&f.delete(l)}function vE(){Kp=!1,fl!==null&&q0(fl)&&(fl=null),hl!==null&&q0(hl)&&(hl=null),dl!==null&&q0(dl)&&(dl=null),Mh.forEach(R2),Rh.forEach(R2)}function Ic(s,l){s.blockedOn===l&&(s.blockedOn=null,Kp||(Kp=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vE)))}var Y0=null;function O2(s){Y0!==s&&(Y0=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Y0===s&&(Y0=null);for(var l=0;l<s.length;l+=3){var f=s[l],v=s[l+1],C=s[l+2];if(typeof v!="function"){if(Yp(v||f)===null)continue;break}var S=ts(f);S!==null&&(s.splice(l,3),l-=3,Ja(S,{pending:!0,data:C,method:f.method,action:v},v,C))}}))}function Hc(s){function l(at){return Ic(at,s)}fl!==null&&Ic(fl,s),hl!==null&&Ic(hl,s),dl!==null&&Ic(dl,s),Mh.forEach(l),Rh.forEach(l);for(var f=0;f<gl.length;f++){var v=gl[f];v.blockedOn===s&&(v.blockedOn=null)}for(;0<gl.length&&(f=gl[0],f.blockedOn===null);)Zp(f),f.blockedOn===null&&gl.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(v=0;v<f.length;v+=3){var C=f[v],S=f[v+1],L=C[or]||null;if(typeof S=="function")L||O2(f);else if(L){var X=null;if(S&&S.hasAttribute("formAction")){if(C=S,L=S[or]||null)X=L.formAction;else if(Yp(C)!==null)continue}else X=L.action;typeof X=="function"?f[v+1]=X:(f.splice(v,3),v-=3),O2(f)}}}function Cr(){function s(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(L){return C=L})},focusReset:"manual",scroll:"manual"})}function l(){C!==null&&(C(),C=null),v||setTimeout(f,20)}function f(){if(!v&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,C=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(f,100),function(){v=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),C!==null&&(C(),C=null)}}}function Oh(s){this._internalRoot=s}K0.prototype.render=Oh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,v=po();T2(f,v,s,l,null,null)},K0.prototype.unmount=Oh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;T2(s.current,2,null,s,null,null),P0(),l[Ia]=null}};function K0(s){this._internalRoot=s}K0.prototype.unstable_scheduleHydration=function(s){if(s){var l=Cd();s={blockedOn:null,target:s,priority:l};for(var f=0;f<gl.length&&l!==0&&l<gl[f].priority;f++);gl.splice(f,0,s),f===0&&Zp(s)}};var L2=n.version;if(L2!=="19.2.0")throw Error(r(527,L2,"19.2.0"));_.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=g(l),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var yE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z0.isDisabled&&Z0.supportsFiber)try{Qr=Z0.inject(yE),di=Z0}catch{}}return Jp.createRoot=function(s,l){if(!o(s))throw Error(r(299));var f=!1,v="",C=Q1,S=J1,L=yy;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(C=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(L=l.onRecoverableError)),l=E2(s,1,!1,null,null,f,v,null,C,S,L,Cr),s[Ia]=l.current,Fp(s),new Oh(l)},Jp.hydrateRoot=function(s,l,f){if(!o(s))throw Error(r(299));var v=!1,C="",S=Q1,L=J1,X=yy,at=null;return f!=null&&(f.unstable_strictMode===!0&&(v=!0),f.identifierPrefix!==void 0&&(C=f.identifierPrefix),f.onUncaughtError!==void 0&&(S=f.onUncaughtError),f.onCaughtError!==void 0&&(L=f.onCaughtError),f.onRecoverableError!==void 0&&(X=f.onRecoverableError),f.formState!==void 0&&(at=f.formState)),l=E2(s,1,!0,l,f??null,v,C,at,S,L,X,Cr),l.context=S2(null),f=l.current,v=po(),v=Iu(v),C=Ka(v),C.callback=null,ls(f,C,v),f=v,l.current.lanes=f,Nl(l,f),Gs(l),s[Ia]=l.current,Fp(s),new K0(l)},Jp.version="19.2.0",Jp}var fA;function aR(){if(fA)return EE.exports;fA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),EE.exports=sR(),EE.exports}var bx=aR();function O3(e,n,i){if(e&&e.length){const[r,o]=n,a=Math.PI/180*i,u=Math.cos(a),c=Math.sin(a);for(const h of e){const[g,p]=h;h[0]=(g-r)*u-(p-o)*c+r,h[1]=(g-r)*c+(p-o)*u+o}}}function lR(e,n,i){const r=[];e.forEach(o=>r.push(...o)),O3(r,n,i)}function uR(e,n){return e[0]===n[0]&&e[1]===n[1]}function cR(e,n,i,r=1){const o=i,a=Math.max(n,.1),u=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,c=[0,0];if(o)for(const g of u)O3(g,c,o);const h=fR(u,a,r);if(o){for(const g of u)O3(g,c,-o);lR(h,c,-o)}return h}function fR(e,n,i){const r=[];for(const g of e){const p=[...g];uR(p[0],p[p.length-1])||p.push([p[0][0],p[0][1]]),p.length>2&&r.push(p)}const o=[];n=Math.max(n,.1);const a=[];for(const g of r)for(let p=0;p<g.length-1;p++){const m=g[p],w=g[p+1];if(m[1]!==w[1]){const x=Math.min(m[1],w[1]);a.push({ymin:x,ymax:Math.max(m[1],w[1]),x:x===m[1]?m[0]:w[0],islope:(w[0]-m[0])/(w[1]-m[1])})}}if(a.sort((g,p)=>g.ymin<p.ymin?-1:g.ymin>p.ymin?1:g.x<p.x?-1:g.x>p.x?1:g.ymax===p.ymax?0:(g.ymax-p.ymax)/Math.abs(g.ymax-p.ymax)),!a.length)return o;let u=[],c=a[0].ymin,h=0;for(;u.length||a.length;){if(a.length){let g=-1;for(let m=0;m<a.length&&!(a[m].ymin>c);m++)g=m;a.splice(0,g+1).forEach(m=>{u.push({s:c,edge:m})})}if(u=u.filter(g=>!(g.edge.ymax<=c)),u.sort((g,p)=>g.edge.x===p.edge.x?0:(g.edge.x-p.edge.x)/Math.abs(g.edge.x-p.edge.x)),(i!==1||h%n===0)&&u.length>1)for(let g=0;g<u.length;g=g+2){const p=g+1;if(p>=u.length)break;const m=u[g].edge,w=u[p].edge;o.push([[Math.round(m.x),c],[Math.round(w.x),c]])}c+=i,u.forEach(g=>{g.edge.x=g.edge.x+i*g.edge.islope}),h++}return o}function lv(e,n){var i;const r=n.hachureAngle+90;let o=n.hachureGap;o<0&&(o=n.strokeWidth*4),o=Math.round(Math.max(o,.1));let a=1;return n.roughness>=1&&(((i=n.randomizer)===null||i===void 0?void 0:i.next())||Math.random())>.7&&(a=o),cR(e,o,r,a||1)}class e5{constructor(n){this.helper=n}fillPolygons(n,i){return this._fillPolygons(n,i)}_fillPolygons(n,i){const r=lv(n,i);return{type:"fillSketch",ops:this.renderLines(r,i)}}renderLines(n,i){const r=[];for(const o of n)r.push(...this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],i));return r}}function Bx(e){const n=e[0],i=e[1];return Math.sqrt(Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2))}class hR extends e5{fillPolygons(n,i){let r=i.hachureGap;r<0&&(r=i.strokeWidth*4),r=Math.max(r,.1);const o=Object.assign({},i,{hachureGap:r}),a=lv(n,o),u=Math.PI/180*i.hachureAngle,c=[],h=r*.5*Math.cos(u),g=r*.5*Math.sin(u);for(const[m,w]of a)Bx([m,w])&&c.push([[m[0]-h,m[1]+g],[...w]],[[m[0]+h,m[1]-g],[...w]]);return{type:"fillSketch",ops:this.renderLines(c,i)}}}class dR extends e5{fillPolygons(n,i){const r=this._fillPolygons(n,i),o=Object.assign({},i,{hachureAngle:i.hachureAngle+90}),a=this._fillPolygons(n,o);return r.ops=r.ops.concat(a.ops),r}}class gR{constructor(n){this.helper=n}fillPolygons(n,i){i=Object.assign({},i,{hachureAngle:0});const r=lv(n,i);return this.dotsOnLines(r,i)}dotsOnLines(n,i){const r=[];let o=i.hachureGap;o<0&&(o=i.strokeWidth*4),o=Math.max(o,.1);let a=i.fillWeight;a<0&&(a=i.strokeWidth/2);const u=o/4;for(const c of n){const h=Bx(c),g=h/o,p=Math.ceil(g)-1,m=h-p*o,w=(c[0][0]+c[1][0])/2-o/4,x=Math.min(c[0][1],c[1][1]);for(let T=0;T<p;T++){const D=x+m+T*o,b=w-u+Math.random()*2*u,B=D-u+Math.random()*2*u,A=this.helper.ellipse(b,B,a,a,i);r.push(...A.ops)}}return{type:"fillSketch",ops:r}}}class pR{constructor(n){this.helper=n}fillPolygons(n,i){const r=lv(n,i);return{type:"fillSketch",ops:this.dashedLine(r,i)}}dashedLine(n,i){const r=i.dashOffset<0?i.hachureGap<0?i.strokeWidth*4:i.hachureGap:i.dashOffset,o=i.dashGap<0?i.hachureGap<0?i.strokeWidth*4:i.hachureGap:i.dashGap,a=[];return n.forEach(u=>{const c=Bx(u),h=Math.floor(c/(r+o)),g=(c+o-h*(r+o))/2;let p=u[0],m=u[1];p[0]>m[0]&&(p=u[1],m=u[0]);const w=Math.atan((m[1]-p[1])/(m[0]-p[0]));for(let x=0;x<h;x++){const T=x*(r+o),D=T+r,b=[p[0]+T*Math.cos(w)+g*Math.cos(w),p[1]+T*Math.sin(w)+g*Math.sin(w)],B=[p[0]+D*Math.cos(w)+g*Math.cos(w),p[1]+D*Math.sin(w)+g*Math.sin(w)];a.push(...this.helper.doubleLineOps(b[0],b[1],B[0],B[1],i))}}),a}}class mR{constructor(n){this.helper=n}fillPolygons(n,i){const r=i.hachureGap<0?i.strokeWidth*4:i.hachureGap,o=i.zigzagOffset<0?r:i.zigzagOffset;i=Object.assign({},i,{hachureGap:r+o});const a=lv(n,i);return{type:"fillSketch",ops:this.zigzagLines(a,o,i)}}zigzagLines(n,i,r){const o=[];return n.forEach(a=>{const u=Bx(a),c=Math.round(u/(2*i));let h=a[0],g=a[1];h[0]>g[0]&&(h=a[1],g=a[0]);const p=Math.atan((g[1]-h[1])/(g[0]-h[0]));for(let m=0;m<c;m++){const w=m*2*i,x=(m+1)*2*i,T=Math.sqrt(2*Math.pow(i,2)),D=[h[0]+w*Math.cos(p),h[1]+w*Math.sin(p)],b=[h[0]+x*Math.cos(p),h[1]+x*Math.sin(p)],B=[D[0]+T*Math.cos(p+Math.PI/4),D[1]+T*Math.sin(p+Math.PI/4)];o.push(...this.helper.doubleLineOps(D[0],D[1],B[0],B[1],r),...this.helper.doubleLineOps(B[0],B[1],b[0],b[1],r))}}),o}}const jo={};function vR(e,n){let i=e.fillStyle||"hachure";if(!jo[i])switch(i){case"zigzag":jo[i]||(jo[i]=new hR(n));break;case"cross-hatch":jo[i]||(jo[i]=new dR(n));break;case"dots":jo[i]||(jo[i]=new gR(n));break;case"dashed":jo[i]||(jo[i]=new pR(n));break;case"zigzag-line":jo[i]||(jo[i]=new mR(n));break;case"hachure":default:i="hachure",jo[i]||(jo[i]=new e5(n));break}return jo[i]}function yR(){return Math.floor(Math.random()*2**31)}class wR{constructor(n){this.seed=n}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const xR=0,L3=1,z4=2,_2={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function CR(e){const n=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))n[n.length]={type:xR,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))n[n.length]={type:L3,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return n[n.length]={type:z4,text:""},n}function DE(e,n){return e.type===n}function n5(e){const n=[],i=CR(e);let r="BOD",o=0,a=i[o];for(;!DE(a,z4);){let u=0;const c=[];if(r==="BOD")if(a.text==="M"||a.text==="m")o++,u=_2[a.text],r=a.text;else return n5("M0,0"+e);else DE(a,L3)?u=_2[r]:(o++,u=_2[a.text],r=a.text);if(o+u<i.length){for(let h=o;h<o+u;h++){const g=i[h];if(DE(g,L3))c[c.length]=+g.text;else throw new Error("Param not a number: "+r+","+g.text)}if(typeof _2[r]=="number"){const h={key:r,data:c};n.push(h),o+=u,a=i[o],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return n}function j4(e){let n=0,i=0,r=0,o=0;const a=[];for(const{key:u,data:c}of e)switch(u){case"M":a.push({key:"M",data:[...c]}),[n,i]=c,[r,o]=c;break;case"m":n+=c[0],i+=c[1],a.push({key:"M",data:[n,i]}),r=n,o=i;break;case"L":a.push({key:"L",data:[...c]}),[n,i]=c;break;case"l":n+=c[0],i+=c[1],a.push({key:"L",data:[n,i]});break;case"C":a.push({key:"C",data:[...c]}),n=c[4],i=c[5];break;case"c":{const h=c.map((g,p)=>p%2?g+i:g+n);a.push({key:"C",data:h}),n=h[4],i=h[5];break}case"Q":a.push({key:"Q",data:[...c]}),n=c[2],i=c[3];break;case"q":{const h=c.map((g,p)=>p%2?g+i:g+n);a.push({key:"Q",data:h}),n=h[2],i=h[3];break}case"A":a.push({key:"A",data:[...c]}),n=c[5],i=c[6];break;case"a":n+=c[5],i+=c[6],a.push({key:"A",data:[c[0],c[1],c[2],c[3],c[4],n,i]});break;case"H":a.push({key:"H",data:[...c]}),n=c[0];break;case"h":n+=c[0],a.push({key:"H",data:[n]});break;case"V":a.push({key:"V",data:[...c]}),i=c[0];break;case"v":i+=c[0],a.push({key:"V",data:[i]});break;case"S":a.push({key:"S",data:[...c]}),n=c[2],i=c[3];break;case"s":{const h=c.map((g,p)=>p%2?g+i:g+n);a.push({key:"S",data:h}),n=h[2],i=h[3];break}case"T":a.push({key:"T",data:[...c]}),n=c[0],i=c[1];break;case"t":n+=c[0],i+=c[1],a.push({key:"T",data:[n,i]});break;case"Z":case"z":a.push({key:"Z",data:[]}),n=r,i=o;break}return a}function U4(e){const n=[];let i="",r=0,o=0,a=0,u=0,c=0,h=0;for(const{key:g,data:p}of e){switch(g){case"M":n.push({key:"M",data:[...p]}),[r,o]=p,[a,u]=p;break;case"C":n.push({key:"C",data:[...p]}),r=p[4],o=p[5],c=p[2],h=p[3];break;case"L":n.push({key:"L",data:[...p]}),[r,o]=p;break;case"H":r=p[0],n.push({key:"L",data:[r,o]});break;case"V":o=p[0],n.push({key:"L",data:[r,o]});break;case"S":{let m=0,w=0;i==="C"||i==="S"?(m=r+(r-c),w=o+(o-h)):(m=r,w=o),n.push({key:"C",data:[m,w,...p]}),c=p[0],h=p[1],r=p[2],o=p[3];break}case"T":{const[m,w]=p;let x=0,T=0;i==="Q"||i==="T"?(x=r+(r-c),T=o+(o-h)):(x=r,T=o);const D=r+2*(x-r)/3,b=o+2*(T-o)/3,B=m+2*(x-m)/3,A=w+2*(T-w)/3;n.push({key:"C",data:[D,b,B,A,m,w]}),c=x,h=T,r=m,o=w;break}case"Q":{const[m,w,x,T]=p,D=r+2*(m-r)/3,b=o+2*(w-o)/3,B=x+2*(m-x)/3,A=T+2*(w-T)/3;n.push({key:"C",data:[D,b,B,A,x,T]}),c=m,h=w,r=x,o=T;break}case"A":{const m=Math.abs(p[0]),w=Math.abs(p[1]),x=p[2],T=p[3],D=p[4],b=p[5],B=p[6];m===0||w===0?(n.push({key:"C",data:[r,o,b,B,b,B]}),r=b,o=B):(r!==b||o!==B)&&($4(r,o,b,B,m,w,x,T,D).forEach(function(H){n.push({key:"C",data:H})}),r=b,o=B);break}case"Z":n.push({key:"Z",data:[]}),r=a,o=u;break}i=g}return n}function ER(e){return Math.PI*e/180}function tm(e,n,i){const r=e*Math.cos(i)-n*Math.sin(i),o=e*Math.sin(i)+n*Math.cos(i);return[r,o]}function $4(e,n,i,r,o,a,u,c,h,g){const p=ER(u);let m=[],w=0,x=0,T=0,D=0;if(g)[w,x,T,D]=g;else{[e,n]=tm(e,n,-p),[i,r]=tm(i,r,-p);const ct=(e-i)/2,mt=(n-r)/2;let wt=ct*ct/(o*o)+mt*mt/(a*a);wt>1&&(wt=Math.sqrt(wt),o=wt*o,a=wt*a);const V=c===h?-1:1,P=o*o,_=a*a,N=P*_-P*mt*mt-_*ct*ct,$=P*mt*mt+_*ct*ct,Q=V*Math.sqrt(Math.abs(N/$));T=Q*o*mt/a+(e+i)/2,D=Q*-a*ct/o+(n+r)/2,w=Math.asin(parseFloat(((n-D)/a).toFixed(9))),x=Math.asin(parseFloat(((r-D)/a).toFixed(9))),e<T&&(w=Math.PI-w),i<T&&(x=Math.PI-x),w<0&&(w=Math.PI*2+w),x<0&&(x=Math.PI*2+x),h&&w>x&&(w=w-Math.PI*2),!h&&x>w&&(x=x-Math.PI*2)}let b=x-w;if(Math.abs(b)>Math.PI*120/180){const ct=x,mt=i,wt=r;h&&x>w?x=w+Math.PI*120/180*1:x=w+Math.PI*120/180*-1,i=T+o*Math.cos(x),r=D+a*Math.sin(x),m=$4(i,r,mt,wt,o,a,u,0,h,[x,ct,T,D])}b=x-w;const B=Math.cos(w),A=Math.sin(w),H=Math.cos(x),R=Math.sin(x),k=Math.tan(b/4),W=4/3*o*k,U=4/3*a*k,nt=[e,n],st=[e+W*A,n-U*B],ft=[i+W*R,r-U*H],Et=[i,r];if(st[0]=2*nt[0]-st[0],st[1]=2*nt[1]-st[1],g)return[st,ft,Et].concat(m);{m=[st,ft,Et].concat(m);const ct=[];for(let mt=0;mt<m.length;mt+=3){const wt=tm(m[mt][0],m[mt][1],p),V=tm(m[mt+1][0],m[mt+1][1],p),P=tm(m[mt+2][0],m[mt+2][1],p);ct.push([wt[0],wt[1],V[0],V[1],P[0],P[1]])}return ct}}const SR={randOffset:BR,randOffsetWithRange:PR,ellipse:DR,doubleLineOps:MR};function V4(e,n,i,r,o){return{type:"path",ops:nf(e,n,i,r,o)}}function cw(e,n,i){const r=(e||[]).length;if(r>2){const o=[];for(let a=0;a<r-1;a++)o.push(...nf(e[a][0],e[a][1],e[a+1][0],e[a+1][1],i));return n&&o.push(...nf(e[r-1][0],e[r-1][1],e[0][0],e[0][1],i)),{type:"path",ops:o}}else if(r===2)return V4(e[0][0],e[0][1],e[1][0],e[1][1],i);return{type:"path",ops:[]}}function TR(e,n){return cw(e,!0,n)}function AR(e,n,i,r,o){const a=[[e,n],[e+i,n],[e+i,n+r],[e,n+r]];return TR(a,o)}function hA(e,n){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,o=F2(r[0],1*(1+n.roughness*.2),n),a=n.disableMultiStroke?[]:F2(r[0],1.5*(1+n.roughness*.22),pA(n));for(let u=1;u<r.length;u++){const c=r[u];if(c.length){const h=F2(c,1*(1+n.roughness*.2),n),g=n.disableMultiStroke?[]:F2(c,1.5*(1+n.roughness*.22),pA(n));for(const p of h)p.op!=="move"&&o.push(p);for(const p of g)p.op!=="move"&&a.push(p)}}return{type:"path",ops:o.concat(a)}}return{type:"path",ops:[]}}function DR(e,n,i,r,o){const a=W4(i,r,o);return _3(e,n,o,a).opset}function W4(e,n,i){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(n/2,2))/2)),o=Math.ceil(Math.max(i.curveStepCount,i.curveStepCount/Math.sqrt(200)*r)),a=Math.PI*2/o;let u=Math.abs(e/2),c=Math.abs(n/2);const h=1-i.curveFitting;return u+=Ie(u*h,i),c+=Ie(c*h,i),{increment:a,rx:u,ry:c}}function _3(e,n,i,r){const[o,a]=mA(r.increment,e,n,r.rx,r.ry,1,r.increment*Ow(.1,Ow(.4,1,i),i),i);let u=Lw(o,null,i);if(!i.disableMultiStroke&&i.roughness!==0){const[c]=mA(r.increment,e,n,r.rx,r.ry,1.5,0,i),h=Lw(c,null,i);u=u.concat(h)}return{estimatedPoints:a,opset:{type:"path",ops:u}}}function dA(e,n,i,r,o,a,u,c,h){const g=e,p=n;let m=Math.abs(i/2),w=Math.abs(r/2);m+=Ie(m*.01,h),w+=Ie(w*.01,h);let x=o,T=a;for(;x<0;)x+=Math.PI*2,T+=Math.PI*2;T-x>Math.PI*2&&(x=0,T=Math.PI*2);const D=Math.PI*2/h.curveStepCount,b=Math.min(D/2,(T-x)/2),B=vA(b,g,p,m,w,x,T,1,h);if(!h.disableMultiStroke){const A=vA(b,g,p,m,w,x,T,1.5,h);B.push(...A)}return u&&(c?B.push(...nf(g,p,g+m*Math.cos(x),p+w*Math.sin(x),h),...nf(g,p,g+m*Math.cos(T),p+w*Math.sin(T),h)):B.push({op:"lineTo",data:[g,p]},{op:"lineTo",data:[g+m*Math.cos(x),p+w*Math.sin(x)]})),{type:"path",ops:B}}function gA(e,n){const i=U4(j4(n5(e))),r=[];let o=[0,0],a=[0,0];for(const{key:u,data:c}of i)switch(u){case"M":{a=[c[0],c[1]],o=[c[0],c[1]];break}case"L":r.push(...nf(a[0],a[1],c[0],c[1],n)),a=[c[0],c[1]];break;case"C":{const[h,g,p,m,w,x]=c;r.push(...RR(h,g,p,m,w,x,a,n)),a=[w,x];break}case"Z":r.push(...nf(a[0],a[1],o[0],o[1],n)),a=[o[0],o[1]];break}return{type:"path",ops:r}}function bE(e,n){const i=[];for(const r of e)if(r.length){const o=n.maxRandomnessOffset||0,a=r.length;if(a>2){i.push({op:"move",data:[r[0][0]+Ie(o,n),r[0][1]+Ie(o,n)]});for(let u=1;u<a;u++)i.push({op:"lineTo",data:[r[u][0]+Ie(o,n),r[u][1]+Ie(o,n)]})}}return{type:"fillPath",ops:i}}function sg(e,n){return vR(n,SR).fillPolygons(e,n)}function bR(e,n,i,r,o,a,u){const c=e,h=n;let g=Math.abs(i/2),p=Math.abs(r/2);g+=Ie(g*.01,u),p+=Ie(p*.01,u);let m=o,w=a;for(;m<0;)m+=Math.PI*2,w+=Math.PI*2;w-m>Math.PI*2&&(m=0,w=Math.PI*2);const x=(w-m)/u.curveStepCount,T=[];for(let D=m;D<=w;D=D+x)T.push([c+g*Math.cos(D),h+p*Math.sin(D)]);return T.push([c+g*Math.cos(w),h+p*Math.sin(w)]),T.push([c,h]),sg([T],u)}function BR(e,n){return Ie(e,n)}function PR(e,n,i){return Ow(e,n,i)}function MR(e,n,i,r,o){return nf(e,n,i,r,o,!0)}function pA(e){const n=Object.assign({},e);return n.randomizer=void 0,e.seed&&(n.seed=e.seed+1),n}function X4(e){return e.randomizer||(e.randomizer=new wR(e.seed||0)),e.randomizer.next()}function Ow(e,n,i,r=1){return i.roughness*r*(X4(i)*(n-e)+e)}function Ie(e,n,i=1){return Ow(-e,e,n,i)}function nf(e,n,i,r,o,a=!1){const u=a?o.disableMultiStrokeFill:o.disableMultiStroke,c=F3(e,n,i,r,o,!0,!1);if(u)return c;const h=F3(e,n,i,r,o,!0,!0);return c.concat(h)}function F3(e,n,i,r,o,a,u){const c=Math.pow(e-i,2)+Math.pow(n-r,2),h=Math.sqrt(c);let g=1;h<200?g=1:h>500?g=.4:g=-.0016668*h+1.233334;let p=o.maxRandomnessOffset||0;p*p*100>c&&(p=h/10);const m=p/2,w=.2+X4(o)*.2;let x=o.bowing*o.maxRandomnessOffset*(r-n)/200,T=o.bowing*o.maxRandomnessOffset*(e-i)/200;x=Ie(x,o,g),T=Ie(T,o,g);const D=[],b=()=>Ie(m,o,g),B=()=>Ie(p,o,g),A=o.preserveVertices;return u?D.push({op:"move",data:[e+(A?0:b()),n+(A?0:b())]}):D.push({op:"move",data:[e+(A?0:Ie(p,o,g)),n+(A?0:Ie(p,o,g))]}),u?D.push({op:"bcurveTo",data:[x+e+(i-e)*w+b(),T+n+(r-n)*w+b(),x+e+2*(i-e)*w+b(),T+n+2*(r-n)*w+b(),i+(A?0:b()),r+(A?0:b())]}):D.push({op:"bcurveTo",data:[x+e+(i-e)*w+B(),T+n+(r-n)*w+B(),x+e+2*(i-e)*w+B(),T+n+2*(r-n)*w+B(),i+(A?0:B()),r+(A?0:B())]}),D}function F2(e,n,i){if(!e.length)return[];const r=[];r.push([e[0][0]+Ie(n,i),e[0][1]+Ie(n,i)]),r.push([e[0][0]+Ie(n,i),e[0][1]+Ie(n,i)]);for(let o=1;o<e.length;o++)r.push([e[o][0]+Ie(n,i),e[o][1]+Ie(n,i)]),o===e.length-1&&r.push([e[o][0]+Ie(n,i),e[o][1]+Ie(n,i)]);return Lw(r,null,i)}function Lw(e,n,i){const r=e.length,o=[];if(r>3){const a=[],u=1-i.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let c=1;c+2<r;c++){const h=e[c];a[0]=[h[0],h[1]],a[1]=[h[0]+(u*e[c+1][0]-u*e[c-1][0])/6,h[1]+(u*e[c+1][1]-u*e[c-1][1])/6],a[2]=[e[c+1][0]+(u*e[c][0]-u*e[c+2][0])/6,e[c+1][1]+(u*e[c][1]-u*e[c+2][1])/6],a[3]=[e[c+1][0],e[c+1][1]],o.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}}else r===3?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&o.push(...F3(e[0][0],e[0][1],e[1][0],e[1][1],i,!0,!0));return o}function mA(e,n,i,r,o,a,u,c){const h=c.roughness===0,g=[],p=[];if(h){e=e/4,p.push([n+r*Math.cos(-e),i+o*Math.sin(-e)]);for(let m=0;m<=Math.PI*2;m=m+e){const w=[n+r*Math.cos(m),i+o*Math.sin(m)];g.push(w),p.push(w)}p.push([n+r*Math.cos(0),i+o*Math.sin(0)]),p.push([n+r*Math.cos(e),i+o*Math.sin(e)])}else{const m=Ie(.5,c)-Math.PI/2;p.push([Ie(a,c)+n+.9*r*Math.cos(m-e),Ie(a,c)+i+.9*o*Math.sin(m-e)]);const w=Math.PI*2+m-.01;for(let x=m;x<w;x=x+e){const T=[Ie(a,c)+n+r*Math.cos(x),Ie(a,c)+i+o*Math.sin(x)];g.push(T),p.push(T)}p.push([Ie(a,c)+n+r*Math.cos(m+Math.PI*2+u*.5),Ie(a,c)+i+o*Math.sin(m+Math.PI*2+u*.5)]),p.push([Ie(a,c)+n+.98*r*Math.cos(m+u),Ie(a,c)+i+.98*o*Math.sin(m+u)]),p.push([Ie(a,c)+n+.9*r*Math.cos(m+u*.5),Ie(a,c)+i+.9*o*Math.sin(m+u*.5)])}return[p,g]}function vA(e,n,i,r,o,a,u,c,h){const g=a+Ie(.1,h),p=[];p.push([Ie(c,h)+n+.9*r*Math.cos(g-e),Ie(c,h)+i+.9*o*Math.sin(g-e)]);for(let m=g;m<=u;m=m+e)p.push([Ie(c,h)+n+r*Math.cos(m),Ie(c,h)+i+o*Math.sin(m)]);return p.push([n+r*Math.cos(u),i+o*Math.sin(u)]),p.push([n+r*Math.cos(u),i+o*Math.sin(u)]),Lw(p,null,h)}function RR(e,n,i,r,o,a,u,c){const h=[],g=[c.maxRandomnessOffset||1,(c.maxRandomnessOffset||1)+.3];let p=[0,0];const m=c.disableMultiStroke?1:2,w=c.preserveVertices;for(let x=0;x<m;x++)x===0?h.push({op:"move",data:[u[0],u[1]]}):h.push({op:"move",data:[u[0]+(w?0:Ie(g[0],c)),u[1]+(w?0:Ie(g[0],c))]}),p=w?[o,a]:[o+Ie(g[x],c),a+Ie(g[x],c)],h.push({op:"bcurveTo",data:[e+Ie(g[x],c),n+Ie(g[x],c),i+Ie(g[x],c),r+Ie(g[x],c),p[0],p[1]]});return h}function em(e){return[...e]}function yA(e,n=0){const i=e.length;if(i<3)throw new Error("A curve must have at least three points.");const r=[];if(i===3)r.push(em(e[0]),em(e[1]),em(e[2]),em(e[2]));else{const o=[];o.push(e[0],e[0]);for(let c=1;c<e.length;c++)o.push(e[c]),c===e.length-1&&o.push(e[c]);const a=[],u=1-n;r.push(em(o[0]));for(let c=1;c+2<o.length;c++){const h=o[c];a[0]=[h[0],h[1]],a[1]=[h[0]+(u*o[c+1][0]-u*o[c-1][0])/6,h[1]+(u*o[c+1][1]-u*o[c-1][1])/6],a[2]=[o[c+1][0]+(u*o[c][0]-u*o[c+2][0])/6,o[c+1][1]+(u*o[c][1]-u*o[c+2][1])/6],a[3]=[o[c+1][0],o[c+1][1]],r.push(a[1],a[2],a[3])}}return r}function OR(e,n){return Math.sqrt(fw(e,n))}function fw(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function LR(e,n,i){const r=fw(n,i);if(r===0)return fw(e,n);let o=((e[0]-n[0])*(i[0]-n[0])+(e[1]-n[1])*(i[1]-n[1]))/r;return o=Math.max(0,Math.min(1,o)),fw(e,kh(n,i,o))}function kh(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function _R(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let u=3*r[0]-2*i[0]-a[0];u*=u;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let g=3*o[1]-2*a[1]-i[1];return g*=g,u<h&&(u=h),c<g&&(c=g),u+c}function k3(e,n,i,r){const o=r||[];if(_R(e,n)<i){const a=e[n+0];o.length?OR(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const u=e[n+0],c=e[n+1],h=e[n+2],g=e[n+3],p=kh(u,c,.5),m=kh(c,h,.5),w=kh(h,g,.5),x=kh(p,m,.5),T=kh(m,w,.5),D=kh(x,T,.5);k3([u,p,x,D],0,i,o),k3([D,T,w,g],0,i,o)}return o}function I3(e,n,i,r,o){const a=o||[],u=e[n],c=e[i-1];let h=0,g=1;for(let p=n+1;p<i-1;++p){const m=LR(e[p],u,c);m>h&&(h=m,g=p)}return Math.sqrt(h)>r?(I3(e,n,g+1,r,a),I3(e,g,i,r,a)):(a.length||a.push(u),a.push(c)),a}function wA(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const u=a*3;k3(e,u,n,r)}return i&&i>0?I3(r,0,r.length,i):r}function FR(e,n){return Math.sqrt(hw(e,n))}function hw(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function kR(e,n,i){const r=hw(n,i);if(r===0)return hw(e,n);let o=((e[0]-n[0])*(i[0]-n[0])+(e[1]-n[1])*(i[1]-n[1]))/r;return o=Math.max(0,Math.min(1,o)),hw(e,Ih(n,i,o))}function Ih(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function IR(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let u=3*r[0]-2*i[0]-a[0];u*=u;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let g=3*o[1]-2*a[1]-i[1];return g*=g,u<h&&(u=h),c<g&&(c=g),u+c}function H3(e,n,i,r){const o=r||[];if(IR(e,n)<i){const a=e[n+0];o.length?FR(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const u=e[n+0],c=e[n+1],h=e[n+2],g=e[n+3],p=Ih(u,c,.5),m=Ih(c,h,.5),w=Ih(h,g,.5),x=Ih(p,m,.5),T=Ih(m,w,.5),D=Ih(x,T,.5);H3([u,p,x,D],0,i,o),H3([D,T,w,g],0,i,o)}return o}function HR(e,n){return N3(e,0,e.length,n)}function N3(e,n,i,r,o){const a=o||[],u=e[n],c=e[i-1];let h=0,g=1;for(let p=n+1;p<i-1;++p){const m=kR(e[p],u,c);m>h&&(h=m,g=p)}return Math.sqrt(h)>r?(N3(e,n,g+1,r,a),N3(e,g,i,r,a)):(a.length||a.push(u),a.push(c)),a}function NR(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const u=a*3;H3(e,u,n,r)}return r}function GR(e,n,i){const r=n5(e),o=U4(j4(r)),a=[];let u=[],c=[0,0],h=[];const g=()=>{h.length>=4&&u.push(...NR(h,n)),h=[]},p=()=>{g(),u.length&&(a.push(u),u=[])};for(const{key:w,data:x}of o)switch(w){case"M":p(),c=[x[0],x[1]],u.push(c);break;case"L":g(),u.push([x[0],x[1]]);break;case"C":if(!h.length){const T=u.length?u[u.length-1]:c;h.push([T[0],T[1]])}h.push([x[0],x[1]]),h.push([x[2],x[3]]),h.push([x[4],x[5]]);break;case"Z":g(),u.push([c[0],c[1]]);break}if(p(),!i)return a;const m=[];for(const w of a){const x=HR(w,i);x.length&&m.push(x)}return m}const ys="none";class _w{constructor(n){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=n||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return yR()}_o(n){return n?Object.assign({},this.defaultOptions,n):this.defaultOptions}_d(n,i,r){return{shape:n,sets:i||[],options:r||this.defaultOptions}}line(n,i,r,o,a){const u=this._o(a);return this._d("line",[V4(n,i,r,o,u)],u)}rectangle(n,i,r,o,a){const u=this._o(a),c=[],h=AR(n,i,r,o,u);if(u.fill){const g=[[n,i],[n+r,i],[n+r,i+o],[n,i+o]];u.fillStyle==="solid"?c.push(bE([g],u)):c.push(sg([g],u))}return u.stroke!==ys&&c.push(h),this._d("rectangle",c,u)}ellipse(n,i,r,o,a){const u=this._o(a),c=[],h=W4(r,o,u),g=_3(n,i,u,h);if(u.fill)if(u.fillStyle==="solid"){const p=_3(n,i,u,h).opset;p.type="fillPath",c.push(p)}else c.push(sg([g.estimatedPoints],u));return u.stroke!==ys&&c.push(g.opset),this._d("ellipse",c,u)}circle(n,i,r,o){const a=this.ellipse(n,i,r,r,o);return a.shape="circle",a}linearPath(n,i){const r=this._o(i);return this._d("linearPath",[cw(n,!1,r)],r)}arc(n,i,r,o,a,u,c=!1,h){const g=this._o(h),p=[],m=dA(n,i,r,o,a,u,c,!0,g);if(c&&g.fill)if(g.fillStyle==="solid"){const w=Object.assign({},g);w.disableMultiStroke=!0;const x=dA(n,i,r,o,a,u,!0,!1,w);x.type="fillPath",p.push(x)}else p.push(bR(n,i,r,o,a,u,g));return g.stroke!==ys&&p.push(m),this._d("arc",p,g)}curve(n,i){const r=this._o(i),o=[],a=hA(n,r);if(r.fill&&r.fill!==ys)if(r.fillStyle==="solid"){const u=hA(n,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(u.ops)})}else{const u=[],c=n;if(c.length){const g=typeof c[0][0]=="number"?[c]:c;for(const p of g)p.length<3?u.push(...p):p.length===3?u.push(...wA(yA([p[0],p[0],p[1],p[2]]),10,(1+r.roughness)/2)):u.push(...wA(yA(p),10,(1+r.roughness)/2))}u.length&&o.push(sg([u],r))}return r.stroke!==ys&&o.push(a),this._d("curve",o,r)}polygon(n,i){const r=this._o(i),o=[],a=cw(n,!0,r);return r.fill&&(r.fillStyle==="solid"?o.push(bE([n],r)):o.push(sg([n],r))),r.stroke!==ys&&o.push(a),this._d("polygon",o,r)}path(n,i){const r=this._o(i),o=[];if(!n)return this._d("path",o,r);n=(n||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=r.fill&&r.fill!=="transparent"&&r.fill!==ys,u=r.stroke!==ys,c=!!(r.simplification&&r.simplification<1),h=c?4-4*(r.simplification||1):(1+r.roughness)/2,g=GR(n,1,h),p=gA(n,r);if(a)if(r.fillStyle==="solid")if(g.length===1){const m=gA(n,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));o.push({type:"fillPath",ops:this._mergedShape(m.ops)})}else o.push(bE(g,r));else o.push(sg(g,r));return u&&(c?g.forEach(m=>{o.push(cw(m,!1,r))}):o.push(p)),this._d("path",o,r)}opsToPath(n,i){let r="";for(const o of n.ops){const a=typeof i=="number"&&i>=0?o.data.map(u=>+u.toFixed(i)):o.data;switch(o.op){case"move":r+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":r+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":r+=`L${a[0]} ${a[1]} `;break}}return r.trim()}toPaths(n){const i=n.sets||[],r=n.options||this.defaultOptions,o=[];for(const a of i){let u=null;switch(a.type){case"path":u={d:this.opsToPath(a),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:ys};break;case"fillPath":u={d:this.opsToPath(a),stroke:ys,strokeWidth:0,fill:r.fill||ys};break;case"fillSketch":u=this.fillSketch(a,r);break}u&&o.push(u)}return o}fillSketch(n,i){let r=i.fillWeight;return r<0&&(r=i.strokeWidth/2),{d:this.opsToPath(n),stroke:i.fill||ys,strokeWidth:r,fill:ys}}_mergedShape(n){return n.filter((i,r)=>r===0?!0:i.op!=="move")}}class zR{constructor(n,i){this.canvas=n,this.ctx=this.canvas.getContext("2d"),this.gen=new _w(i)}draw(n){const i=n.sets||[],r=n.options||this.getDefaultOptions(),o=this.ctx,a=n.options.fixedDecimalPlaceDigits;for(const u of i)switch(u.type){case"path":o.save(),o.strokeStyle=r.stroke==="none"?"transparent":r.stroke,o.lineWidth=r.strokeWidth,r.strokeLineDash&&o.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(o.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(o,u,a),o.restore();break;case"fillPath":{o.save(),o.fillStyle=r.fill||"";const c=n.shape==="curve"||n.shape==="polygon"||n.shape==="path"?"evenodd":"nonzero";this._drawToContext(o,u,a,c),o.restore();break}case"fillSketch":this.fillSketch(o,u,r);break}}fillSketch(n,i,r){let o=r.fillWeight;o<0&&(o=r.strokeWidth/2),n.save(),r.fillLineDash&&n.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(n.lineDashOffset=r.fillLineDashOffset),n.strokeStyle=r.fill||"",n.lineWidth=o,this._drawToContext(n,i,r.fixedDecimalPlaceDigits),n.restore()}_drawToContext(n,i,r,o="nonzero"){n.beginPath();for(const a of i.ops){const u=typeof r=="number"&&r>=0?a.data.map(c=>+c.toFixed(r)):a.data;switch(a.op){case"move":n.moveTo(u[0],u[1]);break;case"bcurveTo":n.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"lineTo":n.lineTo(u[0],u[1]);break}}i.type==="fillPath"?n.fill(o):n.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(n,i,r,o,a){const u=this.gen.line(n,i,r,o,a);return this.draw(u),u}rectangle(n,i,r,o,a){const u=this.gen.rectangle(n,i,r,o,a);return this.draw(u),u}ellipse(n,i,r,o,a){const u=this.gen.ellipse(n,i,r,o,a);return this.draw(u),u}circle(n,i,r,o){const a=this.gen.circle(n,i,r,o);return this.draw(a),a}linearPath(n,i){const r=this.gen.linearPath(n,i);return this.draw(r),r}polygon(n,i){const r=this.gen.polygon(n,i);return this.draw(r),r}arc(n,i,r,o,a,u,c=!1,h){const g=this.gen.arc(n,i,r,o,a,u,c,h);return this.draw(g),g}curve(n,i){const r=this.gen.curve(n,i);return this.draw(r),r}path(n,i){const r=this.gen.path(n,i);return this.draw(r),r}}const k2="http://www.w3.org/2000/svg";class jR{constructor(n,i){this.svg=n,this.gen=new _w(i)}draw(n){const i=n.sets||[],r=n.options||this.getDefaultOptions(),o=this.svg.ownerDocument||window.document,a=o.createElementNS(k2,"g"),u=n.options.fixedDecimalPlaceDigits;for(const c of i){let h=null;switch(c.type){case"path":{h=o.createElementNS(k2,"path"),h.setAttribute("d",this.opsToPath(c,u)),h.setAttribute("stroke",r.stroke),h.setAttribute("stroke-width",r.strokeWidth+""),h.setAttribute("fill","none"),r.strokeLineDash&&h.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{h=o.createElementNS(k2,"path"),h.setAttribute("d",this.opsToPath(c,u)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",r.fill||""),(n.shape==="curve"||n.shape==="polygon")&&h.setAttribute("fill-rule","evenodd");break}case"fillSketch":{h=this.fillSketch(o,c,r);break}}h&&a.appendChild(h)}return a}fillSketch(n,i,r){let o=r.fillWeight;o<0&&(o=r.strokeWidth/2);const a=n.createElementNS(k2,"path");return a.setAttribute("d",this.opsToPath(i,r.fixedDecimalPlaceDigits)),a.setAttribute("stroke",r.fill||""),a.setAttribute("stroke-width",o+""),a.setAttribute("fill","none"),r.fillLineDash&&a.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(n,i){return this.gen.opsToPath(n,i)}line(n,i,r,o,a){const u=this.gen.line(n,i,r,o,a);return this.draw(u)}rectangle(n,i,r,o,a){const u=this.gen.rectangle(n,i,r,o,a);return this.draw(u)}ellipse(n,i,r,o,a){const u=this.gen.ellipse(n,i,r,o,a);return this.draw(u)}circle(n,i,r,o){const a=this.gen.circle(n,i,r,o);return this.draw(a)}linearPath(n,i){const r=this.gen.linearPath(n,i);return this.draw(r)}polygon(n,i){const r=this.gen.polygon(n,i);return this.draw(r)}arc(n,i,r,o,a,u,c=!1,h){const g=this.gen.arc(n,i,r,o,a,u,c,h);return this.draw(g)}curve(n,i){const r=this.gen.curve(n,i);return this.draw(r)}path(n,i){const r=this.gen.path(n,i);return this.draw(r)}}const UR={canvas(e,n){return new zR(e,n)},svg(e,n){return new jR(e,n)},generator(e){return new _w(e)},newSeed(){return _w.newSeed()}};var q4=Symbol.for("immer-nothing"),xA=Symbol.for("immer-draftable"),As=Symbol.for("immer-state");function Aa(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ag=Object.getPrototypeOf;function xu(e){return!!e&&!!e[As]}function Qh(e){var n;return e?Y4(e)||Array.isArray(e)||!!e[xA]||!!((n=e.constructor)!=null&&n[xA])||Mx(e)||Rx(e):!1}var $R=Object.prototype.constructor.toString();function Y4(e){if(!e||typeof e!="object")return!1;const n=Ag(e);if(n===null)return!0;const i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===$R}function Fw(e,n){Px(e)===0?Reflect.ownKeys(e).forEach(i=>{n(i,e[i],e)}):e.forEach((i,r)=>n(r,i,e))}function Px(e){const n=e[As];return n?n.type_:Array.isArray(e)?1:Mx(e)?2:Rx(e)?3:0}function G3(e,n){return Px(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function K4(e,n,i){const r=Px(e);r===2?e.set(n,i):r===3?e.add(i):e[n]=i}function VR(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function Mx(e){return e instanceof Map}function Rx(e){return e instanceof Set}function Hh(e){return e.copy_||e.base_}function z3(e,n){if(Mx(e))return new Map(e);if(Rx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=Y4(e);if(n===!0||n==="class_only"&&!i){const r=Object.getOwnPropertyDescriptors(e);delete r[As];let o=Reflect.ownKeys(r);for(let a=0;a<o.length;a++){const u=o[a],c=r[u];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[u]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[u]})}return Object.create(Ag(e),r)}else{const r=Ag(e);if(r!==null&&i)return{...e};const o=Object.create(r);return Object.assign(o,e)}}function i5(e,n=!1){return Ox(e)||xu(e)||!Qh(e)||(Px(e)>1&&(e.set=e.add=e.clear=e.delete=WR),Object.freeze(e),n&&Object.entries(e).forEach(([i,r])=>i5(r,!0))),e}function WR(){Aa(2)}function Ox(e){return Object.isFrozen(e)}var XR={};function Jh(e){const n=XR[e];return n||Aa(0,e),n}var Pm;function Z4(){return Pm}function qR(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function CA(e,n){n&&(Jh("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function j3(e){U3(e),e.drafts_.forEach(YR),e.drafts_=null}function U3(e){e===Pm&&(Pm=e.parent_)}function EA(e){return Pm=qR(Pm,e)}function YR(e){const n=e[As];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function SA(e,n){n.unfinalizedDrafts_=n.drafts_.length;const i=n.drafts_[0];return e!==void 0&&e!==i?(i[As].modified_&&(j3(n),Aa(4)),Qh(e)&&(e=kw(n,e),n.parent_||Iw(n,e)),n.patches_&&Jh("Patches").generateReplacementPatches_(i[As].base_,e,n.patches_,n.inversePatches_)):e=kw(n,i,[]),j3(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==q4?e:void 0}function kw(e,n,i){if(Ox(n))return n;const r=n[As];if(!r)return Fw(n,(o,a)=>TA(e,r,n,o,a,i)),n;if(r.scope_!==e)return n;if(!r.modified_)return Iw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let a=o,u=!1;r.type_===3&&(a=new Set(o),o.clear(),u=!0),Fw(a,(c,h)=>TA(e,r,o,c,h,i,u)),Iw(e,o,!1),i&&e.patches_&&Jh("Patches").generatePatches_(r,i,e.patches_,e.inversePatches_)}return r.copy_}function TA(e,n,i,r,o,a,u){if(xu(o)){const c=a&&n&&n.type_!==3&&!G3(n.assigned_,r)?a.concat(r):void 0,h=kw(e,o,c);if(K4(i,r,h),xu(h))e.canAutoFreeze_=!1;else return}else u&&i.add(o);if(Qh(o)&&!Ox(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;kw(e,o),(!n||!n.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(i,r)&&Iw(e,o)}}function Iw(e,n,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&i5(n,i)}function KR(e,n){const i=Array.isArray(e),r={type_:i?1:0,scope_:n?n.scope_:Z4(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,a=r5;i&&(o=[r],a=Mm);const{revoke:u,proxy:c}=Proxy.revocable(o,a);return r.draft_=c,r.revoke_=u,c}var r5={get(e,n){if(n===As)return e;const i=Hh(e);if(!G3(i,n))return ZR(e,i,n);const r=i[n];return e.finalized_||!Qh(r)?r:r===BE(e.base_,n)?(PE(e),e.copy_[n]=V3(r,e)):r},has(e,n){return n in Hh(e)},ownKeys(e){return Reflect.ownKeys(Hh(e))},set(e,n,i){const r=Q4(Hh(e),n);if(r!=null&&r.set)return r.set.call(e.draft_,i),!0;if(!e.modified_){const o=BE(Hh(e),n),a=o==null?void 0:o[As];if(a&&a.base_===i)return e.copy_[n]=i,e.assigned_[n]=!1,!0;if(VR(i,o)&&(i!==void 0||G3(e.base_,n)))return!0;PE(e),$3(e)}return e.copy_[n]===i&&(i!==void 0||n in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=i,e.assigned_[n]=!0),!0},deleteProperty(e,n){return BE(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,PE(e),$3(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const i=Hh(e),r=Reflect.getOwnPropertyDescriptor(i,n);return r&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:r.enumerable,value:i[n]}},defineProperty(){Aa(11)},getPrototypeOf(e){return Ag(e.base_)},setPrototypeOf(){Aa(12)}},Mm={};Fw(r5,(e,n)=>{Mm[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});Mm.deleteProperty=function(e,n){return Mm.set.call(this,e,n,void 0)};Mm.set=function(e,n,i){return r5.set.call(this,e[0],n,i,e[0])};function BE(e,n){const i=e[As];return(i?Hh(i):e)[n]}function ZR(e,n,i){var o;const r=Q4(n,i);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(e.draft_):void 0}function Q4(e,n){if(!(n in e))return;let i=Ag(e);for(;i;){const r=Object.getOwnPropertyDescriptor(i,n);if(r)return r;i=Ag(i)}}function $3(e){e.modified_||(e.modified_=!0,e.parent_&&$3(e.parent_))}function PE(e){e.copy_||(e.copy_=z3(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var QR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(n,i,r)=>{if(typeof n=="function"&&typeof i!="function"){const a=i;i=n;const u=this;return function(h=a,...g){return u.produce(h,p=>i.call(this,p,...g))}}typeof i!="function"&&Aa(6),r!==void 0&&typeof r!="function"&&Aa(7);let o;if(Qh(n)){const a=EA(this),u=V3(n,void 0);let c=!0;try{o=i(u),c=!1}finally{c?j3(a):U3(a)}return CA(a,r),SA(o,a)}else if(!n||typeof n!="object"){if(o=i(n),o===void 0&&(o=n),o===q4&&(o=void 0),this.autoFreeze_&&i5(o,!0),r){const a=[],u=[];Jh("Patches").generateReplacementPatches_(n,o,a,u),r(a,u)}return o}else Aa(1,n)},this.produceWithPatches=(n,i)=>{if(typeof n=="function")return(u,...c)=>this.produceWithPatches(u,h=>n(h,...c));let r,o;return[this.produce(n,i,(u,c)=>{r=u,o=c}),r,o]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qh(e)||Aa(8),xu(e)&&(e=JR(e));const n=EA(this),i=V3(e,void 0);return i[As].isManual_=!0,U3(n),i}finishDraft(e,n){const i=e&&e[As];(!i||!i.isManual_)&&Aa(9);const{scope_:r}=i;return CA(r,n),SA(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,n){let i;for(i=n.length-1;i>=0;i--){const o=n[i];if(o.path.length===0&&o.op==="replace"){e=o.value;break}}i>-1&&(n=n.slice(i+1));const r=Jh("Patches").applyPatches_;return xu(e)?r(e,n):this.produce(e,o=>r(o,n))}};function V3(e,n){const i=Mx(e)?Jh("MapSet").proxyMap_(e,n):Rx(e)?Jh("MapSet").proxySet_(e,n):KR(e,n);return(n?n.scope_:Z4()).drafts_.push(i),i}function JR(e){return xu(e)||Aa(10,e),J4(e)}function J4(e){if(!Qh(e)||Ox(e))return e;const n=e[As];let i;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,i=z3(e,n.scope_.immer_.useStrictShallowCopy_)}else i=z3(e,!0);return Fw(i,(r,o)=>{K4(i,r,J4(o))}),n&&(n.finalized_=!1),i}var Ds=new QR,tO=Ds.produce;Ds.produceWithPatches.bind(Ds);Ds.setAutoFreeze.bind(Ds);Ds.setUseStrictShallowCopy.bind(Ds);Ds.applyPatches.bind(Ds);var I2=Ds.createDraft.bind(Ds),H2=Ds.finishDraft.bind(Ds),Sa={},AA;function eO(){if(AA)return Sa;AA=1,Object.defineProperty(Sa,"__esModule",{value:!0});for(var e=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},i={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:e?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},o=1;o<20;o++)r["f"+o]=111+o;function a(w,x,T){x&&!("byKey"in x)&&(T=x,x=null),Array.isArray(w)||(w=[w]);var D=w.map(function(A){return h(A,x)}),b=function(H){return D.some(function(R){return g(R,H)})},B=T==null?b:b(T);return B}function u(w,x){return a(w,x)}function c(w,x){return a(w,{byKey:!0},x)}function h(w,x){var T=x&&x.byKey,D={};w=w.replace("++","+add");var b=w.split("+"),B=b.length;for(var A in n)D[n[A]]=!1;var H=!0,R=!1,k=void 0;try{for(var W=b[Symbol.iterator](),U;!(H=(U=W.next()).done);H=!0){var nt=U.value,st=nt.endsWith("?")&&nt.length>1;st&&(nt=nt.slice(0,-1));var ft=m(nt),Et=n[ft];if(nt.length>1&&!Et&&!i[nt]&&!r[ft])throw new TypeError('Unknown modifier: "'+nt+'"');(B===1||!Et)&&(T?D.key=ft:D.which=p(nt)),Et&&(D[Et]=st?null:!0)}}catch(ct){R=!0,k=ct}finally{try{!H&&W.return&&W.return()}finally{if(R)throw k}}return D}function g(w,x){for(var T in w){var D=w[T],b=void 0;if(D!=null&&(T==="key"&&x.key!=null?b=x.key.toLowerCase():T==="which"?b=D===91&&x.which===93?91:x.which:b=x[T],!(b==null&&D===!1)&&b!==D))return!1}return!0}function p(w){w=m(w);var x=r[w]||w.toUpperCase().charCodeAt(0);return x}function m(w){return w=w.toLowerCase(),w=i[w]||w,w}return Sa.default=a,Sa.isHotkey=a,Sa.isCodeHotkey=u,Sa.isKeyHotkey=c,Sa.parseHotkey=h,Sa.compareHotkey=g,Sa.toKeyCode=p,Sa.toKeyName=m,Sa}var ln=eO(),Da;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(Da||(Da={}));var gm;(function(e){e.crosshair="crosshair"})(gm||(gm={}));const ME=[Da.ns,Da.nesw,Da.ew,Da.nwse],Ml="plait-board-attached",_i=1,W3=2,uv="selection-rectangle",nO="selection-rectangle-bounding",iO=.1,tb=.1,eb=4,rO="plait-board-container",nb="active-with-moving",DA="rotate-handle",oO="resize-handle",sO=20,o5={MAIN:0,WHEEL:1,SECONDARY:2},s5=3,ib=10,a5=5;function aO(e){return!!e.beforeContextChange}function lO(e){return!!e.onContextChanged}const bA=new WeakMap,dw=new WeakMap,mg=new WeakMap,Wh=new WeakMap,X3=new WeakMap,lm=new WeakMap,um=new WeakMap,q3=new WeakMap,Hw=new WeakMap,Nw=new WeakMap,Y3=new WeakMap,K3=new WeakMap,Z3=new WeakMap,Q3=new WeakMap,du=new WeakMap,rb=new WeakMap,J3=new WeakMap,ob=new WeakMap,l5=new WeakMap,u5=new WeakMap,Lx=new WeakMap,_x=new WeakMap,BA=new WeakMap,cm=new WeakMap;function td(e){return e==null}const Rm=(e,n)=>e+Math.floor(n*255).toString(16);function uO(e){return e.button===2}function c5(e){const n=new Map;return e.forEach(i=>{n.has(i.id)||n.set(i.id,i)}),Array.from(n.values())}const cO=(e,n,i=e.length-1)=>{i<0&&(i=e.length+i),i=Math.min(e.length-1,Math.max(i,0));let r=i+1;for(;--r>-1;)if(n(e[r],r,e))return r;return-1},fO=(e,n,i=0)=>{i<0&&(i=e.length+i),i=Math.min(e.length,Math.max(i,0));let r=i-1;for(;++r<e.length;)if(n(e[r],r,e))return r;return-1},hO=e=>{e.sort((n,i)=>n-i);for(let n=1;n<e.length;n++)if(e[n]!==e[n-1]+1)return!1;return!0},dO={isViewport:e=>!td(e.zoom)&&!td(e.viewBackgroundColor)},Se={ancestors(e,n={}){const{reverse:i=!1}=n;let r=Se.levels(e,n);return i?r=r.slice(1):r=r.slice(0,-1),r},levels(e,n={}){const{reverse:i=!1}=n,r=[];for(let o=0;o<=e.length;o++)r.push(e.slice(0,o));return i&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const n=e[e.length-1];return e.slice(0,-1).concat(n+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const n=e[e.length-1];if(n<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(n-1)},isAncestor(e,n){return e.length<n.length&&Se.compare(e,n)===0},compare(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0},equals(e,n){return e.length===n.length&&e.every((i,r)=>i===n[r])},endsBefore(e,n){const i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],u=n[i];return Se.equals(r,o)&&a<u},isSibling(e,n){if(e.length!==n.length)return!1;const i=e.slice(0,-1),r=n.slice(0,-1),o=e[e.length-1],a=n[n.length-1];return o!==a&&Se.equals(i,r)},transform(e,n){if(!e)return null;const i=[...e];if(e.length===0)return i;switch(n.type){case"insert_node":{const{path:r}=n;(Se.equals(r,i)||Se.endsBefore(r,i)||Se.isAncestor(r,i))&&(i[r.length-1]+=1);break}case"remove_node":{const{path:r}=n;if(Se.equals(r,i)||Se.isAncestor(r,i))return null;Se.endsBefore(r,i)&&(i[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:o}=n;if(Se.equals(r,o))return i;if(Se.isAncestor(r,i)||Se.equals(r,i)){const a=o.slice();return Se.endsBefore(r,o)&&r.length<o.length&&(a[r.length-1]-=1),a.concat(i.slice(r.length))}else Se.isSibling(r,o)&&(Se.isAncestor(o,i)||Se.equals(o,i))?Se.endsBefore(r,i)?i[r.length-1]-=1:i[r.length-1]+=1:Se.endsBefore(o,i)||Se.equals(o,i)||Se.isAncestor(o,i)?(Se.endsBefore(r,i)&&(i[r.length-1]-=1),i[o.length-1]+=1):Se.endsBefore(r,i)&&(Se.equals(o,i)&&(i[o.length-1]+=1),i[r.length-1]-=1);break}}return i}},Je={parent:(e,n)=>{const i=Se.parent(n);return Je.get(e,i)},*parents(e,n,i={}){for(const r of Se.ancestors(n,i))yield Je.get(e,r)},get(e,n){let i=e;for(let r=0;r<n.length;r++){const o=n[r];if(!i||!i.children||!i.children[o])throw new Error(`Cannot find a descendant at path [${n}]`);i=i.children[o]}return i},last(e,n){let i=Je.get(e,n);for(;i&&i.children&&i.children.length>0;){const r=i.children.length-1;i=i.children[r]}return i},first(e,n){const i=n.slice();let r=Je.get(e,i);if(!r.children||!e.isExpanded(r))return r;for(;r&&r.children&&r.children.length>0&&e.isExpanded(r)&&r.children.length!==0;)r=r.children[0],i.push(0);return r}},gO=(e,n,i,r,o)=>{var a,u;switch(o.type){case"insert_node":{const{path:c,node:h}=o,g=Je.parent(e,c),p=c[c.length-1];if(!g.children||p>g.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${c}] because the destination is past the end of the node.`);g.children.splice(p,0,h);break}case"remove_node":{const{path:c}=o,h=Je.parent(e,c),g=c[c.length-1];if(!h.children||g>h.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${c}] because the destination is past the end of the node.`);h.children.splice(g,1);break}case"move_node":{const{path:c,newPath:h}=o;if(Se.isAncestor(c,h))throw new Error(`Cannot move a path [${c}] to new path [${h}] because the destination is inside itself.`);const g=Je.get(e,c),p=Je.parent(e,c),m=c[c.length-1];(a=p.children)==null||a.splice(m,1);const w=Se.transform(c,o),x=Je.get(e,Se.parent(w)),T=w[w.length-1];(u=x.children)==null||u.splice(T,0,g);break}case"set_node":{const{path:c,properties:h,newProperties:g}=o;if(c.length===0)throw new Error("Cannot set properties on the root node!");const p=Je.get(e,c);for(const m in g){const w=g[m];w==null?delete p[m]:p[m]=w}for(const m in h)g.hasOwnProperty(m)||delete p[m];break}case"set_viewport":{const{newProperties:c}=o;if(c==null)i=c;else{if(i==null){if(!dO.isViewport(c))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(c)} when there is no current viewport.`);i={...c}}for(const h in c){const g=c[h];g==null?delete i[h]:i[h]=g}}break}case"set_selection":{const{newProperties:c}=o;c==null?n=c:n===null?n=o.newProperties:n=c;break}case"set_theme":{const{newProperties:c}=o;r=c;break}}return{selection:n,viewport:i,theme:r}},pO={transform(e,n){e.children=I2(e.children);let i=e.viewport&&I2(e.viewport),r=e.selection&&I2(e.selection),o=e.theme&&I2(e.theme);try{const a=gO(e,r,i,o,n);i=a.viewport,r=a.selection,o=a.theme}finally{e.children=H2(e.children),r?e.selection=xu(r)?H2(r):r:e.selection=null,e.viewport=xu(i)?H2(i):i,e.theme=xu(o)?H2(o):o}}},I={isHit:(e,n)=>I.isHitX(e,n)&&I.isHitY(e,n),isHitX:(e,n)=>{const i=e.x<n.x?e.x:n.x,r=e.x+e.width>n.x+n.width?e.x+e.width:n.x+n.width;return Math.floor(r-i-e.width-n.width)<=0},isHitY:(e,n)=>{const i=e.y<n.y?e.y:n.y,r=e.y+e.height>n.y+n.height?e.y+e.height:n.y+n.height;return Math.floor(r-i-e.height-n.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,n,i){return I.getRectangleByPoint([e[0]-n/2,e[1]-i/2],n,i)},getRectangleByPoint(e,n,i){return{x:e[0],y:e[1],width:n,height:i}},getRectangleByPoints(e){mO(e)&&(e=[e]);let n=1/0,i=1/0,r=-1/0,o=-1/0;for(const u of e){const c=u.map(g=>g[0]),h=u.map(g=>g[1]);n=Math.min(n,...c),i=Math.min(i,...h),r=Math.max(r,...c),i=Math.min(i,...h),o=Math.max(o,...h)}return{x:n,y:i,width:r-n,height:o-i}},getCornerPointsByPoints(e){const n=e.map(c=>c[0]),i=e.map(c=>c[1]),r=Math.min(...n),o=Math.max(...n),a=Math.min(...i),u=Math.max(...i);return[[r,a],[o,a],[o,u],[r,u]]},getOutlineRectangle:(e,n)=>({x:e.x+n,y:e.y+n,width:e.width-n*2,height:e.height-n*2}),inflate:(e,n)=>{const i=n/2;return{x:e.x-i,y:e.y-i,width:e.width+i*2,height:e.height+i*2}},isEqual:(e,n)=>e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>I.getCenterPoint(I.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,n)=>[e.x+e.width*n[0],e.y+e.height*n[1]],expand(e,n,i=n,r=n,o=i){return{x:e.x-n,y:e.y-i,width:e.width+n+r,height:e.height+i+o}},getGapCenter(e,n,i){const r=i?"x":"y",o=i?"width":"height",u=[e[r],e[r]+e[o],n[r],n[r]+n[o]].sort((c,h)=>c-h);return(u[1]+u[2])/2},isPointInRectangle(e,n){const i=n[0],r=n[1];return i>e.x&&i<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;return e.forEach(a=>{n=Math.min(n,a.x),i=Math.min(i,a.y),r=Math.max(r,a.x+a.width),o=Math.max(o,a.y+a.height)}),{x:n,y:i,width:r-n,height:o-i}}};function mO(e){return Array.isArray(e)&&e.every(n=>Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number")}function sb(e,n,i,r,o,a){const u=e-i,c=n-r,h=o-i,g=a-r,p=u*h+c*g,m=h*h+g*g;let w=-1;m!==0&&(w=p/m);let x,T;w<0?(x=i,T=r):w>1?(x=o,T=a):(x=i+w*h,T=r+w*g);const D=e-x,b=n-T;return Math.hypot(D,b)}function Fx(e,n){const i=e[0],r=e[1],o=n[0][0],a=n[0][1],u=n[1][0],c=n[1][1],h=i-o,g=r-a,p=u-o,m=c-a,w=h*p+g*m,x=p*p+m*m;let T=-1;x!==0&&(T=w/x);let D,b;return T<0?(D=o,b=a):T>1?(D=u,b=c):(D=o+T*p,b=a+T*m),[D,b]}function ab(e,n){const i=n.length;let r=1/0;if(n.length===1)return be(...n[0],...e);for(let o=0;o<i-1;o++){const a=n[o],u=n[o+1],c=sb(e[0],e[1],a[0],a[1],u[0],u[1]);c<r&&(r=c)}return r}function Yn(e,n,i=!0){const r=n.length;let o=1/0,a=e;for(let u=0;u<r;u++){const c=n[u];if(u===r-1&&!i)continue;const h=u===r-1?n[0]:n[u+1],g=sb(e[0],e[1],c[0],c[1],h[0],h[1]);g<o&&(o=g,a=Fx(e,[c,h]))}return a}function f5(e,n){let i=1/0,r=e;for(const o of n){const a=Fx(e,o),u=be(e[0],e[1],a[0],a[1]);u<i&&(i=u,r=a)}return r}function Kr(e,n,i,r){const o={x:n[0]-i,y:n[1]-r,height:r*2,width:i*2},a=Math.abs(e[0]-o.x-o.width/2),u=Math.abs(e[1]-o.y-o.height/2);let c=.707,h=.707;const g=Math.abs(o.width)/2,p=Math.abs(o.height)/2;[0,1,2,3].forEach(x=>{const T=g*c,D=p*h,b=(g*g-p*p)*c**3/g,B=(p*p-g*g)*h**3/p,A=T-b,H=D-B,R=a-b,k=u-B,W=Math.hypot(H,A),U=Math.hypot(k,R);c=Math.min(1,Math.max(0,(R*W/U+b)/g)),h=Math.min(1,Math.max(0,(k*W/U+B)/p));const nt=Math.hypot(h,c);c/=nt,h/=nt});const m=e[0]>n[0]?1:-1,w=e[1]>n[1]?1:-1;return[n[0]+g*c*m,n[1]+p*h*w]}function Dg(e,n,i,r,o){return[(e-i)*Math.cos(o)-(n-r)*Math.sin(o)+i,(e-i)*Math.sin(o)+(n-r)*Math.cos(o)+r]}function be(e,n,i,r){const o=e-i,a=n-r;return Math.hypot(o,a)}function cv(e,n,i){var r=Math.max(i.x-e,0,e-(i.x+i.width)),o=Math.max(i.y-n,0,n-(i.y+i.height));return Math.sqrt(r*r+o*o)}const N2=(e,n,i,r)=>{if(Ce.isEquals(e,n)&&Ce.isEquals(i,r)&&!Ce.isEquals(e,i))return!1;const o=(m,w)=>m[0]*w[1]-m[1]*w[0],a=[n[0]-e[0],n[1]-e[1]],u=[i[0]-e[0],i[1]-e[1]],c=[r[0]-e[0],r[1]-e[1]],h=[e[0]-i[0],e[1]-i[1]],g=[n[0]-i[0],n[1]-i[1]],p=[r[0]-i[0],r[1]-i[1]];return o(a,u)*o(a,c)<=0&&o(p,h)*o(p,g)<=0},Gw=(e,n)=>{if(e.length===1)return I.isPointInRectangle(n,e[0]);const i=I.getCornerPoints(n),r=e.length;for(let o=0;o<r;o++){const a=e[o],u=e[(o+1)%r];if(o===r-1&&Ce.isEquals(a,u))continue;if(vO(a,u,n)||rf(a,i)||rf(u,i))return!0}return!1},vO=(e,n,i)=>{const r=I.getCornerPoints(i);return N2(e,n,r[0],r[1])||N2(e,n,r[1],r[2])||N2(e,n,r[2],r[3])||N2(e,n,r[3],r[0])},rf=(e,n)=>{const i=e[0],r=e[1];let o=!1;for(var a=0,u=n.length-1;a<n.length;u=a++){let c=n[a][0],h=n[a][1],g=n[u][0],p=n[u][1];h>r!=p>r&&i<(g-c)*(r-h)/(p-h)+c&&(o=!o)}return o},Tu=(e,n,i,r,o=0)=>{const a=Math.cos(o),u=Math.sin(o),c=(e[0]-n[0])*a+(e[1]-n[1])*u,h=(e[1]-n[1])*a-(e[0]-n[0])*u;return c*c/(i*i)+h*h/(r*r)<=1},h5=(e,n,i,r=0)=>{const{x:o,y:a,width:u,height:c}=n,h=e[0]>=o&&e[0]<=o+u&&e[1]>=a&&e[1]<=a+c,g=e[0]>=o&&e[0]<=o+i&&e[1]>=a&&e[1]<=a+i&&Math.hypot(e[0]-(o+i),e[1]-(a+i))>i,p=e[0]>=o&&e[0]<=o+i&&e[1]>=a+c&&e[1]<=a+c-i&&Math.hypot(e[0]-(o+i),e[1]-(a+c-i))>i,m=e[0]>=o+u-i&&e[0]<=o+u&&e[1]>=a&&e[1]<=a+i&&Math.hypot(e[0]-(o+u-i),e[1]-(a+i))>i,w=e[0]>=o+u-i&&e[0]<=o+u&&e[1]>=a+c-i&&e[1]<=a+c&&Math.hypot(e[0]-(o+u-i),e[1]-(a+c-i))>i;return h&&!(g||p||m||w)},fv=function(e){let i,r,o,a,u,c,h,g,p,m,w,x,T;var D,b,B,A,H,R;const k=[];k.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var W=e.length,U=0;U<W-1;U++)i=U==0?e[0]:e[U-1],r=e[U],o=e[U+1],a=U+2<W?e[U+2]:o,h=Math.sqrt(Math.pow(i[0]-r[0],2)+Math.pow(i[1]-r[1],2)),g=Math.sqrt(Math.pow(r[0]-o[0],2)+Math.pow(r[1]-o[1],2)),p=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),D=Math.pow(p,.5),B=Math.pow(p,2*.5),b=Math.pow(g,.5),A=Math.pow(g,2*.5),R=Math.pow(h,.5),H=Math.pow(h,2*.5),m=2*H+3*R*b+A,w=2*B+3*D*b+A,x=3*R*(R+b),x>0&&(x=1/x),T=3*D*(D+b),T>0&&(T=1/T),u=[(-A*i[0]+m*r[0]+H*o[0])*x,(-A*i[1]+m*r[1]+H*o[1])*x],c=[(B*r[0]+w*o[0]-A*a[0])*T,(B*r[1]+w*o[1]-A*a[1])*T],u[0]==0&&u[1]==0&&(u=r),c[0]==0&&c[1]==0&&(c=o),k.push(u,c,o);return k};function Rl(e,n,i,r){return Math.abs(n)===0?e>0?-1/0:1/0:-r*r*e/(i*i*n)}function Ol(e,n,i){if(i===1/0)return[0,-1];if(i===-1/0)return[0,1];let r=[1,-i];return n<0&&(r=[-r[0],-r[1]]),r}function yO(e){return+e.toFixed(2)}function kx(e,n){const i=Math.pow(10,n);return Math.ceil(e*i)/i}function tS(e,n,i=1e-6){return Math.abs(e-n)<=i}function PA(e,n,i,r,o,a,u=!0){if(o===0||a===0||e[0]===n[0]&&e[1]===n[1])return[];o=o<0?o:-o,a=a<0?a:-a,e[0]-=i,e[1]-=r,n[0]-=i,n[1]-=r;var c=(n[0]-e[0])*(n[0]-e[0])/o/o+(n[1]-e[1])*(n[1]-e[1])/a/a,h=2*e[0]*(n[0]-e[0])/o/o+2*e[1]*(n[1]-e[1])/a/a,g=e[0]*e[0]/o/o+e[1]*e[1]/a/a-1,p=[],m=h*h-4*c*g;return m===0?p.push(-h/2/c):m>0&&(p.push((-h+Math.sqrt(m))/2/c),p.push((-h-Math.sqrt(m))/2/c)),p.filter(w=>!u||w>=0&&w<=1).map(w=>[e[0]+(n[0]-e[0])*w+i,e[1]+(n[1]-e[1])*w+r])}function MA(e,n,i,r,o=.5){return[e+(i-e)*o,n+(r-n)*o]}function lb(e,n){const i=(n.endX-e[0])/2,r=(n.endY-e[1])/2,o=Math.cos(n.xAxisRotation),a=Math.sin(n.xAxisRotation),u=o*i+a*r,c=-a*i+o*r,h=Math.abs(n.rx),g=Math.abs(n.ry),p=u*u/(h*h)+c*c/(g*g),m=p>1?Math.sqrt(p):1,w=h*m,x=g*m,T=n.largeArcFlag===n.sweepFlag?-1:1,D=(w*w*x*x-w*w*c*c-x*x*u*u)/(w*w*c*c+x*x*u*u),b=T*Math.sqrt(Math.max(0,D)),B=b*(w*c/x),A=b*(-(x*u)/w),H=o*B-a*A+(e[0]+n.endX)/2,R=a*B+o*A+(e[1]+n.endY)/2;return{center:[H,R],rx:w,ry:x}}function Ix(e,n,i){const{center:r,rx:o,ry:a}=lb(n,i),u=Kr(e,r,o,a),c=Math.atan2(n[1]-r[1],n[0]-r[0]),h=Math.atan2(i.endY-r[1],i.endX-r[0]),g=Math.atan2(u[1]-r[1],u[0]-r[0]);if(wO(g,c,h,i.sweepFlag===1))return u;const m=be(e[0],e[1],n[0],n[1]),w=be(e[0],e[1],i.endX,i.endY);return m<w?n:[i.endX,i.endY]}function wO(e,n,i,r){const o=h=>(h%(2*Math.PI)+2*Math.PI)%(2*Math.PI),a=o(e),u=o(n),c=o(i);return r?u<=c?a>=u&&a<=c:a>=u||a<=c:u>=c?a<=u&&a>=c:a<=u||a>=c}function xO(e,n,i){const o=G.getBoardContainer(e).getBoundingClientRect();return cv(n,i,o)===0}function d5(e){const{hideScrollbar:n}=e.options;let i=0;if(!n){const r=G.getViewportContainer(e);i=r.offsetWidth-r.clientWidth}return i}const Ng="http://www.w3.org/2000/svg";function ze(){return document.createElementNS(Ng,"g")}function g5(){return document.createElementNS(Ng,"path")}function RE(e,n){const i=document.createElementNS(Ng,"rect");i.setAttribute("x",`${e.x}`),i.setAttribute("y",`${e.y}`),i.setAttribute("width",`${e.width}`),i.setAttribute("height",`${e.height}`);for(let r in n){const o=r;i.setAttribute(r,`${n[o]}`)}return i}const Ze=(e,n)=>{e.setAttribute("stroke-linecap",n)},CO=(e,n)=>{e.querySelectorAll("path").forEach(i=>{i.setAttribute("stroke-linecap",n)})};function EO(){return document.createElementNS(Ng,"mask")}function SO(e,n,i,r){var o=document.createElementNS(Ng,"text");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("fill",i),o.textContent=r,o}const TO=e=>AO(e)&&e.nodeType===1,AO=e=>e instanceof window.Node,DO=e=>!!(TO(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),bO=e=>e.button===o5.SECONDARY,Al=e=>e.button===o5.MAIN,BO=e=>e.button===o5.WHEEL;function p5(e,n,i,r){var o=document.createElementNS(Ng,"foreignObject");return o.setAttribute("x",`${e}`),o.setAttribute("y",`${n}`),o.setAttribute("width",`${kx(i,0)}`),o.setAttribute("height",`${r}`),o}function pm(e,n,i,r,o){const a=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");a&&(a.setAttribute("width",`${kx(n,0)}`),a.setAttribute("height",`${i}`),a.setAttribute("x",`${r}`),a.setAttribute("y",`${o}`))}function PO(e,n){const i=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");i&&i.setAttribute("width",`${kx(n,0)}`)}const MO=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),RO=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,zw=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),OO=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),LO=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),_O=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),FO=(e,n)=>e.type==="set_viewport"&&e.type===(n==null?void 0:n.type),kO=(e,n)=>!(e.type==="set_selection"||e.type==="set_viewport"),IO=e=>e.type!=="set_selection",js={isSaving(e){return OE.get(e)},isMerging(e){return tr.get(e)},isSplittingOnce(e){return z2.get(e)},setSplittingOnce(e,n){z2.set(e,n)},withMerging(e,n){const i=js.isMerging(e);tr.set(e,!0),n(),tr.set(e,i)},withNewBatch(e,n){const i=js.isMerging(e);tr.set(e,!0),z2.set(e,!0),n(),tr.set(e,i),z2.delete(e)},withoutMerging(e,n){const i=js.isMerging(e);tr.set(e,!1),n(),tr.set(e,i)},withoutSaving(e,n){const i=js.isSaving(e);OE.set(e,!1),n(),OE.set(e,i)}},HO={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},NO={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},GO={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Gn=e=>{const n=HO[e],i=NO[e],r=GO[e],o=n&&ln.isKeyHotkey(n),a=i&&ln.isKeyHotkey(i),u=r&&ln.isKeyHotkey(r);return c=>!!(o&&o(c)||zw&&a&&a(c)||!zw&&u&&u(c))},$r={isBold:Gn("bold"),isCompose:Gn("compose"),isArrow:Gn("arrow"),isMoveBackward:Gn("moveBackward"),isMoveForward:Gn("moveForward"),isMoveUp:Gn("moveUp"),isMoveDown:Gn("moveDown"),isDeleteBackward:Gn("deleteBackward"),isDeleteForward:Gn("deleteForward"),isDeleteLineBackward:Gn("deleteLineBackward"),isDeleteLineForward:Gn("deleteLineForward"),isDeleteWordBackward:Gn("deleteWordBackward"),isDeleteWordForward:Gn("deleteWordForward"),isExtendBackward:Gn("extendBackward"),isExtendForward:Gn("extendForward"),isExtendUp:Gn("extendUp"),isExtendDown:Gn("extendDown"),isExtendArrow:Gn("extendArrow"),isExtendLineBackward:Gn("extendLineBackward"),isExtendLineForward:Gn("extendLineForward"),isItalic:Gn("italic"),isMoveLineBackward:Gn("moveLineBackward"),isMoveLineForward:Gn("moveLineForward"),isMoveWordBackward:Gn("moveWordBackward"),isMoveWordForward:Gn("moveWordForward"),isRedo:Gn("redo"),isSplitBlock:Gn("splitBlock"),isTransposeCharacter:Gn("transposeCharacter"),isUndo:Gn("undo"),isShift:Gn("shift")};function Mn(e=5){const n="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",i=n.length;let r="";for(let o=0;o<e;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}function Ar(e,n,i,r){if(e.children&&(!i||i(e))){let o=[...e.children];o=r?o.reverse():o,o.forEach(a=>{Ar(a,n,i)})}n(e)}const ud=e=>n=>!!(G.isBoard(n)||e.isRecursion(n)),Ko="#6698FF",m5="#6698FF25",bg={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},gn={isRootElement(e){const n=Wh.get(e);return!!(n&&G.isBoard(n))},getElementRef(e){return cm.get(e)},getElementG(e){const n=lm.get(e);if(!n)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return n},hasMounted(e){return!!gn.getContainerG(e,{suppressThrow:!0})},getContainerG(e,n){const i=um.get(e)||null;if(!i){if(n.suppressThrow)return null;throw new Error("can not resolve container g")}return i}},Hx=(e,n,i=!0)=>[...n].sort((r,o)=>{const a=G.findPath(e,r),u=G.findPath(e,o);return i?a[0]-u[0]:u[0]-a[0]}),ub=new Map,nm=e=>ub.get(e)||[],im=(e,n)=>{ub.set(e,n)};class zO{constructor(n){this.debugKey=n}isDebug(){return Vc(this.debugKey)}clear(){if(!this.isDebug())return;const n=nm(this.debugKey);im(this.debugKey,[]),n.forEach(i=>i.remove())}drawPolygon(n,i,r){if(!Vc(this.debugKey))return;const o=G.getRoughSVG(n).polygon(i,r||{stroke:"red"});o.classList.add(this.debugKey),G.getElementTopHost(n).append(o);const a=nm(this.debugKey);return a.push(o),im(this.debugKey,a),o}drawLine(n,i,r){if(!Vc(this.debugKey))return;const o=G.getRoughSVG(n).linearPath(i,r||{stroke:"red"});o.classList.add(this.debugKey),G.getElementTopHost(n).append(o);const a=nm(this.debugKey);return a.push(o),im(this.debugKey,a),o}drawRectangle(n,i,r){if(!Vc(this.debugKey))return;let o;i instanceof Array?o=I.getRectangleByPoints(i):o=i;const a=G.getRoughSVG(n).rectangle(o.x,o.y,o.width,o.height,r||{stroke:"red"});a.classList.add(this.debugKey),G.getElementTopHost(n).append(a);const u=nm(this.debugKey);return u.push(a),im(this.debugKey,u),a}drawCircles(n,i,r=0,o=!1,a){if(!Vc(this.debugKey))return;const u=[];return i.forEach((c,h)=>{const g=G.getRoughSVG(n).circle(c[0],c[1],o?r*(h+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},a||{}));g.classList.add(this.debugKey),G.getElementTopHost(n).append(g);const p=nm(this.debugKey);p.push(g),u.push(g),im(this.debugKey,p)}),u}}const Gg=e=>new zO(e),Vc=e=>localStorage.getItem(e||"debug:plait")==="true";var El;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(El||(El={}));const cb=(e,n,i=()=>!0)=>{const r=n||e.selection,o=[];if(!r)return[];if(bg.isCollapsed(r)){const u=fb(e,r.anchor,i);return u!=null&&u.length?u:[]}return Ar(e,u=>{if(!G.isBoard(u)&&i(u)){let c=!1;try{c=e.isRectangleHit(u,r)}catch(h){Vc()&&console.error("isRectangleHit",h,"node",u)}c&&o.push(u)}},ud(e),!0),o},fb=(e,n,i=()=>!0,r=!0)=>{let o=[];return Ar(e,a=>{if(G.isBoard(a)||!i(a)||!gn.hasMounted(a))return;let u=!1;try{u=e.isHit(a,n,r)}catch(c){Vc()&&console.error("isHit",c,"node",a)}if(u){o.push(a);return}},ud(e),!0),o},Ll=(e,n,i=()=>!0,r=!0)=>{const o=fb(e,n,i,r);return e.getOneHitElement(o)},jO=(e,n)=>{const i=ne(e),r=i.length>0&&pn(e,i,!1);return r&&I.isPointInRectangle(r,n)?i:[]},Cl=(e,n)=>{const i=Hx(e,n);rb.set(e,i)},ne=e=>rb.get(e)||[],cd=(e,n)=>{let i=[];Array.isArray(n)?i.push(...n):i.push(n);const r=ne(e);Cl(e,[...r,...i])},Nx=(e,n,i=!1)=>{const r=ne(e);if(r.includes(n)){const o=[];e.isRecursion(n)&&i?Ar(n,u=>{o.push(u)},u=>e.isRecursion(u)):o.push(n);const a=r.filter(u=>!o.includes(u));Cl(e,a)}},UO=(e,n,i)=>{const r=ne(e);r.splice(r.indexOf(n),1,i)},zg=e=>{Cl(e,[])},vg=(e,n)=>!!ne(e).find(r=>r===n),eS=e=>{const n=e.getPluginOptions(El.withSelection);e.setPluginOptions(El.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(El.withSelection,{...n})},0)},$O=(e,n)=>jO(e,n).length>0,VO=(e,n)=>!!Ll(e,n)||$O(e,n);function jg(e,n,i,r,o,a,u=!1,c){let h=c||0;const g=[n+h,i],p=[r-h,i],m=[r,i+h],w=[r,o-h],x=[r-h,o],T=[n+h,o],D=[n,o-h],b=[n,i+h],B=e.path(`M${p[0]} ${p[1]} A ${h} ${h}, 0, 0, 1, ${m[0]} ${m[1]} L ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${x[0]} ${x[1]} L ${T[0]} ${T[1]} A ${h} ${h}, 0, 0, 1, ${D[0]} ${D[1]} L ${b[0]} ${b[1]} A ${h} ${h}, 0, 0, 1, ${g[0]} ${g[1]} Z`,a);return Ze(B,"round"),B}const Fa=(e,n,i)=>{const o=G.getRoughSVG(e).rectangle(n.x,n.y,n.width,n.height,i);return Ze(o,"round"),o};function Ug(e,n,i=40){const r=Math.abs(e[0]-n[0]),o=Math.abs(e[1]-n[1]);let a=Math.hypot(r,o);const u=a/2,c=u/a*r,h=u/a*o,g=[n[0]>e[0]?n[0]-c:n[0]+c,n[1]>e[1]?n[1]-h:n[1]+h],p=Dg(g[0],g[1],n[0],n[1],i*Math.PI/180);return{pointLeft:Dg(g[0],g[1],n[0],n[1],-i*Math.PI/180),pointRight:p}}function fd(e,n,i,r){return e.circle(n[0],n[1],i,r)}function G2(e,n,i,r){return e.linearPath([n,i],r)}function qs(e,n,i){const r=ze(),o=g5();let a="";return e.forEach((u,c)=>{c===0?a+=`M ${u[0]} ${u[1]} `:a+=`L ${u[0]} ${u[1]} `}),i&&(a+="Z"),o.setAttribute("d",a),o.setAttribute("stroke",`${n==null?void 0:n.stroke}`),o.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),o.setAttribute("fill",`${(n==null?void 0:n.fill)||"none"}`),n!=null&&n.strokeLineDash&&o.setAttribute("stroke-dasharray",`${n.strokeLineDash}`),r.appendChild(o),r}function WO(e,n){const i=ze(),r=g5();let o="";for(let a=0;a<e.length-3;a+=3)a===0?o+=`M ${e[0][0]} ${e[0][1]} `:o+=`C ${e[a+1][0]} ${e[a+1][1]}, ${e[a+2][0]} ${e[a+2][1]}, ${e[a+3][0]} ${e[a+3][1]}`;return r.setAttribute("d",o),r.setAttribute("stroke",`${n==null?void 0:n.stroke}`),r.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),r.setAttribute("fill","none"),i.appendChild(r),i}function v5(e,n){const i={type:"set_viewport",properties:e.viewport,newProperties:n};e.apply(i)}const XO={setViewport:v5};function qO(e,n){const i={type:"set_theme",properties:e.theme,newProperties:n};e.apply(i)}function Gx(e,n,i){i=i??e.viewport.zoom,v5(e,{...e.viewport,zoom:i,origination:n}),Cb(e)}function YO(e,n,i){n=rL(n);const o=G.getBoardContainer(e).getBoundingClientRect(),a=G.getBoardContainer(e).getBoundingClientRect();let u=[a.width/2,a.height/2];i&&cv(i[0],i[1],o)===0&&(u=[i[0]-o.x,i[1]-o.y]);const c=e.viewport.zoom,h=$g(e),g=h[0]+u[0]/c,p=h[1]+u[1]/c,m=[g-u[0]/n,p-u[1]/n];Gx(e,m,n)}function KO(e){let n=d5(e);const i=G.getBoardContainer(e).getBoundingClientRect(),r=pn(e,e.children,!0),o=e.viewport.zoom,a=16,u=i.width-2*a,c=i.height-2*a;let h=o;u<r.width||c<r.height?h=Math.min(u/r.width,c/r.height):h=1;const g=vb(e),p=[g[0]-i.width/2/h+n/2/o,g[1]-i.height/2/h+n/2/o];Gx(e,p,h)}function ZO(e,n){let i=d5(e);const r=G.getBoardContainer(e),o=r.getBoundingClientRect();let a=0;n.maxWidth?a=n.maxWidth:a=o.width;const u=pn(e,e.children,!0),c=a-2*n.autoFitPadding;let h=0;c<u.width?h=Math.min(c/u.width):h=1;let g=u.height*h+2*n.autoFitPadding;if(g>n.limitHeight){const x=r.closest(`.${n.containerClass}`);x.style.height=`${g}px`,w5(e)}else g=n.limitHeight;const p=u.x+u.width/2,m=u.y+u.height/2,w=[p-a/2/h+i/2/h,m-g/2/h+i/2/h];Gx(e,w,h)}function QO(e,n){n=n??e.theme.themeColorMode,qO(e,{themeColorMode:n}),Ar(e,i=>{e.applyTheme(i)})}const JO=(e,n)=>{e.pointer!==n&&(e.pointer=n)};function tL(e,n){var r;if((r=ne(e))==null?void 0:r[0]){const o=G.getBoardContainer(e).getBoundingClientRect(),a=d5(e),u=vb(e),c=n[0]-u[0],h=n[1]-u[1],g=e.viewport.zoom,p=[c-o.width/2/g+a/2/g,h-o.height/2/g+a/2/g];v5(e,{...e.viewport,origination:p}),Cb(e)}}const un={updatePointerType:JO,updateViewport:Gx,fitViewport:KO,updateZoom:YO,updateThemeColor:QO,fitViewportWidth:ZO,moveToCenter:tL},y5=e=>G.getHost(e).viewBox.baseVal;function ke(e,n,i){const o=G.getHost(e).getBoundingClientRect();return[n-o.x,i-o.y]}function qr(e,n){const i=[n.x,n.y],r=[n.x+n.width,n.y+n.height],o=Om(e,i),a=Om(e,r);return I.getRectangleByPoints([o,a])}function Om(e,n){const i=nS(e,jw(e,n));return ed(e,i[0],i[1])}function ed(e,n,i){const o=G.getBoardContainer(e).getBoundingClientRect();return[n-o.x,i-o.y]}function eL(e,n){const r=G.getBoardContainer(e).getBoundingClientRect();return[r.x+n[0],r.y+n[1]]}function Pe(e,n){const i=y5(e),{zoom:r}=e.viewport,o=n[0]/r+i.x,a=n[1]/r+i.y;return[o,a]}function nS(e,n){const r=G.getHost(e).getBoundingClientRect();return[n[0]+r.x,n[1]+r.y]}function jw(e,n){const{zoom:i}=e.viewport,r=y5(e),o=(n[0]-r.x)*i,a=(n[1]-r.y)*i;return[o,a]}const hb=.75,db=new WeakMap,gb=new WeakMap;function nL(e){const{hideScrollbar:n}=e.options,i=n?sO:0,r=G.getBoardContainer(e).getBoundingClientRect();return{width:r.width+i,height:r.height+i}}function iL(e,n){const i=pn(e,e.children,!0);let r,o,a,u;return r=i.x,o=i.x+i.width,a=i.y,u=i.y+i.height,{left:r,right:o,top:a,bottom:u}}function rL(e,n=tb,i=eb){return e<n?n:e>i?i:e}function pb(e,n){const i=G.getBoardContainer(e).getBoundingClientRect(),r=iL(e),o=i.width,a=i.height;let u=r.right-r.left,c=r.bottom-r.top;const h=o/2,g=a/2;if(u<h/n){const p=r.left+u/2;r.left=p-h/2/n,r.right=p+h/2/n,u=h/n}if(c<g/n){const p=r.top+c/2;r.top=p-g/2/n,r.bottom=p+g/2/n,c=g/n}return{elementHostBBox:r,containerWidth:o,containerHeight:a,width:u,height:c}}function iS(e,n,i,r,o,a,u=hb){const c=n*u/a,h=i*u/a;return[e.left-c,e.top-h,r+c*2,o+h*2]}function mb(e,n){const{elementHostBBox:i,containerWidth:r,containerHeight:o,width:a,height:u}=pb(e,n);return iS(i,r,o,a,u,n)}function vb(e){const n=pn(e,e.children,!0);return[n.x+n.width/2,n.y+n.height/2]}function yb(e,n){const i=e.viewport.zoom,r=G.getHost(e);r.style.display="block",r.style.width=`${n[2]*i}px`,r.style.height=`${n[3]*i}px`,n&&n[2]>0&&n[3]>0&&r.setAttribute("viewBox",n.join(" "))}function Uw(e){const n=$g(e);if(!n)return;const[i,r]=jw(e,n);wb(e,i,r)}function wb(e,n,i,r=!0){const o=G.getViewportContainer(e),a=o.scrollLeft,u=o.scrollTop;if(!tS(o.scrollLeft,n,1)||!tS(o.scrollTop,i,1)){o.scrollLeft=n,o.scrollTop=i;const c=o.offsetWidth,h=o.offsetHeight;if(a===o.scrollLeft&&u===o.scrollTop)xb(e,a,u);else{const g=n>0&&i>0&&n<o.scrollWidth-c&&i<o.scrollHeight-h;r&&g&&Sb(e,!0)}}}function xb(e,n,i){const r=Pe(e,[n,i]);Ce.isEquals(r,$g(e))||(un.updateViewport(e,r),Eb(e,!0))}function w5(e){const{width:n,height:i}=nL(e),r=G.getViewportContainer(e);r.style.width=`${n}px`,r.style.height=`${i}px`}function x5(e){const n=e.viewport.zoom,i=mb(e,n);yb(e,i)}function oL(e){const n=e.viewport.zoom,{elementHostBBox:i,containerWidth:r,containerHeight:o,width:a,height:u}=pb(e,n),c=iS(i,r,o,a,u,n,.5),h=y5(e);if(c[0]<h.x||c[1]<h.y||c[0]+c[2]>h.x+h.width||c[1]+c[3]>h.y+h.height){const g=iS(i,r,o,a,u,n,hb);yb(e,g)}}function sL(e){var n;if(!((n=e.viewport)!=null&&n.origination)){const i=e.viewport.zoom,r=G.getBoardContainer(e).getBoundingClientRect(),o=mb(e,i),a=o[0]+o[2]/2,u=o[1]+o[3]/2,c=[a-r.width/2/i,u-r.height/2/i];aL(e,c),Uw(e);return}Uw(e)}const aL=(e,n)=>{l5.set(e,n)},Cb=e=>{l5.delete(e)},$g=e=>{const n=l5.get(e);return n||e.viewport.origination},lL=e=>!!db.get(e),Eb=(e,n)=>{db.set(e,n)},uL=e=>!!gb.get(e),Sb=(e,n)=>{gb.set(e,n)};function cL(e,n,i){const r={type:"insert_node",node:n,path:i};e.apply(r)}function fL(e,n,i){const r={},o={},a=Je.get(e,i);for(const c in n)a[c]!==n[c]&&(a.hasOwnProperty(c)&&(r[c]=a[c]),n[c]!=null&&(o[c]=n[c]));const u={type:"set_node",properties:r,newProperties:o,path:i};e.apply(u)}function Tb(e,n){const i=Je.get(e,n),r={type:"remove_node",path:n,node:i};e.apply(r)}function hL(e,n,i){const r={type:"move_node",path:n,newPath:i};e.apply(r)}const Xh={insertNode:cL,setNode:fL,removeNode:Tb,moveNode:hL},gw=new WeakMap,dL=(e,n)=>Ab(e)[n]||null,Ab=e=>gw.get(e)||{},_a=(e,n,i)=>{const r=()=>{let a=requestAnimationFrame(()=>{const c=gw.get(e)||{};c[n]=null,gw.set(e,c),G.isAlive(e)&&i()});const u=Ab(e);u[n]=a,gw.set(e,u)};let o=dL(e,n);o!==null&&cancelAnimationFrame(o),r()},zx=(e,n)=>(Hx(e,n),n.map(i=>e.children.map(r=>r.id).indexOf(i.id)).filter(i=>i>=0)),gL=(e,n)=>{const i=zx(e,n);return i[i.length-1]},hv=(e,n)=>{n.map(i=>{const r=G.findPath(e,i.element),o=e.pathRef(r);return()=>{o.current&&Xh.moveNode(e,o.current,i.newPath),o.unref()}}).forEach(i=>{i()})},Db=new WeakMap,of=e=>!!Db.get(e),Lu=(e,n)=>{Db.set(e,n)},pL=e=>_x.get(e)||[],sf=e=>(_x.get(e)||[]).length>0,mL=e=>{_x.delete(e),Lu(e,!1)},RA=(e,n)=>{_x.set(e,n),Lu(e,!0)},OA="foreignObject[class^='foreign-object']";function vL(e){return new Promise((n,i)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>n(r),r.onerror=()=>i(new Error("Failed to load image")),r.src=e})}function yL(e,n,i="transparent"){const r=document.createElement("canvas"),o=r.getContext("2d");return r.width=e,r.height=n,r.style.width=`${e}px`,r.style.height=`${n}px`,o.strokeStyle="#ffffff",o.fillStyle=i,o.fillRect(0,0,e,n),{canvas:r,ctx:o}}async function wL(e){const i=await(await fetch(e)).blob();return new Promise((r,o)=>{const a=new FileReader;a.onloadend=()=>r(a.result),a.onerror=o,a.readAsDataURL(i)})}function LA(e,n,i){const r=n==null?void 0:n.style;if(!r)return;const o=window.getComputedStyle(e);(i||[]).forEach(a=>{const u=o.getPropertyValue(a),c=o.getPropertyPriority(a);u&&r.setProperty(a,u,c)})}function xL(e,n,i,r){const o='[data-slate-node="text"]',a=["font-size","font-family","line-height","text-decoration","font-weight","font-style","word-break"],u=Array.from(e.querySelectorAll(o)),c=Array.from(n.querySelectorAll(o));if(u.map((h,g)=>{LA(h,c[g],a)}),i){const h=i,g=Array.from(e.querySelectorAll(h)),p=Array.from(n.querySelectorAll(h));g.map((m,w)=>{LA(m,p[w],r)})}}async function CL(e,n){const i=Array.from(e.querySelectorAll(`${OA}`)),r=Array.from(n.querySelectorAll(`${OA}`));await Promise.all(i.map((o,a)=>new Promise(u=>{const h=r[a].querySelector("img"),g=h==null?void 0:h.getAttribute("src");if(!g)return u(!0);wL(g).then(p=>{h==null||h.setAttribute("src",p),u(!0)})})))}async function EL(e,n,i,r){const{width:o,height:a,x:u,y:c}=i,{padding:h=4,inlineStyleClassNames:g,styleNames:p}=r,m=G.getHost(e),w=n.map(b=>gn.getElementG(b)),x=m.cloneNode(),T=G.getElementHost(e).cloneNode();x.style.width=`${o}px`,x.style.height=`${a}px`,x.style.backgroundColor="",x.setAttribute("width",`${o}`),x.setAttribute("height",`${a}`),x.setAttribute("viewBox",[u-h,c-h,o+2*h,a+2*h].join(","));const D=new Array(w.length);return await Promise.all(w.map(async(b,B)=>{const A=b.cloneNode(!0);xL(b,A,g,p),await CL(b,A),D[B]=A})),T.append(...D),x.appendChild(T),x}async function bb(e,n){const i=n.elements||hd(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=pn(e,i,!1),o=await EL(e,i,r,n);return new XMLSerializer().serializeToString(o)}async function SL(e,n){if(!e)return;const i=n.elements||hd(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=pn(e,i,!1),{ratio:o=2,fillStyle:a="transparent"}=n,{width:u,height:c}=r,h=u*o,g=c*o,p=await bb(e,n),{canvas:m,ctx:w}=yL(h,g,a),x=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(p)}`;try{const T=await vL(x);return w.drawImage(T,0,0,h,g),m.toDataURL("image/png")}catch(T){console.error("Error converting SVG to image:",T);return}}var Au;(function(e){e.medias="medias",e.elements="elements"})(Au||(Au={}));var Ma;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(Ma||(Ma={}));const C5=(e,n)=>`<plait>${bL(JSON.stringify({type:e,data:n}))}</plait>`,E5=e=>{var i;let n=(i=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:i[1];if(n){n=BL(n);try{const r=JSON.parse(n);if(r){if(r.type===Au.elements)return{elements:r.data};if(r.type===Au.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},_A=e=>{const n=document.implementation.createHTMLDocument("");return n.documentElement.innerHTML=e.trim(),n.body.textContent||n.body.innerText||""},Bb=()=>"clipboard"in navigator&&"write"in navigator.clipboard,TL=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,Pb=()=>"clipboard"in navigator&&"read"in navigator.clipboard,AL=(e,n,i)=>({type:e,elements:n,text:i}),DL=(e,n)=>{const{type:i,elements:r,text:o}=e;return i===n.type?{type:i,elements:r.concat(n.elements),text:o+" "+n.text}:e},jx=(e,n)=>e?DL(e,n):n,bL=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),BL=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),PL=(e,n,i)=>{e==null||e.setData("text/html",C5(n,i))},ML=(e,n)=>{e==null||e.setData("text/plain",n)},RL=e=>{const n=e==null?void 0:e.getData("text/html");if(n){const i=E5(n);if(i)return i}return{}},OL=e=>{if(!e)return{};const n=e==null?void 0:e.getData("text/plain");if(n){const i=E5(n);if(i)return i}return{text:n}},LL=async(e,n,i="")=>{let r=i;Bb()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([C5(e,n)],{type:"text/html"}),"text/plain":new Blob([r??JSON.stringify(n)],{type:"text/plain"})})])},_L=async()=>{if(!Pb())return{};const e=await navigator.clipboard.read();let n={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const i of e){if(FL(i)){const r=i.types.filter(c=>c.match(/^image\//)),a=(await Promise.all(r.map(c=>i.getType(c)))).filter(Boolean).map(c=>URL.createObjectURL(c));return{files:await Promise.all(a.map(async c=>{const h=await(await fetch(c)).blob();return new File([h],"plait-file",{type:h.type})}))}}if(i.types.includes("text/html")){const r=await FA(await i.getType("text/html")),o=E5(r);if(o)return o;r&&r.trim()&&(n={text:_A(r)})}if(i.types.includes("text/plain")){const r=await FA(await i.getType("text/plain"));n={text:_A(r)}}}return n},FL=e=>e.types.find(n=>n.match(/^image\//)),FA=e=>new Promise((n,i)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const o=r.result;n(o)}),r.addEventListener("error",()=>{i(r.error)}),r.readAsText(e)}),kL=e=>{window.plait_fallback_clipboard_data=e},IL=async e=>{let n={};return e?e.files.length?{files:Array.from(e.files)}:(n=RL(e),Object.keys(n).length===0&&(n=OL(e)),n):Pb()?await _L():null},HL=async(e,n)=>{if(!n)return;const{type:i,elements:r,text:o}=n;if(Bb())return await LL(i,r,o);if(e){PL(e,i,r),ML(e,o),kL(n);return}if(TL())return await navigator.clipboard.writeText(C5(i,r))};function Dr(e){return!!u5.get(e)}function NL(e){G.getBoardContainer(e).classList.add("selection-moving"),u5.set(e,!0),Lu(e,!0)}function GL(e){G.getBoardContainer(e).classList.remove("selection-moving"),u5.delete(e),Lu(e,!1)}function kA(e){const n=pw(e);return e.pointer!==nn.hand&&!n.isDisabledSelection&&!G.isReadonly(e)}function IA(e){return!!e.operations.find(n=>jc.isSetSelectionOperation(n))}function zL(e){const n=Lx.get(e);if(n)return n.elements}function jL(e){return Lx.get(e)}function UL(e){Lx.delete(e)}function $L(e){const n=ne(e),i=pn(e,n,!1),r=qr(e,i);if(r.width>0&&r.height>0&&n.length>1){const o=Fa(e,I.inflate(r,_i),{stroke:Ko,strokeWidth:_i,fillStyle:"solid"});o.classList.add(uv,nO);const a=Wo(n);return a&&Xs(o,I.getCenterPoint(r),a),o}return null}function VL(e,n,i){if(!e.selection)return;const r=ne(e);if(!bg.isCollapsed(e.selection)){let o=[...r];n.forEach(a=>{a.groupId?o.push(...T5(e,a)):o.push(a)}),Cl(e,c5(o));return}if(bg.isCollapsed(e.selection)){const o=n[0],a=df(e,o,!0);if(a.length>0){const u=Zs(e,a[a.length-1],!0)||[],c=r.some(h=>u.map(g=>g.id).includes(h.id));i?WL(e,n,c,u):XL(e,n,c,a)}}}function WL(e,n,i,r){const o=ne(e);let a=[...o];const u=n[0];let c=[];if(!i)c=r;else{const h=o.some(p=>p.id===u.id),g=r.filter(p=>o.includes(p));h?c=g.filter(p=>p.id!==u.id):c.push(...g,...n)}r.forEach(h=>{a.includes(h)&&a.splice(a.indexOf(h),1)}),c.length&&a.push(...c),Cl(e,c5(a))}function XL(e,n,i,r){let o=[...n];const a=Mb(e,r);if(a.length>0)if(a.length>1)o=$w(e,a[a.length-2],!0);else{const u=e.getOneHitElement(n);u&&(o=[u])}else{const u=$w(e,r[r.length-1],!0);if(!i)o=u;else{const c=e.getOneHitElement(n);c&&(o=[c])}}Cl(e,c5(o))}const pw=e=>e.getPluginOptions(El.withSelection),rS=(e,n)=>{e.setPluginOptions(El.withSelection,n)},Zs=(e,n,i,r)=>{let o=[];const a=e.children.filter(u=>u.groupId===n.id);return i?a.forEach(u=>{So.isGroup(u)?(r&&o.push(u),o.push(...Zs(e,u,i,r))):o.push(u)}):o=r?a:a.filter(u=>!So.isGroup(u)),o},$w=(e,n,i,r)=>{const o=Zs(e,n,i,r),a=[];return o.forEach(u=>{Ar(u,c=>{a.push(c)},()=>!0)}),a},S5=(e,n,i)=>{const r=$w(e,n,i);return pn(e,r,!1)},df=(e,n,i,r)=>{const o=(r||e.children).find(a=>a.id===(n==null?void 0:n.groupId));if(!o)return[];{const a=[o],u=df(e,o,i,r);return u.length&&a.push(...u),a}},oS=(e,n)=>{const i=df(e,n,!0);return i.length?i[i.length-1]:null},T5=(e,n)=>{const i=oS(e,n);return i?$w(e,i,!0):[n]},qL=e=>e.children.filter(i=>So.isGroup(i)),sS=(e,n,i)=>{const r=i!=null&&i.length?i:ne(e);return So.isGroup(n)?Vw(e,n,i):r.map(o=>o.id).includes(n.id)},Vw=(e,n,i)=>{const r=i!=null&&i.length?i:ne(e);return Zs(e,n,!0).every(a=>r.map(u=>u.id).includes(a.id))},Mb=(e,n,i)=>{const r=[];return n.forEach(o=>{sS(e,o,i)&&r.push(o)}),r},YL=(e,n,i)=>{const r=gf(e,n,i),o=[];return r.forEach(a=>{o.push(a);const u=Zs(e,a,!0,!0);o.push(...u.filter(c=>So.isGroup(c)))}),o},Rb=(e,n,i,r)=>{const o=df(e,n,!0,r),a=Mb(e,o,i);return a.length?a[a.length-1]:null},gf=(e,n,i)=>{let r=[];return(n!=null&&n.length?n:ne(e)).forEach(a=>{if(a.groupId){const u=Rb(e,a,n,i);u&&!r.includes(u)&&r.push(u)}}),r},A5=(e,n)=>{let i=[];return(n!=null&&n.length?n:ne(e)).filter(o=>!So.isGroup(o)).forEach(o=>{o.groupId&&Rb(e,o,n)||i.push(o)}),i},D5=(e,n)=>A5(e,n).filter(r=>e.canAddToGroup(r)),KL=(e,n)=>[...gf(e,n),...A5(e,n)],ZL=(e,n)=>{const i=ne(e).map(a=>a.id);let r=null;const o=Dr(e);return n.forEach(a=>{const u=!i.includes(a.id)&&!o||o;if(a.groupId&&u){r||(r=ze());const c=T5(e,a),h=pn(e,c,!1),g=Fa(e,h,{stroke:Ko,strokeWidth:_i,strokeLineDash:[5]}),p=Wo(c);p&&Xs(g,I.getCenterPoint(h),p),r.append(g)}}),r},QL=e=>({id:Mn(),type:"group"}),JL=e=>e.every(n=>!n.groupId),Ob=e=>e.every(n=>n.groupId&&n.groupId===e[0].groupId),t_=(e,n)=>{const r=KL(e,n).filter(o=>e.canAddToGroup(o));return r.length>1?JL(r)||Ob(r):!1},e_=(e,n,i)=>{const r=gf(e,n,i);return ne(e).length>0&&r.length>0},Lb=(e,n)=>{const i=df(e,n,!0);let r=null;if(i!=null&&i.length){for(let o=0;o<(i==null?void 0:i.length);o++)if(!Vw(e,i[o])){r=i[o];break}}return r},n_=(e,n,i)=>{const r=[...n];Hx(e,r),r.pop(),hv(e,r.map(o=>({element:o,newPath:i})))},b5=e=>{const n=e.getDeletedFragment([]);e.deleteFragment(n)},HA=(e,n,i)=>{const r=ne(e),o=pn(e,r,!1),a=e.buildFragment(null,o,n);a&&HL(i,a)},B5=(e,n,i)=>{const r=n!=null&&n.length?n:ne(e),o=pn(e,r,!1),a=e.buildFragment(null,o,Ma.duplicate,r),u=a&&JSON.stringify(a),c=u&&JSON.parse(u);c&&e.insertFragment({...c,text:void 0},i||[o.x+o.width/2,o.y+o.height/2],Ma.duplicate)},Cu=2,i_=24;function _b(e,n){return hd(e,{match:r=>e.isAlign(r)&&!n.some(o=>o.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const o=e.getRectangle(r);return dv(o,r.angle||0)})}function r_(e,n){return n?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function mm(e,n,i){let r=Cu;return e.forEach(o=>{const a=o_(n,o,i);Math.abs(a)<Math.abs(r)&&(r=a)}),r}const o_=(e,n,i)=>{const o=nd(n,i).map(c=>c-e),a=o.map(c=>Math.abs(c)),u=a.indexOf(Math.min(...a));return o[u]},nd=(e,n)=>{const i=n?"x":"y",r=n?"width":"height";return[e[i],e[i]+e[r]/2,e[i]+e[r]]};function Q0(e,n){let i=1/0,r=e[0];return e.forEach(o=>{const a=Math.sqrt(Math.pow(n.x-o.x,2)+Math.pow(n.y-o.y,2));a<i&&(i=a,r=o)}),r}const J0=(e,n,i)=>nd(n,i).includes(e);function Fb(e,n,i,r=!0,o=!0,a=!1){let u=[];const c=nd(n,!0),h=nd(n,!1),g=[{axis:c[0],isHorizontal:!0,pointRectangles:[]},{axis:c[1],isHorizontal:!0,pointRectangles:[]},{axis:c[2],isHorizontal:!0,pointRectangles:[]},{axis:h[0],isHorizontal:!1,pointRectangles:[]},{axis:h[1],isHorizontal:!1,pointRectangles:[]},{axis:h[2],isHorizontal:!1,pointRectangles:[]}];for(let m=0;m<i.length;m++){const w=i[m];J0(g[0].axis,w,g[0].isHorizontal)&&g[0].pointRectangles.push(w),J0(g[1].axis,w,g[1].isHorizontal)&&g[1].pointRectangles.push(w),J0(g[2].axis,w,g[2].isHorizontal)&&g[2].pointRectangles.push(w),J0(g[3].axis,w,g[3].isHorizontal)&&g[3].pointRectangles.push(w),J0(g[4].axis,w,g[4].isHorizontal)&&g[4].pointRectangles.push(w),J0(g[5].axis,w,g[5].isHorizontal)&&g[5].pointRectangles.push(w)}const p=(m,w,x)=>{const T=I.inflate(I.getBoundingRectangle([n,w]),i_);if(x){const D=[m,T.y],b=[m,T.y+T.height];u.push([D,b])}else{const D=[T.x,m],b=[T.x+T.width,m];u.push([D,b])}};if(r&&g[0].pointRectangles.length){const m=g[0].pointRectangles.length===1?g[0].pointRectangles[0]:Q0(g[0].pointRectangles,n);p(g[0].axis,m,g[0].isHorizontal)}if(r&&a&&g[1].pointRectangles.length){const m=g[1].pointRectangles.length===1?g[1].pointRectangles[0]:Q0(g[1].pointRectangles,n);p(g[1].axis,m,g[1].isHorizontal)}if(r&&g[2].pointRectangles.length){const m=g[2].pointRectangles.length===1?g[2].pointRectangles[0]:Q0(g[2].pointRectangles,n);p(g[2].axis,m,g[2].isHorizontal)}if(o&&g[3].pointRectangles.length){const m=g[3].pointRectangles.length===1?g[3].pointRectangles[0]:Q0(g[3].pointRectangles,n);p(g[3].axis,m,g[3].isHorizontal)}if(o&&a&&g[4].pointRectangles.length){const m=g[4].pointRectangles.length===1?g[4].pointRectangles[0]:Q0(g[4].pointRectangles,n);p(g[4].axis,m,g[4].isHorizontal)}if(o&&g[5].pointRectangles.length){const m=g[5].pointRectangles.length===1?g[5].pointRectangles[0]:Q0(g[5].pointRectangles,n);p(g[5].axis,m,g[5].isHorizontal)}return s_(e,u)}function s_(e,n){const i=ze();return n.forEach(r=>{if(!r.length)return;const o=G.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Ko,strokeWidth:1,strokeLineDash:[4,4]});i.appendChild(o)}),i}function kb(e,n){const i=ze();return n.forEach(r=>{if(!r.length)return;let o=r[0][1]===r[1][1];const a=G.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Ko,strokeWidth:1});i.appendChild(a),r.forEach(u=>{const c=r_(u,o),h=G.getRoughSVG(e).line(c[0][0],c[0][1],c[1][0],c[1][1],{stroke:Ko,strokeWidth:1});i.appendChild(h)})}),i}const Ib=(e,n)=>{const i=zx(e,ne(e));let r=Nb(e,i);n==="up"&&(r=r.reverse());let o=[];return r.forEach((a,u)=>{const c=a[0],h=a[a.length-1],g=n==="down"?c:h,p=a_(e,g,n);p===-1||g===p||(n==="down"&&(a=a.reverse()),o.push(...a.map(m=>({element:e.children[m],newPath:[p]}))))}),o},Hb=(e,n)=>{const i=zx(e,ne(e));let r=Nb(e,i),o=[];return n==="down"&&(r=r.reverse()),r.forEach(a=>{const u=a[0],c=a[a.length-1],h=n==="down"?u:c,g=e.children[h],p=Lb(e,g);let m=n==="down"?0:e.children.length-1;if(p){const w=Hx(e,Zs(e,p,!0,!0));m=n==="down"?e.children.indexOf(w[0]):e.children.indexOf(w[w.length-1])}n==="down"&&(a=a.reverse()),o.push(...a.map(w=>({element:e.children[w],newPath:[m]})))}),o},Nb=(e,n)=>{let i=0;return n.reduce((r,o,a)=>{if(a>0){const u=e.children[o],c=e.children[n[a-1]],h=o-1===n[a-1]?!0:e.children.every((p,m)=>m>n[a-1]&&m<=o-1?So.isGroup(p):!0);let g=!1;if(c!=null&&c.groupId||u!=null&&u.groupId&&(c==null?void 0:c.groupId)!==(u==null?void 0:u.groupId)){let p=!1,m=!1;if(c.groupId){const w=oS(e,c);p=!Vw(e,w)}if(u.groupId){const w=oS(e,u);m=!Vw(e,w)}g=p||m}(!h||g)&&(i=++i)}return(r[i]||(r[i]=[])).push(o),r},[])},a_=(e,n,i)=>{if(n===0&&i==="down"||n===e.children.length-1&&i==="up")return-1;const r=m=>!(m.isDeleted||So.isGroup(m)),o=i==="down"?cO(e.children,m=>r(m),Math.max(0,n-1)):fO(e.children,m=>r(m),n+1),a=e.children[o];if(!a)return-1;const u=[...e.children],c=u[n],h=Lb(e,c),g=df(e,a,!0)||[];if(h&&(c==null?void 0:c.groupId)!==(a==null?void 0:a.groupId)&&!g.find(m=>m.id===h.id))return-1;if(!a.groupId)return o;let p;if(h?p=g[g.indexOf(h)-1]:p=g[g.length-1],p){let m=Zs(e,p,!0,!1);if(m.length)return m.sort((w,x)=>{const T=e.children.findIndex(b=>b.id===w.id),D=e.children.findIndex(b=>b.id===x.id);return T-D}),i==="down"?u.indexOf(m[0]):u.indexOf(m[m.length-1])}return o},l_=e=>aS(e)||u_(e),aS=e=>e.pointerType==="pen",u_=e=>e.pointerType==="touch",Gb=()=>"ontouchstart"in window||navigator.maxTouchPoints,c_=(e,n)=>{const i=gf(e,n),r=D5(e),o=[...i,...r],a=QL();if(t_(e)){o.forEach(p=>{const m=G.findPath(e,p);Xh.setNode(e,{groupId:a.id},m)});const u=ne(e),c=gL(e,u),h=zx(e,o);if(hO(h)||n_(e,u,[c-1]),Ob(o)){const p=r[0].groupId;Xh.insertNode(e,{...a,groupId:p},[e.children.length])}else Xh.insertNode(e,a,[e.children.length])}},f_=(e,n)=>{const i=gf(e,n);e_(e)&&(i.forEach(r=>{hd(e,{match:a=>a.groupId===r.id,recursion:()=>!1}).forEach(a=>{const u=G.findPath(e,a);Xh.setNode(e,{groupId:r.groupId||void 0},u)})}),i.map(r=>{const o=G.findPath(e,r),a=e.pathRef(o);return()=>{a.current&&Xh.removeNode(e,a.current),a.unref()}}).forEach(r=>{r()}))},h_={addGroup:c_,removeGroup:f_};function zb(e,n){const i={type:"set_selection",properties:e.selection,newProperties:n};e.apply(i)}const d_={setSelection:zb,addSelectionWithTemporaryElements:jb};function jb(e,n){const i=setTimeout(()=>{zb(e,{anchor:[0,0],focus:[0,0]})},0);let r=jL(e);if(r){clearTimeout(r.timeoutId);const o=r.elements;r.elements.push(...n.filter(a=>!o.includes(a))),r.timeoutId=i}else Lx.set(e,{timeoutId:i,elements:n})}const g_=e=>{const n=Hb(e,"up");hv(e,n)},p_=e=>{const n=Hb(e,"down");hv(e,n)},m_=e=>{const n=Ib(e,"up");hv(e,n)},v_=e=>{const n=Ib(e,"down");hv(e,n)},y_={moveUp:m_,moveDown:v_,moveToTop:g_,moveToBottom:p_},w_=(e,n)=>{n.map(i=>{const r=G.findPath(e,i),o=e.pathRef(r);return()=>{o.current&&Tb(e,o.current),o.unref(),Nx(e,i,!0)}}).forEach(i=>{i()})},P5={removeElements:w_},Qt={...pO,...XO,...d_,...Xh,...h_,...y_},nr=(e,n,i)=>(i||(i=0),Array.isArray(e)&&typeof e[0]=="number"?Dg(e[0],e[1],n[0],n[1],i):e.map(r=>Dg(r[0],r[1],n[0],n[1],i||0))),Wo=e=>{var i;let n=((i=e[0])==null?void 0:i.angle)||0;return e.forEach(r=>{r.angle!==n&&!tS((r.angle||0)%(Math.PI/2)-n%(Math.PI/2),0)&&(n=0)}),n},x_=e=>{if(!e.length)return!1;const n=e[0].angle;return n===void 0?!1:!e.some(i=>i.angle!==n)},C_=(e,n)=>{let i=[];for(let c=0;c<e.length;c++){const h=e[c],g=nr(h,[0,0],-n);i.push(I.getRectangleByPoints(g))}const r=I.getBoundingRectangle(i),o=I.getCornerPoints(r),a=nr(o,[0,0],n),u=I.getCenterPoint(I.getRectangleByPoints(a));return I.getRectangleByPoints(nr(a,u,-n))},E_=(e,n,i)=>{const r=I.getCenterPoint(e),[o]=nr([r],n,i),a=o[0]-r[0],u=o[1]-r[1];return{offsetX:a,offsetY:u}},lS=(e,n,i)=>{const{offsetX:r,offsetY:o}=E_(I.getRectangleByPoints(e),n,i);return e.map(a=>[a[0]+r,a[1]+o])},Dl=e=>Ub(e.angle),Ub=e=>e&&e!==0,bl=(e,n)=>{if(Dl(n)){let i=I.getRectangleByPoints(n.points);const r=I.getCenterPoint(i);return nr(e,r,n.angle)}else return null},S_=(e,n)=>{if(Ub(n)){let i=I.getRectangleByPoints(e);const r=I.getCenterPoint(i);return nr(e,r,n)}else return null},af=(e,n,i,r=!1)=>{if(Dl(i)){let o=I.getRectangleByPoints(i.points);const a=r?qr(e,o):o,u=I.getCenterPoint(a);return nr(n,u,i.angle?-i.angle:0)}else return null},dv=(e,n)=>{if(n){const i=I.getCornerPoints(e),r=I.getCenterPoint(e);return I.getRectangleByPoints(nr(i,r,n))}return e},T_=e=>{const n=Math.abs(e)%Math.PI;return n>=1/4*Math.PI&&n<=3/4*Math.PI};function uS(e){return e/180*Math.PI}function A_(e,n,i){const r=pn(e,n,!1),o=I.getCenterPoint(r);n.forEach(a=>{const u=a.angle,c=lS(a.points,o,Lm(i)),h=G.findPath(e,a);Qt.setNode(e,{points:c,angle:Lm((u||0)+i)},h)})}const Lm=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,D_=(e,n,i)=>{const r=5*Math.PI/2+Math.atan2(e[1]-i[1],e[0]-i[0]),o=5*Math.PI/2+Math.atan2(n[1]-i[1],n[0]-i[0]);return Lm(o-r)},b_=e=>e==null?void 0:e.angle,Xs=(e,n,i)=>{if(i===0){e.removeAttribute("transform");return}var r=n[0],o=n[1];let a=Math.cos(i),u=Math.sin(i),h="matrix("+[a,u,-u,a,r*(1-a)+o*u,o*(1-a)-r*u].join(",")+")";e.setAttribute("transform",`${h}`)};function pn(e,n,i){const r=[],o=a=>{const u=e.getRectangle(a);if(u){const c=I.getCornerPoints(u),h=bl(c,a)||c;r.push(h)}else console.error("can not get rectangle of element:",a)};if(n.forEach(a=>{i?Ar(a,u=>o(u),u=>e.isRecursion(u)):o(a)}),r.length>0)if(x_(n)){const a=Wo(n);return C_(r,a)}else{const a=r.reduce((u,c)=>u.concat(c),[]);return I.getRectangleByPoints(a)}else return{x:0,y:0,width:0,height:0}}function Es(e,n,i){const r=!i&&mw(e).get(n);return r||(i||(i=hd(e,{match:a=>!0,recursion:a=>!0})),i.find(a=>a.id===n))}function mw(e){const n=X3.get(e);if(!n)throw new Error("can not resolve element map");return n}function hd(e,n){let i=[];const r=n.isReverse??!0;return Ar(e,o=>{!G.isBoard(o)&&n.match(o)&&i.push(o)},o=>G.isBoard(o)?!0:ud(e)(o)&&n.recursion(o),r),i}var zi;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(zi||(zi={}));const gr="#333333",$b={mode:zi.default,boardBackground:"#ffffff",textColor:gr},Vb={mode:zi.colorful,boardBackground:"#ffffff",textColor:gr},Wb={mode:zi.soft,boardBackground:"#f5f5f5",textColor:gr},Xb={mode:zi.retro,boardBackground:"#f9f8ed",textColor:gr},qb={mode:zi.dark,boardBackground:"#141414",textColor:"#FFFFFF"},Yb={mode:zi.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},B_=[$b,Vb,Wb,Xb,qb,Yb],G={isBoard(e){const n=bA.get(e);if(n!==void 0)return n;const i=typeof e.onChange=="function"&&typeof e.apply=="function";return bA.set(e,i),i},isAlive(e){return!!Q3.get(e)},findPath(e,n){const i=[];let r=n;for(;;){const o=Wh.get(r);if(o==null){if(G.isBoard(r))return i;break}const a=mg.get(r);if(a==null)break;i.unshift(a),r=o}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(n)}`)},getHost(e){return K3.get(e)},getElementLowerHost(e){var n;return(n=du.get(e))==null?void 0:n.lowerHost},getElementHost(e){var n;return(n=du.get(e))==null?void 0:n.host},getElementUpperHost(e){var n;return(n=du.get(e))==null?void 0:n.upperHost},getElementTopHost(e){var n;return(n=du.get(e))==null?void 0:n.topHost},getActiveHost(e){var n;return(n=du.get(e))==null?void 0:n.activeHost},getRoughSVG(e){return Y3.get(e)},getBoardContainer(e){var n;return(n=du.get(e))==null?void 0:n.container},getBoardContext(e){return Z3.get(e)},getRectangle(e){return pn(e,e.children,!0)},getViewportContainer(e){var n;return(n=du.get(e))==null?void 0:n.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!q3.get(e)},getPointer(e){return e.pointer},isPointer(e,n){return e.pointer===n},isInPointer(e,n){const i=e.pointer;return n.includes(i)},getMovingPointInBoard(e){return J3.get(e)},isMovingPointInBoard(e){const n=ob.get(e),i=G.getBoardContainer(e).getBoundingClientRect();return!!(n&&cv(n[0],n[1],i)===0)},getThemeColors(e){return e.options.themeColors||B_}};var nn;(function(e){e.hand="hand",e.selection="selection"})(nn||(nn={}));const P_=e=>e.type==="set_viewport",M_=e=>e.type==="set_selection",R_=e=>e.type==="set_theme",O_=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:n,path:i}=e;if(Se.equals(n,i))return e;const r=Se.transform(i,e),o=Se.transform(Se.next(i),e);return{...e,path:r,newPath:o}}case"set_node":{const{properties:n,newProperties:i}=e;return{...e,properties:i,newProperties:n}}case"set_selection":{const{properties:n,newProperties:i}=e;return n==null?{...e,properties:i,newProperties:null}:i==null?{...e,properties:null,newProperties:n}:{...e,properties:i,newProperties:n}}case"set_viewport":{const{properties:n,newProperties:i}=e;return n==null?{...e,properties:i,newProperties:i}:i==null?{...e,properties:n,newProperties:n}:{...e,properties:i,newProperties:n}}case"set_theme":{const{properties:n,newProperties:i}=e;return{...e,properties:i,newProperties:n}}}},jc={isSetViewportOperation:P_,isSetSelectionOperation:M_,isSetThemeOperation:R_,inverse:O_},Ce={isEquals(e,n){return e&&n&&e[0]===n[0]&&e[1]===n[1]},isHorizontal(e,n,i=0){return e&&n&&Ce.isOverHorizontal([e,n],i)},isOverHorizontal(e,n=0){return e.every(i=>Math.abs(i[1]-e[0][1])<=n)},isVertical(e,n,i=0){return e&&n&&Ce.isOverVertical([e,n],i)},isOverVertical(e,n=0){return e.every(i=>Math.abs(i[0]-e[0][0])<=n)},isAlign(e,n=0){return Ce.isOverHorizontal(e,n)||Ce.isOverVertical(e,n)},getOffsetX(e,n){return n[0]-e[0]},getOffsetY(e,n){return n[1]-e[1]}},OE=new WeakMap,tr=new WeakMap,z2=new WeakMap;var Fe;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(Fe||(Fe={}));const L_=e=>e===Fe.left||e===Fe.right,So={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function __(e){return F_(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function F_(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function k_(e,n){if(Array.isArray(e))for(let i=0;i<e.length;i++)n(e[i]);else{const i=e[Symbol.iterator]();let r;for(;!(r=i.next()).done;)n(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const I_=(e,n)=>n;class H_{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||I_}forEachItem(n){let i;for(i=this._itHead;i!==null;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,r=this._removalsHead,o=0,a=null;for(;i||r;){const u=!r||i&&i.currentIndex<GA(r,o,a)?i:r,c=GA(u,o,a),h=u.currentIndex;if(u===r)o--,r=r._nextRemoved;else if(i=i._next,u.previousIndex==null)o++;else{a||(a=[]);const g=c-o,p=h-o;if(g!=p){for(let w=0;w<g;w++){const x=w<a.length?a[w]:a[w]=0,T=x+w;p<=T&&T<g&&(a[w]=x+1)}const m=u.previousIndex;a[m]=p-g}}c!==h&&n(u,c,h)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;i!==null;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;i!==null;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;i!==null;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;i!==null;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;i!==null;i=i._nextIdentityChange)n(i)}diff(n){if(n==null&&(n=[]),!__(n))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._itHead,r=!1,o,a,u;if(Array.isArray(n)){this.length=n.length;for(let c=0;c<this.length;c++)a=n[c],u=this._trackByFn(c,a),i===null||!Object.is(i.trackById,u)?(i=this._mismatch(i,a,u,c),r=!0):(r&&(i=this._verifyReinsertion(i,a,u,c)),Object.is(i.item,a)||this._addIdentityChange(i,a)),i=i._next}else o=0,k_(n,c=>{u=this._trackByFn(o,c),i===null||!Object.is(i.trackById,u)?(i=this._mismatch(i,c,u,o),r=!0):(r&&(i=this._verifyReinsertion(i,c,u,o)),Object.is(i.item,c)||this._addIdentityChange(i,c)),i=i._next,o++}),this.length=o;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;n!==null;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;n!==null;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;n!==null;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,r,o){let a;return n===null?a=this._itTail:(a=n._prev,this._remove(n)),n=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),n!==null?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,a,o)):(n=this._linkedRecords===null?null:this._linkedRecords.get(r,o),n!==null?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,a,o)):n=this._addAfter(new N_(i,r),a,o)),n}_verifyReinsertion(n,i,r,o){let a=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return a!==null?n=this._reinsertAfter(a,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;n!==null;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,a=n._nextRemoved;return o===null?this._removalsHead=a:o._nextRemoved=a,a===null?this._removalsTail=o:a._prevRemoved=o,this._insertAfter(n,i,r),this._addToMoves(n,r),n}_moveAfter(n,i,r){return this._unlink(n),this._insertAfter(n,i,r),this._addToMoves(n,r),n}_addAfter(n,i,r){return this._insertAfter(n,i,r),this._additionsTail===null?this._additionsTail=this._additionsHead=n:this._additionsTail=this._additionsTail._nextAdded=n,n}_insertAfter(n,i,r){const o=i===null?this._itHead:i._next;return n._next=o,n._prev=i,o===null?this._itTail=n:o._prev=n,i===null?this._itHead=n:i._next=n,this._linkedRecords===null&&(this._linkedRecords=new NA),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){this._linkedRecords!==null&&this._linkedRecords.remove(n);const i=n._prev,r=n._next;return i===null?this._itHead=r:i._next=r,r===null?this._itTail=i:r._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail===null?this._movesTail=this._movesHead=n:this._movesTail=this._movesTail._nextMoved=n),n}_addToRemovals(n){return this._unlinkedRecords===null&&(this._unlinkedRecords=new NA),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=n:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=n,n}}class N_{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class G_{constructor(){this._head=null,this._tail=null}add(n){this._head===null?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let r;for(r=this._head;r!==null;r=r._nextDup)if((i===null||i<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const i=n._prevDup,r=n._nextDup;return i===null?this._head=r:i._nextDup=r,r===null?this._tail=i:r._prevDup=i,this._head===null}}class NA{constructor(){this.map=new Map}put(n){const i=n.trackById;let r=this.map.get(i);r||(r=new G_,this.map.set(i,r)),r.add(n)}get(n,i){const r=n,o=this.map.get(r);return o?o.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function GA(e,n,i){const r=e.previousIndex;if(r===null)return r;let o=0;return i&&r<i.length&&(o=i[r]),r+n+o}class Kb{constructor(n){this.board=n,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(n,i){this.initialized=!0,this.children=n,n.forEach((r,o)=>{mg.set(r,o),Wh.set(r,i.parent);const a=LE(this.board,r,o,i.parent),u=jA(this.board,a),c=zA(this.board,u,a,i);this.instances.push(c),this.contexts.push(a)}),this.differ=new H_(z_),this.differ.diff(n)}update(n,i){if(!this.initialized){this.initialize(n,i);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:o}=i,a=this.differ.diff(n);if(a){const u=[],c=[];let h=null;a.forEachItem(g=>{var w;mg.set(g.item,g.currentIndex),Wh.set(g.item,i.parent);const p=g.previousIndex===null?void 0:this.contexts[g.previousIndex],m=LE(r,g.item,g.currentIndex,o,p);if(g.previousIndex===null){const x=jA(r,m),T=zA(r,x,m,i);u.push(m),c.push(T)}else{const x=this.instances[g.previousIndex];x.context=m,c.push(x),u.push(m)}(g.item===this.children[0]||g.item.id===((w=this.children[0])==null?void 0:w.id))&&(h=g.currentIndex)}),a.forEachOperation(g=>{if(g.currentIndex===null){const p=this.instances[g.previousIndex];p==null||p.destroy()}g.previousIndex!==null&&g.currentIndex!==null&&Qb(g.item,g.currentIndex,i,h)}),this.instances=c,this.contexts=u,this.children=n}else{const u=[];this.children.forEach((c,h)=>{mg.set(c,h),Wh.set(c,i.parent);const g=this.contexts[h],p=this.instances[h],m=LE(r,c,h,o,g);p.context=m,u.push(m)}),this.contexts=u}}destroy(){this.children.forEach((n,i)=>{this.instances[i]&&this.instances[i].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const z_=(e,n)=>n.id,zA=(e,n,i,r)=>{const o=new n;o.context=i,e.normalizeElement(i);try{o.initialize()}catch(u){Vc()&&console.error("list-render-initialize",u,"context",i)}const a=o.getContainerG();return Zb(i.index,a,r),o.initializeListRender(),o},jA=(e,n)=>e.drawElement(n),LE=(e,n,i,r,o)=>{var h;let a=vg(e,n);const u=o&&o.element;return u&&u!==n&&vg(e,u)&&(a=!0,UO(e,u,n)),{element:n,parent:r,board:e,selected:a,index:i,hasThemeChanged:!!((h=e.operations)!=null&&h.find(g=>g.type==="set_theme"))}},Zb=(e,n,i,r=null)=>{const{parent:o,parentG:a}=i;if(G.isBoard(o))if(e>0){const u=o.children[e-1];gn.getContainerG(u,{suppressThrow:!1}).insertAdjacentElement("afterend",n)}else if(r!==null){const u=o.children[r],c=u&&gn.getContainerG(u,{suppressThrow:!0});if(u&&c)a.insertBefore(n,c);else throw new Error("fail to mount container on moving")}else a.append(n);else if(e>0){const u=o.children[e-1];gn.getElementG(u).insertAdjacentElement("afterend",n)}else if(r){const u=o.children[r],c=u&&G.findPath(i.board,u),h=c&&Je.first(i.board,c),g=h&&gn.getContainerG(h,{suppressThrow:!1});if(g)a.insertBefore(n,g);else throw new Error("fail to mount container on moving")}else{let u=gn.getElementG(o);a.insertBefore(n,u)}},Qb=(e,n,i,r)=>{const o=gn.getContainerG(e,{suppressThrow:!1});Zb(n,o,i,r),e.children&&!gn.isRootElement(e)&&i.board.isExpanded(e)&&e.children.forEach((a,u)=>{Qb(a,u,{...i,parent:e},null)})};class j_{get hasChildren(){return!!this.element.children}set context(n){aO(this)&&this.beforeContextChange(n);const i=this._context;if(this._context=n,this.initialized){const r=this.getElementG(),o=this.getContainerG();lm.set(this.element,r),um.set(this.element,o),mw(this.board).set(this.element.id,this.element),cm.set(this.element,this.ref),this.updateListRender(),lO(this)&&this.onContextChanged(n,i)}else gn.isRootElement(this.element)&&this.hasChildren?(this._g=ze(),this._containerG=ze(),this._containerG.append(this._g)):(this._g=ze(),this._containerG=this._g),lm.set(this.element,this._g),um.set(this.element,this._containerG),cm.set(this.element,this.ref),mw(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(n){this.ref=n,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(gn.isRootElement(this.element))this._rootContainerG=this._containerG;else{const n=G.findPath(this.board,this.element),i=Je.get(this.board,n.slice(0,1));this._rootContainerG=gn.getContainerG(i,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new Kb(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var n;lm.get(this.element)===this._g&&lm.delete(this.element),mw(this.board).delete(this.element.id),um.get(this.element)===this._containerG&&um.delete(this.element),cm.get(this.element)===this.ref&&cm.set(this.element,this.ref),Nx(this.board,this.element),this.getContainerG().remove(),(n=this.listRender)==null||n.destroy()}}class U_{constructor(){this.uploadingFiles=[]}getUploadingFile(n){return this.uploadingFiles.find(i=>i.url===n)}setUploadingFile(n){return this.uploadingFiles.push(n)}removeUploadingFile(n){this.uploadingFiles=this.uploadingFiles.filter(i=>i.url!==n.url)}}const $_={transform(e,n){const{current:i}=e;if(i==null)return;const r=Se.transform(i,n);e.current=r,r==null&&e.unref()}};function V_(e,n){const i={viewport:{zoom:1},children:e,theme:{themeColorMode:zi.default},operations:[],history:{redos:[],undos:[]},selection:null,options:n||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:n!=null&&n.readonly?nn.hand:nn.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const o of i.pathRefs())$_.transform(o,r);i.operations.push(r),Qt.transform(i,r),dw.get(i)||(dw.set(i,!0),Promise.resolve().then(()=>{dw.set(i,!1),i.onChange(),i.afterChange(),i.operations=[]}))},pathRef:(r,o)=>{const a=(o==null?void 0:o.affinity)||"forward",u={current:r,affinity:a,unref(){const{current:h}=u;return i.pathRefs().delete(u),u.current=null,h}};return i.pathRefs().add(u),u},pathRefs:()=>{let r=BA.get(i);return r||(r=new Set,BA.set(i,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>$L(i),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,o,a,u)=>r,insertFragment:(r,o,a)=>{},deleteFragment:r=>{P5.removeElements(i,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,o)=>r,normalizeElement:r=>{},drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},touchStart:r=>{},touchMove:r=>{},touchEnd:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},drop:r=>!1,isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return i}function W_(e){const{onChange:n,afterChange:i}=e;return e.onChange=()=>{const r=Hw.get(e);r&&r(),n()},e.afterChange=()=>{const r=Nw.get(e);r&&r(),i()},e}const UA="Space",X_=5,$A=new WeakMap;function q_(e){const{pointerDown:n,pointerMove:i,globalPointerUp:r,keyDown:o,keyUp:a,pointerUp:u}=e;let c=!1,h=null,g=null,p=!1,m=!1,w=!1;e.pointerDown=D=>{const b=e.getPluginOptions(El.withHand);((b==null?void 0:b.isHandMode(e,D))||G.isPointer(e,nn.hand)||w)&&Al(D)?(h={x:D.x,y:D.y},G.isPointer(e,nn.hand)||G.getBoardContainer(e).classList.add("viewport-moving")):BO(D)?(p=!0,D.preventDefault(),h={x:D.x,y:D.y},x()):bO(D)&&(m=!0,h={x:D.x,y:D.y},g=D),g=D,n(D)},e.pointerMove=D=>{const b=e.getPluginOptions(El.withHand),B=ib+4;if(m&&h&&!c&&g&&be(g.x,g.y,D.x,D.y)>X_&&x(),h&&!c&&!Dr(e)&&g&&be(g.x,g.y,D.x,D.y)>B&&!sf(e)&&x(),((b==null?void 0:b.isHandMode(e,D))||G.isPointer(e,nn.hand)||p||m||w)&&c&&h&&!Dr(e)&&!sf(e)){const H=G.getViewportContainer(e),R=H.scrollLeft-(D.x-h.x),k=H.scrollTop-(D.y-h.y);wb(e,R,k,!1),h.x=D.x,h.y=D.y}i(D)},e.pointerUp=D=>{c||u(D)},e.globalPointerUp=D=>{h&&(h=null),T(),p=!1,m=!1,r(D)},e.keyDown=D=>{D.code===UA&&(!e.options.readonly&&!G.isPointer(e,nn.hand)&&(w=!0,rS(e,{isDisabledSelection:!0}),G.getBoardContainer(e).classList.add("viewport-moving")),D.preventDefault()),o(D)},e.keyUp=D=>{!e.options.readonly&&D.code===UA&&(w=!1,rS(e,{isDisabledSelection:!1}),G.getBoardContainer(e).classList.remove("viewport-moving")),a(D)};const x=()=>{c=!0,G.getBoardContainer(e).classList.add("viewport-moving"),$A.set(e,!0)},T=()=>{c=!1,G.getBoardContainer(e).classList.remove("viewport-moving"),setTimeout(()=>{$A.set(e,!1)},0)};return e}function Y_(e){const{apply:n,keyDown:i}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:o}=r;if(o.length>0){const a=o[o.length-1];js.withoutSaving(e,()=>{for(const u of a)e.apply(u)}),r.redos.pop(),r.undos.push(a)}},e.undo=()=>{const{history:r}=e,{undos:o}=r;if(o.length>0){const a=o[o.length-1];js.withoutSaving(e,()=>{const u=a.map(jc.inverse).reverse();for(const c of u)e.apply(c)}),r.redos.push(a),r.undos.pop()}},e.apply=r=>{const{operations:o,history:a}=e,{undos:u}=a,c=u[u.length-1],h=c&&c[c.length-1];let g=js.isSaving(e),p=js.isMerging(e);if(g==null&&(g=kO(r)),g){if(p||(c==null?p=!1:o.length!==0?p=!0:p=FO(r,h)),js.isSplittingOnce(e)&&(p=!1,js.setSplittingOnce(e,void 0)),c&&p)c.push(r);else{const m=[r];u.push(m)}for(;u.length>100;)u.shift();IO(r)&&(a.redos=[])}n(r)},e.keyDown=r=>{if(ln.isHotkey("mod+z",r)){e.undo();return}if(ln.isHotkey("mod+shift+z",r)){e.redo();return}i(r)},e}const K_=e=>{const{keyDown:n,keyUp:i,globalKeyDown:r}=e;return e.keyDown=o=>{const a=e.getPluginOptions(El.withSelection);if(!G.isReadonly(e)&&a.isMultipleSelection&&ln.isHotkey("mod+a",o)){o.preventDefault();let c=[];Ar(e,h=>{G.isBoard(h)||c.push(h)},h=>!!(G.isBoard(h)||e.isRecursion(h)),!0),Qt.addSelectionWithTemporaryElements(e,c);return}if(!G.isReadonly(e)){if(ln.isKeyHotkey("mod+]",o)){o.preventDefault(),Qt.moveUp(e);return}if(ln.isKeyHotkey("mod+[",o)){o.preventDefault(),Qt.moveDown(e);return}if(ln.isKeyHotkey("mod+option+",o)){o.preventDefault(),Qt.moveToTop(e);return}if(ln.isKeyHotkey("mod+option+",o)){o.preventDefault(),Qt.moveToBottom(e);return}}const u=ne(e);if(!G.isReadonly(e)&&u.length>0&&ln.isKeyHotkey("mod+d",o)){o.preventDefault(),B5(e);return}!G.isReadonly(e)&&u.length>0&&($r.isDeleteBackward(o)||$r.isDeleteForward(o))&&(o.preventDefault(),b5(e)),n(o)},e.keyUp=o=>{i(o)},e.globalKeyDown=o=>{if(G.getMovingPointInBoard(e)||G.isMovingPointInBoard(e)){if(ln.isHotkey(["mod+=","mod++"],{byKey:!0})(o)){o.preventDefault(),un.updateZoom(e,e.viewport.zoom+.1);return}if(ln.isHotkey(["mod+shift+=","mod+shift++"],{byKey:!0})(o)){o.preventDefault(),un.fitViewport(e);return}if(ln.isHotkey(["mod+-","mod+shift+-"])(o)){o.preventDefault(),un.updateZoom(e,e.viewport.zoom-.1);return}if(ln.isHotkey(["mod+0","mod+shift+0"],{byKey:!0})(o)){o.preventDefault(),un.updateZoom(e,1);return}}r(o)},e};function Z_(e,n,i){const r=_b(e,i),o=ze();let a=J_(n,r);const u=eF(e,a,n,r);o.append(u);const c=nF(e,a,n,r);return a=c.snapDelta,o.append(c.snapG),{...a,snapG:o}}function Q_(e,n,i){const r=nd(e,i),o=mm(n,r[0],i),a=mm(n,r[1],i),u=mm(n,r[2],i);return[o,a,u]}function J_(e,n){let i={deltaX:0,deltaY:0};function r(o){let a=0;const u=Q_(e,n,o);for(let c=0;c<u.length;c++)if(Math.abs(u[c])<Cu){a=u[c];break}return a}return i.deltaX=r(!0),i.deltaY=r(!1),i}function tF(e,n){const{deltaX:i,deltaY:r}=e,{x:o,y:a,width:u,height:c}=n;return{x:o+i,y:a+r,width:u,height:c}}function eF(e,n,i,r){const o=tF(n,i);return Fb(e,o,r,!0,!0,!0)}function nF(e,n,i,r){let o=n.deltaX,a=n.deltaY;const u=VA(i,r,!0),c=VA(i,r,!1),h=[...u.lines,...c.lines];return u.delta&&(o=u.delta),c.delta&&(a=c.delta),{snapDelta:{deltaX:o,deltaY:a},snapG:kb(e,h)}}function VA(e,n,i){var A,H;let r=[],o=0,a=[];const u=i?"x":"y",c=i?"width":"height",h=e[u]+e[c]/2;n.forEach(R=>{(i?iF(R,e):rF(R,e))&&!I.isHit(R,e)&&a.push(R)}),a=[...a,e].sort((R,k)=>R[u]-k[u]);const g=[];let p=0,m,w;for(let R=0;R<a.length;R++)for(let k=R+1;k<a.length;k++){const W=a[R],U=a[k],nt=U[u]-(W[u]+W[c]);let st=1/0;(A=g[R])!=null&&A.after?g[R].after.push({distance:nt,index:k}):g[R]={...g[R],after:[{distance:nt,index:k}]},(H=g[k])!=null&&H.before?g[k].before.push({distance:nt,index:R}):g[k]={...g[k],before:[{distance:nt,index:R}]};let ft=(W[u]+W[c]+U[u])/2;st=Math.abs(ft-h),st<Cu&&(p=(U[u]-(W[u]+W[c])-e[c])/2,o=ft-h,m=R,w=k);const Et=U[u]-(W[u]+W[c]);ft=U[u]+U[c]+Et+e[c]/2,st=Math.abs(ft-h),(!p||p!==Et)&&st<Cu&&(p=Et,m=k,o=ft-h);const ct=U[u]-(W[u]+W[c]);ft=W[u]-ct-e[c]/2,st=Math.abs(ft-h),!p&&st<Cu&&(p=ct,w=R,o=ft-h)}const x=a.indexOf(e);let T=[],D=[];if(m!==void 0&&(T.push(m),b(p,g[m],"before",T)),w!==void 0&&(D.push(w),b(p,g[w],"after",D)),T.length||D.length){const R=[...T.reverse(),x,...D];e[u]+=o;for(let k=1;k<R.length;k++)r.push(B(a[R[k-1]],a[R[k]]))}function b(R,k,W,U){const nt=k[W],st=g.indexOf(k);if(!(st===0&&W==="before"||st===g.length-1&&W==="after")){for(let ft=0;ft<nt.length;ft++)if(Math.abs(nt[ft].distance-R)<.1){U.push(nt[ft].index),b(R,g[nt[ft].index],W,U);return}}}function B(R,k){const W=u==="x"?"y":"x",U=c==="width"?"height":"width",st=[R[W],R[W]+R[U],k[W],k[W]+k[U]].sort((ct,mt)=>ct-mt),ft=(st[1]+st[2])/2,Et=3;return i?[[R.x+R.width+Et,ft],[k.x-Et,ft]]:[[ft,R.y+R.height+Et],[ft,k.y-Et]]}return{delta:o,lines:r}}function iF(e,n){return!(e.y+e.height<n.y||e.y>n.y+n.height)}function rF(e,n){return!(e.x+e.width<n.x||e.x>n.x+n.width)}function oF(e){const{pointerDown:n,pointerMove:i,globalPointerUp:r,globalPointerMove:o,globalKeyDown:a,keyUp:u,touchStart:c,touchMove:h,touchEnd:g}=e;let p=0,m=0,w=!1,x,T=[],D=null,b=null,B=null,A,H,R=null,k=null;e.globalKeyDown=U=>{G.isReadonly(e)||ln.isKeyHotkey("option",U)&&(U.preventDefault(),x&&T.length&&!G.hasBeenTextEditing(e)&&(R&&G.getElementTopHost(e).removeChild(R),R=WA(e,T,p,m),R&&G.getElementTopHost(e).append(R))),a(U)},e.keyUp=U=>{if(!G.isReadonly(e)&&R&&x&&T.length&&!G.hasBeenTextEditing(e)){U.preventDefault();const nt=cS(e,T,p,m);G.getBoardContainer(e).classList.add("element-moving"),RA(e,nt)}R==null||R.remove(),u(U)},e.pointerDown=U=>{if(G.isReadonly(e)||!G.isPointer(e,nn.selection)||!Al(U)){n(U);return}const nt=Pe(e,ke(e,U.x,U.y));if(A=Ll(e,nt,st=>e.isMovable(st)),B=Jb(e),H=A&&B.includes(A),A&&H)x=nt,k=U.pointerId,T=B,b=pn(e,T,!0);else if(A){x=nt,k=U.pointerId;const st=e.getRelatedFragment([],[A]);T=[...T5(e,A),...st],b=pn(e,T,!0)}else{const st=B.length>0&&pn(e,B,!1);st&&I.isPointInRectangle(st,nt)&&(x=nt,k=U.pointerId,T=B,b=st)}n(U)},e.touchMove=U=>{if(x&&T.length){U.preventDefault();return}h(U)},e.pointerMove=U=>{if(x&&T.length&&!G.hasBeenTextEditing(e)&&k===U.pointerId){w||(w=!0),D==null||D.remove(),R==null||R.remove();const nt=Pe(e,ke(e,U.x,U.y));p=nt[0]-x[0],m=nt[1]-x[1],(be(...nt,...x)>s5||pL(e).length>0)&&(A&&!H&&B&&B.length>0&&(jb(e,[]),A=void 0,B=null,H=void 0),_a(e,"with-moving",()=>{if(!b)return;const ft={...b,x:b.x+p,y:b.y+m},Et=dv(ft,Wo(T)),ct=Z_(e,Et,T);if(p+=ct.deltaX,m+=ct.deltaY,D=ct.snapG,D.classList.add(nb),G.getElementTopHost(e).append(D),U.altKey)R=WA(e,T,p,m),R&&G.getElementTopHost(e).append(R);else{const mt=cS(e,T,p,m);G.getBoardContainer(e).classList.add("element-moving"),RA(e,mt)}}))}w&&U.preventDefault(),i(U)},e.globalPointerMove=U=>{x&&(xO(e,U.x,U.y)||W(e)),o(U)},e.globalPointerUp=U=>{if(U.altKey&&T.length){const nt=M5(e,T),st=pn(e,nt,!1);B5(e,nt,[st.x+p,st.y+m])}w=!1,A=void 0,B=null,H=void 0,x&&W(e),r(U)};function W(U){D==null||D.remove(),R==null||R.remove(),x=null,k=null,b=null,p=0,m=0,T=[],sf(U)&&mL(U),tr.set(U,!1),G.getBoardContainer(U).classList.remove("element-moving")}return sF(e)}function sF(e){const{keyDown:n,keyUp:i}=e;return e.keyDown=r=>{const o=ne(e);if(!G.isReadonly(e)&&o.length>0&&($r.isArrow(r)||$r.isExtendArrow(r))){r.preventDefault();const a=!!r.shiftKey,u=[0,0],c=a?10:1;switch(!0){case($r.isMoveUp(r)||$r.isExtendUp(r)):{u[1]=-c;break}case($r.isMoveDown(r)||$r.isExtendDown(r)):{u[1]=c;break}case($r.isMoveBackward(r)||$r.isExtendBackward(r)):{u[0]=-c;break}case($r.isMoveForward(r)||$r.isExtendForward(r)):{u[0]=c;break}}const h=Jb(e);_a(e,"with-arrow-moving",()=>{cS(e,h,u[0],u[1])})}n(r)},e.keyUp=r=>{tr.set(e,!1),i(r)},e}function Jb(e){const n=ne(e),i=e.children.filter(a=>e.isMovable(a)),r=n.filter(a=>i.includes(a)),o=e.getRelatedFragment([]);return r.push(...o),r}function M5(e,n){return[...n].filter(r=>!So.isGroup(r)&&gn.isRootElement(r))}function cS(e,n,i,r){return M5(e,n).map(u=>{const h=(u.points||[]).map(p=>[p[0]+i,p[1]+r]),g=mg.get(u);return Qt.setNode(e,{points:h},[g]),tr.set(e,!0),Je.get(e,[g])})}function WA(e,n,i,r){let o=null;const a=[];return M5(e,n).forEach(c=>{Ar(c,h=>{a.push(h)},()=>!0)}),a.filter(c=>gn.hasMounted(c)).forEach(c=>{let h=e.getRectangle(c);if(h){h={x:h.x+i,y:h.y+r,width:h.width,height:h.height};const g=Fa(e,h,{stroke:Ko,strokeWidth:1,fill:m5,fillStyle:"solid"});o||(o=ze(),o.classList.add(nb));const p=b_(c);p&&Xs(g,I.getCenterPoint(h),p),o.append(g)}}),o}const aF=e=>{const n=new Map,i=e;return i.getPluginOptions=r=>n.get(r),i.setPluginOptions=(r,o)=>{const a=i.getPluginOptions(r)||{};n.set(r,{...a,...o})},i};function lF(e){const{buildFragment:n}=e;return e.buildFragment=(i,r,o,a)=>{let u=e.getRelatedFragment(a||[]);if(u&&(a!=null&&a.length&&(u=u.filter(c=>!a.map(h=>h.id).includes(c.id))),u.length)){const c={text:"",type:Au.elements,elements:u};i=jx(i,c)}return n(i,r,o,a)},e}function uF(e){const{pointerDown:n,pointerUp:i,pointerMove:r,globalPointerUp:o,onChange:a,afterChange:u,touchStart:c,touchMove:h,touchEnd:g}=e;let p=null,m=null,w,x,T=!1,D=null,b=null;return e.pointerDown=B=>{!T&&B.shiftKey&&(T=!0),T&&!B.shiftKey&&(T=!1);const A=Pe(e,ke(e,B.x,B.y)),H=VO(e,A),R=pw(e);G.isPointer(e,nn.selection)&&Al(B)&&!H&&R.isMultipleSelection&&!R.isDisabledSelection&&(l_(B)?(D&&(clearTimeout(D),D=null),D=setTimeout(()=>{p=[B.x,B.y],D=null},400)):p=[B.x,B.y]),b=B,n(B)},e.touchMove=B=>{if(p&&B.touches.length>1&&(p=null,w==null||w.remove()),p){B.preventDefault();return}h(B)},e.pointerMove=B=>{if(D&&b&&be(b.x,b.y,B.x,B.y)>ib&&(clearTimeout(D),D=null),G.isPointer(e,nn.selection)&&p){B.preventDefault(),m=[B.x,B.y];const A=I.getRectangleByPoints([ed(e,...p),ed(e,...m)]);w==null||w.remove(),_a(e,"with-selection",()=>{p&&m&&Qt.setSelection(e,{anchor:Pe(e,ke(e,p[0],p[1])),focus:Pe(e,ke(e,m[0],m[1]))})}),NL(e),w=Fa(e,A,{stroke:Ko,strokeWidth:1,fill:m5,fillStyle:"solid"}),G.getActiveHost(e).append(w)}r(B)},e.pointerUp=B=>{const A=G.isPointer(e,nn.selection)||G.isPointer(e,nn.hand);if(!Al(B)||of(e)||!A){i(B);return}const R=Pe(e,ke(e,B.x,B.y)),k={anchor:R,focus:R};Qt.setSelection(e,k),i(B)},e.globalPointerUp=B=>{p&&m&&(w==null||w.remove(),GL(e),Qt.setSelection(e,{anchor:Pe(e,ke(e,p[0],p[1])),focus:Pe(e,ke(e,m[0],m[1]))}));const A=pw(e);if(G.isFocus(e)&&!A.isPreventClearSelection){const H=B.target instanceof Node&&G.getBoardContainer(e).contains(B.target),R=B.target instanceof Node&&document.contains(B.target),k=B.target instanceof Element&&B.target.closest(`.${Ml}`);!H&&!p&&!k&&R&&Qt.setSelection(e,null)}p=null,m=null,D&&(clearTimeout(D),D=null),b=null,o(B)},e.onChange=()=>{const B=pw(e);if(B.isDisabledSelection&&zg(e),e.operations.forEach(A=>{A.type==="remove_node"&&Nx(e,A.node,!0)}),kA(e)&&IA(e))try{T||x==null||x.remove();const A=zL(e);if(A)Cl(e,[...A]);else{let R=cb(e);!B.isMultipleSelection&&R.length>1&&(R=[R[0]]);const k=R.some(U=>U.groupId),W=ne(e);if(k)VL(e,R,T);else{if(e.selection&&bg.isCollapsed(e.selection)){const U=e.getOneHitElement(R);U&&(R=[U])}if(T){const U=[...W];e.selection&&bg.isCollapsed(e.selection)?(R.forEach(nt=>{U.includes(nt)?U.splice(U.indexOf(nt),1):U.push(nt)}),Cl(e,U)):(R.forEach(nt=>{U.includes(nt)||U.push(nt)}),Cl(e,[...U]))}else Cl(e,[...R])}}const H=ne(e);UL(e),Dr(e)||(x==null||x.remove(),H.length>1&&(x=e.drawSelectionRectangle(),G.getActiveHost(e).append(x)))}catch(A){console.error(A)}a()},e.afterChange=()=>{if(kA(e)&&!IA(e))try{const B=ne(e);B.length&&B.length>1?(x==null||x.remove(),x=e.drawSelectionRectangle(),G.getActiveHost(e).append(x)):x==null||x.remove()}catch(B){console.error(B)}u()},rS(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}const cF=e=>{const n=e;return n.getI18nValue=i=>(console.warn(`I18n key "${i}" is not found.`),null),n},Ux=(e,n,i="")=>e.getI18nValue(n)||i;var _E={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var XA;function fF(){return XA||(XA=1,function(e){(function(){var n={}.hasOwnProperty;function i(){for(var a="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(a=o(a,r(c)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return i.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var u="";for(var c in a)n.call(a,c)&&a[c]&&(u=o(u,c));return u}function o(a,u){return u?a?a+" "+u:a+u:a}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(_E)),_E.exports}var hF=fF();const yn=hf(hF);var dF=function(e){return typeof e=="function"};function qA(e,n){if(e===n)return!0;for(var i=0;i<e.length;i++)if(!Object.is(e[i],n[i]))return!1;return!0}function t6(e){var n=K.useRef(e);return n.current=e,n}var gF=function(e){var n=t6(e);K.useEffect(function(){return function(){n.current()}},[])},FE,YA;function R5(){if(YA)return FE;YA=1;function e(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}return FE=e,FE}var kE,KA;function pF(){if(KA)return kE;KA=1;var e=typeof Vs=="object"&&Vs&&Vs.Object===Object&&Vs;return kE=e,kE}var IE,ZA;function e6(){if(ZA)return IE;ZA=1;var e=pF(),n=typeof self=="object"&&self&&self.Object===Object&&self,i=e||n||Function("return this")();return IE=i,IE}var HE,QA;function mF(){if(QA)return HE;QA=1;var e=e6(),n=function(){return e.Date.now()};return HE=n,HE}var NE,JA;function vF(){if(JA)return NE;JA=1;var e=/\s/;function n(i){for(var r=i.length;r--&&e.test(i.charAt(r)););return r}return NE=n,NE}var GE,tD;function yF(){if(tD)return GE;tD=1;var e=vF(),n=/^\s+/;function i(r){return r&&r.slice(0,e(r)+1).replace(n,"")}return GE=i,GE}var zE,eD;function n6(){if(eD)return zE;eD=1;var e=e6(),n=e.Symbol;return zE=n,zE}var jE,nD;function wF(){if(nD)return jE;nD=1;var e=n6(),n=Object.prototype,i=n.hasOwnProperty,r=n.toString,o=e?e.toStringTag:void 0;function a(u){var c=i.call(u,o),h=u[o];try{u[o]=void 0;var g=!0}catch{}var p=r.call(u);return g&&(c?u[o]=h:delete u[o]),p}return jE=a,jE}var UE,iD;function xF(){if(iD)return UE;iD=1;var e=Object.prototype,n=e.toString;function i(r){return n.call(r)}return UE=i,UE}var $E,rD;function CF(){if(rD)return $E;rD=1;var e=n6(),n=wF(),i=xF(),r="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function u(c){return c==null?c===void 0?o:r:a&&a in Object(c)?n(c):i(c)}return $E=u,$E}var VE,oD;function EF(){if(oD)return VE;oD=1;function e(n){return n!=null&&typeof n=="object"}return VE=e,VE}var WE,sD;function SF(){if(sD)return WE;sD=1;var e=CF(),n=EF(),i="[object Symbol]";function r(o){return typeof o=="symbol"||n(o)&&e(o)==i}return WE=r,WE}var XE,aD;function TF(){if(aD)return XE;aD=1;var e=yF(),n=R5(),i=SF(),r=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function h(g){if(typeof g=="number")return g;if(i(g))return r;if(n(g)){var p=typeof g.valueOf=="function"?g.valueOf():g;g=n(p)?p+"":p}if(typeof g!="string")return g===0?g:+g;g=e(g);var m=a.test(g);return m||u.test(g)?c(g.slice(2),m?2:8):o.test(g)?r:+g}return XE=h,XE}var qE,lD;function i6(){if(lD)return qE;lD=1;var e=R5(),n=mF(),i=TF(),r="Expected a function",o=Math.max,a=Math.min;function u(c,h,g){var p,m,w,x,T,D,b=0,B=!1,A=!1,H=!0;if(typeof c!="function")throw new TypeError(r);h=i(h)||0,e(g)&&(B=!!g.leading,A="maxWait"in g,w=A?o(i(g.maxWait)||0,h):w,H="trailing"in g?!!g.trailing:H);function R(mt){var wt=p,V=m;return p=m=void 0,b=mt,x=c.apply(V,wt),x}function k(mt){return b=mt,T=setTimeout(nt,h),B?R(mt):x}function W(mt){var wt=mt-D,V=mt-b,P=h-wt;return A?a(P,w-V):P}function U(mt){var wt=mt-D,V=mt-b;return D===void 0||wt>=h||wt<0||A&&V>=w}function nt(){var mt=n();if(U(mt))return st(mt);T=setTimeout(nt,W(mt))}function st(mt){return T=void 0,H&&p?R(mt):(p=m=void 0,x)}function ft(){T!==void 0&&clearTimeout(T),b=0,p=D=m=T=void 0}function Et(){return T===void 0?x:st(n())}function ct(){var mt=n(),wt=U(mt);if(p=arguments,m=this,D=mt,wt){if(T===void 0)return k(D);if(A)return clearTimeout(T),T=setTimeout(nt,h),R(D)}return T===void 0&&(T=setTimeout(nt,h)),x}return ct.cancel=ft,ct.flush=Et,ct}return qE=u,qE}var AF=i6();const DF=hf(AF);var bF=!!(typeof window<"u"&&window.document&&window.document.createElement),YE,uD;function BF(){if(uD)return YE;uD=1;var e=i6(),n=R5(),i="Expected a function";function r(o,a,u){var c=!0,h=!0;if(typeof o!="function")throw new TypeError(i);return n(u)&&(c="leading"in u?!!u.leading:c,h="trailing"in u?!!u.trailing:h),e(o,a,{leading:c,maxWait:a,trailing:h})}return YE=r,YE}var PF=BF();const MF=hf(PF);function r6(e,n){if(bF){if(!e)return n;var i;return dF(e)?i=e():"current"in e?i=e.current:i=e,i}}var RF=function(e){var n=function(i,r,o){var a=K.useRef(!1),u=K.useRef([]),c=K.useRef([]),h=K.useRef(void 0);e(function(){var g,p=Array.isArray(o)?o:[o],m=p.map(function(w){return r6(w)});if(!a.current){a.current=!0,u.current=m,c.current=r,h.current=i();return}(m.length!==u.current.length||!qA(u.current,m)||!qA(c.current,r))&&((g=h.current)===null||g===void 0||g.call(h),u.current=m,c.current=r,h.current=i())}),gF(function(){var g;(g=h.current)===null||g===void 0||g.call(h),a.current=!1})};return n},OF=RF(K.useEffect);function Vi(e,n,i){i===void 0&&(i={});var r=i.enable,o=r===void 0?!0:r,a=t6(n);OF(function(){if(o){var u=r6(i.target,window);if(u!=null&&u.addEventListener){var c=function(g){return a.current(g)},h=Array.isArray(e)?e:[e];return h.forEach(function(g){u.addEventListener(g,c,{capture:i.capture,once:i.once,passive:i.passive})}),function(){h.forEach(function(g){u.removeEventListener(g,c,{capture:i.capture})})}}}},[e,i.capture,i.once,i.passive,o],i.target)}const LF=(e,n,i)=>{Vi("pointerdown",r=>{e.pointerDown(r)},{target:i}),Vi("pointermove",r=>{J3.set(e,[r.x,r.y]),e.pointerMove(r)},{target:n}),Vi("pointerleave",r=>{J3.delete(e),e.pointerLeave(r)},{target:n}),Vi("pointerup",r=>{e.pointerUp(r)},{target:n}),Vi("touchstart",r=>{e.touchStart(r)},{target:n}),Vi("touchmove",r=>{e.touchMove(r)},{target:n}),Vi("touchend",r=>{e.touchEnd(r)},{target:n}),Vi("dblclick",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&e.dblClick(r)},{target:i}),Vi("pointermove",r=>{ob.set(e,[r.x,r.y]),e.globalPointerMove(r)}),Vi("pointerup",r=>{e.globalPointerUp(r)}),Vi("keydown",r=>{e.globalKeyDown(r),G.isFocus(e)&&!G.hasBeenTextEditing(e)&&!DO(r.target)&&e.keyDown(r)}),Vi("keyup",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),Vi("copy",r=>{G.isFocus(e)&&!G.hasBeenTextEditing(e)&&(r.preventDefault(),HA(e,Ma.copy,r.clipboardData))}),Vi("paste",async r=>{if(G.isFocus(e)&&!G.isReadonly(e)&&!G.hasBeenTextEditing(e)){const o=G.getMovingPointInBoard(e);if(o){const a=Pe(e,ke(e,o[0],o[1])),u=await IL(r.clipboardData);e.insertFragment(u,a,Ma.paste)}}}),Vi("cut",r=>{G.isFocus(e)&&!G.isReadonly(e)&&!G.hasBeenTextEditing(e)&&(r.preventDefault(),HA(e,Ma.cut,r.clipboardData),b5(e))}),Vi("drop",r=>{G.isReadonly(e)||(r.preventDefault(),e.drop(r))},{target:n}),Vi("dragover",r=>{r.preventDefault()},{target:n})},_F=(e,n)=>{Vi("scroll",r=>{if(uL(e))Sb(e,!1);else{const{scrollLeft:o,scrollTop:a}=r.target;xb(e,o,a)}},{target:n}),Vi("contextmenu",r=>{r.preventDefault()},{target:n}),Vi("wheel",r=>{if(r.metaKey||r.ctrlKey){r.preventDefault();const{deltaX:o,deltaY:a}=r,u=e.viewport.zoom,c=Math.sign(a),h=iO*100,g=Math.abs(a);let p=a;g>h&&(p=h*c);let m=u-p/100;m+=Math.log10(Math.max(1,u))*-c*Math.min(1,g/20),un.updateZoom(e,m,G.getMovingPointInBoard(e))}},{target:n,passive:!1});const i=K.useRef(!1);K.useEffect(()=>{const r=new ResizeObserver(()=>{if(!i.current){i.current=!0;return}w5(e),x5(e),Uw(e)});return r.observe(G.getBoardContainer(e)),()=>{r&&r.disconnect()}},[])},O5=K.createContext(null),qi=()=>{const e=K.useContext(O5);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:n}=e;return n},o6=()=>{const e=K.useContext(O5);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:n}=e;return n},s6=({style:e,className:n,children:i,afterInit:r})=>{var T,D;const o=K.useRef(null),a=K.useRef(null),u=K.useRef(null),c=K.useRef(null),h=K.useRef(null),g=K.useRef(null),p=K.useRef(null),m=K.useRef(null),w=qi(),x=o6();return K.useEffect(()=>{const b=UR.svg(o.current,{options:{roughness:0,strokeWidth:1}});Y3.set(w,b),K3.set(w,o.current),Q3.set(w,!0),du.set(w,{lowerHost:a.current,host:u.current,upperHost:c.current,topHost:h.current,activeHost:g.current,container:m.current,viewportContainer:p.current});const B=new U_;return Z3.set(w,B),X3.set(w,new Map),x.initialized||(x.initialize(w.children,{board:w,parent:w,parentG:G.getElementHost(w)}),r&&r(w)),w5(w),x5(w),sL(w),()=>{Z3.delete(w),Nw.delete(w),Hw.delete(w),du.delete(w),Q3.delete(w),K3.delete(w),Y3.delete(w),X3.delete(w)}},[]),LF(w,p,o),_F(w,p),O.jsx("div",{className:yn(n,rO,`${FF()}`,`theme-${(T=w.theme)==null?void 0:T.themeColorMode}`,`pointer-${w.pointer}`,{focused:G.isFocus(w),readonly:G.isReadonly(w),"disabled-scroll":((D=w.options)==null?void 0:D.disabledScrollOnNonFocus)&&!G.isFocus(w)}),ref:m,style:e,children:O.jsxs("div",{className:"viewport-container",ref:p,style:{width:"100%",height:"100%",overflow:"auto"},children:[O.jsxs("svg",{ref:o,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[O.jsx("g",{className:"element-lower-host",ref:a}),O.jsx("g",{className:"element-host",ref:u}),O.jsx("g",{className:"element-upper-host",ref:c}),O.jsx("g",{className:"element-top-host",ref:h})]}),O.jsx("svg",{width:"100%",height:"100%",className:"board-active-svg",children:O.jsx("g",{className:"active-host-g",ref:g})}),i]})})},FF=()=>LO?"safari":_O?"chrome":OO?"firefox":"";var kF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=ut.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},IF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=Sn.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},HF={transform(e,n){var{current:i,affinity:r}=e;if(i!=null){var o=_t.transform(i,n,{affinity:r});e.current=o,o==null&&e.unref()}}},Ww=new WeakMap,Xw=new WeakMap,vm=new WeakMap,a6=new WeakMap,cD=new WeakMap,fD=new WeakMap,hD=new WeakMap,ut={ancestors(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,r=ut.levels(e,n);return i?r=r.slice(1):r=r.slice(0,-1),r},common(e,n){for(var i=[],r=0;r<e.length&&r<n.length;r++){var o=e[r],a=n[r];if(o!==a)break;i.push(o)}return i},compare(e,n){for(var i=Math.min(e.length,n.length),r=0;r<i;r++){if(e[r]<n[r])return-1;if(e[r]>n[r])return 1}return 0},endsAfter(e,n){var i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],u=n[i];return ut.equals(r,o)&&a>u},endsAt(e,n){var i=e.length,r=e.slice(0,i),o=n.slice(0,i);return ut.equals(r,o)},endsBefore(e,n){var i=e.length-1,r=e.slice(0,i),o=n.slice(0,i),a=e[i],u=n[i];return ut.equals(r,o)&&a<u},equals(e,n){return e.length===n.length&&e.every((i,r)=>i===n[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,n){return ut.compare(e,n)===1},isAncestor(e,n){return e.length<n.length&&ut.compare(e,n)===0},isBefore(e,n){return ut.compare(e,n)===-1},isChild(e,n){return e.length===n.length+1&&ut.compare(e,n)===0},isCommon(e,n){return e.length<=n.length&&ut.compare(e,n)===0},isDescendant(e,n){return e.length>n.length&&ut.compare(e,n)===0},isParent(e,n){return e.length+1===n.length&&ut.compare(e,n)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,n){if(e.length!==n.length)return!1;var i=e.slice(0,-1),r=n.slice(0,-1),o=e[e.length-1],a=n[n.length-1];return o!==a&&ut.equals(i,r)},levels(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,r=[],o=0;o<=e.length;o++)r.push(e.slice(0,o));return i&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return e.slice(0,-1).concat(n+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(n-1)},relative(e,n){if(!ut.isAncestor(n,e)&&!ut.equals(e,n))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(n,"], because it is not above or equal to the path."));return e.slice(n.length)},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:o="forward"}=i;if(e.length===0)return r;switch(n.type){case"insert_node":{var{path:a}=n;(ut.equals(a,r)||ut.endsBefore(a,r)||ut.isAncestor(a,r))&&(r[a.length-1]+=1);break}case"remove_node":{var{path:u}=n;if(ut.equals(u,r)||ut.isAncestor(u,r))return null;ut.endsBefore(u,r)&&(r[u.length-1]-=1);break}case"merge_node":{var{path:c,position:h}=n;ut.equals(c,r)||ut.endsBefore(c,r)?r[c.length-1]-=1:ut.isAncestor(c,r)&&(r[c.length-1]-=1,r[c.length]+=h);break}case"split_node":{var{path:g,position:p}=n;if(ut.equals(g,r)){if(o==="forward")r[r.length-1]+=1;else if(o!=="backward")return null}else ut.endsBefore(g,r)?r[g.length-1]+=1:ut.isAncestor(g,r)&&e[g.length]>=p&&(r[g.length-1]+=1,r[g.length]-=p);break}case"move_node":{var{path:m,newPath:w}=n;if(ut.equals(m,w))return r;if(ut.isAncestor(m,r)||ut.equals(m,r)){var x=w.slice();return ut.endsBefore(m,w)&&m.length<w.length&&(x[m.length-1]-=1),x.concat(r.slice(m.length))}else ut.isSibling(m,w)&&(ut.isAncestor(w,r)||ut.equals(w,r))?ut.endsBefore(m,r)?r[m.length-1]-=1:r[m.length-1]+=1:ut.endsBefore(w,r)||ut.equals(w,r)||ut.isAncestor(w,r)?(ut.endsBefore(m,r)&&(r[m.length-1]-=1),r[w.length-1]+=1):ut.endsBefore(m,r)&&(ut.equals(w,r)&&(r[w.length-1]+=1),r[m.length-1]-=1);break}}return r}};function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_m(e)}function NF(e,n){if(_m(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(_m(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function GF(e){var n=NF(e,"string");return _m(n)==="symbol"?n:String(n)}function Do(e,n,i){return n=GF(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}function dD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function ci(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?dD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var gD=function(n,i){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return[...n.slice(0,i),...o,...n.slice(i)]},Fm=function(n,i,r){for(var o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return[...n.slice(0,i),...a,...n.slice(i+r)]},pD=Fm,L5=(e,n,i)=>{if(n.length===0)throw new Error("Cannot modify the editor");for(var r=te.get(e,n),o=n.slice(),a=i(r);o.length>1;){var u=o.pop(),c=te.get(e,o);a=ci(ci({},c),{},{children:Fm(c.children,u,1,a)})}var h=o.pop();e.children=Fm(e.children,h,1,a)},tg=(e,n,i)=>{n.length===0?e.children=i(e.children):L5(e,n,r=>{if(se.isText(r))throw new Error("Cannot get the element at path [".concat(n,"] because it refers to a leaf node: ").concat(Wi.stringify(r)));return ci(ci({},r),{},{children:i(r.children)})})},mD=(e,n,i)=>L5(e,n,r=>{if(!se.isText(r))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Wi.stringify(r)));return i(r)}),zF={transform(e,n){var i=!1;switch(n.type){case"insert_node":{var{path:r,node:o}=n;tg(e,ut.parent(r),Pt=>{var Rt=r[r.length-1];if(Rt>Pt.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));return gD(Pt,Rt,o)}),i=!0;break}case"insert_text":{var{path:a,offset:u,text:c}=n;if(c.length===0)break;mD(e,a,Pt=>{var Rt=Pt.text.slice(0,u),It=Pt.text.slice(u);return ci(ci({},Pt),{},{text:Rt+c+It})}),i=!0;break}case"merge_node":{var{path:h}=n,g=h[h.length-1],p=ut.previous(h),m=p[p.length-1];tg(e,ut.parent(h),Pt=>{var Rt=Pt[g],It=Pt[m],he;if(se.isText(Rt)&&se.isText(It))he=ci(ci({},It),{},{text:It.text+Rt.text});else if(!se.isText(Rt)&&!se.isText(It))he=ci(ci({},It),{},{children:It.children.concat(Rt.children)});else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(h,"] to nodes of different interfaces: ").concat(Wi.stringify(Rt)," ").concat(Wi.stringify(It)));return Fm(Pt,m,2,he)}),i=!0;break}case"move_node":{var{path:w,newPath:x}=n,T=w[w.length-1];if(ut.isAncestor(w,x))throw new Error("Cannot move a path [".concat(w,"] to new path [").concat(x,"] because the destination is inside itself."));var D=te.get(e,w);tg(e,ut.parent(w),Pt=>pD(Pt,T,1));var b=ut.transform(w,n),B=b[b.length-1];tg(e,ut.parent(b),Pt=>gD(Pt,B,D)),i=!0;break}case"remove_node":{var{path:A}=n,H=A[A.length-1];if(tg(e,ut.parent(A),Pt=>pD(Pt,H,1)),e.selection){var R=ci({},e.selection);for(var[k,W]of _t.points(R)){var U=Sn.transform(k,n);if(R!=null&&U!=null)R[W]=U;else{var nt=void 0,st=void 0;for(var[ft,Et]of te.texts(e))if(ut.compare(Et,A)===-1)nt=[ft,Et];else{st=[ft,Et];break}var ct=!1;nt&&st&&(ut.equals(st[1],A)?ct=!ut.hasPrevious(st[1]):ct=ut.common(nt[1],A).length<ut.common(st[1],A).length),nt&&!ct?R[W]={path:nt[1],offset:nt[0].text.length}:st?R[W]={path:st[1],offset:0}:R=null}}e.selection=R}break}case"remove_text":{var{path:mt,offset:wt,text:V}=n;if(V.length===0)break;mD(e,mt,Pt=>{var Rt=Pt.text.slice(0,wt),It=Pt.text.slice(wt+V.length);return ci(ci({},Pt),{},{text:Rt+It})}),i=!0;break}case"set_node":{var{path:P,properties:_,newProperties:N}=n;if(P.length===0)throw new Error("Cannot set properties on the root node!");L5(e,P,Pt=>{var Rt=ci({},Pt);for(var It in N){if(It==="children"||It==="text")throw new Error('Cannot set the "'.concat(It,'" property of nodes!'));var he=N[It];he==null?delete Rt[It]:Rt[It]=he}for(var Nt in _)N.hasOwnProperty(Nt)||delete Rt[Nt];return Rt});break}case"set_selection":{var{newProperties:$}=n;if($==null){e.selection=null;break}if(e.selection==null){if(!_t.isRange($))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(Wi.stringify($)," when there is no current selection."));e.selection=ci({},$);break}var Q=ci({},e.selection);for(var F in $){var J=$[F];if(J==null){if(F==="anchor"||F==="focus")throw new Error('Cannot remove the "'.concat(F,'" selection property'));delete Q[F]}else Q[F]=J}e.selection=Q;break}case"split_node":{var{path:tt,position:it,properties:xt}=n,gt=tt[tt.length-1];if(tt.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(tt,"] because the root node cannot be split."));tg(e,ut.parent(tt),Pt=>{var Rt=Pt[gt],It,he;if(se.isText(Rt)){var Nt=Rt.text.slice(0,it),ge=Rt.text.slice(it);It=ci(ci({},Rt),{},{text:Nt}),he=ci(ci({},xt),{},{text:ge})}else{var ae=Rt.children.slice(0,it),ee=Rt.children.slice(it);It=ci(ci({},Rt),{},{children:ae}),he=ci(ci({},xt),{},{children:ee})}return Fm(Pt,gt,1,It,he)}),i=!0;break}}if(i&&e.selection){var Lt=ci({},e.selection);for(var[$t,ot]of _t.points(Lt))Lt[ot]=Sn.transform($t,n);e.selection=Lt}}},jF={insertNodes(e,n,i){e.insertNodes(n,i)},liftNodes(e,n){e.liftNodes(n)},mergeNodes(e,n){e.mergeNodes(n)},moveNodes(e,n){e.moveNodes(n)},removeNodes(e,n){e.removeNodes(n)},setNodes(e,n,i){e.setNodes(n,i)},splitNodes(e,n){e.splitNodes(n)},unsetNodes(e,n,i){e.unsetNodes(n,i)},unwrapNodes(e,n){e.unwrapNodes(n)},wrapNodes(e,n,i){e.wrapNodes(n,i)}},UF={collapse(e,n){e.collapse(n)},deselect(e){e.deselect()},move(e,n){e.move(n)},select(e,n){e.select(n)},setPoint(e,n,i){e.setPoint(n,i)},setSelection(e,n){e.setSelection(n)}},Er=e=>typeof e=="object"&&e!==null,l6=(e,n)=>{for(var i in e){var r=e[i],o=n[i];if(Array.isArray(r)&&Array.isArray(o)){if(r.length!==o.length)return!1;for(var a=0;a<r.length;a++)if(r[a]!==o[a])return!1}else if(Er(r)&&Er(o)){if(!l6(r,o))return!1}else if(r!==o)return!1}for(var u in n)if(e[u]===void 0&&n[u]!==void 0)return!1;return!0};function $F(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function Du(e,n){if(e==null)return{};var i=$F(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var VF=["anchor","focus"];function vD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function WF(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?vD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):vD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var _t={edges(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:i=!1}=n,{anchor:r,focus:o}=e;return _t.isBackward(e)===i?[r,o]:[o,r]},end(e){var[,n]=_t.edges(e);return n},equals(e,n){return Sn.equals(e.anchor,n.anchor)&&Sn.equals(e.focus,n.focus)},surrounds(e,n){var i=_t.intersection(e,n);return i?_t.equals(i,n):!1},includes(e,n){if(_t.isRange(n)){if(_t.includes(e,n.anchor)||_t.includes(e,n.focus))return!0;var[i,r]=_t.edges(e),[o,a]=_t.edges(n);return Sn.isBefore(i,o)&&Sn.isAfter(r,a)}var[u,c]=_t.edges(e),h=!1,g=!1;return Sn.isPoint(n)?(h=Sn.compare(n,u)>=0,g=Sn.compare(n,c)<=0):(h=ut.compare(n,u.path)>=0,g=ut.compare(n,c.path)<=0),h&&g},intersection(e,n){var i=Du(e,VF),[r,o]=_t.edges(e),[a,u]=_t.edges(n),c=Sn.isBefore(r,a)?a:r,h=Sn.isBefore(o,u)?o:u;return Sn.isBefore(h,c)?null:WF({anchor:c,focus:h},i)},isBackward(e){var{anchor:n,focus:i}=e;return Sn.isAfter(n,i)},isCollapsed(e){var{anchor:n,focus:i}=e;return Sn.equals(n,i)},isExpanded(e){return!_t.isCollapsed(e)},isForward(e){return!_t.isBackward(e)},isRange(e){return Er(e)&&Sn.isPoint(e.anchor)&&Sn.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[n]=_t.edges(e);return n},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="inward"}=i,o,a;if(r==="inward"){var u=_t.isCollapsed(e);_t.isForward(e)?(o="forward",a=u?o:"backward"):(o="backward",a=u?o:"forward")}else r==="outward"?_t.isForward(e)?(o="backward",a="forward"):(o="forward",a="backward"):(o=r,a=r);var c=Sn.transform(e.anchor,n,{affinity:o}),h=Sn.transform(e.focus,n,{affinity:a});return!c||!h?null:{anchor:c,focus:h}}},yD=function(n){var{deep:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Er(n))return!1;var r=typeof n.apply=="function";if(r)return!1;var o=i?te.isNodeList(n.children):Array.isArray(n.children);return o},fe={isAncestor(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Er(e)&&te.isNodeList(e.children,{deep:n})},isElement:yD,isElementList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(i=>fe.isElement(i,{deep:n}))},isElementProps(e){return e.children!==void 0},isElementType:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return yD(n)&&n[r]===i},matches(e,n){for(var i in n)if(i!=="children"&&e[i]!==n[i])return!1;return!0}},XF=["children"],qF=["text"],te={ancestor(e,n){var i=te.get(e,n);if(se.isText(i))throw new Error("Cannot get the ancestor node at path [".concat(n,"] because it refers to a text node instead: ").concat(Wi.stringify(i)));return i},ancestors(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ut.ancestors(n,i)){var o=te.ancestor(e,r),a=[o,r];yield a}}()},child(e,n){if(se.isText(e))throw new Error("Cannot get the child of a text node: ".concat(Wi.stringify(e)));var i=e.children[n];if(i==null)throw new Error("Cannot get child at index `".concat(n,"` in node: ").concat(Wi.stringify(e)));return i},children(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=i,o=te.ancestor(e,n),{children:a}=o,u=r?a.length-1:0;r?u>=0:u<a.length;){var c=te.child(o,u),h=n.concat(u);yield[c,h],u=r?u-1:u+1}}()},common(e,n,i){var r=ut.common(n,i),o=te.get(e,r);return[o,r]},descendant(e,n){var i=te.get(e,n);if(j.isEditor(i))throw new Error("Cannot get the descendant node at path [".concat(n,"] because it refers to the root editor node instead: ").concat(Wi.stringify(i)));return i},descendants(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))r.length!==0&&(yield[i,r])}()},elements(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))fe.isElement(i)&&(yield[i,r])}()},extractProps(e){if(fe.isAncestor(e)){var n=Du(e,XF);return n}else{var n=Du(e,qF);return n}},first(e,n){for(var i=n.slice(),r=te.get(e,i);r&&!(se.isText(r)||r.children.length===0);)r=r.children[0],i.push(0);return[r,i]},fragment(e,n){if(se.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(Wi.stringify(e)));var i=tO({children:e.children},r=>{var[o,a]=_t.edges(n),u=te.nodes(r,{reverse:!0,pass:w=>{var[,x]=w;return!_t.includes(n,x)}});for(var[,c]of u){if(!_t.includes(n,c)){var h=te.parent(r,c),g=c[c.length-1];h.children.splice(g,1)}if(ut.equals(c,a.path)){var p=te.leaf(r,c);p.text=p.text.slice(0,a.offset)}if(ut.equals(c,o.path)){var m=te.leaf(r,c);m.text=m.text.slice(o.offset)}}j.isEditor(r)&&(r.selection=null)});return i.children},get(e,n){var i=te.getIf(e,n);if(i===void 0)throw new Error("Cannot find a descendant at path [".concat(n,"] in node: ").concat(Wi.stringify(e)));return i},getIf(e,n){for(var i=e,r=0;r<n.length;r++){var o=n[r];if(se.isText(i)||!i.children[o])return;i=i.children[o]}return i},has(e,n){for(var i=e,r=0;r<n.length;r++){var o=n[r];if(se.isText(i)||!i.children[o])return!1;i=i.children[o]}return!0},isNode(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return se.isText(e)||fe.isElement(e,{deep:n})||j.isEditor(e,{deep:n})},isNodeList(e){var{deep:n=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(e)&&e.every(i=>te.isNode(i,{deep:n}))},last(e,n){for(var i=n.slice(),r=te.get(e,i);r&&!(se.isText(r)||r.children.length===0);){var o=r.children.length-1;r=r.children[o],i.push(o)}return[r,i]},leaf(e,n){var i=te.get(e,n);if(!se.isText(i))throw new Error("Cannot get the leaf node at path [".concat(n,"] because it refers to a non-leaf node: ").concat(Wi.stringify(i)));return i},levels(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of ut.levels(n,i)){var o=te.get(e,r);yield[o,r]}}()},matches(e,n){return fe.isElement(e)&&fe.isElementProps(n)&&fe.matches(e,n)||se.isText(e)&&se.isTextProps(n)&&se.matches(e,n)},nodes(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:i,reverse:r=!1}=n,{from:o=[],to:a}=n,u=new Set,c=[],h=e;!(a&&(r?ut.isBefore(c,a):ut.isAfter(c,a)));){if(u.has(h)||(yield[h,c]),!u.has(h)&&!se.isText(h)&&h.children.length!==0&&(i==null||i([h,c])===!1)){u.add(h);var g=r?h.children.length-1:0;ut.isAncestor(c,o)&&(g=o[c.length]),c=c.concat(g),h=te.get(e,c);continue}if(c.length===0)break;if(!r){var p=ut.next(c);if(te.has(e,p)){c=p,h=te.get(e,c);continue}}if(r&&c[c.length-1]!==0){var m=ut.previous(c);c=m,h=te.get(e,c);continue}c=ut.parent(c),h=te.get(e,c),u.add(h)}}()},parent(e,n){var i=ut.parent(n),r=te.get(e,i);if(se.isText(r))throw new Error("Cannot get the parent of path [".concat(n,"] because it does not exist in the root."));return r},string(e){return se.isText(e)?e.text:e.children.map(te.string).join("")},texts(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[i,r]of te.nodes(e,n))se.isText(i)&&(yield[i,r])}()}};function wD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function yi(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?wD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var pu={isNodeOperation(e){return pu.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!Er(e))return!1;switch(e.type){case"insert_node":return ut.isPath(e.path)&&te.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&ut.isPath(e.path);case"merge_node":return typeof e.position=="number"&&ut.isPath(e.path)&&Er(e.properties);case"move_node":return ut.isPath(e.path)&&ut.isPath(e.newPath);case"remove_node":return ut.isPath(e.path)&&te.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&ut.isPath(e.path);case"set_node":return ut.isPath(e.path)&&Er(e.properties)&&Er(e.newProperties);case"set_selection":return e.properties===null&&_t.isRange(e.newProperties)||e.newProperties===null&&_t.isRange(e.properties)||Er(e.properties)&&Er(e.newProperties);case"split_node":return ut.isPath(e.path)&&typeof e.position=="number"&&Er(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(n=>pu.isOperation(n))},isSelectionOperation(e){return pu.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return pu.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return yi(yi({},e),{},{type:"remove_node"});case"insert_text":return yi(yi({},e),{},{type:"remove_text"});case"merge_node":return yi(yi({},e),{},{type:"split_node",path:ut.previous(e.path)});case"move_node":{var{newPath:n,path:i}=e;if(ut.equals(n,i))return e;if(ut.isSibling(i,n))return yi(yi({},e),{},{path:n,newPath:i});var r=ut.transform(i,e),o=ut.transform(ut.next(i),e);return yi(yi({},e),{},{path:r,newPath:o})}case"remove_node":return yi(yi({},e),{},{type:"insert_node"});case"remove_text":return yi(yi({},e),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:u}=e;return yi(yi({},e),{},{properties:u,newProperties:a})}case"set_selection":{var{properties:c,newProperties:h}=e;return c==null?yi(yi({},e),{},{properties:h,newProperties:null}):h==null?yi(yi({},e),{},{properties:null,newProperties:c}):yi(yi({},e),{},{properties:h,newProperties:c})}case"split_node":return yi(yi({},e),{},{type:"merge_node",path:ut.next(e.path)})}}},YF=function(n){var{deep:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Er(n))return!1;var r=typeof n.addMark=="function"&&typeof n.apply=="function"&&typeof n.deleteFragment=="function"&&typeof n.insertBreak=="function"&&typeof n.insertSoftBreak=="function"&&typeof n.insertFragment=="function"&&typeof n.insertNode=="function"&&typeof n.insertText=="function"&&typeof n.isElementReadOnly=="function"&&typeof n.isInline=="function"&&typeof n.isSelectable=="function"&&typeof n.isVoid=="function"&&typeof n.normalizeNode=="function"&&typeof n.onChange=="function"&&typeof n.removeMark=="function"&&typeof n.getDirtyPaths=="function"&&(n.marks===null||Er(n.marks))&&(n.selection===null||_t.isRange(n.selection))&&(!i||te.isNodeList(n.children))&&pu.isOperationList(n.operations);return r},j={above(e,n){return e.above(n)},addMark(e,n,i){e.addMark(n,i)},after(e,n,i){return e.after(n,i)},before(e,n,i){return e.before(n,i)},deleteBackward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:i="character"}=n;e.deleteBackward(i)},deleteForward(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:i="character"}=n;e.deleteForward(i)},deleteFragment(e,n){e.deleteFragment(n)},edges(e,n){return e.edges(n)},elementReadOnly(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(n)},end(e,n){return e.end(n)},first(e,n){return e.first(n)},fragment(e,n){return e.fragment(n)},hasBlocks(e,n){return e.hasBlocks(n)},hasInlines(e,n){return e.hasInlines(n)},hasPath(e,n){return e.hasPath(n)},hasTexts(e,n){return e.hasTexts(n)},insertBreak(e){e.insertBreak()},insertFragment(e,n,i){e.insertFragment(n,i)},insertNode(e,n){e.insertNode(n)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,n){e.insertText(n)},isBlock(e,n){return e.isBlock(n)},isEdge(e,n,i){return e.isEdge(n,i)},isEditor(e){return YF(e)},isElementReadOnly(e,n){return e.isElementReadOnly(n)},isEmpty(e,n){return e.isEmpty(n)},isEnd(e,n,i){return e.isEnd(n,i)},isInline(e,n){return e.isInline(n)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,n){return e.isSelectable(n)},isStart(e,n,i){return e.isStart(n,i)},isVoid(e,n){return e.isVoid(n)},last(e,n){return e.last(n)},leaf(e,n,i){return e.leaf(n,i)},levels(e,n){return e.levels(n)},marks(e){return e.getMarks()},next(e,n){return e.next(n)},node(e,n,i){return e.node(n,i)},nodes(e,n){return e.nodes(n)},normalize(e,n){e.normalize(n)},parent(e,n,i){return e.parent(n,i)},path(e,n,i){return e.path(n,i)},pathRef(e,n,i){return e.pathRef(n,i)},pathRefs(e){return e.pathRefs()},point(e,n,i){return e.point(n,i)},pointRef(e,n,i){return e.pointRef(n,i)},pointRefs(e){return e.pointRefs()},positions(e,n){return e.positions(n)},previous(e,n){return e.previous(n)},range(e,n,i){return e.range(n,i)},rangeRef(e,n,i){return e.rangeRef(n,i)},rangeRefs(e){return e.rangeRefs()},removeMark(e,n){e.removeMark(n)},setNormalizing(e,n){e.setNormalizing(n)},start(e,n){return e.start(n)},string(e,n,i){return e.string(n,i)},unhangRange(e,n,i){return e.unhangRange(n,i)},void(e,n){return e.void(n)},withoutNormalizing(e,n){e.withoutNormalizing(n)},shouldMergeNodesRemovePrevNode:(e,n,i)=>e.shouldMergeNodesRemovePrevNode(n,i)},KF={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(ut.isPath)}};function xD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function CD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?xD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):xD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Sn={compare(e,n){var i=ut.compare(e.path,n.path);return i===0?e.offset<n.offset?-1:e.offset>n.offset?1:0:i},isAfter(e,n){return Sn.compare(e,n)===1},isBefore(e,n){return Sn.compare(e,n)===-1},equals(e,n){return e.offset===n.offset&&ut.equals(e.path,n.path)},isPoint(e){return Er(e)&&typeof e.offset=="number"&&ut.isPath(e.path)},transform(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e===null)return null;var{affinity:r="forward"}=i,{path:o,offset:a}=e;switch(n.type){case"insert_node":case"move_node":{o=ut.transform(o,n,i);break}case"insert_text":{ut.equals(n.path,o)&&(n.offset<a||n.offset===a&&r==="forward")&&(a+=n.text.length);break}case"merge_node":{ut.equals(n.path,o)&&(a+=n.position),o=ut.transform(o,n,i);break}case"remove_text":{ut.equals(n.path,o)&&n.offset<=a&&(a-=Math.min(a-n.offset,n.text.length));break}case"remove_node":{if(ut.equals(n.path,o)||ut.isAncestor(n.path,o))return null;o=ut.transform(o,n,i);break}case"split_node":{if(ut.equals(n.path,o)){if(n.position===a&&r==null)return null;(n.position<a||n.position===a&&r==="forward")&&(a-=n.position,o=ut.transform(o,n,CD(CD({},i),{},{affinity:"forward"})))}else o=ut.transform(o,n,i);break}default:return e}return{path:o,offset:a}}},ED=void 0,Wi={setScrubber(e){ED=e},stringify(e){return JSON.stringify(e,ED)}},ZF=["text"],QF=["anchor","focus","merge"];function SD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function hu(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?SD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):SD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var se={equals(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=i;function o(a){var u=Du(a,ZF);return u}return l6(r?o(e):e,r?o(n):n)},isText(e){return Er(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(n=>se.isText(n))},isTextProps(e){return e.text!==void 0},matches(e,n){for(var i in n)if(i!=="text"&&(!e.hasOwnProperty(i)||e[i]!==n[i]))return!1;return!0},decorations(e,n){var i=[{leaf:hu({},e)}];for(var r of n){var{anchor:o,focus:a,merge:u}=r,c=Du(r,QF),[h,g]=_t.edges(r),p=[],m=0,w=h.offset,x=g.offset,T=u??Object.assign;for(var{leaf:D}of i){var{length:b}=D.text,B=m;if(m+=b,w<=B&&m<=x){T(D,c),p.push({leaf:D});continue}if(w!==x&&(w===m||x===B)||w>m||x<B||x===B&&B!==0){p.push({leaf:D});continue}var A=D,H=void 0,R=void 0;if(x<m){var k=x-B;R={leaf:hu(hu({},A),{},{text:A.text.slice(k)})},A=hu(hu({},A),{},{text:A.text.slice(0,k)})}if(w>B){var W=w-B;H={leaf:hu(hu({},A),{},{text:A.text.slice(0,W)})},A=hu(hu({},A),{},{text:A.text.slice(W)})}T(A,c),H&&p.push(H),p.push({leaf:A}),R&&p.push(R)}i=p}if(i.length>1){var U=0;for(var[nt,st]of i.entries()){var ft=U,Et=ft+st.leaf.text.length,ct={start:ft,end:Et};nt===0&&(ct.isFirst=!0),nt===i.length-1&&(ct.isLast=!0),st.position=ct,U=Et}}return i}},_5=e=>e.selection?e.selection:e.children.length>0?j.end(e,[]):[0],Vg=(e,n)=>{var[i]=j.node(e,n);return r=>r===i},F5=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!i,o=i?rk(n):n,a=Ue.None,u=Ue.None,c=0,h=null,g=null;for(var p of o){var m=p.codePointAt(0);if(!m)break;var w=mk(p,m);if([a,u]=r?[u,w]:[w,a],ug(a,Ue.ZWJ)&&ug(u,Ue.ExtPict)&&(r?h=TD(n.substring(0,c)):h=TD(n.substring(0,n.length-c)),!h)||ug(a,Ue.RI)&&ug(u,Ue.RI)&&(g!==null?g=!g:r?g=!0:g=Ck(n.substring(0,n.length-c)),!g)||a!==Ue.None&&u!==Ue.None&&yk(a,u))break;c+=p.length}return c||1},JF=/\s/,tk=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ek=/['\u2018\u2019]/,nk=function(n){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,o=!1;n.length>0;){var a=F5(n,i),[u,c]=k5(n,a,i);if(ik(u,c,i))o=!0,r+=a;else if(!o)r+=a;else break;n=c}return r},k5=(e,n,i)=>{if(i){var r=e.length-n;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,n),e.slice(n)]},ik=function e(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(JF.test(n))return!1;if(ek.test(n)){var o=F5(i,r),[a,u]=k5(i,o,r);if(e(a,u,r))return!0}return!tk.test(n)},rk=function*(n){for(var i=n.length-1,r=0;r<n.length;r++){var o=n.charAt(i-r);if(sk(o.charCodeAt(0))){var a=n.charAt(i-r-1);if(ok(a.charCodeAt(0))){yield a+o,r++;continue}}yield o}},ok=e=>e>=55296&&e<=56319,sk=e=>e>=56320&&e<=57343,Ue;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Ue||(Ue={}));var ak=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,lk=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,uk=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,ck=/^[\u1100-\u115F\uA960-\uA97C]$/,fk=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,hk=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,dk=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,gk=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,pk=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,mk=(e,n)=>{var i=Ue.Any;return e.search(ak)!==-1&&(i|=Ue.Extend),n===8205&&(i|=Ue.ZWJ),n>=127462&&n<=127487&&(i|=Ue.RI),e.search(lk)!==-1&&(i|=Ue.Prepend),e.search(uk)!==-1&&(i|=Ue.SpacingMark),e.search(ck)!==-1&&(i|=Ue.L),e.search(fk)!==-1&&(i|=Ue.V),e.search(hk)!==-1&&(i|=Ue.T),e.search(dk)!==-1&&(i|=Ue.LV),e.search(gk)!==-1&&(i|=Ue.LVT),e.search(pk)!==-1&&(i|=Ue.ExtPict),i};function ug(e,n){return(e&n)!==0}var vk=[[Ue.L,Ue.L|Ue.V|Ue.LV|Ue.LVT],[Ue.LV|Ue.V,Ue.V|Ue.T],[Ue.LVT|Ue.T,Ue.T],[Ue.Any,Ue.Extend|Ue.ZWJ],[Ue.Any,Ue.SpacingMark],[Ue.Prepend,Ue.Any],[Ue.ZWJ,Ue.ExtPict],[Ue.RI,Ue.RI]];function yk(e,n){return vk.findIndex(i=>ug(e,i[0])&&ug(n,i[1]))===-1}var wk=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,TD=e=>e.search(wk)!==-1,xk=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Ck=e=>{var n=e.match(xk);if(n===null)return!1;var i=n[0].length/2;return i%2===1},Ek={delete(e,n){e.delete(n)},insertFragment(e,n,i){e.insertFragment(n,i)},insertText(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(e,()=>{var{voids:r=!1}=i,{at:o=_5(e)}=i;if(ut.isPath(o)&&(o=j.range(e,o)),_t.isRange(o))if(_t.isCollapsed(o))o=o.anchor;else{var a=_t.end(o);if(!r&&j.void(e,{at:a}))return;var u=_t.start(o),c=j.pointRef(e,u),h=j.pointRef(e,a);jt.delete(e,{at:o,voids:r});var g=c.unref(),p=h.unref();o=g||p,jt.setSelection(e,{anchor:o,focus:o})}if(!(!r&&j.void(e,{at:o})||j.elementReadOnly(e,{at:o}))){var{path:m,offset:w}=o;n.length>0&&e.apply({type:"insert_text",path:m,offset:w,text:n})}})}};function AD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function j2(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?AD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):AD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var jt=j2(j2(j2(j2({},zF),jF),UF),Ek),vw=new WeakMap,Sk=e=>vw.get(e)||!1,Tk=(e,n,i)=>{var r=vw.get(e)||!1;vw.set(e,!0);try{n(),i()}finally{vw.set(e,r)}};function u6(e,n,i){var r=Ww.get(e)||[],o=Xw.get(e)||new Set,a,u,c=m=>{if(m){var w=m.join(",");u.has(w)||(u.add(w),a.push(m))}};if(i){a=[],u=new Set;for(var h of r){var g=i(h);c(g)}}else a=r,u=o;for(var p of n)c(p);Ww.set(e,a),Xw.set(e,u)}var Ak=(e,n)=>{for(var i of j.pathRefs(e))kF.transform(i,n);for(var r of j.pointRefs(e))IF.transform(r,n);for(var o of j.rangeRefs(e))HF.transform(o,n);if(!Sk(e)){var a=ut.operationCanTransformPath(n)?u=>ut.transform(u,n):void 0;u6(e,e.getDirtyPaths(n),a)}jt.transform(e,n),e.operations.push(n),j.normalize(e,{operation:n}),n.type==="set_selection"&&(e.marks=null),vm.get(e)||(vm.set(e,!0),Promise.resolve().then(()=>{vm.set(e,!1),e.onChange({operation:n}),e.operations=[]}))},Dk=(e,n)=>{switch(n.type){case"insert_text":case"remove_text":case"set_node":{var{path:i}=n;return ut.levels(i)}case"insert_node":{var{node:r,path:o}=n,a=ut.levels(o),u=se.isText(r)?[]:Array.from(te.nodes(r),ft=>{var[,Et]=ft;return o.concat(Et)});return[...a,...u]}case"merge_node":{var{path:c}=n,h=ut.ancestors(c),g=ut.previous(c);return[...h,g]}case"move_node":{var{path:p,newPath:m}=n;if(ut.equals(p,m))return[];var w=[],x=[];for(var T of ut.ancestors(p)){var D=ut.transform(T,n);w.push(D)}for(var b of ut.ancestors(m)){var B=ut.transform(b,n);x.push(B)}var A=x[x.length-1],H=m[m.length-1],R=A.concat(H);return[...w,...x,R]}case"remove_node":{var{path:k}=n,W=ut.ancestors(k);return[...W]}case"split_node":{var{path:U}=n,nt=ut.levels(U),st=ut.next(U);return[...nt,st]}default:return[]}},bk=e=>{var{selection:n}=e;return n?te.fragment(e,n):[]},Bk=(e,n,i)=>{var[r,o]=n;if(!se.isText(r)){if(fe.isElement(r)&&r.children.length===0){var a={text:""};jt.insertNodes(e,a,{at:o.concat(0),voids:!0});return}for(var u=j.isEditor(r)?!1:fe.isElement(r)&&(e.isInline(r)||r.children.length===0||se.isText(r.children[0])||e.isInline(r.children[0])),c=0,h=0;h<r.children.length;h++,c++){var g=te.get(e,o);if(!se.isText(g)){var p=g.children[c],m=g.children[c-1],w=h===r.children.length-1,x=se.isText(p)||fe.isElement(p)&&e.isInline(p);if(x!==u)x?i!=null&&i.fallbackElement?jt.wrapNodes(e,i.fallbackElement(),{at:o.concat(c),voids:!0}):jt.removeNodes(e,{at:o.concat(c),voids:!0}):jt.unwrapNodes(e,{at:o.concat(c),voids:!0}),c--;else if(fe.isElement(p)){if(e.isInline(p)){if(m==null||!se.isText(m)){var T={text:""};jt.insertNodes(e,T,{at:o.concat(c),voids:!0}),c++}else if(w){var D={text:""};jt.insertNodes(e,D,{at:o.concat(c+1),voids:!0}),c++}}}else{if(!se.isText(p)&&!("children"in p)){var b=p;b.children=[]}m!=null&&se.isText(m)&&(se.equals(p,m,{loose:!0})?(jt.mergeNodes(e,{at:o.concat(c),voids:!0}),c--):m.text===""?(jt.removeNodes(e,{at:o.concat(c-1),voids:!0}),c--):p.text===""&&(jt.removeNodes(e,{at:o.concat(c),voids:!0}),c--))}}}}},Pk=(e,n)=>{var{iteration:i,initialDirtyPathsLength:r}=n,o=r*42;if(i>o)throw new Error("Could not completely normalize the editor after ".concat(o," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Mk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:o="lowest",at:a=n.selection,match:u}=i;if(a){var c=j.path(n,a);if(!_t.isRange(a)||ut.equals(a.focus.path,a.anchor.path)){if(c.length===0)return;c=ut.parent(c)}var h=o==="lowest",[g]=j.levels(n,{at:c,voids:r,match:u,reverse:h});return g}};function DD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function bD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?DD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):DD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Rk=(e,n,i)=>{var{selection:r}=e;if(r){var o=(m,w)=>{if(!se.isText(m))return!1;var[x,T]=j.parent(e,w);return!e.isVoid(x)||e.markableVoid(x)},a=_t.isExpanded(r),u=!1;if(!a){var[c,h]=j.node(e,r);if(c&&o(c,h)){var[g]=j.parent(e,h);u=g&&e.markableVoid(g)}}if(a||u)jt.setNodes(e,{[n]:i},{match:o,split:!0,voids:!0});else{var p=bD(bD({},j.marks(e)||{}),{},{[n]:i});e.marks=p,vm.get(e)||e.onChange()}}};function BD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function PD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?BD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Ok=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.point(n,i,{edge:"end"}),a=j.end(n,[]),u={anchor:o,focus:a},{distance:c=1}=r,h=0,g;for(var p of j.positions(n,PD(PD({},r),{},{at:u}))){if(h>c)break;h!==0&&(g=p),h++}return g};function MD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function RD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?MD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):MD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Lk=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.start(n,[]),a=j.point(n,i,{edge:"start"}),u={anchor:o,focus:a},{distance:c=1}=r,h=0,g;for(var p of j.positions(n,RD(RD({},r),{},{at:u,reverse:!0}))){if(h>c)break;h!==0&&(g=p),h++}return g},_k=(e,n)=>{var{selection:i}=e;i&&_t.isCollapsed(i)&&jt.delete(e,{unit:n,reverse:!0})},Fk=(e,n)=>{var{selection:i}=e;i&&_t.isCollapsed(i)&&jt.delete(e,{unit:n})},kk=function(n){var{direction:i="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=n;r&&_t.isExpanded(r)&&jt.delete(n,{reverse:i==="backward"})},Ik=(e,n)=>[j.start(e,n),j.end(e,n)];function OD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function LD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?OD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Hk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.above(n,LD(LD({},i),{},{match:r=>fe.isElement(r)&&j.isElementReadOnly(n,r)}))},Nk=(e,n)=>j.point(e,n,{edge:"end"}),Gk=(e,n)=>{var i=j.path(e,n,{edge:"start"});return j.node(e,i)},zk=(e,n)=>{var i=j.range(e,n);return te.fragment(e,i)};function _D(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function FD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?_D(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_D(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var jk=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return j.above(n,FD(FD({},i),{},{match:r=>fe.isElement(r)&&j.isVoid(n,r)}))},Uk=(e,n)=>n.children.some(i=>fe.isElement(i)&&j.isBlock(e,i)),$k=(e,n)=>n.children.some(i=>se.isText(i)||j.isInline(e,i)),Vk=(e,n)=>te.has(e,n),Wk=(e,n)=>n.children.every(i=>se.isText(i)),Xk=e=>{jt.splitNodes(e,{always:!0})},qk=(e,n,i)=>{jt.insertNodes(e,n,i)},Yk=e=>{jt.splitNodes(e,{always:!0})};function kD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function Kk(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?kD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var Zk=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o,marks:a}=n;if(o){if(a){var u=Kk({text:i},a);jt.insertNodes(n,u,{at:r.at,voids:r.voids})}else jt.insertText(n,i,r);n.marks=null}},Qk=(e,n)=>!e.isInline(n),Jk=(e,n,i)=>j.isStart(e,n,i)||j.isEnd(e,n,i),tI=(e,n)=>{var{children:i}=n,[r]=i;return i.length===0||i.length===1&&se.isText(r)&&r.text===""&&!e.isVoid(n)},eI=(e,n,i)=>{var r=j.end(e,i);return Sn.equals(n,r)},nI=e=>{var n=a6.get(e);return n===void 0?!0:n},iI=(e,n,i)=>{if(n.offset!==0)return!1;var r=j.start(e,i);return Sn.equals(n,r)},rI=(e,n)=>{var i=j.path(e,n,{edge:"end"});return j.node(e,i)},oI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=te.leaf(n,o);return[a,o]};function sI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,reverse:r=!1,voids:o=!1}=n,{match:a}=n;if(a==null&&(a=()=>!0),!!i){var u=[],c=j.path(e,i);for(var[h,g]of te.levels(e,c))if(a(h,g)&&(u.push([h,g]),!o&&fe.isElement(h)&&j.isVoid(e,h)))break;r&&u.reverse(),yield*u}}()}var aI=["text"],lI=["text"],uI=function(n){var{marks:i,selection:r}=n;if(!r)return null;var{anchor:o,focus:a}=r;if(i)return i;if(_t.isExpanded(r)){var u=_t.isBackward(r);u&&([a,o]=[o,a]);var c=j.isEnd(n,o,o.path);if(c){var h=j.after(n,o);h&&(o=h)}var[g]=j.nodes(n,{match:se.isText,at:{anchor:o,focus:a}});if(g){var[p]=g,m=Du(p,aI);return m}else return{}}var{path:w}=o,[x]=j.leaf(n,w);if(o.offset===0){var T=j.previous(n,{at:w,match:se.isText}),D=j.above(n,{match:k=>fe.isElement(k)&&j.isVoid(n,k)&&n.markableVoid(k)});if(!D){var b=j.above(n,{match:k=>fe.isElement(k)&&j.isBlock(n,k)});if(T&&b){var[B,A]=T,[,H]=b;ut.isAncestor(H,A)&&(x=B)}}}var R=Du(x,lI);return R},cI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:o=!1}=i,{match:a,at:u=n.selection}=i;if(u){var c=j.after(n,u,{voids:o});if(c){var[,h]=j.last(n,[]),g=[c.path,h];if(ut.isPath(u)&&u.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(ut.isPath(u)){var[p]=j.parent(n,u);a=w=>p.children.includes(w)}else a=()=>!0;var[m]=j.nodes(n,{at:g,match:a,mode:r,voids:o});return m}}},fI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=te.get(n,o);return[a,o]};function hI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,mode:r="all",universal:o=!1,reverse:a=!1,voids:u=!1,pass:c,ignoreNonSelectable:h=!1}=n,{match:g}=n;if(g||(g=()=>!0),!!i){var p,m;if(KF.isSpan(i))p=i[0],m=i[1];else{var w=j.path(e,i,{edge:"start"}),x=j.path(e,i,{edge:"end"});p=a?x:w,m=a?w:x}var T=te.nodes(e,{reverse:a,from:p,to:m,pass:k=>{var[W,U]=k;return c&&c([W,U])?!0:fe.isElement(W)?!!(!u&&(j.isVoid(e,W)||j.isElementReadOnly(e,W))||h&&!j.isSelectable(e,W)):!1}}),D=[],b;for(var[B,A]of T)if(!(h&&fe.isElement(B)&&!j.isSelectable(e,B))){var H=b&&ut.compare(A,b[1])===0;if(!(r==="highest"&&H)){if(!g(B,A)){if(o&&!H&&se.isText(B))return;continue}if(r==="lowest"&&H){b=[B,A];continue}var R=r==="lowest"?b:[B,A];R&&(o?D.push(R):yield R),b=[B,A]}}r==="lowest"&&b&&(o?D.push(b):yield b),o&&(yield*D)}}()}var dI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:o}=i,a=p=>Ww.get(p)||[],u=p=>Xw.get(p)||new Set,c=p=>{var m=a(p).pop(),w=m.join(",");return u(p).delete(w),m};if(j.isNormalizing(n)){if(r){var h=Array.from(te.nodes(n),p=>{var[,m]=p;return m}),g=new Set(h.map(p=>p.join(",")));Ww.set(n,h),Xw.set(n,g)}a(n).length!==0&&j.withoutNormalizing(n,()=>{for(var p of a(n))if(te.has(n,p)){var m=j.node(n,p),[w,x]=m;fe.isElement(w)&&w.children.length===0&&n.normalizeNode(m,{operation:o})}for(var T=a(n),D=T.length,b=0;T.length!==0;){if(!n.shouldNormalize({dirtyPaths:T,iteration:b,initialDirtyPathsLength:D,operation:o}))return;var B=c(n);if(te.has(n,B)){var A=j.node(n,B);n.normalizeNode(A,{operation:o})}b++,T=a(n)}})}},gI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=j.path(n,i,r),a=ut.parent(o),u=j.node(n,a);return u},pI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.pathRefs(n);return h.delete(a),a.current=null,c}},u=j.pathRefs(n);return u.add(a),a},mI=e=>{var n=cD.get(e);return n||(n=new Set,cD.set(e,n)),n},vI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:o,edge:a}=r;if(ut.isPath(i)){if(a==="start"){var[,u]=te.first(n,i);i=u}else if(a==="end"){var[,c]=te.last(n,i);i=c}}return _t.isRange(i)&&(a==="start"?i=_t.start(i):a==="end"?i=_t.end(i):i=ut.common(i.anchor.path,i.focus.path)),Sn.isPoint(i)&&(i=i.path),o!=null&&(i=i.slice(0,o)),i},yI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.pointRefs(n);return h.delete(a),a.current=null,c}},u=j.pointRefs(n);return u.add(a),a},wI=e=>{var n=fD.get(e);return n||(n=new Set,fD.set(e,n)),n},xI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:o="start"}=r;if(ut.isPath(i)){var a;if(o==="end"){var[,u]=te.last(n,i);a=u}else{var[,c]=te.first(n,i);a=c}var h=te.get(n,a);if(!se.isText(h))throw new Error("Cannot get the ".concat(o," point in the node at path [").concat(i,"] because it has no ").concat(o," text node."));return{path:a,offset:o==="end"?h.text.length:0}}if(_t.isRange(i)){var[g,p]=_t.edges(i);return o==="start"?g:p}return i};function CI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:i=e.selection,unit:r="offset",reverse:o=!1,voids:a=!1,ignoreNonSelectable:u=!1}=n;if(!i)return;var c=j.range(e,i),[h,g]=_t.edges(c),p=o?g:h,m=!1,w="",x=0,T=0,D=0;for(var[b,B]of j.nodes(e,{at:i,reverse:o,voids:a,ignoreNonSelectable:u})){if(fe.isElement(b)){if(!a&&(e.isVoid(b)||e.isElementReadOnly(b))){yield j.start(e,B);continue}if(e.isInline(b))continue;if(j.hasInlines(e,b)){var A=ut.isAncestor(B,g.path)?g:j.end(e,B),H=ut.isAncestor(B,h.path)?h:j.start(e,B);w=j.string(e,{anchor:H,focus:A},{voids:a}),m=!0}}if(se.isText(b)){var R=ut.equals(B,p.path);for(R?(T=o?p.offset:b.text.length-p.offset,D=p.offset):(T=b.text.length,D=o?T:0),(R||m||r==="offset")&&(yield{path:B,offset:D},m=!1);;){if(x===0){if(w==="")break;x=k(w,r,o),w=k5(w,x,o)[1]}if(D=o?D-x:D+x,T=T-x,T<0){x=-T;break}x=0,yield{path:B,offset:D}}}}function k(W,U,nt){return U==="character"?F5(W,nt):U==="word"?nk(W,nt):U==="line"||U==="block"?W.length:1}}()}var EI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:o=!1}=i,{match:a,at:u=n.selection}=i;if(u){var c=j.before(n,u,{voids:o});if(c){var[,h]=j.first(n,[]),g=[c.path,h];if(ut.isPath(u)&&u.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(ut.isPath(u)){var[p]=j.parent(n,u);a=w=>p.children.includes(w)}else a=()=>!0;var[m]=j.nodes(n,{reverse:!0,at:g,match:a,mode:r,voids:o});return m}}},SI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:o="forward"}=r,a={current:i,affinity:o,unref(){var{current:c}=a,h=j.rangeRefs(n);return h.delete(a),a.current=null,c}},u=j.rangeRefs(n);return u.add(a),a},TI=e=>{var n=hD.get(e);return n||(n=new Set,hD.set(e,n)),n},AI=(e,n,i)=>{if(_t.isRange(n)&&!i)return n;var r=j.start(e,n),o=j.end(e,i||n);return{anchor:r,focus:o}};function ID(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function DI(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?ID(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ID(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var bI=(e,n)=>{var{selection:i}=e;if(i){var r=(p,m)=>{if(!se.isText(p))return!1;var[w,x]=j.parent(e,m);return!e.isVoid(w)||e.markableVoid(w)},o=_t.isExpanded(i),a=!1;if(!o){var[u,c]=j.node(e,i);if(u&&r(u,c)){var[h]=j.parent(e,c);a=h&&e.markableVoid(h)}}if(o||a)jt.unsetNodes(e,n,{match:r,split:!0,voids:!0});else{var g=DI({},j.marks(e)||{});delete g[n],e.marks=g,vm.get(e)||e.onChange()}}},BI=(e,n)=>{a6.set(e,n)},PI=(e,n)=>j.point(e,n,{edge:"start"}),MI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=r,a=j.range(n,i),[u,c]=_t.edges(a),h="";for(var[g,p]of j.nodes(n,{at:a,match:se.isText,voids:o})){var m=g.text;ut.equals(p,c.path)&&(m=m.slice(0,c.offset)),ut.equals(p,u.path)&&(m=m.slice(u.offset)),h+=m}return h},RI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:o=!1}=r,[a,u]=_t.edges(i);if(a.offset!==0||u.offset!==0||_t.isCollapsed(i)||ut.hasPrevious(u.path))return i;var c=j.above(n,{at:u,match:T=>fe.isElement(T)&&j.isBlock(n,T),voids:o}),h=c?c[1]:[],g=j.start(n,a),p={anchor:g,focus:u},m=!0;for(var[w,x]of j.nodes(n,{at:p,match:se.isText,reverse:!0,voids:o})){if(m){m=!1;continue}if(w.text!==""||ut.isBefore(x,h)){u={path:x,offset:w.text.length};break}}return{anchor:a,focus:u}},OI=(e,n)=>{var i=j.isNormalizing(e);j.setNormalizing(e,!1);try{n()}finally{j.setNormalizing(e,i)}j.normalize(e)},LI=(e,n,i)=>{var[r,o]=n;return fe.isElement(r)&&j.isEmpty(e,r)||se.isText(r)&&r.text===""&&o[o.length-1]!==0},_I=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var r,o,{reverse:a=!1,unit:u="character",distance:c=1,voids:h=!1}=i,{at:g=n.selection,hanging:p=!1}=i;if(g){var m=!1;if(_t.isRange(g)&&_t.isCollapsed(g)&&(m=!0,g=g.anchor),Sn.isPoint(g)){var w=j.void(n,{at:g,mode:"highest"});if(!h&&w){var[,x]=w;g=x}else{var T={unit:u,distance:c},D=a?j.before(n,g,T)||j.start(n,[]):j.after(n,g,T)||j.end(n,[]);g={anchor:g,focus:D},p=!0}}if(ut.isPath(g)){jt.removeNodes(n,{at:g,voids:h});return}if(!_t.isCollapsed(g)){if(!p){var[,b]=_t.edges(g),B=j.end(n,[]);Sn.equals(b,B)||(g=j.unhangRange(n,g,{voids:h}))}var[A,H]=_t.edges(g),R=j.above(n,{match:Nt=>fe.isElement(Nt)&&j.isBlock(n,Nt),at:A,voids:h}),k=j.above(n,{match:Nt=>fe.isElement(Nt)&&j.isBlock(n,Nt),at:H,voids:h}),W=R&&k&&!ut.equals(R[1],k[1]),U=ut.equals(A.path,H.path),nt=h?null:(r=j.void(n,{at:A,mode:"highest"}))!==null&&r!==void 0?r:j.elementReadOnly(n,{at:A,mode:"highest"}),st=h?null:(o=j.void(n,{at:H,mode:"highest"}))!==null&&o!==void 0?o:j.elementReadOnly(n,{at:H,mode:"highest"});if(nt){var ft=j.before(n,A);ft&&R&&ut.isAncestor(R[1],ft.path)&&(A=ft)}if(st){var Et=j.after(n,H);Et&&k&&ut.isAncestor(k[1],Et.path)&&(H=Et)}var ct=[],mt;for(var wt of j.nodes(n,{at:g,voids:h})){var[V,P]=wt;mt&&ut.compare(P,mt)===0||(!h&&fe.isElement(V)&&(j.isVoid(n,V)||j.isElementReadOnly(n,V))||!ut.isCommon(P,A.path)&&!ut.isCommon(P,H.path))&&(ct.push(wt),mt=P)}var _=Array.from(ct,Nt=>{var[,ge]=Nt;return j.pathRef(n,ge)}),N=j.pointRef(n,A),$=j.pointRef(n,H),Q="";if(!U&&!nt){var F=N.current,[J]=j.leaf(n,F),{path:tt}=F,{offset:it}=A,xt=J.text.slice(it);xt.length>0&&(n.apply({type:"remove_text",path:tt,offset:it,text:xt}),Q=xt)}if(_.reverse().map(Nt=>Nt.unref()).filter(Nt=>Nt!==null).forEach(Nt=>jt.removeNodes(n,{at:Nt,voids:h})),!st){var gt=$.current,[Lt]=j.leaf(n,gt),{path:$t}=gt,ot=U?A.offset:0,Pt=Lt.text.slice(ot,H.offset);Pt.length>0&&(n.apply({type:"remove_text",path:$t,offset:ot,text:Pt}),Q=Pt)}!U&&W&&$.current&&N.current&&jt.mergeNodes(n,{at:$.current,hanging:!0,voids:h}),m&&a&&u==="character"&&Q.length>1&&Q.match(/[\u0980-\u09FF\u0E00-\u0E7F]+/)&&jt.insertText(n,Q.slice(0,Q.length-c));var Rt=N.unref(),It=$.unref(),he=a?Rt||It:It||Rt;i.at==null&&he&&jt.select(n,he)}}})},FI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:a=!1}=r,{at:u=_5(n),batchDirty:c=!0}=r;if(i.length){if(_t.isRange(u))if(o||(u=j.unhangRange(n,u,{voids:a})),_t.isCollapsed(u))u=u.anchor;else{var[,h]=_t.edges(u);if(!a&&j.void(n,{at:h}))return;var g=j.pointRef(n,h);jt.delete(n,{at:u}),u=g.unref()}else ut.isPath(u)&&(u=j.start(n,u));if(!(!a&&j.void(n,{at:u}))){var p=j.above(n,{at:u,match:tt=>fe.isElement(tt)&&j.isInline(n,tt),mode:"highest",voids:a});if(p){var[,m]=p;if(j.isEnd(n,u,m)){var w=j.after(n,m);u=w}else if(j.isStart(n,u,m)){var x=j.before(n,m);u=x}}var T=j.above(n,{match:tt=>fe.isElement(tt)&&j.isBlock(n,tt),at:u,voids:a}),[,D]=T,b=j.isStart(n,u,D),B=j.isEnd(n,u,D),A=b&&B,[,H]=te.first({children:i},[]),[,R]=te.last({children:i},[]),k=tt=>{var[it,xt]=tt,gt=xt.length===0;return gt?!1:A?!0:!(!b&&ut.isAncestor(xt,H)&&fe.isElement(it)&&!n.isVoid(it)&&!n.isInline(it)||!B&&ut.isAncestor(xt,R)&&fe.isElement(it)&&!n.isVoid(it)&&!n.isInline(it))},W=!0,U=[],nt=[],st=[];for(var ft of te.nodes({children:i},{pass:k})){var[Et,ct]=ft;W&&fe.isElement(Et)&&!n.isInline(Et)&&!ut.isAncestor(ct,H)&&(W=!1),k(ft)&&(fe.isElement(Et)&&!n.isInline(Et)?(W=!1,nt.push(Et)):W?U.push(Et):st.push(Et))}var[mt]=j.nodes(n,{at:u,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a}),[,wt]=mt,V=j.isStart(n,u,wt),P=j.isEnd(n,u,wt),_=j.pathRef(n,B&&!st.length?ut.next(D):D),N=j.pathRef(n,P?ut.next(wt):wt),$=st.length>0;jt.splitNodes(n,{at:u,match:tt=>$?fe.isElement(tt)&&j.isBlock(n,tt):se.isText(tt)||j.isInline(n,tt),mode:$?"lowest":"highest",always:$&&(!b||U.length>0)&&(!B||st.length>0),voids:a});var Q=j.pathRef(n,!V||V&&P?ut.next(wt):wt);if(jt.insertNodes(n,U,{at:Q.current,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a,batchDirty:c}),A&&!U.length&&nt.length&&!st.length&&jt.delete(n,{at:D,voids:a}),jt.insertNodes(n,nt,{at:_.current,match:tt=>fe.isElement(tt)&&j.isBlock(n,tt),mode:"lowest",voids:a,batchDirty:c}),jt.insertNodes(n,st,{at:N.current,match:tt=>se.isText(tt)||j.isInline(n,tt),mode:"highest",voids:a,batchDirty:c}),!r.at){var F;if(st.length>0&&N.current?F=ut.previous(N.current):nt.length>0&&_.current?F=ut.previous(_.current):Q.current&&(F=ut.previous(Q.current)),F){var J=j.end(n,F);jt.select(n,J)}}Q.unref(),_.unref(),N.unref()}}})},kI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=i,{selection:o}=n;if(o){if(r==="anchor")jt.select(n,o.anchor);else if(r==="focus")jt.select(n,o.focus);else if(r==="start"){var[a]=_t.edges(o);jt.select(n,a)}else if(r==="end"){var[,u]=_t.edges(o);jt.select(n,u)}}else return},II=e=>{var{selection:n}=e;n&&e.apply({type:"set_selection",properties:n,newProperties:null})},HI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=n,{distance:o=1,unit:a="character",reverse:u=!1}=i,{edge:c=null}=i;if(r){c==="start"&&(c=_t.isBackward(r)?"focus":"anchor"),c==="end"&&(c=_t.isBackward(r)?"anchor":"focus");var{anchor:h,focus:g}=r,p={distance:o,unit:a,ignoreNonSelectable:!0},m={};if(c==null||c==="anchor"){var w=u?j.before(n,h,p):j.after(n,h,p);w&&(m.anchor=w)}if(c==null||c==="focus"){var x=u?j.before(n,g,p):j.after(n,g,p);x&&(m.focus=x)}jt.setSelection(n,m)}},NI=(e,n)=>{var{selection:i}=e;if(n=j.range(e,n),i){jt.setSelection(e,n);return}if(!_t.isRange(n))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(Wi.stringify(n)));e.apply({type:"set_selection",properties:i,newProperties:n})};function HD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function ND(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?HD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):HD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var GI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:o}=n,{edge:a="both"}=r;if(o){a==="start"&&(a=_t.isBackward(o)?"focus":"anchor"),a==="end"&&(a=_t.isBackward(o)?"anchor":"focus");var{anchor:u,focus:c}=o,h=a==="anchor"?u:c;jt.setSelection(n,{[a==="anchor"?"anchor":"focus"]:ND(ND({},h),i)})}},zI=(e,n)=>{var{selection:i}=e,r={},o={};if(i){for(var a in n)(a==="anchor"&&n.anchor!=null&&!Sn.equals(n.anchor,i.anchor)||a==="focus"&&n.focus!=null&&!Sn.equals(n.focus,i.focus)||a!=="anchor"&&a!=="focus"&&n[a]!==i[a])&&(r[a]=i[a],o[a]=n[a]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:o})}},jI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{hanging:o=!1,voids:a=!1,mode:u="lowest",batchDirty:c=!0}=r,{at:h,match:g,select:p}=r;if(te.isNode(i)&&(i=[i]),i.length!==0){var[m]=i;if(h||(h=_5(n),p!==!1&&(p=!0)),p==null&&(p=!1),_t.isRange(h))if(o||(h=j.unhangRange(n,h,{voids:a})),_t.isCollapsed(h))h=h.anchor;else{var[,w]=_t.edges(h),x=j.pointRef(n,w);jt.delete(n,{at:h}),h=x.unref()}if(Sn.isPoint(h)){g==null&&(se.isText(m)?g=ft=>se.isText(ft):n.isInline(m)?g=ft=>se.isText(ft)||j.isInline(n,ft):g=ft=>fe.isElement(ft)&&j.isBlock(n,ft));var[T]=j.nodes(n,{at:h.path,match:g,mode:u,voids:a});if(T){var[,D]=T,b=j.pathRef(n,D),B=j.isEnd(n,h,D);jt.splitNodes(n,{at:h,match:g,mode:u,voids:a});var A=b.unref();h=B?ut.next(A):A}else return}var H=ut.parent(h),R=h[h.length-1];if(!(!a&&j.void(n,{at:H}))){if(c){var k=[],W=ut.levels(H);Tk(n,()=>{var ft=function(){var mt=H.concat(R);R++;var wt={type:"insert_node",path:mt,node:Et};n.apply(wt),h=ut.next(h),k.push(wt),se.isText(Et)?W.push(mt):W.push(...Array.from(te.nodes(Et),V=>{var[,P]=V;return mt.concat(P)}))};for(var Et of i)ft()},()=>{u6(n,W,ft=>{var Et=ft;for(var ct of k)if(ut.operationCanTransformPath(ct)&&(Et=ut.transform(Et,ct),!Et))return null;return Et})})}else for(var U of i){var nt=H.concat(R);R++,n.apply({type:"insert_node",path:nt,node:U}),h=ut.next(h)}if(h=ut.previous(h),p){var st=j.end(n,h);st&&jt.select(n,st)}}}})},UI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{at:r=n.selection,mode:o="lowest",voids:a=!1}=i,{match:u}=i;if(u==null&&(u=ut.isPath(r)?Vg(n,r):R=>fe.isElement(R)&&j.isBlock(n,R)),!!r){var c=j.nodes(n,{at:r,match:u,mode:o,voids:a}),h=Array.from(c,R=>{var[,k]=R;return j.pathRef(n,k)});for(var g of h){var p=g.unref();if(p.length<2)throw new Error("Cannot lift node at a path [".concat(p,"] because it has a depth of less than `2`."));var m=j.node(n,ut.parent(p)),[w,x]=m,T=p[p.length-1],{length:D}=w.children;if(D===1){var b=ut.next(x);jt.moveNodes(n,{at:p,to:b,voids:a}),jt.removeNodes(n,{at:x,voids:a})}else if(T===0)jt.moveNodes(n,{at:p,to:x,voids:a});else if(T===D-1){var B=ut.next(x);jt.moveNodes(n,{at:p,to:B,voids:a})}else{var A=ut.next(p),H=ut.next(x);jt.splitNodes(n,{at:A,voids:a}),jt.moveNodes(n,{at:p,to:H,voids:a})}}}})},$I=["text"],VI=["children"],c6=(e,n)=>{if(fe.isElement(n)){var i=n;return j.isVoid(e,n)?!0:i.children.length===1?c6(e,i.children[0]):!1}else return!j.isEditor(n)},WI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{match:r,at:o=n.selection}=i,{hanging:a=!1,voids:u=!1,mode:c="lowest"}=i;if(o){if(r==null)if(ut.isPath(o)){var[h]=j.parent(n,o);r=ft=>h.children.includes(ft)}else r=ft=>fe.isElement(ft)&&j.isBlock(n,ft);if(!a&&_t.isRange(o)&&(o=j.unhangRange(n,o,{voids:u})),_t.isRange(o))if(_t.isCollapsed(o))o=o.anchor;else{var[,g]=_t.edges(o),p=j.pointRef(n,g);jt.delete(n,{at:o}),o=p.unref(),i.at==null&&jt.select(n,o)}var[m]=j.nodes(n,{at:o,match:r,voids:u,mode:c}),w=j.previous(n,{at:o,match:r,voids:u,mode:c});if(!(!m||!w)){var[x,T]=m,[D,b]=w;if(!(T.length===0||b.length===0)){var B=ut.next(b),A=ut.common(T,b),H=ut.isSibling(T,b),R=Array.from(j.levels(n,{at:T}),ft=>{var[Et]=ft;return Et}).slice(A.length).slice(0,-1),k=j.above(n,{at:T,mode:"highest",match:ft=>R.includes(ft)&&c6(n,ft)}),W=k&&j.pathRef(n,k[1]),U,nt;if(se.isText(x)&&se.isText(D)){var st=Du(x,$I);nt=D.text.length,U=st}else if(fe.isElement(x)&&fe.isElement(D)){var st=Du(x,VI);nt=D.children.length,U=st}else throw new Error("Cannot merge the node at path [".concat(T,"] with the previous sibling because it is not the same kind: ").concat(Wi.stringify(x)," ").concat(Wi.stringify(D)));H||jt.moveNodes(n,{at:T,to:B,voids:u}),W&&jt.removeNodes(n,{at:W.current,voids:u}),j.shouldMergeNodesRemovePrevNode(n,w,m)?jt.removeNodes(n,{at:b,voids:u}):n.apply({type:"merge_node",path:B,position:nt,properties:U}),W&&W.unref()}}}})},XI=(e,n)=>{j.withoutNormalizing(e,()=>{var{to:i,at:r=e.selection,mode:o="lowest",voids:a=!1}=n,{match:u}=n;if(r){u==null&&(u=ut.isPath(r)?Vg(e,r):x=>fe.isElement(x)&&j.isBlock(e,x));var c=j.pathRef(e,i),h=j.nodes(e,{at:r,match:u,mode:o,voids:a}),g=Array.from(h,x=>{var[,T]=x;return j.pathRef(e,T)});for(var p of g){var m=p.unref(),w=c.current;m.length!==0&&e.apply({type:"move_node",path:m,newPath:w}),c.current&&ut.isSibling(w,m)&&ut.isAfter(w,m)&&(c.current=ut.next(c.current))}c.unref()}})},qI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{hanging:r=!1,voids:o=!1,mode:a="lowest"}=i,{at:u=n.selection,match:c}=i;if(u){c==null&&(c=ut.isPath(u)?Vg(n,u):x=>fe.isElement(x)&&j.isBlock(n,x)),!r&&_t.isRange(u)&&(u=j.unhangRange(n,u,{voids:o}));var h=j.nodes(n,{at:u,match:c,mode:a,voids:o}),g=Array.from(h,x=>{var[,T]=x;return j.pathRef(n,T)});for(var p of g){var m=p.unref();if(m){var[w]=j.node(n,m);n.apply({type:"remove_node",path:m,node:w})}}}})},YI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{match:o,at:a=n.selection,compare:u,merge:c}=r,{hanging:h=!1,mode:g="lowest",split:p=!1,voids:m=!1}=r;if(a){if(o==null&&(o=ut.isPath(a)?Vg(n,a):nt=>fe.isElement(nt)&&j.isBlock(n,nt)),!h&&_t.isRange(a)&&(a=j.unhangRange(n,a,{voids:m})),p&&_t.isRange(a)){if(_t.isCollapsed(a)&&j.leaf(n,a.anchor)[0].text.length>0)return;var w=j.rangeRef(n,a,{affinity:"inward"}),[x,T]=_t.edges(a),D=g==="lowest"?"lowest":"highest",b=j.isEnd(n,T,T.path);jt.splitNodes(n,{at:T,match:o,mode:D,voids:m,always:!b});var B=j.isStart(n,x,x.path);jt.splitNodes(n,{at:x,match:o,mode:D,voids:m,always:!B}),a=w.unref(),r.at==null&&jt.select(n,a)}u||(u=(nt,st)=>nt!==st);for(var[A,H]of j.nodes(n,{at:a,match:o,mode:g,voids:m})){var R={},k={};if(H.length!==0){var W=!1;for(var U in i)U==="children"||U==="text"||u(i[U],A[U])&&(W=!0,A.hasOwnProperty(U)&&(R[U]=A[U]),c?i[U]!=null&&(k[U]=c(A[U],i[U])):i[U]!=null&&(k[U]=i[U]));W&&n.apply({type:"set_node",path:H,properties:R,newProperties:k})}}}})},KI=(e,n)=>{if(_t.isCollapsed(n))return n.anchor;var[,i]=_t.edges(n),r=j.pointRef(e,i);return jt.delete(e,{at:n}),r.unref()},ZI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{mode:r="lowest",voids:o=!1}=i,{match:a,at:u=n.selection,height:c=0,always:h=!1}=i;if(a==null&&(a=$=>fe.isElement($)&&j.isBlock(n,$)),_t.isRange(u)&&(u=KI(n,u)),ut.isPath(u)){var g=u,p=j.point(n,g),[m]=j.parent(n,g);a=$=>$===m,c=p.path.length-g.length+1,u=p,h=!0}if(u){var w=j.pointRef(n,u,{affinity:"backward"}),x;try{var[T]=j.nodes(n,{at:u,match:a,mode:r,voids:o});if(!T)return;var D=j.void(n,{at:u,mode:"highest"}),b=0;if(!o&&D){var[B,A]=D;if(fe.isElement(B)&&n.isInline(B)){var H=j.after(n,A);if(!H){var R={text:""},k=ut.next(A);jt.insertNodes(n,R,{at:k,voids:o}),H=j.point(n,k)}u=H,h=!0}var W=u.path.length-A.length;c=W+1,h=!0}x=j.pointRef(n,u);var U=u.path.length-c,[,nt]=T,st=u.path.slice(0,U),ft=c===0?u.offset:u.path[U]+b;for(var[Et,ct]of j.levels(n,{at:st,reverse:!0,voids:o})){var mt=!1;if(ct.length<nt.length||ct.length===0||!o&&fe.isElement(Et)&&j.isVoid(n,Et))break;var wt=w.current,V=j.isEnd(n,wt,ct);if(h||!w||!j.isEdge(n,wt,ct)){mt=!0;var P=te.extractProps(Et);n.apply({type:"split_node",path:ct,position:ft,properties:P})}ft=ct[ct.length-1]+(mt||V?1:0)}if(i.at==null){var _=x.current||j.end(n,[]);jt.select(n,_)}}finally{var N;w.unref(),(N=x)===null||N===void 0||N.unref()}}})},QI=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(i)||(i=[i]);var o={};for(var a of i)o[a]=null;jt.setNodes(n,o,r)},JI=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};j.withoutNormalizing(n,()=>{var{mode:r="lowest",split:o=!1,voids:a=!1}=i,{at:u=n.selection,match:c}=i;if(u){c==null&&(c=ut.isPath(u)?Vg(n,u):x=>fe.isElement(x)&&j.isBlock(n,x)),ut.isPath(u)&&(u=j.range(n,u));var h=_t.isRange(u)?j.rangeRef(n,u):null,g=j.nodes(n,{at:u,match:c,mode:r,voids:a}),p=Array.from(g,x=>{var[,T]=x;return j.pathRef(n,T)}).reverse(),m=function(){var T=w.unref(),[D]=j.node(n,T),b=j.range(n,T);o&&h&&(b=_t.intersection(h.current,b)),jt.liftNodes(n,{at:b,match:B=>fe.isAncestor(D)&&D.children.includes(B),voids:a})};for(var w of p)m();h&&h.unref()}})};function GD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function zD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?GD(Object(i),!0).forEach(function(r){Do(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var tH=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};j.withoutNormalizing(n,()=>{var{mode:o="lowest",split:a=!1,voids:u=!1}=r,{match:c,at:h=n.selection}=r;if(h){if(c==null&&(ut.isPath(h)?c=Vg(n,h):n.isInline(i)?c=b=>fe.isElement(b)&&j.isInline(n,b)||se.isText(b):c=b=>fe.isElement(b)&&j.isBlock(n,b)),a&&_t.isRange(h)){var[g,p]=_t.edges(h),m=j.rangeRef(n,h,{affinity:"inward"});jt.splitNodes(n,{at:p,match:c,voids:u}),jt.splitNodes(n,{at:g,match:c,voids:u}),h=m.unref(),r.at==null&&jt.select(n,h)}var w=Array.from(j.nodes(n,{at:h,match:n.isInline(i)?b=>fe.isElement(b)&&j.isBlock(n,b):b=>j.isEditor(b),mode:"lowest",voids:u})),x=function(){var B=_t.isRange(h)?_t.intersection(h,j.range(n,D)):h;if(!B)return 0;var A=Array.from(j.nodes(n,{at:B,match:c,mode:o,voids:u}));if(A.length>0){var[H]=A,R=A[A.length-1],[,k]=H,[,W]=R;if(k.length===0&&W.length===0)return 0;var U=ut.equals(k,W)?ut.parent(k):ut.common(k,W),nt=j.range(n,k,W),st=j.node(n,U),[ft]=st,Et=U.length+1,ct=ut.next(W.slice(0,Et)),mt=zD(zD({},i),{},{children:[]});jt.insertNodes(n,mt,{at:ct,voids:u}),jt.moveNodes(n,{at:nt,match:wt=>fe.isAncestor(ft)&&ft.children.includes(wt),to:ct.concat(0),voids:u})}},T;for(var[,D]of w)T=x()}})},eH=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Ak(e,...r)},addMark:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Rk(e,...r)},deleteBackward:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return _k(e,...r)},deleteForward:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Fk(e,...r)},deleteFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return kk(e,...r)},getFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return bk(e,...r)},insertBreak:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Xk(e,...r)},insertSoftBreak:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Yk(e,...r)},insertFragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return FI(e,...r)},insertNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return qk(e,...r)},insertText:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Zk(e,...r)},normalizeNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Bk(e,...r)},removeMark:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return bI(e,...r)},getDirtyPaths:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Dk(e,...r)},shouldNormalize:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Pk(e,...r)},above:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Mk(e,...r)},after:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Ok(e,...r)},before:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Lk(e,...r)},collapse:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return kI(e,...r)},delete:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return _I(e,...r)},deselect:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return II(e,...r)},edges:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Ik(e,...r)},elementReadOnly:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Hk(e,...r)},end:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Nk(e,...r)},first:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Gk(e,...r)},fragment:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return zk(e,...r)},getMarks:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return uI(e,...r)},hasBlocks:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Uk(e,...r)},hasInlines:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return $k(e,...r)},hasPath:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Vk(e,...r)},hasTexts:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Wk(e,...r)},insertNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return jI(e,...r)},isBlock:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Qk(e,...r)},isEdge:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return Jk(e,...r)},isEmpty:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return tI(e,...r)},isEnd:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return eI(e,...r)},isNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return nI(e,...r)},isStart:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return iI(e,...r)},last:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return rI(e,...r)},leaf:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return oI(e,...r)},levels:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return sI(e,...r)},liftNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return UI(e,...r)},mergeNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return WI(e,...r)},move:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return HI(e,...r)},moveNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return XI(e,...r)},next:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return cI(e,...r)},node:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return fI(e,...r)},nodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return hI(e,...r)},normalize:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return dI(e,...r)},parent:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return gI(e,...r)},path:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return vI(e,...r)},pathRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return pI(e,...r)},pathRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return mI(e,...r)},point:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return xI(e,...r)},pointRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yI(e,...r)},pointRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return wI(e,...r)},positions:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return CI(e,...r)},previous:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return EI(e,...r)},range:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return AI(e,...r)},rangeRef:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return SI(e,...r)},rangeRefs:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return TI(e,...r)},removeNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return qI(e,...r)},select:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return NI(e,...r)},setNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return YI(e,...r)},setNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return BI(e,...r)},setPoint:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return GI(e,...r)},setSelection:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return zI(e,...r)},splitNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return ZI(e,...r)},start:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return PI(e,...r)},string:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return MI(e,...r)},unhangRange:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return RI(e,...r)},unsetNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return QI(e,...r)},unwrapNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return JI(e,...r)},void:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return jk(e,...r)},withoutNormalizing:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return OI(e,...r)},wrapNodes:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return tH(e,...r)},shouldMergeNodesRemovePrevNode:function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return LI(e,...r)}};return e},KE,jD;function nH(){if(jD)return KE;jD=1,KE=o;var e="---",n="A-Za-z--------",i=new RegExp("^[^"+n+"]*["+e+"]"),r=new RegExp("^[^"+e+"]*["+n+"]");function o(a){return a=String(a||""),i.test(a)?"rtl":r.test(a)?"ltr":"neutral"}return KE}var iH=nH();const f6=hf(iH),UD=e=>typeof e=="object"&&e!=null&&e.nodeType===1,$D=(e,n)=>(!n||e!=="hidden")&&e!=="visible"&&e!=="clip",U2=(e,n)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const i=getComputedStyle(e,null);return $D(i.overflowY,n)||$D(i.overflowX,n)||(r=>{const o=(a=>{if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!o&&(o.clientHeight<r.scrollHeight||o.clientWidth<r.scrollWidth)})(e)}return!1},$2=(e,n,i,r,o,a,u,c)=>a<e&&u>n||a>e&&u<n?0:a<=e&&c<=i||u>=n&&c>=i?a-e-r:u>n&&c<i||a<e&&c>i?u-n+o:0,rH=e=>{const n=e.parentElement;return n??(e.getRootNode().host||null)},VD=(e,n)=>{var i,r,o,a;if(typeof document>"u")return[];const{scrollMode:u,block:c,inline:h,boundary:g,skipOverflowHiddenElements:p}=n,m=typeof g=="function"?g:P=>P!==g;if(!UD(e))throw new TypeError("Invalid target");const w=document.scrollingElement||document.documentElement,x=[];let T=e;for(;UD(T)&&m(T);){if(T=rH(T),T===w){x.push(T);break}T!=null&&T===document.body&&U2(T)&&!U2(document.documentElement)||T!=null&&U2(T,p)&&x.push(T)}const D=(r=(i=window.visualViewport)==null?void 0:i.width)!=null?r:innerWidth,b=(a=(o=window.visualViewport)==null?void 0:o.height)!=null?a:innerHeight,{scrollX:B,scrollY:A}=window,{height:H,width:R,top:k,right:W,bottom:U,left:nt}=e.getBoundingClientRect(),{top:st,right:ft,bottom:Et,left:ct}=(P=>{const _=window.getComputedStyle(P);return{top:parseFloat(_.scrollMarginTop)||0,right:parseFloat(_.scrollMarginRight)||0,bottom:parseFloat(_.scrollMarginBottom)||0,left:parseFloat(_.scrollMarginLeft)||0}})(e);let mt=c==="start"||c==="nearest"?k-st:c==="end"?U+Et:k+H/2-st+Et,wt=h==="center"?nt+R/2-ct+ft:h==="end"?W+ft:nt-ct;const V=[];for(let P=0;P<x.length;P++){const _=x[P],{height:N,width:$,top:Q,right:F,bottom:J,left:tt}=_.getBoundingClientRect();if(u==="if-needed"&&k>=0&&nt>=0&&U<=b&&W<=D&&(_===w&&!U2(_)||k>=Q&&U<=J&&nt>=tt&&W<=F))return V;const it=getComputedStyle(_),xt=parseInt(it.borderLeftWidth,10),gt=parseInt(it.borderTopWidth,10),Lt=parseInt(it.borderRightWidth,10),$t=parseInt(it.borderBottomWidth,10);let ot=0,Pt=0;const Rt="offsetWidth"in _?_.offsetWidth-_.clientWidth-xt-Lt:0,It="offsetHeight"in _?_.offsetHeight-_.clientHeight-gt-$t:0,he="offsetWidth"in _?_.offsetWidth===0?0:$/_.offsetWidth:0,Nt="offsetHeight"in _?_.offsetHeight===0?0:N/_.offsetHeight:0;if(w===_)ot=c==="start"?mt:c==="end"?mt-b:c==="nearest"?$2(A,A+b,b,gt,$t,A+mt,A+mt+H,H):mt-b/2,Pt=h==="start"?wt:h==="center"?wt-D/2:h==="end"?wt-D:$2(B,B+D,D,xt,Lt,B+wt,B+wt+R,R),ot=Math.max(0,ot+A),Pt=Math.max(0,Pt+B);else{ot=c==="start"?mt-Q-gt:c==="end"?mt-J+$t+It:c==="nearest"?$2(Q,J,N,gt,$t+It,mt,mt+H,H):mt-(Q+N/2)+It/2,Pt=h==="start"?wt-tt-xt:h==="center"?wt-(tt+$/2)+Rt/2:h==="end"?wt-F+Lt+Rt:$2(tt,F,$,xt,Lt+Rt,wt,wt+R,R);const{scrollLeft:ge,scrollTop:ae}=_;ot=Nt===0?0:Math.max(0,Math.min(ae+ot/Nt,_.scrollHeight-N/Nt+It)),Pt=he===0?0:Math.max(0,Math.min(ge+Pt/he,_.scrollWidth-$/he+Rt)),mt+=ae-ot,wt+=ge-Pt}V.push({el:_,top:ot,left:Pt})}return V},oH=e=>e===!1?{block:"end",inline:"nearest"}:(n=>n===Object(n)&&Object.keys(n).length!==0)(e)?e:{block:"start",inline:"nearest"};function sH(e,n){if(!e.isConnected||!(o=>{let a=o;for(;a&&a.parentNode;){if(a.parentNode===document)return!0;a=a.parentNode instanceof ShadowRoot?a.parentNode.host:a.parentNode}return!1})(e))return;const i=(o=>{const a=window.getComputedStyle(o);return{top:parseFloat(a.scrollMarginTop)||0,right:parseFloat(a.scrollMarginRight)||0,bottom:parseFloat(a.scrollMarginBottom)||0,left:parseFloat(a.scrollMarginLeft)||0}})(e);if((o=>typeof o=="object"&&typeof o.behavior=="function")(n))return n.behavior(VD(e,n));const r=typeof n=="boolean"||n==null?void 0:n.behavior;for(const{el:o,top:a,left:u}of VD(e,oH(n))){const c=a-i.top+i.bottom,h=u-i.left+i.right;o.scroll({top:c,left:h,behavior:r})}}var h6=globalThis.Node,aH=globalThis.Text,I5=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,lH=e=>lf(e)&&e.nodeType===8,$s=e=>lf(e)&&e.nodeType===1,lf=e=>{var n=I5(e);return!!n&&e instanceof n.Node},fS=e=>{var n=e&&e.anchorNode&&I5(e.anchorNode);return!!n&&e instanceof n.Selection},d6=e=>lf(e)&&e.nodeType===3,uH=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,cH=e=>{var[n,i]=e;if($s(n)&&n.childNodes.length){var r=i===n.childNodes.length,o=r?i-1:i;for([n,o]=g6(n,o,r?"backward":"forward"),r=o<i;$s(n)&&n.childNodes.length;){var a=r?n.childNodes.length-1:0;n=hH(n,a,r?"backward":"forward")}i=r&&n.textContent!=null?n.textContent.length:0}return[n,i]},fH=e=>{for(var n=e&&e.parentNode;n;){if(n.toString()==="[object ShadowRoot]")return!0;n=n.parentNode}return!1},g6=(e,n,i)=>{for(var{childNodes:r}=e,o=r[n],a=n,u=!1,c=!1;(lH(o)||$s(o)&&o.childNodes.length===0||$s(o)&&o.getAttribute("contenteditable")==="false")&&!(u&&c);){if(a>=r.length){u=!0,a=n-1,i="backward";continue}if(a<0){c=!0,a=n+1,i="forward";continue}o=r[a],n=a,a+=i==="forward"?1:-1}return[o,n]},hH=(e,n,i)=>{var[r]=g6(e,n,i);return r},p6=e=>{var n="";if(d6(e)&&e.nodeValue)return e.nodeValue;if($s(e)){for(var i of Array.from(e.childNodes))n+=p6(i);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(n+=`
`)}return n},dH=/data-slate-fragment="(.+?)"/m,gH=e=>{var n=e.getData("text/html"),[,i]=n.match(dH)||[];return i},ym=e=>e.getSelection!=null?e.getSelection():document.getSelection(),H5=(e,n,i)=>{var{target:r}=n;if($s(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:o}=Ye.getWindow(e);if(o.contains(r))return Ye.hasDOMNode(e,r,{editable:!0});var a=i.find(u=>{var{addedNodes:c,removedNodes:h}=u;for(var g of c)if(g===r||g.contains(r))return!0;for(var p of h)if(p===r||p.contains(r))return!0});return!a||a===n?!1:H5(e,a,i)},pH=()=>{for(var e=document.activeElement;(n=e)!==null&&n!==void 0&&n.shadowRoot&&(i=e.shadowRoot)!==null&&i!==void 0&&i.activeElement;){var n,i,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},WD=(e,n)=>!!(e.compareDocumentPosition(n)&h6.DOCUMENT_POSITION_PRECEDING),mH=(e,n)=>!!(e.compareDocumentPosition(n)&h6.DOCUMENT_POSITION_FOLLOWING),ZE,QE,vH=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,XD=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Eo=typeof navigator<"u"&&/Android/.test(navigator.userAgent),cg=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Nh=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),yH=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),m6=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),wH=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),xH=Eo&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),CH=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),EH=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),SH=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),yw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((ZE=navigator.userAgent.match(/Version\/(\d+)/))!==null&&ZE!==void 0&&ZE[1]&&parseInt((QE=navigator.userAgent.match(/Version\/(\d+)/))===null||QE===void 0?void 0:QE[1],10)<17);var Nc=(!wH||!xH)&&!yH&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function";function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},km(e)}function TH(e,n){if(km(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(km(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function AH(e){var n=TH(e,"string");return km(n)==="symbol"?n:String(n)}function N5(e,n,i){return n=AH(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var DH=0;class v6{constructor(){N5(this,"id",void 0),this.id="".concat(DH++)}}var yg=new WeakMap,fg=new WeakMap,wm=new WeakMap,y6=new WeakMap,ww=new WeakMap,hS=new WeakMap,Im=new WeakMap,qh=new WeakMap,qw=new WeakMap,$x=new WeakMap,dS=new WeakMap,Xc=new WeakMap,Uh=new WeakMap,xm=new WeakMap,gS=new WeakMap,G5=new WeakMap,ba=new WeakMap,mu=new WeakMap,$o=new WeakMap,Uc=new WeakMap,$c=new WeakMap,w6=new WeakMap,Bg=Symbol("placeholder"),x6=Symbol("mark-placeholder"),Ye={androidPendingDiffs:e=>$o.get(e),androidScheduleFlush:e=>{var n;(n=G5.get(e))===null||n===void 0||n()},blur:e=>{var n=Ye.toDOMNode(e,e),i=Ye.findDocumentOrShadowRoot(e);Xc.set(e,!1),i.activeElement===n&&n.blur()},deselect:e=>{var{selection:n}=e,i=Ye.findDocumentOrShadowRoot(e),r=ym(i);r&&r.rangeCount>0&&r.removeAllRanges(),n&&jt.deselect(e)},findDocumentOrShadowRoot:e=>{var n=Ye.toDOMNode(e,e),i=n.getRootNode();return i instanceof Document||i instanceof ShadowRoot?i:n.ownerDocument},findEventRange:(e,n)=>{"nativeEvent"in n&&(n=n.nativeEvent);var{clientX:i,clientY:r,target:o}=n;if(i==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var a=Ye.toSlateNode(e,n.target),u=Ye.findPath(e,a);if(fe.isElement(a)&&j.isVoid(e,a)){var c=o.getBoundingClientRect(),h=e.isInline(a)?i-c.left<c.left+c.width-i:r-c.top<c.top+c.height-r,g=j.point(e,u,{edge:h?"start":"end"}),p=h?j.before(e,g):j.after(e,g);if(p){var m=j.range(e,p);return m}}var w,{document:x}=Ye.getWindow(e);if(x.caretRangeFromPoint)w=x.caretRangeFromPoint(i,r);else{var T=x.caretPositionFromPoint(i,r);T&&(w=x.createRange(),w.setStart(T.offsetNode,T.offset),w.setEnd(T.offsetNode,T.offset))}if(!w)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(n));var D=Ye.toSlateRange(e,w,{exactMatch:!1,suppressThrow:!1});return D},findKey:(e,n)=>{var i=qw.get(n);return i||(i=new v6,qw.set(n,i)),i},findPath:(e,n)=>{for(var i=[],r=n;;){var o=wm.get(r);if(o==null){if(j.isEditor(r))return i;break}var a=fg.get(r);if(a==null)break;i.unshift(a),r=o}throw new Error("Unable to find the path for Slate node: ".concat(Wi.stringify(n)))},focus:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!Xc.get(n)){if(i.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(n.operations.length>0){setTimeout(()=>{Ye.focus(n,{retries:i.retries-1})},10);return}var r=Ye.toDOMNode(n,n),o=Ye.findDocumentOrShadowRoot(n);if(o.activeElement!==r){if(n.selection&&o instanceof Document){var a=ym(o),u=Ye.toDOMRange(n,n.selection);a==null||a.removeAllRanges(),a==null||a.addRange(u)}n.selection||jt.select(n,j.start(n,[])),Xc.set(n,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var n=y6.get(e);if(!n)throw new Error("Unable to find a host window element for this editor");return n},hasDOMNode:function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:o=!1}=r,a=Ye.toDOMNode(n,n),u;try{u=$s(i)?i:i.parentElement}catch(c){if(c instanceof Error&&!c.message.includes('Permission denied to access property "nodeType"'))throw c}return u?u.closest("[data-slate-editor]")===a&&(!o||u.isContentEditable?!0:typeof u.isContentEditable=="boolean"&&u.closest('[contenteditable="false"]')===a||!!u.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,n)=>lf(n)&&Ye.hasDOMNode(e,n,{editable:!0}),hasRange:(e,n)=>{var{anchor:i,focus:r}=n;return j.hasPath(e,i.path)&&j.hasPath(e,r.path)},hasSelectableTarget:(e,n)=>Ye.hasEditableTarget(e,n)||Ye.isTargetInsideNonReadonlyVoid(e,n),hasTarget:(e,n)=>lf(n)&&Ye.hasDOMNode(e,n),insertData:(e,n)=>{e.insertData(n)},insertFragmentData:(e,n)=>e.insertFragmentData(n),insertTextData:(e,n)=>e.insertTextData(n),isComposing:e=>!!Uh.get(e),isFocused:e=>!!Xc.get(e),isReadOnly:e=>!!dS.get(e),isTargetInsideNonReadonlyVoid:(e,n)=>{if(dS.get(e))return!1;var i=Ye.hasTarget(e,n)&&Ye.toSlateNode(e,n);return fe.isElement(i)&&j.isVoid(e,i)},setFragmentData:(e,n,i)=>e.setFragmentData(n,i),toDOMNode:(e,n)=>{var i=$x.get(e),r=j.isEditor(n)?ww.get(e):i==null?void 0:i.get(Ye.findKey(e,n));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(Wi.stringify(n)));return r},toDOMPoint:(e,n)=>{var[i]=j.node(e,n.path),r=Ye.toDOMNode(e,i),o;j.void(e,{at:n})&&(n={path:n.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",u=Array.from(r.querySelectorAll(a)),c=0,h=0;h<u.length;h++){var g=u[h],p=g.childNodes[0];if(!(p==null||p.textContent==null)){var{length:m}=p.textContent,w=g.getAttribute("data-slate-length"),x=w==null?m:parseInt(w,10),T=c+x,D=u[h+1];if(n.offset===T&&D!==null&&D!==void 0&&D.hasAttribute("data-slate-mark-placeholder")){var b,B=D.childNodes[0];o=[B instanceof aH?B:D,(b=D.textContent)!==null&&b!==void 0&&b.startsWith("\uFEFF")?1:0];break}if(n.offset<=T){var A=Math.min(m,Math.max(0,n.offset-c));o=[p,A];break}c=T}}if(!o)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(Wi.stringify(n)));return o},toDOMRange:(e,n)=>{var{anchor:i,focus:r}=n,o=_t.isBackward(n),a=Ye.toDOMPoint(e,i),u=_t.isCollapsed(n)?a:Ye.toDOMPoint(e,r),c=Ye.getWindow(e),h=c.document.createRange(),[g,p]=o?u:a,[m,w]=o?a:u,x=$s(g)?g:g.parentElement,T=!!x.getAttribute("data-slate-zero-width"),D=$s(m)?m:m.parentElement,b=!!D.getAttribute("data-slate-zero-width");return h.setStart(g,T?1:p),h.setEnd(m,b?1:w),h},toSlateNode:(e,n)=>{var i=$s(n)?n:n.parentElement;i&&!i.hasAttribute("data-slate-node")&&(i=i.closest("[data-slate-node]"));var r=i?Im.get(i):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(i));return r},toSlatePoint:(e,n,i)=>{var{exactMatch:r,suppressThrow:o,searchDirection:a="backward"}=i,[u,c]=r?n:cH(n),h=u.parentNode,g=null,p=0;if(h){var m,w,x=Ye.toDOMNode(e,e),T=h.closest('[data-slate-void="true"]'),D=T&&x.contains(T)?T:null,b=h.closest('[contenteditable="false"]'),B=b&&x.contains(b)?b:null,A=h.closest("[data-slate-leaf]"),H=null;if(A){if(g=A.closest('[data-slate-node="text"]'),g){var R=Ye.getWindow(e),k=R.document.createRange();k.setStart(g,0),k.setEnd(u,c);var W=k.cloneContents(),U=[...Array.prototype.slice.call(W.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(W.querySelectorAll("[contenteditable=false]"))];U.forEach(tt=>{if(Eo&&!r&&tt.hasAttribute("data-slate-zero-width")&&tt.textContent.length>0&&tt.textContext!=="\uFEFF"){tt.textContent.startsWith("\uFEFF")&&(tt.textContent=tt.textContent.slice(1));return}tt.parentNode.removeChild(tt)}),p=W.textContent.length,H=g}}else if(D){for(var nt=D.querySelectorAll("[data-slate-leaf]"),st=0;st<nt.length;st++){var ft=nt[st];if(Ye.hasDOMNode(e,ft)){A=ft;break}}A?(g=A.closest('[data-slate-node="text"]'),H=A,p=H.textContent.length,H.querySelectorAll("[data-slate-zero-width]").forEach(tt=>{p-=tt.textContent.length})):p=1}else if(B){var Et=tt=>tt?tt.querySelectorAll("[data-slate-leaf]:not(:scope [data-slate-editor] [data-slate-leaf])"):[],ct=B.closest('[data-slate-node="element"]');if(a==="forward"){var mt,wt=[...Et(ct),...Et(ct==null?void 0:ct.nextElementSibling)];A=(mt=wt.find(tt=>mH(B,tt)))!==null&&mt!==void 0?mt:null}else{var V,P=[...Et(ct==null?void 0:ct.previousElementSibling),...Et(ct)];A=(V=P.findLast(tt=>WD(B,tt)))!==null&&V!==void 0?V:null}A&&(g=A.closest('[data-slate-node="text"]'),H=A,a==="forward"?p=0:(p=H.textContent.length,H.querySelectorAll("[data-slate-zero-width]").forEach(tt=>{p-=tt.textContent.length})))}H&&p===H.textContent.length&&Eo&&H.getAttribute("data-slate-zero-width")==="z"&&(m=H.textContent)!==null&&m!==void 0&&m.startsWith("\uFEFF")&&(h.hasAttribute("data-slate-zero-width")||cg&&(w=H.textContent)!==null&&w!==void 0&&w.endsWith(`

`))&&p--}if(Eo&&!g&&!r){var _=h.hasAttribute("data-slate-node")?h:h.closest("[data-slate-node]");if(_&&Ye.hasDOMNode(e,_,{editable:!0})){var N=Ye.toSlateNode(e,_),{path:$,offset:Q}=j.start(e,Ye.findPath(e,N));return _.querySelector("[data-slate-leaf]")||(Q=c),{path:$,offset:Q}}}if(!g){if(o)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(n))}var F=Ye.toSlateNode(e,g),J=Ye.findPath(e,F);return{path:J,offset:p}},toSlateRange:(e,n,i)=>{var r,{exactMatch:o,suppressThrow:a}=i,u=fS(n)?n.anchorNode:n.startContainer,c,h,g,p,m;if(u)if(fS(n)){if(cg&&n.rangeCount>1){g=n.focusNode;var w=n.getRangeAt(0),x=n.getRangeAt(n.rangeCount-1);if(g instanceof HTMLTableRowElement&&w.startContainer instanceof HTMLTableRowElement&&x.startContainer instanceof HTMLTableRowElement){let W=function(U){return U.childElementCount>0?W(U.children[0]):U};var T=w.startContainer,D=x.startContainer,b=W(T.children[w.startOffset]),B=W(D.children[x.startOffset]);p=0,B.childNodes.length>0?c=B.childNodes[0]:c=B,b.childNodes.length>0?g=b.childNodes[0]:g=b,B instanceof HTMLElement?h=B.innerHTML.length:h=0}else w.startContainer===g?(c=x.endContainer,h=x.endOffset,p=w.startOffset):(c=w.startContainer,h=w.endOffset,p=x.startOffset)}else c=n.anchorNode,h=n.anchorOffset,g=n.focusNode,p=n.focusOffset;m6&&fH(c)||cg?m=n.anchorNode===n.focusNode&&n.anchorOffset===n.focusOffset:m=n.isCollapsed}else c=n.startContainer,h=n.startOffset,g=n.endContainer,p=n.endOffset,m=n.collapsed;if(c==null||g==null||h==null||p==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(n));cg&&(r=g.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&p===g.textContent.length&&p--;var A=Ye.toSlatePoint(e,[c,h],{exactMatch:o,suppressThrow:a});if(!A)return null;var H=WD(c,g)||c===g&&p<h,R=m?A:Ye.toSlatePoint(e,[g,p],{exactMatch:o,suppressThrow:a,searchDirection:H?"forward":"backward"});if(!R)return null;var k={anchor:A,focus:R};return _t.isExpanded(k)&&_t.isForward(k)&&$s(g)&&j.void(e,{at:k.focus,mode:"highest"})&&(k=j.unhangRange(e,k,{voids:!0})),k}};function bH(e,n){var{path:i,diff:r}=n;if(!j.hasPath(e,i))return!1;var o=te.get(e,i);if(!se.isText(o))return!1;if(r.start!==o.text.length||r.text.length===0)return o.text.slice(r.start,r.start+r.text.length)===r.text;var a=ut.next(i);if(!j.hasPath(e,a))return!1;var u=te.get(e,a);return se.isText(u)&&u.text.startsWith(r.text)}function C6(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((o,a)=>o.slice(0,a.start)+a.text+o.slice(a.end),e)}function BH(e,n){for(var i=Math.min(e.length,n.length),r=0;r<i;r++)if(e.charAt(r)!==n.charAt(r))return r;return i}function PH(e,n,i){for(var r=Math.min(e.length,n.length,i),o=0;o<r;o++)if(e.charAt(e.length-o-1)!==n.charAt(n.length-o-1))return o;return r}function E6(e,n){var{start:i,end:r,text:o}=n,a=e.slice(i,r),u=BH(a,o),c=Math.min(a.length-u,o.length-u),h=PH(a,o,c),g={start:i+u,end:r-h,text:o.slice(u,o.length-h)};return g.start===g.end&&g.text.length===0?null:g}function MH(e,n,i){var r=Math.min(n.start,i.start),o=Math.max(0,Math.min(n.start+n.text.length,i.end)-i.start),a=C6(e,n,i),u=Math.max(i.start+i.text.length,n.start+n.text.length+(n.start+n.text.length>i.start?i.text.length:0)-o),c=a.slice(r,u),h=Math.max(n.end,i.end-n.text.length+(n.end-n.start));return E6(e,{start:r,end:h,text:c})}function RH(e){var{path:n,diff:i}=e;return{anchor:{path:n,offset:i.start},focus:{path:n,offset:i.end}}}function pS(e,n){var{path:i,offset:r}=n;if(!j.hasPath(e,i))return null;var o=te.get(e,i);if(!se.isText(o))return null;var a=j.above(e,{match:c=>fe.isElement(c)&&j.isBlock(e,c),at:i});if(!a)return null;for(;r>o.text.length;){var u=j.next(e,{at:i,match:se.isText});if(!u||!ut.isDescendant(u[1],a[1]))return null;r-=o.text.length,o=u[0],i=u[1]}return{path:i,offset:r}}function qD(e,n){var i=pS(e,n.anchor);if(!i)return null;if(_t.isCollapsed(n))return{anchor:i,focus:i};var r=pS(e,n.focus);return r?{anchor:i,focus:r}:null}function mS(e,n,i){var r=$o.get(e),o=r==null?void 0:r.find(p=>{var{path:m}=p;return ut.equals(m,n.path)});if(!o||n.offset<=o.diff.start)return Sn.transform(n,i,{affinity:"backward"});var{diff:a}=o;if(n.offset<=a.start+a.text.length){var u={path:n.path,offset:a.start},c=Sn.transform(u,i,{affinity:"backward"});return c?{path:c.path,offset:c.offset+n.offset-a.start}:null}var h={path:n.path,offset:n.offset-a.text.length+a.end-a.start},g=Sn.transform(h,i,{affinity:"backward"});return g?i.type==="split_node"&&ut.equals(i.path,n.path)&&h.offset<i.position&&a.start<i.position?g:{path:g.path,offset:g.offset+a.text.length-a.end+a.start}:null}function YD(e,n,i){var r=mS(e,n.anchor,i);if(!r)return null;if(_t.isCollapsed(n))return{anchor:r,focus:r};var o=mS(e,n.focus,i);return o?{anchor:r,focus:o}:null}function OH(e,n){var{path:i,diff:r,id:o}=e;switch(n.type){case"insert_text":return!ut.equals(n.path,i)||n.offset>=r.end?e:n.offset<=r.start?{diff:{start:n.text.length+r.start,end:n.text.length+r.end,text:r.text},id:o,path:i}:{diff:{start:r.start,end:r.end+n.text.length,text:r.text},id:o,path:i};case"remove_text":return!ut.equals(n.path,i)||n.offset>=r.end?e:n.offset+n.text.length<=r.start?{diff:{start:r.start-n.text.length,end:r.end-n.text.length,text:r.text},id:o,path:i}:{diff:{start:r.start,end:r.end-n.text.length,text:r.text},id:o,path:i};case"split_node":return!ut.equals(n.path,i)||n.position>=r.end?{diff:r,id:o,path:ut.transform(i,n,{affinity:"backward"})}:n.position>r.start?{diff:{start:r.start,end:Math.min(n.position,r.end),text:r.text},id:o,path:i}:{diff:{start:r.start-n.position,end:r.end-n.position,text:r.text},id:o,path:ut.transform(i,n,{affinity:"forward"})};case"merge_node":return ut.equals(n.path,i)?{diff:{start:r.start+n.position,end:r.end+n.position,text:r.text},id:o,path:ut.transform(i,n)}:{diff:r,id:o,path:ut.transform(i,n)}}var a=ut.transform(i,n);return a?{diff:r,path:a,id:o}:null}var KD=(e,n)=>{var i=(n.top+n.bottom)/2;return e.top<=i&&e.bottom>=i},ZD=(e,n,i)=>{var r=Ye.toDOMRange(e,n).getBoundingClientRect(),o=Ye.toDOMRange(e,i).getBoundingClientRect();return KD(r,o)&&KD(o,r)},LH=(e,n)=>{var i=j.range(e,_t.end(n)),r=Array.from(j.positions(e,{at:n})),o=0,a=r.length,u=Math.floor(a/2);if(ZD(e,j.range(e,r[o]),i))return j.range(e,r[o],i);if(r.length<2)return j.range(e,r[r.length-1],i);for(;u!==r.length&&u!==o;)ZD(e,j.range(e,r[u]),i)?a=u:o=u,u=Math.floor((o+a)/2);return j.range(e,r[o],i)};function QD(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function JD(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?QD(Object(i),!0).forEach(function(r){N5(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):QD(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var _H=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=n,{apply:o,onChange:a,deleteBackward:u,addMark:c,removeMark:h}=r;return $x.set(r,new WeakMap),r.addMark=(g,p)=>{var m,w;(m=G5.get(r))===null||m===void 0||m(),!ba.get(r)&&(w=$o.get(r))!==null&&w!==void 0&&w.length&&ba.set(r,null),mu.delete(r),c(g,p)},r.removeMark=g=>{var p;!ba.get(r)&&(p=$o.get(r))!==null&&p!==void 0&&p.length&&ba.set(r,null),mu.delete(r),h(g)},r.deleteBackward=g=>{if(g!=="line")return u(g);if(r.selection&&_t.isCollapsed(r.selection)){var p=j.above(r,{match:T=>fe.isElement(T)&&j.isBlock(r,T),at:r.selection});if(p){var[,m]=p,w=j.range(r,m,r.selection.anchor),x=LH(r,w);_t.isCollapsed(x)||jt.delete(r,{at:x})}}},r.apply=g=>{var p=[],m=[],w=$o.get(r);if(w!=null&&w.length){var x=w.map(wt=>OH(wt,g)).filter(Boolean);$o.set(r,x)}var T=$c.get(r);T&&$c.set(r,YD(r,T,g));var D=Uc.get(r);if(D!=null&&D.at){var b=Sn.isPoint(D==null?void 0:D.at)?mS(r,D.at,g):YD(r,D.at,g);Uc.set(r,b?JD(JD({},D),{},{at:b}):null)}switch(g.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{p.push(...eg(r,g.path));break}case"set_selection":{var B;(B=xm.get(r))===null||B===void 0||B.unref(),xm.delete(r);break}case"insert_node":case"remove_node":{p.push(...eg(r,ut.parent(g.path)));break}case"merge_node":{var A=ut.previous(g.path);p.push(...eg(r,A));break}case"move_node":{var H=ut.common(ut.parent(g.path),ut.parent(g.newPath));p.push(...eg(r,H));var R;ut.isBefore(g.path,g.newPath)?(p.push(...eg(r,ut.parent(g.path))),R=g.newPath):(p.push(...eg(r,ut.parent(g.newPath))),R=g.path);var k=te.get(n,ut.parent(R)),W=Ye.findKey(r,k),U=j.pathRef(r,ut.parent(R));m.push([U,W]);break}}switch(o(g),g.type){case"insert_node":case"remove_node":case"merge_node":case"move_node":case"split_node":case"insert_text":case"remove_text":case"set_selection":yg.set(r,!0)}for(var[nt,st]of p){var[ft]=j.node(r,nt);qw.set(ft,st)}for(var[Et,ct]of m){if(Et.current){var[mt]=j.node(r,Et.current);qw.set(mt,ct)}Et.unref()}},r.setFragmentData=g=>{var{selection:p}=r;if(p){var[m,w]=_t.edges(p),x=j.void(r,{at:m.path}),T=j.void(r,{at:w.path});if(!(_t.isCollapsed(p)&&!x)){var D=Ye.toDOMRange(r,p),b=D.cloneContents(),B=b.childNodes[0];if(b.childNodes.forEach(ft=>{ft.textContent&&ft.textContent.trim()!==""&&(B=ft)}),T){var[A]=T,H=D.cloneRange(),R=Ye.toDOMNode(r,A);H.setEndAfter(R),b=H.cloneContents()}if(x&&(B=b.querySelector("[data-slate-spacer]")),Array.from(b.querySelectorAll("[data-slate-zero-width]")).forEach(ft=>{var Et=ft.getAttribute("data-slate-zero-width")==="n";ft.textContent=Et?`
`:""}),d6(B)){var k=B.ownerDocument.createElement("span");k.style.whiteSpace="pre",k.appendChild(B),b.appendChild(k),B=k}var W=r.getFragment(),U=JSON.stringify(W),nt=window.btoa(encodeURIComponent(U));B.setAttribute("data-slate-fragment",nt),g.setData("application/".concat(i),nt);var st=b.ownerDocument.createElement("div");return st.appendChild(b),st.setAttribute("hidden","true"),b.ownerDocument.body.appendChild(st),g.setData("text/html",st.innerHTML),g.setData("text/plain",p6(st)),b.ownerDocument.body.removeChild(st),g}}},r.insertData=g=>{r.insertFragmentData(g)||r.insertTextData(g)},r.insertFragmentData=g=>{var p=g.getData("application/".concat(i))||gH(g);if(p){var m=decodeURIComponent(window.atob(p)),w=JSON.parse(m);return r.insertFragment(w),!0}return!1},r.insertTextData=g=>{var p=g.getData("text/plain");if(p){var m=p.split(/\r\n|\r|\n/),w=!1;for(var x of m)w&&jt.splitNodes(r,{always:!0}),r.insertText(x),w=!0;return!0}return!1},r.onChange=g=>{var p=gS.get(r);p&&p(g),a(g)},r},eg=(e,n)=>{var i=[];for(var[r,o]of j.levels(e,{at:n})){var a=Ye.findKey(e,r);i.push([o,a])}return i},FH=3,kH={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},IH={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},HH={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},wi=e=>{var n=kH[e],i=IH[e],r=HH[e],o=n&&ln.isHotkey(n),a=i&&ln.isHotkey(i),u=r&&ln.isHotkey(r);return c=>!!(o&&o(c)||XD&&a&&a(c)||!XD&&u&&u(c))},bi={isBold:wi("bold"),isCompose:wi("compose"),isMoveBackward:wi("moveBackward"),isMoveForward:wi("moveForward"),isDeleteBackward:wi("deleteBackward"),isDeleteForward:wi("deleteForward"),isDeleteLineBackward:wi("deleteLineBackward"),isDeleteLineForward:wi("deleteLineForward"),isDeleteWordBackward:wi("deleteWordBackward"),isDeleteWordForward:wi("deleteWordForward"),isExtendBackward:wi("extendBackward"),isExtendForward:wi("extendForward"),isExtendLineBackward:wi("extendLineBackward"),isExtendLineForward:wi("extendLineForward"),isItalic:wi("italic"),isMoveLineBackward:wi("moveLineBackward"),isMoveLineForward:wi("moveLineForward"),isMoveWordBackward:wi("moveWordBackward"),isMoveWordForward:wi("moveWordForward"),isRedo:wi("redo"),isSoftBreak:wi("insertSoftBreak"),isSplitBlock:wi("splitBlock"),isTransposeCharacter:wi("transposeCharacter"),isUndo:wi("undo")};function NH(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function t7(e,n){if(e==null)return{};var i=NH(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var GH=["anchor","focus"],zH=["anchor","focus"];function e7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function n7(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?e7(Object(i),!0).forEach(function(r){N5(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):e7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var jH=(e,n)=>Object.keys(e).length===Object.keys(n).length&&Object.keys(e).every(i=>n.hasOwnProperty(i)&&e[i]===n[i]),S6=(e,n)=>{var i=t7(e,GH),r=t7(n,zH);return e[Bg]===n[Bg]&&jH(i,r)},z5=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],o=n[i];if(!_t.equals(r,o)||!S6(r,o))return!1}return!0},T6=(e,n)=>{if(e===n)return!0;if(!e||!n||e.length!==n.length)return!1;for(var i=0;i<e.length;i++){var r=e[i],o=n[i];if(r.anchor.offset!==o.anchor.offset||r.focus.offset!==o.focus.offset||!S6(r,o))return!1}return!0},UH=(e,n,i)=>{var r=Array.from(n.children,()=>[]);if(i.length===0)return r;var o=Ye.findPath(e,n),a=o.length,u=j.range(e,o),c=new Array(n.children.length),h=H=>{var R=c[H];if(R)return R;var k=j.range(e,[...o,H]);return c[H]=k,k};for(var g of i){var p=_t.intersection(u,g);if(p)for(var[m,w]=_t.edges(p),x=m.path[a],T=w.path[a],D=x;D<=T;D++){var b=r[D];if(b){var B=h(D),A=_t.intersection(B,g);A&&b.push(n7(n7({},g),A))}}}return r},Yh=[],$H=function(){return Yh.some(function(e){return e.activeTargets.length>0})},VH=function(){return Yh.some(function(e){return e.skippedTargets.length>0})},i7="ResizeObserver loop completed with undelivered notifications.",WH=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:i7}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=i7),window.dispatchEvent(e)},Hm;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Hm||(Hm={}));var Kh=function(e){return Object.freeze(e)},XH=function(){function e(n,i){this.inlineSize=n,this.blockSize=i,Kh(this)}return e}(),A6=function(){function e(n,i,r,o){return this.x=n,this.y=i,this.width=r,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Kh(this)}return e.prototype.toJSON=function(){var n=this,i=n.x,r=n.y,o=n.top,a=n.right,u=n.bottom,c=n.left,h=n.width,g=n.height;return{x:i,y:r,top:o,right:a,bottom:u,left:c,width:h,height:g}},e.fromRect=function(n){return new e(n.x,n.y,n.width,n.height)},e}(),j5=function(e){return e instanceof SVGElement&&"getBBox"in e},D6=function(e){if(j5(e)){var n=e.getBBox(),i=n.width,r=n.height;return!i&&!r}var o=e,a=o.offsetWidth,u=o.offsetHeight;return!(a||u||e.getClientRects().length)},r7=function(e){var n;if(e instanceof Element)return!0;var i=(n=e==null?void 0:e.ownerDocument)===null||n===void 0?void 0:n.defaultView;return!!(i&&e instanceof i.Element)},qH=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Cm=typeof window<"u"?window:{},V2=new WeakMap,o7=/auto|scroll/,YH=/^tb|vertical/,KH=/msie|trident/i.test(Cm.navigator&&Cm.navigator.userAgent),ml=function(e){return parseFloat(e||"0")},wg=function(e,n,i){return e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=!1),new XH((i?n:e)||0,(i?e:n)||0)},s7=Kh({devicePixelContentBoxSize:wg(),borderBoxSize:wg(),contentBoxSize:wg(),contentRect:new A6(0,0,0,0)}),b6=function(e,n){if(n===void 0&&(n=!1),V2.has(e)&&!n)return V2.get(e);if(D6(e))return V2.set(e,s7),s7;var i=getComputedStyle(e),r=j5(e)&&e.ownerSVGElement&&e.getBBox(),o=!KH&&i.boxSizing==="border-box",a=YH.test(i.writingMode||""),u=!r&&o7.test(i.overflowY||""),c=!r&&o7.test(i.overflowX||""),h=r?0:ml(i.paddingTop),g=r?0:ml(i.paddingRight),p=r?0:ml(i.paddingBottom),m=r?0:ml(i.paddingLeft),w=r?0:ml(i.borderTopWidth),x=r?0:ml(i.borderRightWidth),T=r?0:ml(i.borderBottomWidth),D=r?0:ml(i.borderLeftWidth),b=m+g,B=h+p,A=D+x,H=w+T,R=c?e.offsetHeight-H-e.clientHeight:0,k=u?e.offsetWidth-A-e.clientWidth:0,W=o?b+A:0,U=o?B+H:0,nt=r?r.width:ml(i.width)-W-k,st=r?r.height:ml(i.height)-U-R,ft=nt+b+k+A,Et=st+B+R+H,ct=Kh({devicePixelContentBoxSize:wg(Math.round(nt*devicePixelRatio),Math.round(st*devicePixelRatio),a),borderBoxSize:wg(ft,Et,a),contentBoxSize:wg(nt,st,a),contentRect:new A6(m,h,nt,st)});return V2.set(e,ct),ct},B6=function(e,n,i){var r=b6(e,i),o=r.borderBoxSize,a=r.contentBoxSize,u=r.devicePixelContentBoxSize;switch(n){case Hm.DEVICE_PIXEL_CONTENT_BOX:return u;case Hm.BORDER_BOX:return o;default:return a}},ZH=function(){function e(n){var i=b6(n);this.target=n,this.contentRect=i.contentRect,this.borderBoxSize=Kh([i.borderBoxSize]),this.contentBoxSize=Kh([i.contentBoxSize]),this.devicePixelContentBoxSize=Kh([i.devicePixelContentBoxSize])}return e}(),P6=function(e){if(D6(e))return 1/0;for(var n=0,i=e.parentNode;i;)n+=1,i=i.parentNode;return n},QH=function(){var e=1/0,n=[];Yh.forEach(function(u){if(u.activeTargets.length!==0){var c=[];u.activeTargets.forEach(function(g){var p=new ZH(g.target),m=P6(g.target);c.push(p),g.lastReportedSize=B6(g.target,g.observedBox),m<e&&(e=m)}),n.push(function(){u.callback.call(u.observer,c,u.observer)}),u.activeTargets.splice(0,u.activeTargets.length)}});for(var i=0,r=n;i<r.length;i++){var o=r[i];o()}return e},a7=function(e){Yh.forEach(function(i){i.activeTargets.splice(0,i.activeTargets.length),i.skippedTargets.splice(0,i.skippedTargets.length),i.observationTargets.forEach(function(o){o.isActive()&&(P6(o.target)>e?i.activeTargets.push(o):i.skippedTargets.push(o))})})},JH=function(){var e=0;for(a7(e);$H();)e=QH(),a7(e);return VH()&&WH(),e>0},JE,M6=[],tN=function(){return M6.splice(0).forEach(function(e){return e()})},eN=function(e){if(!JE){var n=0,i=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return tN()}).observe(i,r),JE=function(){i.textContent="".concat(n?n--:n++)}}M6.push(e),JE()},nN=function(e){eN(function(){requestAnimationFrame(e)})},xw=0,iN=function(){return!!xw},rN=250,oN={attributes:!0,characterData:!0,childList:!0,subtree:!0},l7=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],u7=function(e){return e===void 0&&(e=0),Date.now()+e},t3=!1,sN=function(){function e(){var n=this;this.stopped=!0,this.listener=function(){return n.schedule()}}return e.prototype.run=function(n){var i=this;if(n===void 0&&(n=rN),!t3){t3=!0;var r=u7(n);nN(function(){var o=!1;try{o=JH()}finally{if(t3=!1,n=r-u7(),!iN())return;o?i.run(1e3):n>0?i.run(n):i.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var n=this,i=function(){return n.observer&&n.observer.observe(document.body,oN)};document.body?i():Cm.addEventListener("DOMContentLoaded",i)},e.prototype.start=function(){var n=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),l7.forEach(function(i){return Cm.addEventListener(i,n.listener,!0)}))},e.prototype.stop=function(){var n=this;this.stopped||(this.observer&&this.observer.disconnect(),l7.forEach(function(i){return Cm.removeEventListener(i,n.listener,!0)}),this.stopped=!0)},e}(),vS=new sN,c7=function(e){!xw&&e>0&&vS.start(),xw+=e,!xw&&vS.stop()},aN=function(e){return!j5(e)&&!qH(e)&&getComputedStyle(e).display==="inline"},lN=function(){function e(n,i){this.target=n,this.observedBox=i||Hm.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var n=B6(this.target,this.observedBox,!0);return aN(this.target)&&(this.lastReportedSize=n),this.lastReportedSize.inlineSize!==n.inlineSize||this.lastReportedSize.blockSize!==n.blockSize},e}(),uN=function(){function e(n,i){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=n,this.callback=i}return e}(),W2=new WeakMap,f7=function(e,n){for(var i=0;i<e.length;i+=1)if(e[i].target===n)return i;return-1},X2=function(){function e(){}return e.connect=function(n,i){var r=new uN(n,i);W2.set(n,r)},e.observe=function(n,i,r){var o=W2.get(n),a=o.observationTargets.length===0;f7(o.observationTargets,i)<0&&(a&&Yh.push(o),o.observationTargets.push(new lN(i,r&&r.box)),c7(1),vS.schedule())},e.unobserve=function(n,i){var r=W2.get(n),o=f7(r.observationTargets,i),a=r.observationTargets.length===1;o>=0&&(a&&Yh.splice(Yh.indexOf(r),1),r.observationTargets.splice(o,1),c7(-1))},e.disconnect=function(n){var i=this,r=W2.get(n);r.observationTargets.slice().forEach(function(o){return i.unobserve(n,o.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),cN=function(){function e(n){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof n!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");X2.connect(this,n)}return e.prototype.observe=function(n,i){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!r7(n))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");X2.observe(this,n,i)},e.prototype.unobserve=function(n){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!r7(n))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");X2.unobserve(this,n)},e.prototype.disconnect=function(){X2.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}(),U5=G4();const fN=hf(U5);function hN(e,n){if(e==null)return{};var i={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(n.indexOf(o)>=0)&&(i[o]=e[o]);return i}function Yw(e,n){if(e==null)return{};var i=hN(e,n),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Nm(e){"@babel/helpers - typeof";return Nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nm(e)}function dN(e,n){if(Nm(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var r=i.call(e,n);if(Nm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function gN(e){var n=dN(e,"string");return Nm(n)==="symbol"?n:String(n)}function xi(e,n,i){return n=gN(n),n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}var $5=K.createContext(null),_l=()=>{var e=K.useContext($5);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Kt=Ye;function h7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function q2(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?h7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var pN=25,mN=200,vN=function(){},yN=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function wN(e){var{editor:n,scheduleOnDOMSelectionChange:i,onDOMSelectionChange:r}=e,o=!1,a=null,u=null,c=null,h=0,g=!1,p=()=>{var ct=$c.get(n);if($c.delete(n),ct){var{selection:mt}=n,wt=qD(n,ct);wt&&(!mt||!_t.equals(wt,mt))&&jt.select(n,wt)}},m=()=>{var ct=Uc.get(n);if(Uc.delete(n),!!ct){if(ct.at){var mt=Sn.isPoint(ct.at)?pS(n,ct.at):qD(n,ct.at);if(!mt)return;var wt=j.range(n,mt);(!n.selection||!_t.equals(n.selection,wt))&&jt.select(n,mt)}ct.run()}},w=()=>{if(u&&(clearTimeout(u),u=null),c&&(clearTimeout(c),c=null),!R()&&!H()){p();return}o||(o=!0,setTimeout(()=>o=!1)),H()&&(o="action");var ct=n.selection&&j.rangeRef(n,n.selection,{affinity:"forward"});mu.set(n,n.marks),vN("flush",Uc.get(n),$o.get(n));for(var mt=R(),wt;wt=(V=$o.get(n))===null||V===void 0?void 0:V[0];){var V,P,_=ba.get(n);_!==void 0&&(ba.delete(n),n.marks=_),_&&g===!1&&(g=null);var N=RH(wt);(!n.selection||!_t.equals(n.selection,N))&&jt.select(n,N),wt.diff.text?j.insertText(n,wt.diff.text):j.deleteFragment(n),$o.set(n,(P=$o.get(n))===null||P===void 0?void 0:P.filter(F=>{var{id:J}=F;return J!==wt.id})),bH(n,wt)||(mt=!1,Uc.delete(n),mu.delete(n),o="action",$c.delete(n),i.cancel(),r.cancel(),ct==null||ct.unref())}var $=ct==null?void 0:ct.unref();if($&&!$c.get(n)&&(!n.selection||!_t.equals($,n.selection))&&jt.select(n,$),H()){m();return}mt&&i(),i.flush(),r.flush(),p();var Q=mu.get(n);mu.delete(n),Q!==void 0&&(n.marks=Q,n.onChange())},x=ct=>{a&&clearTimeout(a),a=setTimeout(()=>{Uh.set(n,!1),w()},pN)},T=ct=>{Uh.set(n,!0),a&&(clearTimeout(a),a=null)},D=function(){var mt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,wt=hS.get(n);if(wt){if(R()||mt){wt.style.display="none";return}wt.style.removeProperty("display")}},b=(ct,mt)=>{var wt,V=(wt=$o.get(n))!==null&&wt!==void 0?wt:[];$o.set(n,V);var P=te.leaf(n,ct),_=V.findIndex(Q=>ut.equals(Q.path,ct));if(_<0){var N=E6(P.text,mt);N&&V.push({path:ct,diff:mt,id:h++}),D();return}var $=MH(P.text,V[_].diff,mt);if(!$){V.splice(_,1),D();return}V[_]=q2(q2({},V[_]),{},{diff:$})},B=function(mt){var{at:wt}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};g=!1,$c.delete(n),i.cancel(),r.cancel(),H()&&w(),Uc.set(n,{at:wt,run:mt}),c=setTimeout(w)},A=ct=>{var mt;if(u&&(clearTimeout(u),u=null),!yg.get(n)){var{inputType:wt}=ct,V=null,P=ct.dataTransfer||ct.data||void 0;g!==!1&&wt!=="insertText"&&wt!=="insertCompositionText"&&(g=!1);var[_]=ct.getTargetRanges();_&&(V=Kt.toSlateRange(n,_,{exactMatch:!1,suppressThrow:!0}));var N=Kt.getWindow(n),$=N.getSelection();if(!V&&$&&(_=$,V=Kt.toSlateRange(n,$,{exactMatch:!1,suppressThrow:!0})),V=(mt=V)!==null&&mt!==void 0?mt:n.selection,!!V){var Q=!0;if(wt.startsWith("delete")){if(_t.isExpanded(V)){var[F,J]=_t.edges(V),tt=te.leaf(n,F.path);if(tt.text.length===F.offset&&J.offset===0){var it=j.next(n,{at:F.path,match:se.isText});it&&ut.equals(it[1],J.path)&&(V={anchor:J,focus:J})}}var xt=wt.endsWith("Backward")?"backward":"forward",[gt,Lt]=_t.edges(V),[$t,ot]=j.leaf(n,gt.path),Pt={text:"",start:gt.offset,end:Lt.offset},Rt=$o.get(n),It=Rt==null?void 0:Rt.find(An=>ut.equals(An.path,ot)),he=It?[It.diff,Pt]:[Pt],Nt=C6($t.text,...he);if(Nt.length===0&&(Q=!1),_t.isExpanded(V)){if(Q&&ut.equals(V.anchor.path,V.focus.path)){var ge={path:V.anchor.path,offset:gt.offset},ae=j.range(n,ge,ge);return U(ae),b(V.anchor.path,{text:"",end:Lt.offset,start:gt.offset})}return B(()=>j.deleteFragment(n,{direction:xt}),{at:V})}}switch(wt){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return B(()=>j.deleteFragment(n),{at:V});case"deleteContent":case"deleteContentForward":{var{anchor:ee}=V;if(Q&&_t.isCollapsed(V)){var xe=te.leaf(n,ee.path);if(ee.offset<xe.text.length)return b(ee.path,{text:"",start:ee.offset,end:ee.offset+1})}return B(()=>j.deleteForward(n),{at:V})}case"deleteContentBackward":{var le,{anchor:Re}=V,ve=fS(_)?_.isCollapsed:!!((le=_)!==null&&le!==void 0&&le.collapsed);return Q&&ve&&_t.isCollapsed(V)&&Re.offset>0?b(Re.path,{text:"",start:Re.offset-1,end:Re.offset}):B(()=>j.deleteBackward(n),{at:V})}case"deleteEntireSoftLine":return B(()=>{j.deleteBackward(n,{unit:"line"}),j.deleteForward(n,{unit:"line"})},{at:V});case"deleteHardLineBackward":return B(()=>j.deleteBackward(n,{unit:"block"}),{at:V});case"deleteSoftLineBackward":return B(()=>j.deleteBackward(n,{unit:"line"}),{at:V});case"deleteHardLineForward":return B(()=>j.deleteForward(n,{unit:"block"}),{at:V});case"deleteSoftLineForward":return B(()=>j.deleteForward(n,{unit:"line"}),{at:V});case"deleteWordBackward":return B(()=>j.deleteBackward(n,{unit:"word"}),{at:V});case"deleteWordForward":return B(()=>j.deleteForward(n,{unit:"word"}),{at:V});case"insertLineBreak":return B(()=>j.insertSoftBreak(n),{at:V});case"insertParagraph":return B(()=>j.insertBreak(n),{at:V});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(yN(P))return B(()=>Kt.insertData(n,P),{at:V});var Qe=P??"";if(ba.get(n)&&(Qe=Qe.replace("\uFEFF","")),wt==="insertText"&&/.*\n.*\n$/.test(Qe)&&(Qe=Qe.slice(0,-1)),Qe.includes(`
`))return B(()=>{var An=Qe.split(`
`);An.forEach((Wn,Zr)=>{Wn&&j.insertText(n,Wn),Zr!==An.length-1&&j.insertSoftBreak(n)})},{at:V});if(ut.equals(V.anchor.path,V.focus.path)){var[ti,Fn]=_t.edges(V),Kn={start:ti.offset,end:Fn.offset,text:Qe};if(Qe&&g&&wt==="insertCompositionText"){var Br=g.start+g.text.search(/\S|$/),ji=Kn.start+Kn.text.search(/\S|$/);ji===Br+1&&Kn.end===g.start+g.text.length?(Kn.start-=1,g=null,ft()):g=!1}else wt==="insertText"?g===null?g=Kn:g&&_t.isCollapsed(V)&&g.end+g.text.length===ti.offset?g=q2(q2({},g),{},{text:g.text+Qe}):g=!1:g=!1;if(Q){b(ti.path,Kn);return}}return B(()=>j.insertText(n,Qe),{at:V})}}}}},H=()=>!!Uc.get(n),R=()=>{var ct;return!!((ct=$o.get(n))!==null&&ct!==void 0&&ct.length)},k=()=>H()||R(),W=()=>o,U=ct=>{$c.set(n,ct),u&&(clearTimeout(u),u=null);var{selection:mt}=n;if(ct){var wt=!mt||!ut.equals(mt.anchor.path,ct.anchor.path),V=!mt||!ut.equals(mt.anchor.path.slice(0,-1),ct.anchor.path.slice(0,-1));(wt&&g||V)&&(g=!1),(wt||R())&&(u=setTimeout(w,mN))}},nt=()=>{(H()||!R())&&w()},st=ct=>{R()||(D(!0),setTimeout(D))},ft=()=>{H()||(c=setTimeout(w))},Et=ct=>{if(!(R()||H())&&ct.some(wt=>H5(n,wt,ct))){var mt;(mt=w6.get(n))===null||mt===void 0||mt()}};return{flush:w,scheduleFlush:ft,hasPendingDiffs:R,hasPendingAction:H,hasPendingChanges:k,isFlushing:W,handleUserSelect:U,handleCompositionEnd:x,handleCompositionStart:T,handleDOMBeforeInput:A,handleKeyDown:st,handleDomMutations:Et,handleInput:nt}}function xN(){var e=K.useRef(!1);return K.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var bu=yw?K.useLayoutEffect:K.useEffect;function CN(e,n,i){var[r]=K.useState(()=>new MutationObserver(n));bu(()=>{r.takeRecords()}),K.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,i),()=>r.disconnect()},[r,e,i])}var EN=["node"];function d7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function SN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?d7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var TN={subtree:!0,childList:!0,characterData:!0},AN=Eo?e=>{var{node:n}=e,i=Yw(e,EN);if(!Eo)return null;var r=_l(),o=xN(),[a]=K.useState(()=>wN(SN({editor:r},i)));return CN(n,a.handleDomMutations,TN),G5.set(r,a.scheduleFlush),o&&a.flush(),a}:()=>null;function g7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function DN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?g7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var bN=e=>{var{isLast:n,leaf:i,parent:r,text:o}=e,a=_l(),u=Kt.findPath(a,o),c=ut.parent(u),h=!!i[x6];return a.isVoid(r)?Ae.createElement(e3,{length:te.string(r).length}):i.text===""&&r.children[r.children.length-1]===o&&!a.isInline(r)&&j.string(a,c)===""?Ae.createElement(e3,{isLineBreak:!0,isMarkPlaceholder:h}):i.text===""?Ae.createElement(e3,{isMarkPlaceholder:h}):n&&i.text.slice(-1)===`
`?Ae.createElement(p7,{isTrailing:!0,text:i.text}):Ae.createElement(p7,{text:i.text})},p7=e=>{var{text:n,isTrailing:i=!1}=e,r=K.useRef(null),o=()=>"".concat(n??"").concat(i?`
`:""),[a]=K.useState(o);return bu(()=>{var u=o();r.current&&r.current.textContent!==u&&(r.current.textContent=u)}),Ae.createElement(BN,{ref:r},a)},BN=K.memo(K.forwardRef((e,n)=>Ae.createElement("span",{"data-slate-string":!0,ref:n},e.children))),e3=e=>{var{length:n=0,isLineBreak:i=!1,isMarkPlaceholder:r=!1}=e,o={"data-slate-zero-width":i?"n":"z","data-slate-length":n};return r&&(o["data-slate-mark-placeholder"]=!0),Ae.createElement("span",DN({},o),!Eo||!i?"\uFEFF":null,i?Ae.createElement("br",null):null)};function m7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function R6(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?m7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var PN=Eo?300:0;function MN(e,n){e.current&&(e.current.disconnect(),n&&(e.current=null))}function v7(e){e.current&&(clearTimeout(e.current),e.current=null)}var RN=e=>Ae.createElement(_N,R6({},e)),ON=e=>{var{leaf:n,isLast:i,text:r,parent:o,renderPlaceholder:a,renderLeaf:u=RN,leafPosition:c}=e,h=_l(),g=K.useRef(null),p=K.useRef(null),[m,w]=K.useState(!1),x=K.useRef(null),T=K.useCallback(H=>{if(MN(g,H==null),H==null){var R;hS.delete(h),(R=n.onPlaceholderResize)===null||R===void 0||R.call(n,null)}else{if(hS.set(h,H),!g.current){var k=window.ResizeObserver||cN;g.current=new k(()=>{var W;(W=n.onPlaceholderResize)===null||W===void 0||W.call(n,H)})}g.current.observe(H),p.current=H}},[p,n,h]),D=Ae.createElement(bN,{isLast:i,leaf:n,parent:o,text:r}),b=!!n[Bg];if(K.useEffect(()=>(b?x.current||(x.current=setTimeout(()=>{w(!0),x.current=null},PN)):(v7(x),w(!1)),()=>v7(x)),[b,w]),b&&m){var B={children:n.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Nh?"inherit":void 0},contentEditable:!1,ref:T}};D=Ae.createElement(Ae.Fragment,null,D,a(B))}var A={"data-slate-leaf":!0};return u({attributes:A,children:D,leaf:n,text:r,leafPosition:c})},LN=Ae.memo(ON,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&se.equals(n.leaf,e.leaf)&&n.leaf[Bg]===e.leaf[Bg]),_N=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",R6({},n),i)};function FN(e,n){var[,i]=K.useReducer(g=>g+1,0),r=K.useRef(),o=K.useRef(()=>null),a=K.useRef(null),u;try{if(e!==o.current||r.current){var c=e();n(a.current,c)?u=a.current:u=c}else u=a.current}catch(g){throw r.current&&kN(g)&&(g.message+=`
The error may be correlated with this previous error:
`.concat(r.current.stack,`

`)),g}o.current=e,a.current=u,r.current=void 0;var h=K.useCallback(()=>{try{var g=o.current();if(n(a.current,g))return;a.current=g}catch(p){p instanceof Error?r.current=p:r.current=new Error(String(p))}i()},[]);return[u,h]}function kN(e){return e instanceof Error}var O6=K.createContext({}),L6=(e,n)=>{var i=_l(),{decorate:r,addEventListener:o}=K.useContext(O6),a=()=>{var g=Kt.findPath(i,e);return r([e,g])},u=se.isText(e)?T6:z5,[c,h]=FN(a,u);return bu(()=>{var g=o(h);return h(),g},[o,h]),K.useMemo(()=>[...c,...n],[c,n])},IN=e=>{var n=K.useRef(new Set),i=K.useRef(e);bu(()=>{i.current=e,n.current.forEach(a=>a())},[e]);var r=K.useCallback(a=>i.current(a),[]),o=K.useCallback(a=>(n.current.add(a),()=>{n.current.delete(a)}),[]);return K.useMemo(()=>({decorate:r,addEventListener:o}),[r,o])};function y7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function _6(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?y7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var HN=e=>Ae.createElement(GN,_6({},e)),NN=e=>{for(var{decorations:n,isLast:i,parent:r,renderPlaceholder:o,renderLeaf:a,renderText:u=HN,text:c}=e,h=_l(),g=K.useRef(null),p=L6(c,n),m=se.decorations(c,p),w=Kt.findKey(h,c),x=[],T=0;T<m.length;T++){var{leaf:D,position:b}=m[T];x.push(Ae.createElement(LN,{isLast:i&&T===m.length-1,key:"".concat(w.id,"-").concat(T),renderPlaceholder:o,leaf:D,leafPosition:b,text:c,parent:r,renderLeaf:a}))}var B=K.useCallback(H=>{var R=$x.get(h);H?(R==null||R.set(w,H),qh.set(c,H),Im.set(H,c)):(R==null||R.delete(w),qh.delete(c),g.current&&Im.delete(g.current)),g.current=H},[g,h,w,c]),A={"data-slate-node":"text",ref:B};return u({text:c,children:x,attributes:A})},F6=Ae.memo(NN,(e,n)=>n.parent===e.parent&&n.isLast===e.isLast&&n.renderText===e.renderText&&n.renderLeaf===e.renderLeaf&&n.renderPlaceholder===e.renderPlaceholder&&n.text===e.text&&T6(n.decorations,e.decorations)),GN=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",_6({},n),i)};function w7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function yS(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?w7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var zN=e=>Ae.createElement($N,yS({},e)),jN=e=>{var{decorations:n,element:i,renderElement:r=zN,renderChunk:o,renderPlaceholder:a,renderLeaf:u,renderText:c}=e,h=_l(),g=tG(),p=h.isInline(i),m=L6(i,n),w=Kt.findKey(h,i),x=K.useCallback(R=>{var k=$x.get(h);R?(k==null||k.set(w,R),qh.set(i,R),Im.set(R,i)):(k==null||k.delete(w),qh.delete(i))},[h,w,i]),T=H6({decorations:m,node:i,renderElement:r,renderChunk:o,renderPlaceholder:a,renderLeaf:u,renderText:c}),D={"data-slate-node":"element",ref:x};if(p&&(D["data-slate-inline"]=!0),!p&&j.hasInlines(h,i)){var b=te.string(i),B=f6(b);B==="rtl"&&(D.dir=B)}if(j.isVoid(h,i)){D["data-slate-void"]=!0,!g&&p&&(D.contentEditable=!1);var A=p?"span":"div",[[H]]=te.texts(i);T=Ae.createElement(A,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},Ae.createElement(F6,{renderPlaceholder:a,decorations:[],isLast:!1,parent:i,text:H})),fg.set(H,0),wm.set(H,i)}return r({attributes:D,children:T,element:i})},UN=Ae.memo(jN,(e,n)=>e.element===n.element&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&e.renderText===n.renderText&&e.renderLeaf===n.renderLeaf&&e.renderPlaceholder===n.renderPlaceholder&&z5(e.decorations,n.decorations)),$N=e=>{var{attributes:n,children:i,element:r}=e,o=_l(),a=o.isInline(r)?"span":"div";return Ae.createElement(a,yS(yS({},n),{},{style:{position:"relative"}}),i)};class VN{constructor(n,i){var{chunkSize:r,debug:o}=i;xi(this,"root",void 0),xi(this,"chunkSize",void 0),xi(this,"debug",void 0),xi(this,"reachedEnd",void 0),xi(this,"pointerChunk",void 0),xi(this,"pointerIndex",void 0),xi(this,"pointerIndexStack",void 0),xi(this,"cachedPointerNode",void 0),this.root=n,this.chunkSize=r,this.debug=o??!1,this.pointerChunk=n,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.validateState()}readLeaf(){if(this.reachedEnd)return null;for(;;)if(this.pointerIndex+1<this.pointerSiblings.length){this.pointerIndex++,this.cachedPointerNode=void 0;break}else{if(this.pointerChunk.type==="root")return this.reachedEnd=!0,null;this.exitChunk()}return this.validateState(),this.enterChunkUntilLeaf(!1),this.pointerNode}returnToPreviousLeaf(){if(this.reachedEnd){this.reachedEnd=!1,this.enterChunkUntilLeaf(!0);return}for(;;)if(this.pointerIndex>=1){this.pointerIndex--,this.cachedPointerNode=void 0;break}else if(this.pointerChunk.type==="root"){this.pointerIndex=-1;return}else this.exitChunk();this.validateState(),this.enterChunkUntilLeaf(!0)}insertBefore(n){this.returnToPreviousLeaf(),this.insertAfter(n),this.readLeaf()}insertAfter(n){if(n.length!==0){for(var i=0,r=0;this.pointerChunk.type==="chunk"&&this.pointerIndex===this.pointerSiblings.length-1;){var o=this.chunkSize-this.pointerSiblings.length,a=Math.min(o,n.length);if(a>0){var u=n.splice(0,a);this.rawInsertAfter(u,i)}this.exitChunk(),i++}if(n.length!==0){var c=this.savePointer(),h=null;if(this.readLeaf())for(;this.pointerChunk.type==="chunk"&&this.pointerIndex===0;){var g=this.chunkSize-this.pointerSiblings.length,p=Math.min(g,n.length);if(p>0){var m=n.splice(-p,p);this.pointerIndex=-1,this.cachedPointerNode=void 0,this.rawInsertAfter(m,r),h||(h=this.savePointer())}this.exitChunk(),r++}this.restorePointer(c);var w=Math.max(i,r);this.rawInsertAfter(n,w),h&&this.restorePointer(h),this.validateState()}}}remove(){this.pointerSiblings.splice(this.pointerIndex--,1),this.cachedPointerNode=void 0,this.pointerSiblings.length===0&&this.pointerChunk.type==="chunk"?(this.exitChunk(),this.remove()):this.invalidateChunk(),this.validateState()}invalidateChunk(){for(var n=this.pointerChunk;n.type==="chunk";n=n.parent)this.root.modifiedChunks.add(n)}get atStart(){return this.pointerChunk.type==="root"&&this.pointerIndex===-1}get pointerSiblings(){return this.pointerChunk.children}getPointerNode(){return this.reachedEnd||this.pointerIndex===-1?null:this.pointerSiblings[this.pointerIndex]}get pointerNode(){if(this.cachedPointerNode!==void 0)return this.cachedPointerNode;var n=this.getPointerNode();return this.cachedPointerNode=n,n}getChunkPath(n){for(var i=[],r=n;r.type==="chunk";r=r.parent){var o=r.parent.children.indexOf(r);if(o===-1)return null;i.unshift(o)}return i}savePointer(){if(this.atStart)return"start";if(!this.pointerNode)throw new Error("Cannot save pointer when pointerNode is null");return{chunk:this.pointerChunk,node:this.pointerNode}}restorePointer(n){if(n==="start"){this.pointerChunk=this.root,this.pointerIndex=-1,this.pointerIndexStack=[],this.reachedEnd=!1,this.cachedPointerNode=void 0;return}var{chunk:i,node:r}=n,o=i.children.indexOf(r);if(o===-1)throw new Error("Cannot restore point because saved node is no longer in saved chunk");var a=this.getChunkPath(i);if(!a)throw new Error("Cannot restore point because saved chunk is no longer connected to root");this.pointerChunk=i,this.pointerIndex=o,this.pointerIndexStack=a,this.reachedEnd=!1,this.cachedPointerNode=r,this.validateState()}enterChunk(n){var i;if(((i=this.pointerNode)===null||i===void 0?void 0:i.type)!=="chunk")throw new Error("Cannot enter non-chunk");if(this.pointerIndexStack.push(this.pointerIndex),this.pointerChunk=this.pointerNode,this.pointerIndex=n?this.pointerSiblings.length-1:0,this.cachedPointerNode=void 0,this.validateState(),this.pointerChunk.children.length===0)throw new Error("Cannot enter empty chunk")}enterChunkUntilLeaf(n){for(;((i=this.pointerNode)===null||i===void 0?void 0:i.type)==="chunk";){var i;this.enterChunk(n)}}exitChunk(){if(this.pointerChunk.type==="root")throw new Error("Cannot exit root");var n=this.pointerChunk;this.pointerChunk=n.parent,this.pointerIndex=this.pointerIndexStack.pop(),this.cachedPointerNode=void 0,this.validateState()}rawInsertAfter(n,i){if(n.length!==0){for(var r=(p,m,w)=>{if(w===1)return p;for(var x=[],T=0;T<this.chunkSize;T++){var D=p.slice(T*w,(T+1)*w);if(D.length===0)break;var b={type:"chunk",key:new v6,parent:m,children:[]};b.children=r(D,b,w/this.chunkSize),x.push(b)}return x},o=this.pointerSiblings.length+n.length,a=0,u=this.chunkSize;u<o;u*=this.chunkSize)a++;var c=Math.max(a,i),h=Math.pow(this.chunkSize,c),g=r(n,this.pointerChunk,h);this.pointerSiblings.splice(this.pointerIndex+1,0,...g),this.pointerIndex+=g.length,this.cachedPointerNode=void 0,this.invalidateChunk(),this.validateState()}}validateState(){if(this.debug){var n=r=>{if(r.type==="chunk"){var{parent:o,children:a}=r;if(!o.children.includes(r))throw new Error("Debug: Chunk ".concat(r.key.id," has an incorrect parent property"));a.forEach(n)}};if(this.root.children.forEach(n),this.cachedPointerNode!==void 0&&this.cachedPointerNode!==this.getPointerNode())throw new Error("Debug: The cached pointer is incorrect and has not been invalidated");var i=this.getChunkPath(this.pointerChunk);if(!i)throw new Error("Debug: The pointer chunk is not connected to the root");if(!ut.equals(this.pointerIndexStack,i))throw new Error("Debug: The cached index stack [".concat(this.pointerIndexStack.join(", "),"] does not match the path of the pointer chunk [").concat(i.join(", "),"]"))}}}class WN{constructor(n,i){xi(this,"editor",void 0),xi(this,"children",void 0),xi(this,"cachedKeys",void 0),xi(this,"pointerIndex",void 0),this.editor=n,this.children=i,this.cachedKeys=new Array(i.length),this.pointerIndex=0}read(n){if(n===1)return[this.children[this.pointerIndex++]];var i=this.remaining(n);return this.pointerIndex+=n,i}remaining(n){return n===void 0?this.children.slice(this.pointerIndex):this.children.slice(this.pointerIndex,this.pointerIndex+n)}get reachedEnd(){return this.pointerIndex>=this.children.length}lookAhead(n,i){var r=this.children.indexOf(n,this.pointerIndex);if(r>-1)return r-this.pointerIndex;for(var o=this.pointerIndex;o<this.children.length;o++){var a=this.children[o],u=this.findKey(a,o);if(u===i)return o-this.pointerIndex}return-1}toChunkLeaves(n,i){return n.map((r,o)=>({type:"leaf",node:r,key:this.findKey(r,i+o),index:i+o}))}findKey(n,i){var r=this.cachedKeys[i];if(r)return r;var o=Kt.findKey(this.editor,n);return this.cachedKeys[i]=o,o}}var XN=(e,n)=>{var{chunkTree:i,children:r,chunkSize:o,rerenderChildren:a=[],onInsert:u,onUpdate:c,onIndexChange:h,debug:g}=n;i.modifiedChunks.clear();for(var p=new VN(i,{chunkSize:o,debug:g}),m=new WN(e,r),w,x=function(){var B=m.lookAhead(w.node,w.key),A=B>0&&i.movedNodeKeys.has(w.key);if(B===-1||A)return p.remove(),1;var H=m.pointerIndex,R=m.read(B+1),k=R.pop();if(R.length){var W=m.toChunkLeaves(R,H);p.insertBefore(W),R.forEach((nt,st)=>{u==null||u(nt,H+st)})}var U=m.pointerIndex-1;w.node!==k&&(w.node=k,p.invalidateChunk(),c==null||c(k,U)),w.index!==U&&(w.index=U,h==null||h(k,U)),a.includes(U)&&p.invalidateChunk()};w=p.readLeaf();)x();if(!m.reachedEnd){var T=m.remaining(),D=m.toChunkLeaves(T,m.pointerIndex);p.returnToPreviousLeaf(),p.insertAfter(D),T.forEach((b,B)=>{u==null||u(b,m.pointerIndex+B)})}i.movedNodeKeys.clear()};function x7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function qN(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?x7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var C7=new WeakMap,k6=function(n,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=Kt.findKey(n,i),a=C7.get(o);return a||(a={type:"root",movedNodeKeys:new Set,modifiedChunks:new Set,children:[]},C7.set(o,a)),r.reconcile&&XN(n,qN({chunkTree:a,children:i.children},r.reconcile)),a},YN=e=>{var{children:n}=e;return n},I6=e=>{var{root:n,ancestor:i,renderElement:r,renderChunk:o=YN}=e;return i.children.map(a=>{if(a.type==="chunk"){var u=a.key.id,c=o({highest:i===n,lowest:a.children.some(g=>g.type==="leaf"),attributes:{"data-slate-chunk":!0},children:Ae.createElement(ZN,{root:n,ancestor:a,renderElement:r,renderChunk:o})});return Ae.createElement(K.Fragment,{key:u},c)}var h=a.node;return r(h,a.index,a.key)})},KN=I6,ZN=Ae.memo(I6,(e,n)=>e.root===n.root&&e.renderElement===n.renderElement&&e.renderChunk===n.renderChunk&&!n.root.modifiedChunks.has(n.ancestor)),QN=K.createContext(null),H6=e=>{var{decorations:n,node:i,renderElement:r,renderChunk:o,renderPlaceholder:a,renderText:u,renderLeaf:c}=e,h=_l();yg.set(h,!1);var g=j.isEditor(i),p=!g&&fe.isElement(i)&&!h.isInline(i),m=p&&j.hasInlines(h,i),w=m?null:h.getChunkSize(i),x=!!w,{decorationsByChild:T,childrenToRedecorate:D}=JN(h,i,n);x||i.children.forEach((H,R)=>{fg.set(H,R),wm.set(H,i)});var b=K.useCallback((H,R,k)=>{var W=k??Kt.findKey(h,H);return Ae.createElement(QN.Provider,{key:"provider-".concat(W.id),value:H},Ae.createElement(UN,{decorations:T[R],element:H,key:W.id,renderElement:r,renderChunk:o,renderPlaceholder:a,renderLeaf:c,renderText:u}))},[h,T,r,o,a,c,u]),B=(H,R)=>{var k=Kt.findKey(h,H);return Ae.createElement(F6,{decorations:T[R],key:k.id,isLast:R===i.children.length-1,parent:i,renderPlaceholder:a,renderLeaf:c,renderText:u,text:H})};if(!x)return i.children.map((H,R)=>se.isText(H)?B(H,R):b(H,R));var A=k6(h,i,{reconcile:{chunkSize:w,rerenderChildren:D,onInsert:(H,R)=>{fg.set(H,R),wm.set(H,i)},onUpdate:(H,R)=>{fg.set(H,R),wm.set(H,i)},onIndexChange:(H,R)=>{fg.set(H,R)}}});return Ae.createElement(KN,{root:A,ancestor:A,renderElement:b,renderChunk:o})},JN=(e,n,i)=>{var r=UH(e,n,i),o=K.useRef(r).current,a=[];o.length=r.length;for(var u=0;u<r.length;u++){var c,h=r[u],g=(c=o[u])!==null&&c!==void 0?c:null;z5(g,h)||(o[u]=h,a.push(u))}return{decorationsByChild:o,childrenToRedecorate:a}},N6=K.createContext(!1),tG=()=>K.useContext(N6),V5=K.createContext({});function eG(){var e=K.useRef(new Set),n=K.useRef(new Set),i=K.useCallback(()=>{e.current.forEach(u=>u())},[]),r=K.useCallback(()=>{n.current.forEach(u=>u()),n.current.clear()},[]),o=K.useCallback(function(u){var{deferred:c=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=c?()=>n.current.add(u):u;return e.current.add(h),()=>{e.current.delete(h)}},[]),a=K.useMemo(()=>({addEventListener:o,flushDeferred:r}),[o,r]);return{selectorContext:a,onChange:i}}function nG(){var{flushDeferred:e}=K.useContext(V5);bu(e)}var iG=()=>{var{addEventListener:e}=K.useContext(V5),[,n]=K.useReducer(i=>i+1,0);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return bu(()=>e(n),[e]),_l()};function rG(){var e=_l(),n=K.useRef(!1),i=K.useRef(0),r=K.useCallback(()=>{if(!n.current){n.current=!0;var o=Kt.getWindow(e);o.cancelAnimationFrame(i.current),i.current=o.requestAnimationFrame(()=>{n.current=!1})}},[e]);return K.useEffect(()=>()=>cancelAnimationFrame(i.current),[]),{receivedUserInput:n,onUserInput:r}}var oG=(e,n)=>{var i=[],r=()=>{i=[]},o=u=>{if(n.current){var c=u.filter(h=>H5(e,h,u));i.push(...c)}};function a(){i.length>0&&(i.reverse().forEach(u=>{u.type!=="characterData"&&(u.removedNodes.forEach(c=>{u.target.insertBefore(c,u.nextSibling)}),u.addedNodes.forEach(c=>{u.target.removeChild(c)}))}),r())}return{registerMutations:o,restoreDOM:a,clear:r}},sG={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class G6 extends K.Component{constructor(){super(...arguments),xi(this,"context",null),xi(this,"manager",null),xi(this,"mutationObserver",null)}observe(){var n,{node:i}=this.props;if(!i.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(n=this.mutationObserver)===null||n===void 0||n.observe(i.current,sG)}componentDidMount(){var{receivedUserInput:n}=this.props,i=this.context;this.manager=oG(i,n),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var n,i,r,o=(n=this.mutationObserver)===null||n===void 0?void 0:n.takeRecords();if(o!=null&&o.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(o)}return(i=this.mutationObserver)===null||i===void 0||i.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var n;(n=this.manager)===null||n===void 0||n.clear(),this.observe()}componentWillUnmount(){var n;(n=this.mutationObserver)===null||n===void 0||n.disconnect()}render(){return this.props.children}}xi(G6,"contextType",$5);var aG=Eo?G6:e=>{var{children:n}=e;return Ae.createElement(Ae.Fragment,null,n)},lG=K.createContext(!1),uG=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderChunk","renderLeaf","renderText","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],cG=["text"];function E7(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,r)}return i}function wl(e){for(var n=1;n<arguments.length;n++){var i=arguments[n]!=null?arguments[n]:{};n%2?E7(Object(i),!0).forEach(function(r){xi(e,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E7(Object(i)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(i,r))})}return e}var fG=e=>Ae.createElement(Ae.Fragment,null,H6(e)),hG=K.forwardRef((e,n)=>{var i=K.useCallback(ot=>Ae.createElement(dG,wl({},ot)),[]),{autoFocus:r,decorate:o=gG,onDOMBeforeInput:a,placeholder:u,readOnly:c=!1,renderElement:h,renderChunk:g,renderLeaf:p,renderText:m,renderPlaceholder:w=i,scrollSelectionIntoView:x=pG,style:T={},as:D="div",disableDefaultStyles:b=!1}=e,B=Yw(e,uG),A=iG(),[H,R]=K.useState(!1),k=K.useRef(null),W=K.useRef([]),[U,nt]=K.useState(),st=K.useRef(!1),{onUserInput:ft,receivedUserInput:Et}=rG(),[,ct]=K.useReducer(ot=>ot+1,0);w6.set(A,ct),dS.set(A,c);var mt=K.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);K.useEffect(()=>{k.current&&r&&k.current.focus()},[r]);var wt=K.useRef(),V=K.useMemo(()=>MF(()=>{if(yg.get(A)){V();return}var ot=Kt.toDOMNode(A,A),Pt=ot.getRootNode();if(!st.current&&Nh&&Pt instanceof ShadowRoot){st.current=!0;var Rt=pH();Rt?document.execCommand("indent"):jt.deselect(A),st.current=!1;return}var It=wt.current;if((Eo||!Kt.isComposing(A))&&(!mt.isUpdatingSelection||It!=null&&It.isFlushing())&&!mt.isDraggingInternally){var he=Kt.findDocumentOrShadowRoot(A),{activeElement:Nt}=he,ge=Kt.toDOMNode(A,A),ae=ym(he);if(Nt===ge?(mt.latestElement=Nt,Xc.set(A,!0)):Xc.delete(A),!ae)return jt.deselect(A);var{anchorNode:ee,focusNode:xe}=ae,le=Kt.hasEditableTarget(A,ee)||Kt.isTargetInsideNonReadonlyVoid(A,ee),Re=Kt.hasTarget(A,xe);if(le&&Re){var ve=Kt.toSlateRange(A,ae,{exactMatch:!1,suppressThrow:!0});ve&&(!Kt.isComposing(A)&&!(It!=null&&It.hasPendingChanges())&&!(It!=null&&It.isFlushing())?jt.select(A,ve):It==null||It.handleUserSelect(ve))}c&&(!le||!Re)&&jt.deselect(A)}},100),[A,c,mt]),P=K.useMemo(()=>DF(V,0),[V]);wt.current=AN({node:k,onDOMSelectionChange:V,scheduleOnDOMSelectionChange:P}),bu(()=>{var ot,Pt,Rt;k.current&&(Rt=I5(k.current))?(y6.set(A,Rt),ww.set(A,k.current),qh.set(A,k.current),Im.set(k.current,A)):qh.delete(A);var{selection:It}=A,he=Kt.findDocumentOrShadowRoot(A),Nt=ym(he);if(!(!Nt||!Kt.isFocused(A)||(ot=wt.current)!==null&&ot!==void 0&&ot.hasPendingAction())){var ge=le=>{var Re=Nt.type!=="None";if(!(!It&&!Re)){var ve=Nt.focusNode,Qe;if(cg&&Nt.rangeCount>1){var ti=Nt.getRangeAt(0),Fn=Nt.getRangeAt(Nt.rangeCount-1);ti.startContainer===ve?Qe=Fn.endContainer:Qe=ti.startContainer}else Qe=Nt.anchorNode;var Kn=ww.get(A),Br=!1;if(Kn.contains(Qe)&&Kn.contains(ve)&&(Br=!0),Re&&Br&&It&&!le){var ji=Kt.toSlateRange(A,Nt,{exactMatch:!0,suppressThrow:!0});if(ji&&_t.equals(ji,It)){var An;if(!mt.hasMarkPlaceholder||(An=Qe)!==null&&An!==void 0&&(An=An.parentElement)!==null&&An!==void 0&&An.hasAttribute("data-slate-mark-placeholder"))return}}if(It&&!Kt.hasRange(A,It)){A.selection=Kt.toSlateRange(A,Nt,{exactMatch:!1,suppressThrow:!0});return}mt.isUpdatingSelection=!0;var Wn=null;try{Wn=It&&Kt.toDOMRange(A,It)}catch{}return Wn?(Kt.isComposing(A)&&!Eo?Nt.collapseToEnd():_t.isBackward(It)?Nt.setBaseAndExtent(Wn.endContainer,Wn.endOffset,Wn.startContainer,Wn.startOffset):Nt.setBaseAndExtent(Wn.startContainer,Wn.startOffset,Wn.endContainer,Wn.endOffset),x(A,Wn)):Nt.removeAllRanges(),Wn}};Nt.rangeCount<=1&&ge();var ae=((Pt=wt.current)===null||Pt===void 0?void 0:Pt.isFlushing())==="action";if(!Eo||!ae){setTimeout(()=>{mt.isUpdatingSelection=!1});return}var ee=null,xe=requestAnimationFrame(()=>{if(ae){var le=Re=>{try{var ve=Kt.toDOMNode(A,A);ve.focus(),ge(Re)}catch{}};le(),ee=setTimeout(()=>{le(!0),mt.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(xe),ee&&clearTimeout(ee)}}});var _=K.useCallback(ot=>{T7(A,ot);var Pt=Kt.toDOMNode(A,A),Rt=Pt.getRootNode();if(st!=null&&st.current&&Nh&&Rt instanceof ShadowRoot){var It=ot.getTargetRanges(),he=It[0],Nt=new window.Range;Nt.setStart(he.startContainer,he.startOffset),Nt.setEnd(he.endContainer,he.endOffset);var ge=Kt.toSlateRange(A,Nt,{exactMatch:!1,suppressThrow:!1});jt.select(A,ge),ot.preventDefault(),ot.stopImmediatePropagation();return}if(ft(),!c&&Kt.hasEditableTarget(A,ot.target)&&!mG(ot,a)){var ae;if(wt.current)return wt.current.handleDOMBeforeInput(ot);P.flush(),V.flush();var{selection:ee}=A,{inputType:xe}=ot,le=ot.dataTransfer||ot.data||void 0,Re=xe==="insertCompositionText"||xe==="deleteCompositionText";if(Re&&Kt.isComposing(A))return;var ve=!1;if(xe==="insertText"&&ee&&_t.isCollapsed(ee)&&ot.data&&ot.data.length===1&&/[a-z ]/i.test(ot.data)&&ee.anchor.offset!==0&&(ve=!0,A.marks&&(ve=!1),!yg.get(A))){var Qe,ti,{anchor:Fn}=ee,[Kn,Br]=Kt.toDOMPoint(A,Fn),ji=(Qe=Kn.parentElement)===null||Qe===void 0?void 0:Qe.closest("a"),An=Kt.getWindow(A);if(ve&&ji&&Kt.hasDOMNode(A,ji)){var Wn,Zr=An==null?void 0:An.document.createTreeWalker(ji,NodeFilter.SHOW_TEXT).lastChild();Zr===Kn&&((Wn=Zr.textContent)===null||Wn===void 0?void 0:Wn.length)===Br&&(ve=!1)}if(ve&&Kn.parentElement&&(An==null||(ti=An.getComputedStyle(Kn.parentElement))===null||ti===void 0?void 0:ti.whiteSpace)==="pre"){var Js=j.above(A,{at:Fn.path,match:Ps=>fe.isElement(Ps)&&j.isBlock(A,Ps)});Js&&te.string(Js[0]).includes("	")&&(ve=!1)}}if((!xe.startsWith("delete")||xe.startsWith("deleteBy"))&&!yg.get(A)){var[ta]=ot.getTargetRanges();if(ta){var Qr=Kt.toSlateRange(A,ta,{exactMatch:!1,suppressThrow:!1});if(!ee||!_t.equals(ee,Qr)){ve=!1;var di=!Re&&A.selection&&j.rangeRef(A,A.selection);jt.select(A,Qr),di&&xm.set(A,di)}}}if(Re)return;if(ve||ot.preventDefault(),ee&&_t.isExpanded(ee)&&xe.startsWith("delete")){var Pr=xe.endsWith("Backward")?"backward":"forward";j.deleteFragment(A,{direction:Pr});return}switch(xe){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{j.deleteFragment(A);break}case"deleteContent":case"deleteContentForward":{j.deleteForward(A);break}case"deleteContentBackward":{j.deleteBackward(A);break}case"deleteEntireSoftLine":{j.deleteBackward(A,{unit:"line"}),j.deleteForward(A,{unit:"line"});break}case"deleteHardLineBackward":{j.deleteBackward(A,{unit:"block"});break}case"deleteSoftLineBackward":{j.deleteBackward(A,{unit:"line"});break}case"deleteHardLineForward":{j.deleteForward(A,{unit:"block"});break}case"deleteSoftLineForward":{j.deleteForward(A,{unit:"line"});break}case"deleteWordBackward":{j.deleteBackward(A,{unit:"word"});break}case"deleteWordForward":{j.deleteForward(A,{unit:"word"});break}case"insertLineBreak":j.insertSoftBreak(A);break;case"insertParagraph":{j.insertBreak(A);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{xe==="insertFromComposition"&&Kt.isComposing(A)&&(R(!1),Uh.set(A,!1)),(le==null?void 0:le.constructor.name)==="DataTransfer"?Kt.insertData(A,le):typeof le=="string"&&(ve?W.current.push(()=>j.insertText(A,le)):j.insertText(A,le));break}}var Ei=(ae=xm.get(A))===null||ae===void 0?void 0:ae.unref();xm.delete(A),Ei&&(!A.selection||!_t.equals(A.selection,Ei))&&jt.select(A,Ei)}},[A,V,ft,a,c,P]),N=K.useCallback(ot=>{ot==null?(V.cancel(),P.cancel(),ww.delete(A),qh.delete(A),k.current&&Nc&&k.current.removeEventListener("beforeinput",_)):Nc&&ot.addEventListener("beforeinput",_),k.current=ot,typeof n=="function"?n(ot):n&&(n.current=ot)},[V,P,A,_,n]);bu(()=>{var ot=Kt.getWindow(A),Pt=It=>{var{target:he}=It,Nt=he instanceof HTMLElement?he:null,ge=Nt==null?void 0:Nt.tagName;ge==="INPUT"||ge==="TEXTAREA"||P()};ot.document.addEventListener("selectionchange",Pt);var Rt=()=>{mt.isDraggingInternally=!1};return ot.document.addEventListener("dragend",Rt),ot.document.addEventListener("drop",Rt),()=>{ot.document.removeEventListener("selectionchange",Pt),ot.document.removeEventListener("dragend",Rt),ot.document.removeEventListener("drop",Rt)}},[P,mt]);var $=o([A,[]]),Q=IN(o),F=u&&A.children.length===1&&Array.from(te.texts(A)).length===1&&te.string(A)===""&&!H,J=K.useCallback(ot=>{if(ot&&F){var Pt;nt((Pt=ot.getBoundingClientRect())===null||Pt===void 0?void 0:Pt.height)}else nt(void 0)},[F]);if(F){var tt=j.start(A,[]);$.push({[Bg]:!0,placeholder:u,onPlaceholderResize:J,anchor:tt,focus:tt})}var{marks:it}=A;if(mt.hasMarkPlaceholder=!1,A.selection&&_t.isCollapsed(A.selection)&&it){var{anchor:xt}=A.selection,gt=te.leaf(A,xt.path),Lt=Yw(gt,cG);if(!se.equals(gt,it,{loose:!0})){mt.hasMarkPlaceholder=!0;var $t=Object.fromEntries(Object.keys(Lt).map(ot=>[ot,null]));$.push(wl(wl(wl({[x6]:!0},$t),it),{},{anchor:xt,focus:xt}))}}return K.useEffect(()=>{setTimeout(()=>{var{selection:ot}=A;if(ot){var{anchor:Pt}=ot,Rt=te.leaf(A,Pt.path);if(it&&!se.equals(Rt,it,{loose:!0})){ba.set(A,it);return}}ba.delete(A)})}),nG(),Ae.createElement(N6.Provider,{value:c},Ae.createElement(lG.Provider,{value:H},Ae.createElement(O6.Provider,{value:Q},Ae.createElement(aG,{node:k,receivedUserInput:Et},Ae.createElement(D,wl(wl({role:c?void 0:"textbox","aria-multiline":c?void 0:!0},B),{},{spellCheck:Nc||!yw?B.spellCheck:!1,autoCorrect:Nc||!yw?B.autoCorrect:"false",autoCapitalize:Nc||!yw?B.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!c,zindex:-1,suppressContentEditableWarning:!0,ref:N,style:wl(wl({},b?{}:wl({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},U?{minHeight:U}:{})),T),onBeforeInput:K.useCallback(ot=>{if(!Nc&&!c&&!xo(ot,B.onBeforeInput)&&Kt.hasSelectableTarget(A,ot.target)&&(ot.preventDefault(),!Kt.isComposing(A))){var Pt=ot.data;j.insertText(A,Pt)}},[B.onBeforeInput,A,c]),onInput:K.useCallback(ot=>{if(!xo(ot,B.onInput)){if(wt.current){wt.current.handleInput();return}for(var Pt of W.current)Pt();W.current=[],Kt.isFocused(A)||T7(A,ot.nativeEvent)}},[B.onInput,A]),onBlur:K.useCallback(ot=>{if(!(c||mt.isUpdatingSelection||!Kt.hasSelectableTarget(A,ot.target)||xo(ot,B.onBlur))){var Pt=Kt.findDocumentOrShadowRoot(A);if(mt.latestElement!==Pt.activeElement){var{relatedTarget:Rt}=ot,It=Kt.toDOMNode(A,A);if(Rt!==It&&!($s(Rt)&&Rt.hasAttribute("data-slate-spacer"))){if(Rt!=null&&lf(Rt)&&Kt.hasDOMNode(A,Rt)){var he=Kt.toSlateNode(A,Rt);if(fe.isElement(he)&&!A.isVoid(he))return}if(Nh){var Nt=ym(Pt);Nt==null||Nt.removeAllRanges()}Xc.delete(A)}}}},[c,mt.isUpdatingSelection,mt.latestElement,A,B.onBlur]),onClick:K.useCallback(ot=>{if(Kt.hasTarget(A,ot.target)&&!xo(ot,B.onClick)&&lf(ot.target)){var Pt=Kt.toSlateNode(A,ot.target),Rt=Kt.findPath(A,Pt);if(!j.hasPath(A,Rt)||te.get(A,Rt)!==Pt)return;if(ot.detail===FH&&Rt.length>=1){var It=Rt;if(!(fe.isElement(Pt)&&j.isBlock(A,Pt))){var he,Nt=j.above(A,{match:ve=>fe.isElement(ve)&&j.isBlock(A,ve),at:Rt});It=(he=Nt==null?void 0:Nt[1])!==null&&he!==void 0?he:Rt.slice(0,1)}var ge=j.range(A,It);jt.select(A,ge);return}if(c)return;var ae=j.start(A,Rt),ee=j.end(A,Rt),xe=j.void(A,{at:ae}),le=j.void(A,{at:ee});if(xe&&le&&ut.equals(xe[1],le[1])){var Re=j.range(A,ae);jt.select(A,Re)}}},[A,B.onClick,c]),onCompositionEnd:K.useCallback(ot=>{if(Kt.hasSelectableTarget(A,ot.target)){var Pt;if(Kt.isComposing(A)&&Promise.resolve().then(()=>{R(!1),Uh.set(A,!1)}),(Pt=wt.current)===null||Pt===void 0||Pt.handleCompositionEnd(ot),xo(ot,B.onCompositionEnd)||Eo)return;if(!Nh&&!CH&&!vH&&!SH&&!EH&&ot.data){var Rt=ba.get(A);ba.delete(A),Rt!==void 0&&(mu.set(A,A.marks),A.marks=Rt),j.insertText(A,ot.data);var It=mu.get(A);mu.delete(A),It!==void 0&&(A.marks=It)}}},[B.onCompositionEnd,A]),onCompositionUpdate:K.useCallback(ot=>{Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCompositionUpdate)&&(Kt.isComposing(A)||(R(!0),Uh.set(A,!0)))},[B.onCompositionUpdate,A]),onCompositionStart:K.useCallback(ot=>{if(Kt.hasSelectableTarget(A,ot.target)){var Pt;if((Pt=wt.current)===null||Pt===void 0||Pt.handleCompositionStart(ot),xo(ot,B.onCompositionStart)||Eo)return;R(!0);var{selection:Rt}=A;if(Rt&&_t.isExpanded(Rt)){j.deleteFragment(A);return}}},[B.onCompositionStart,A]),onCopy:K.useCallback(ot=>{Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCopy)&&!S7(ot)&&(ot.preventDefault(),Kt.setFragmentData(A,ot.clipboardData,"copy"))},[B.onCopy,A]),onCut:K.useCallback(ot=>{if(!c&&Kt.hasSelectableTarget(A,ot.target)&&!xo(ot,B.onCut)&&!S7(ot)){ot.preventDefault(),Kt.setFragmentData(A,ot.clipboardData,"cut");var{selection:Pt}=A;if(Pt)if(_t.isExpanded(Pt))j.deleteFragment(A);else{var Rt=te.parent(A,Pt.anchor.path);j.isVoid(A,Rt)&&jt.delete(A)}}},[c,A,B.onCut]),onDragOver:K.useCallback(ot=>{if(Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDragOver)){var Pt=Kt.toSlateNode(A,ot.target);fe.isElement(Pt)&&j.isVoid(A,Pt)&&ot.preventDefault()}},[B.onDragOver,A]),onDragStart:K.useCallback(ot=>{if(!c&&Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDragStart)){var Pt=Kt.toSlateNode(A,ot.target),Rt=Kt.findPath(A,Pt),It=fe.isElement(Pt)&&j.isVoid(A,Pt)||j.void(A,{at:Rt,voids:!0});if(It){var he=j.range(A,Rt);jt.select(A,he)}mt.isDraggingInternally=!0,Kt.setFragmentData(A,ot.dataTransfer,"drag")}},[c,A,B.onDragStart,mt]),onDrop:K.useCallback(ot=>{if(!c&&Kt.hasTarget(A,ot.target)&&!xo(ot,B.onDrop)){ot.preventDefault();var Pt=A.selection,Rt=Kt.findEventRange(A,ot),It=ot.dataTransfer;jt.select(A,Rt),mt.isDraggingInternally&&Pt&&!_t.equals(Pt,Rt)&&!j.void(A,{at:Rt,voids:!0})&&jt.delete(A,{at:Pt}),Kt.insertData(A,It),Kt.isFocused(A)||Kt.focus(A)}},[c,A,B.onDrop,mt]),onDragEnd:K.useCallback(ot=>{!c&&mt.isDraggingInternally&&B.onDragEnd&&Kt.hasTarget(A,ot.target)&&B.onDragEnd(ot)},[c,mt,B,A]),onFocus:K.useCallback(ot=>{if(!c&&!mt.isUpdatingSelection&&Kt.hasEditableTarget(A,ot.target)&&!xo(ot,B.onFocus)){var Pt=Kt.toDOMNode(A,A),Rt=Kt.findDocumentOrShadowRoot(A);if(mt.latestElement=Rt.activeElement,cg&&ot.target!==Pt){Pt.focus();return}Xc.set(A,!0)}},[c,mt,A,B.onFocus]),onKeyDown:K.useCallback(ot=>{if(!c&&Kt.hasEditableTarget(A,ot.target)){var Pt;(Pt=wt.current)===null||Pt===void 0||Pt.handleKeyDown(ot);var{nativeEvent:Rt}=ot;if(Kt.isComposing(A)&&Rt.isComposing===!1&&(Uh.set(A,!1),R(!1)),xo(ot,B.onKeyDown)||Kt.isComposing(A))return;var{selection:It}=A,he=A.children[It!==null?It.focus.path[0]:0],Nt=f6(te.string(he))==="rtl";if(bi.isRedo(Rt)){ot.preventDefault();var ge=A;typeof ge.redo=="function"&&ge.redo();return}if(bi.isUndo(Rt)){ot.preventDefault();var ae=A;typeof ae.undo=="function"&&ae.undo();return}if(bi.isMoveLineBackward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",reverse:!0});return}if(bi.isMoveLineForward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line"});return}if(bi.isExtendLineBackward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",edge:"focus",reverse:!0});return}if(bi.isExtendLineForward(Rt)){ot.preventDefault(),jt.move(A,{unit:"line",edge:"focus"});return}if(bi.isMoveBackward(Rt)){ot.preventDefault(),It&&_t.isCollapsed(It)?jt.move(A,{reverse:!Nt}):jt.collapse(A,{edge:Nt?"end":"start"});return}if(bi.isMoveForward(Rt)){ot.preventDefault(),It&&_t.isCollapsed(It)?jt.move(A,{reverse:Nt}):jt.collapse(A,{edge:Nt?"start":"end"});return}if(bi.isMoveWordBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)&&jt.collapse(A,{edge:"focus"}),jt.move(A,{unit:"word",reverse:!Nt});return}if(bi.isMoveWordForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)&&jt.collapse(A,{edge:"focus"}),jt.move(A,{unit:"word",reverse:Nt});return}if(Nc){if((m6||Nh)&&It&&(bi.isDeleteBackward(Rt)||bi.isDeleteForward(Rt))&&_t.isCollapsed(It)){var ee=te.parent(A,It.anchor.path);if(fe.isElement(ee)&&j.isVoid(A,ee)&&(j.isInline(A,ee)||j.isBlock(A,ee))){ot.preventDefault(),j.deleteBackward(A,{unit:"block"});return}}}else{if(bi.isBold(Rt)||bi.isItalic(Rt)||bi.isTransposeCharacter(Rt)){ot.preventDefault();return}if(bi.isSoftBreak(Rt)){ot.preventDefault(),j.insertSoftBreak(A);return}if(bi.isSplitBlock(Rt)){ot.preventDefault(),j.insertBreak(A);return}if(bi.isDeleteBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A);return}if(bi.isDeleteForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A);return}if(bi.isDeleteLineBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A,{unit:"line"});return}if(bi.isDeleteLineForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A,{unit:"line"});return}if(bi.isDeleteWordBackward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"backward"}):j.deleteBackward(A,{unit:"word"});return}if(bi.isDeleteWordForward(Rt)){ot.preventDefault(),It&&_t.isExpanded(It)?j.deleteFragment(A,{direction:"forward"}):j.deleteForward(A,{unit:"word"});return}}}},[c,A,B.onKeyDown]),onPaste:K.useCallback(ot=>{!c&&Kt.hasEditableTarget(A,ot.target)&&!xo(ot,B.onPaste)&&(!Nc||uH(ot.nativeEvent)||Nh)&&(ot.preventDefault(),Kt.insertData(A,ot.clipboardData))},[c,A,B.onPaste])}),Ae.createElement(fG,{decorations:$,node:A,renderElement:h,renderChunk:g,renderPlaceholder:w,renderLeaf:p,renderText:m}))))))}),dG=e=>{var{attributes:n,children:i}=e;return Ae.createElement("span",wl({},n),i,Eo&&Ae.createElement("br",null))},gG=()=>[],pG=(e,n)=>{if(n.getBoundingClientRect&&(!e.selection||e.selection&&_t.isCollapsed(e.selection))){var i=n.startContainer.parentElement;i.getBoundingClientRect=n.getBoundingClientRect.bind(n),sH(i,{scrollMode:"if-needed"}),delete i.getBoundingClientRect}},xo=(e,n)=>{if(!n)return!1;var i=n(e);return i??(e.isDefaultPrevented()||e.isPropagationStopped())},S7=e=>lf(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),mG=(e,n)=>{if(!n)return!1;var i=n(e);return i??e.defaultPrevented},T7=(e,n)=>{var i=e;if(n.inputType==="historyUndo"&&typeof i.undo=="function"){i.undo();return}if(n.inputType==="historyRedo"&&typeof i.redo=="function"){i.redo();return}},vG=K.createContext(!1),z6=parseInt(Ae.version.split(".")[0],10),yG=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],wG=e=>{var{editor:n,children:i,onChange:r,onSelectionChange:o,onValueChange:a,initialValue:u}=e,c=Yw(e,yG);Ae.useState(()=>{if(!te.isNodeList(u))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(Wi.stringify(u)));if(!j.isEditor(n))throw new Error("[Slate] editor is invalid! You passed: ".concat(Wi.stringify(n)));n.children=u,Object.assign(n,c)});var{selectorContext:h,onChange:g}=eG(),p=K.useCallback(x=>{var T;switch(r&&r(n.children),x==null||(T=x.operation)===null||T===void 0?void 0:T.type){case"set_selection":o==null||o(n.selection);break;default:a==null||a(n.children)}g()},[n,g,r,o,a]);K.useEffect(()=>(gS.set(n,p),()=>{gS.set(n,()=>{})}),[n,p]);var[m,w]=K.useState(Kt.isFocused(n));return K.useEffect(()=>{w(Kt.isFocused(n))},[n]),bu(()=>{var x=()=>w(Kt.isFocused(n));return z6>=17?(document.addEventListener("focusin",x),document.addEventListener("focusout",x),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",x)}):(document.addEventListener("focus",x,!0),document.addEventListener("blur",x,!0),()=>{document.removeEventListener("focus",x,!0),document.removeEventListener("blur",x,!0)})},[]),Ae.createElement(V5.Provider,{value:h},Ae.createElement($5.Provider,{value:n},Ae.createElement(vG.Provider,{value:m},i)))},xG=function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=n;r=_H(r,i);var{onChange:o,apply:a}=r;return r.getChunkSize=()=>null,r.onChange=u=>{var c=z6<18?fN.unstable_batchedUpdates:h=>h();c(()=>{o(u)})},r.apply=u=>{if(u.type==="move_node"){var c=te.parent(r,u.path),h=!!r.getChunkSize(c);if(h){var g=te.get(r,u.path),p=k6(r,c),m=Kt.findKey(r,g);p.movedNodeKeys.add(m)}}a(u)},r},CG={isHistory(e){return Er(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||pu.isOperationList(e.redos[0].operations))&&(e.undos.length===0||pu.isOperationList(e.undos[0].operations))}},n3=new WeakMap,Lh=new WeakMap,Y2=new WeakMap,xl={isHistoryEditor(e){return CG.isHistory(e.history)&&j.isEditor(e)},isMerging(e){return Lh.get(e)},isSplittingOnce(e){return Y2.get(e)},setSplittingOnce(e,n){Y2.set(e,n)},isSaving(e){return n3.get(e)},redo(e){e.redo()},undo(e){e.undo()},withMerging(e,n){var i=xl.isMerging(e);Lh.set(e,!0),n(),Lh.set(e,i)},withNewBatch(e,n){var i=xl.isMerging(e);Lh.set(e,!0),Y2.set(e,!0),n(),Lh.set(e,i),Y2.delete(e)},withoutMerging(e,n){var i=xl.isMerging(e);Lh.set(e,!1),n(),Lh.set(e,i)},withoutSaving(e,n){var i=xl.isSaving(e);n3.set(e,!1);try{n()}finally{n3.set(e,i)}}},EG=e=>{var n=e,{apply:i}=n;return n.history={undos:[],redos:[]},n.redo=()=>{var{history:r}=n,{redos:o}=r;if(o.length>0){var a=o[o.length-1];a.selectionBefore&&jt.setSelection(n,a.selectionBefore),xl.withoutSaving(n,()=>{j.withoutNormalizing(n,()=>{for(var u of a.operations)n.apply(u)})}),r.redos.pop(),n.writeHistory("undos",a)}},n.undo=()=>{var{history:r}=n,{undos:o}=r;if(o.length>0){var a=o[o.length-1];xl.withoutSaving(n,()=>{j.withoutNormalizing(n,()=>{var u=a.operations.map(pu.inverse).reverse();for(var c of u)n.apply(c);a.selectionBefore&&jt.setSelection(n,a.selectionBefore)})}),n.writeHistory("redos",a),r.undos.pop()}},n.apply=r=>{var{operations:o,history:a}=n,{undos:u}=a,c=u[u.length-1],h=c&&c.operations[c.operations.length-1],g=xl.isSaving(n),p=xl.isMerging(n);if(g==null&&(g=TG(r)),g){if(p==null&&(c==null?p=!1:o.includes(h)?p=!0:p=SG(r,h)),xl.isSplittingOnce(n)&&(p=!1,xl.setSplittingOnce(n,void 0)),c&&p)c.operations.push(r);else{var m={operations:[r],selectionBefore:n.selection};n.writeHistory("undos",m)}for(;u.length>100;)u.shift();a.redos=[]}i(r)},n.writeHistory=(r,o)=>{n.history[r].push(o)},n},SG=(e,n)=>!!(n&&e.type==="insert_text"&&n.type==="insert_text"&&e.offset===n.offset+n.text.length&&ut.equals(e.path,n.path)||n&&e.type==="remove_text"&&n.type==="remove_text"&&e.offset+e.text.length===n.offset&&ut.equals(e.path,n.path)),TG=(e,n)=>e.type!=="set_selection";const AG=e=>{const n=e,{insertData:i}=n;return n.insertBreak=()=>{e.insertText(`
`)},n.insertSoftBreak=()=>{e.insertText(`
`)},n.insertData=r=>{let o=r.getData("text/plain");if(!r.getData("application/x-slate-fragment")&&o){o.endsWith(`
`)&&(o=o.substring(0,o.length-1)),o=o.trim().replace(/\t+/g," "),n.insertText(o);return}i(r)},n},Wg="#6698FF",Ba=9,wS="plait-text-plugin-key",j6=30,xS="transparent",Kw=4,Em=18,xg="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'PingFang SC', 'Noto Sans', 'Noto Sans CJK SC', 'Microsoft Yahei', 'Hiragino Sans GB', Arial, sans-serif",U6="none";var A7;(function(e){e.image="image"})(A7||(A7={}));const $6=["png","jpeg","gif","bmp"];var CS;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(CS||(CS={}));var Co;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(Co||(Co={}));class Bs{constructor(n,i){this.board=n,this.options=i}processDrawing(n,i,r){var o,a;if(this.canDraw&&this.canDraw(n,r)){const u=this.draw(n,r);if(u){this.g&&i.contains(this.g)?this.g.replaceWith(u):(this.g&&this.g.remove(),(o=this.options)!=null&&o.prepend?i.prepend(u):i.appendChild(u)),this.g=u;const c=this.board.getRectangle(n);if(!c)return;let h=I.getCenterPoint(c);if((a=this.options)!=null&&a.active){const p=qr(this.board,c);h=I.getCenterPoint(p)}let g;So.isGroup(n)?g=Wo(Zs(this.board,n,!0)):g=n.angle,g&&Xs(u,h,g)}else this.destroy();DG(this)&&this.afterDraw(n)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function DG(e){return!!e.afterDraw}const V6=(e,n)=>{const i={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=fd(G.getRoughSVG(e),n,Ba,i);return r.classList.add(oO),r};function bG(e,n){return fd(G.getRoughSVG(e),n,Ba,{stroke:"#FFFFFF",strokeWidth:1,fill:`${Wg}`,fillStyle:"solid"})}function D7(e,n){return fd(G.getRoughSVG(e),n,Ba,{stroke:`${Wg}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const _h=6,b7=(e,n)=>{const i={stroke:gr,strokeWidth:1,fillStyle:"solid"},r=[n.x-Kw-Em/2,n.y+n.height+Kw+Em/2],o=G.getRoughSVG(e),a=ze(),u=o.path(`M ${r[0]+_h} ${r[1]} A ${_h} ${_h}, 0, 1, 0, ${r[0]} ${r[1]+_h}`,i),c=o.polygon([[r[0],r[1]+_h-2],[r[0],r[1]+_h+2],[r[0]+4.5,r[1]+_h]],{...i,fill:gr});return Ze(c,"round"),a.append(u,c),a},gv=(e,n)=>new Zw(e,{...n,active:!0}),qT=class qT extends Bs{constructor(n,i){super(n,{...i}),this.board=n,this.options=i,this.hasResizeHandle=!1}canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=qr(this.board,this.options.getRectangle(n)),a=this.options.getStrokeWidth()*this.board.viewport.zoom,u=I.inflate(o,a),c=Fa(this.board,u,{stroke:Wg,strokeWidth:_i});return r.append(c),c.classList.add(uv),c.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,I.getCornerPoints(u).forEach(h=>{const g=V6(this.board,h);r.append(g)})):this.hasResizeHandle=!1,r}};qT.key="active-generator";let Zw=qT;const Qw=e=>`${e}`,Jw=e=>Number(e),BG=(e,n)=>{let r=(ES(e,Qw(n))?n-4:n)+2;return r>=4&&(r=r-4),ES(e,Qw(n))?r+4:r},B7=e=>{switch(e){case 0:case 2:return Da.nwse;case 1:case 3:return Da.nesw;case 4:case 6:return Da.ns;case 5:case 7:return Da.ew;default:return null}},PG=(e,n)=>{const i=ME.indexOf(e);if(i>=0){const r=Math.round(n/(Math.PI/4));e=ME[(i+r)%ME.length]}return e},W6=(e,n)=>{const i=I.getCornerPoints(e),r=i.map((a,u)=>({rectangle:{x:a[0]-n/2,y:a[1]-n/2,width:n,height:n},handle:Qw(u),cursorClass:B7(u)})),o=MG(i,n/2);return r.push(...o.map((a,u)=>({rectangle:a,handle:Qw(u+4),cursorClass:B7(u+4)}))),r},P7=(e,n)=>n<=3?I.getCornerPoints(e)[n]:I.getEdgeCenterPoints(e)[n-4],MG=(e,n)=>{const i=[];for(let r=0;r<e.length;r++){let o=I.getRectangleByPoints([e[r],e[(r+1)%4]]);const a=new Array(2).fill(0);a[(r+1)%2]=n/2,o=I.expand(o,a[0],a[1]),i.push(o)}return i},Vx=new WeakMap,vu=e=>!!Vx.get(e),RG=(e,n)=>vu(e)&&n(Vx.get(e)),OG=(e,n,i)=>{G.getBoardContainer(e).classList.add(`${i}-resizing`),Vx.set(e,n),Lu(e,!0)},LG=(e,n)=>{G.getBoardContainer(e).classList.remove(`${n}-resizing`),Vx.delete(e),Lu(e,!1)},ES=(e,n)=>Jw(n)>=4,Cw=(e,n)=>!ES(e,n),W5=(e,n,i,r,o)=>{const a=nr([r],i,o)[0],u=nr([I.getCenterPoint(n)],i,o)[0],c=I.getPoints(n),h=I.getCenterPoint(e),g=nr([u],a,-o)[0],p=nr(c,h,o);return nr(p,g,-o)},_G=e=>{const n=e.points;return n&&n.length>1},Wx=(e,n)=>{if(G.hasBeenTextEditing(e)||Dr(e))return!1;const i=ne(e);return i.length===1&&i[0]===n&&_G(n)};function fi(e,n){const i=n[0]-e[0],r=n[1]-e[1],o=Math.sqrt(i*i+r*r);if(o===0)throw new Error("Points must not be the same for a unit vector calculation.");const a=i/o,u=r/o;return[a,u]}function hg(e,n,i){const r=Math.hypot(n[0],n[1]);return[e[0]+n[0]/r*i,e[1]+n[1]/r*i]}function M7(e,n,i,r){return r?[e[0]+i,e[1]+i/n[0]*n[1]]:[e[0]+i/n[1]*n[0],e[1]+i]}function R7(e){const n=e[0],r=e[1],o=-n;return[r,o]}function Gm(e,n){if(!n)return e;const i=e[0],r=e[1],o=i*Math.cos(n)-r*Math.sin(n),a=i*Math.sin(n)+r*Math.cos(n);return[o,a]}function X6(e,n,i){const r=be(e[0],e[1],n[0],n[1]),o=be(e[0],e[1],i[0],i[1]),a=be(n[0],n[1],i[0],i[1]);return Math.abs(r+o-a)<.1}const FG=(e,n,i)=>{const r=[],o=[Math.min(n[0],i[0]),Math.max(n[0],i[0])],a=[Math.min(n[1],i[1]),Math.max(n[1],i[1])],u=fi(n,i);if(e[0]>=o[0]&&e[0]<=o[1]){const c=M7(n,u,e[0]-n[0],!0);r.push(c)}else if(e[1]>=a[0]&&e[1]<=a[1]){const c=M7(n,u,e[1]-n[1],!1);r.push(c)}return r};function q6(e,n){const r=Y6(e)*n;let o=0;for(let a=0;a<e.length-1;a++){const[u,c]=e[a],[h,g]=e[a+1],p=be(u,c,h,g);if(o+p>=r){const w=(r-o)/p,x=u+(h-u)*w,T=c+(g-c)*w;return[x,T]}o+=p}return e[e.length-1]}function Y6(e){let n=0;for(let i=0;i<e.length-1;i++){const[r,o]=e[i],[a,u]=e[i+1];n+=be(r,o,a,u)}return n}function K6(e,n){const i=Y6(e);let r=0;for(let o=0;o<e.length-1;o++){if(X6(n,e[o],e[o+1]))return r+=be(n[0],n[1],e[o][0],e[o][1]),r/i;r+=be(e[o][0],e[o][1],e[o+1][0],e[o+1][1])}throw new Error("Cannot get ratio by point")}const Pg=e=>{const n=[];return e.forEach(i=>{n.findIndex(o=>Ce.isEquals(i,o))===-1&&n.push(i)}),n};function gu(e){if(e.length<=2)return e;let n=[e[0]];for(let i=1;i<e.length-1;i++){const r=e[i-1],o=e[i],a=e[i+1];!(Ce.isOverHorizontal([r,o,a])||Ce.isOverVertical([r,o,a]))&&n.push(o)}return n.push(e[e.length-1]),n}const zm=(e,n,i)=>{const r=be(...e,...n),o=Ce.isEquals(e,n),a=o?1:(n[1]-e[1])/r,u=o?1:(n[0]-e[0])/r;return[e[0]+i*u,e[1]+i*a]},kG={[Fe.left]:{x:-1,y:0},[Fe.right]:{x:1,y:0},[Fe.top]:{x:0,y:-1},[Fe.bottom]:{x:0,y:1}};function IG(e){switch(e){case Fe.left:return Fe.right;case Fe.right:return Fe.left;case Fe.top:return Fe.bottom;case Fe.bottom:return Fe.top}}function Z6(e){if(e[0]===0)return Fe.left;if(e[0]===1)return Fe.right;if(e[1]===0)return Fe.top;if(e[1]===1)return Fe.bottom}function ag(e){const n=e[0],i=e[1];if(n===0&&i===0)return null;if(n===0)return i>0?Fe.bottom:Fe.top;if(i===0)return n>0?Fe.right:Fe.left;const r=Math.atan2(i,n);return r>-Math.PI/4&&r<=Math.PI/4?Fe.right:r>Math.PI/4&&r<=3*Math.PI/4?Fe.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?Fe.top:Fe.left}function id(e){return kG[e]}function Mg(e){return e===0?e:e/Math.abs(e)}const HG=(e,n,i,r,o)=>{const a=id(n),u=id(r),c=[e[0]+a.x*o,e[1]+a.y*o],h=[i[0]+u.x*o,i[1]+u.y*o],g=NG(c,n,h),p=g.x!==0?"x":"y",m=g[p];let w=[],x,T;const[D,b]=GG({sourceX:e[0],sourceY:e[1],targetX:i[0],targetY:i[1]});if(a[p]*u[p]===-1){x=D,T=b;const B=[[x,c[1]],[x,h[1]]],A=[[c[0],T],[h[0],T]];a[p]===m?w=p==="x"?B:A:w=p==="x"?A:B}else{const B=[[c[0],h[1]]],A=[[h[0],c[1]]];p==="x"?w=a.x===m?A:B:w=a.y===m?B:A;let H;if(n!==r){const R=p==="x"?1:0,k=a[p]===u[p==="x"?"y":"x"],W=c[R]>h[R],U=c[R]<h[R];H=a[p]===1&&(!k&&W||k&&U)||a[p]!==1&&(!k&&U||k&&W),H&&(w=p==="x"?B:A)}}return[e,c,...w,h,i]},NG=(e,n=Fe.bottom,i)=>n===Fe.left||n===Fe.right?e[0]<i[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<i[1]?{x:0,y:1}:{x:0,y:-1};function GG({sourceX:e,sourceY:n,targetX:i,targetY:r}){const o=Math.abs(i-e)/2,a=i<e?i+o:i-o,u=Math.abs(r-n)/2,c=r<n?r+u:r-u;return[a,c,o,u]}function X5(e){const n=e.ctrlKey||e.metaKey,i=ln.isKeyHotkey("alt",e),r=ln.isKeyHotkey("shift",e),o=e.key.includes("CapsLock"),a=e.key.includes("Tab"),u=e.key.includes("Escape"),c=e.key.startsWith("F"),h=!!e.key.includes("Arrow");return o||n||i||h||r||a||u||c}const zG=e=>ln.isKeyHotkey("mod+/",e),jG=e=>e.key==="Tab",UG=e=>e.key==="Enter",q5=e=>e.code==="Space",Y5=e=>$r.isDeleteBackward(e)||$r.isDeleteForward(e);var Xi;(function(e){e.dnd="dnd",e.drawing="drawing"})(Xi||(Xi={}));const Q6=new WeakMap,J6=e=>Q6.get(e),Vr=(e,n)=>{Q6.set(e,n)},Xx=e=>J6(e)===Xi.dnd,Bl=e=>J6(e)===Xi.drawing,Xg=e=>{const n=gn.getElementRef(e);return(n==null?void 0:n.getTextManages())||[]},pv=e=>{const n=Xg(e)[0];return n||console.warn("can not find textManage"),n},dd=e=>Xg(e).map(n=>n.editor),K5=e=>{const n=dd(e)[0];return n||console.warn("can not find textManage"),n},$G=e=>{const n=ne(e);let i=null;return n.forEach(r=>{const o=dd(r);!i&&o&&o.length>0&&(i=o[0])}),i},tB=e=>e.map(n=>{try{const i=dd(n);return i.length?i.map(r=>{const o=te.texts(r);return Array.from(o).reduce((a,u)=>a+=u[0].text,"")}).join(" "):""}catch{return""}}).filter(n=>n).join(" "),eB=(e,n)=>{const i=n||ne(e);if(i.length){const r=[];i.forEach(a=>{r.push(...Xg(a))});const o=r.find(a=>a.isEditing);return o?[o.editor]:r.map(a=>a.editor)}},gd=(e,n,i)=>{i=i||{};const r=typeof e=="string"?{children:[{text:e,...i}],type:"paragraph"}:e;return n&&(r.align=n),r},O7=e=>e===14?20:e*1.5,nB=async(e,n,i,r)=>{let o=0,a=0;await VG(n,i).then(g=>{o=g.width,a=g.height});let u=null;const c=URL.createObjectURL(n);G.getBoardContext(e).setUploadingFile({url:c,file:n}),u={url:c,width:o,height:a},r(u)};function VG(e,n){return new Promise((i,r)=>{const o=new Image;o.src=URL.createObjectURL(e),o.onload=function(){const a=n,u=n*o.naturalHeight/o.naturalWidth;i(o.naturalWidth>n?{width:a,height:u}:{width:o.naturalWidth,height:o.naturalHeight})}})}const Z5=new WeakMap,Uo=e=>Z5.get(e),iB=(e,n)=>{Z5.set(e,n)},WG=e=>{Z5.delete(e)};class XG{constructor(){this.list=[]}enqueue(n){this.list.push(n),this.list=this.list.sort((i,r)=>i.priority-r.priority)}dequeue(){return this.list.shift()}}class qG{constructor(n){this.graph=n,this.cameFrom=new Map}heuristic(n,i){return Math.abs(n[0]-i[0])+Math.abs(n[1]-i[1])}search(n,i,r){const o=new XG,a=this.graph.get(n);this.cameFrom=new Map;const u=new Map;for(u.set(a,0),o.enqueue({node:a,priority:0});o.list.length>0;){var c=o.dequeue();if(!c)throw new Error("can't find current");const h=c.node.data;if(h[0]===i[0]&&h[1]===i[1])break;c.node.adjacentNodes.forEach(g=>{let p=u.get(c.node)+this.heuristic(g.data,c.node.data);const m=this.cameFrom.get(c.node),w=m?m.data:r,x=w[0]===(c==null?void 0:c.node.data[0])&&w[0]===g.data[0],T=w[1]===(c==null?void 0:c.node.data[1])&&w[1]===g.data[1];if(!x&&!T&&(p=p+1),!u.has(g)||u.get(g)&&p<u.get(g)){u.set(g,p);const D=p+this.heuristic(g.data,i);o.enqueue({node:g,priority:D}),this.cameFrom.set(g,c.node)}})}}getRoute(n,i){const r=[];let o=i;for(;o[0]!==n[0]||o[1]!==n[1];){const a=this.graph.get(o),u=this.cameFrom.get(a);r.unshift(u.data),o=u.data}return r}}class YG{constructor(n){this.data=n,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class KG{constructor(){this.index={}}add(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();o in this.index||(this.index[o]={}),a in this.index[o]||(this.index[o][a]=new YG(n))}connect(n,i){const r=this.get(n),o=this.get(i);if(!r||!o)throw new Error("A point was not found");r.adjacentNodes.push(o)}has(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();return o in this.index&&a in this.index[o]}get(n){const i=n[0],r=n[1],o=i.toString(),a=r.toString();return o in this.index&&a in this.index[o]?this.index[o][a]:null}}const rB=Gg("debug:plait:elbow-line-routing"),oB=(e,n)=>{const{nextSourcePoint:i,nextTargetPoint:r}=e,o=QG(e),a=JG(o),u=new qG(a);u.search(i,r,e.sourcePoint);let c=u.getRoute(i,r);c=[e.sourcePoint,...c,r,e.targetPoint];const h=I.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),g=I.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),p=h?void 0:I.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),m=g?void 0:I.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return c=ZG(c,{centerX:p,centerY:m,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},n),c},ZG=(e,n,i)=>{const{sourceRectangle:r,targetRectangle:o,centerX:a,centerY:u}=n;if(i&&rB.clear(),a!==void 0){const c=_7(e,a,!0),h=c.pointOfHit&&L7(e,{parallelPaths:c.parallelPaths,pointOfHit:c.pointOfHit,sourceRectangle:r,targetRectangle:o},i);h&&(e=h)}if(u!==void 0){const c=_7(e,u,!1),h=c.pointOfHit&&L7(e,{parallelPaths:c.parallelPaths,pointOfHit:c.pointOfHit,sourceRectangle:r,targetRectangle:o},i);h&&(e=h)}return e},L7=(e,n,i)=>{const{parallelPaths:r,pointOfHit:o,sourceRectangle:a,targetRectangle:u}=n;let c=null;return r.forEach(h=>{const g=[o,h[0],h[1]],p=I.getRectangleByPoints(g);if(!I.isHit(p,a)&&!I.isHit(p,u)){const m=I.getCornerPointsByPoints(g);i&&rB.drawRectangle(i,p);const w=[],x=[];e.forEach((R,k)=>{const W=m.findIndex(U=>Ce.isEquals(R,U));W!==-1&&(w.push(k),x.push(W))});const T=[...e],D=m.find((R,k)=>!x.includes(k)),b=Math.abs(w[0]-w[w.length-1])+1;T.splice(w[0]+1,b-2,D);const B=gu([...e]).length-1;gu([...T]).length-1<=B&&(c=T)}return null}),c},_7=(e,n,i)=>{const r=[];let o=null,a=null;const u=i?0:1;for(let c=0;c<e.length;c++){const h=e[c-1],g=e[c];o===null&&h&&h[u]===g[u]&&(o=h),o!==null&&h[u]!==g[u]&&(r.push([o,h]),o=null),g[u]===n&&(a=g)}return o&&r.push([o,e[e.length-1]]),{pointOfHit:a,parallelPaths:r}},QG=e=>{const{nextSourcePoint:n,nextTargetPoint:i,sourceOuterRectangle:r,targetOuterRectangle:o}=e,a=[],u=[];let c=[];[r,o].forEach(p=>{a.push(p.x,p.x+p.width/2,p.x+p.width),u.push(p.y,p.y+p.height/2,p.y+p.height)});const h=[r.x,r.x+r.width,o.x,o.x+o.width].sort((p,m)=>p-m);a.push((h[1]+h[2])/2,n[0],i[0]);const g=[r.y,r.y+r.height,o.y,o.y+o.height].sort((p,m)=>p-m);u.push((g[1]+g[2])/2,n[1],i[1]);for(let p=0;p<a.length;p++)for(let m=0;m<u.length;m++){const w=[a[p],u[m]],x=I.isPointInRectangle(r,w),T=I.isPointInRectangle(o,w);!x&&!T&&c.push(w)}return c=Pg(c).filter(p=>{const m=I.isPointInRectangle(r,p),w=I.isPointInRectangle(o,p);return!m&&!w}),c},JG=e=>{const n=new KG,i=[],r=[];e.forEach(a=>{const u=a[0],c=a[1];i.indexOf(u)<0&&i.push(u),r.indexOf(c)<0&&r.push(c),n.add(a)}),i.sort((a,u)=>a-u),r.sort((a,u)=>a-u);const o=a=>n.has(a);for(let a=0;a<i.length;a++)for(let u=0;u<r.length;u++){const c=[i[a],r[u]];if(o(c)){if(a>0){const h=[i[a-1],r[u]];o(h)&&(n.connect(h,c),n.connect(c,h))}if(u>0){const h=[i[a],r[u-1]];o(h)&&(n.connect(h,c),n.connect(c,h))}}}return n},tz=(e,n)=>{const i=j6;let r=new Array(4).fill(i),o=new Array(4).fill(i);const a=e.x-(n.x+n.width),u=n.x-(e.x+e.width);if(a>0&&a<i*2){const g=a/2;r[3]=g,o[1]=g}if(u>0&&u<i*2){const g=u/2;o[3]=g,r[1]=g}const c=e.y-(n.y+n.height),h=n.y-(e.y+e.height);if(c>0&&c<i*2){const g=c/2;r[0]=g,o[2]=g}if(h>0&&h<i*2){const g=h/2;r[2]=g,o[0]=g}return{sourceOffset:r,targetOffset:o}},F7=(e,n,i)=>{switch(i){case Fe.top:return[e[0],n.y];case Fe.bottom:return[e[0],n.y+n.height];case Fe.right:return[n.x+n.width,e[1]];default:return[n.x,e[1]]}},ez=(e,n)=>{const{sourceOffset:i,targetOffset:r}=tz(e,n),o=I.expand(e,i[3],i[0],i[1],i[2]),a=I.expand(n,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:o,targetOuterRectangle:a}},nz=e=>{const{sourcePoint:n,nextSourcePoint:i,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:a,nextTargetPoint:u,targetRectangle:c,targetOuterRectangle:h}=e;return I.isPointInRectangle(c,n)||I.isPointInRectangle(h,i)||I.isPointInRectangle(o,u)||I.isPointInRectangle(r,a)},Ew=new Map,Q5=(e,n,i)=>{let r=Ew.has(e)?Ew.get(e):{};r[n]=i,Ew.set(e,r)},qx=e=>Ew.get(e),sB=new WeakMap,iz=(e,n)=>{G.getBoardContainer(e).classList.add("draw-elements-rotating"),sB.set(e,n),Lu(e,!0)},rz=e=>{G.getBoardContainer(e).classList.remove("draw-elements-rotating"),sB.delete(e),Lu(e,!1)},k7=(e,n)=>{const i=e.getRectangle(n);return i?i.width*i.height:0},oz=(e,n,i="asc")=>n.sort((r,o)=>{const a=k7(e,r),u=k7(e,o);return i==="asc"?a-u:u-a}),sz=e=>e&&e!==U6&&e!==xS,pf=(e,n)=>{switch(e){case Co.dashed:return[8,8+n];case Co.dotted:return[2,4+n];default:return}},aB=(e,n,i,r)=>n.map(o=>{const a=r&&r(o);if(a)return a;if(o.points){const u=o.points.map(c=>[c[0]-i[0],c[1]-i[1]]);return{...o,points:u}}return o}),lB=(e,n,i,r)=>{const o={};n.forEach(a=>{o[a.id]=Mn()}),n.forEach(a=>{a.id=o[a.id],r&&r(a,o),a.points&&(a.points=a.points.map(u=>[i[0]+u[0],i[1]+u[1]])),Qt.insertNode(e,a,[e.children.length])}),Qt.addSelectionWithTemporaryElements(e,n)},oi=(e,n,i=Fe.right)=>i===Fe.left?[e[0]-n,e[1]]:i===Fe.bottom?[e[0],e[1]+n]:i===Fe.top?[e[0],e[1]-n]:[e[0]+n,e[1]],qc=(e,n,i=Fe.right)=>i===Fe.bottom?[e[0]+n,e[1]]:i===Fe.top?[e[0]+n,e[1]]:[e[0],e[1]+n],az=e=>e===0?Fe.top:e===1?Fe.right:e===2?Fe.bottom:e===3?Fe.left:Fe.right,uB=(e,n,i)=>Math.abs(i?e[0]-n[0]:e[1]-n[1]),lz="foreign-object-image",YT=class YT extends Bs{constructor(n,i){super(n,i),this.board=n,this.options=i,this.isFocus=!1}canDraw(n){return!!this.options.getImageItem(n)}draw(n){this.element=n;const i=ze(),r=this.options.getRectangle(n);this.foreignObject=p5(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(lz),i.append(this.foreignObject);const o={board:this.board,imageItem:this.options.getImageItem(n),element:n,getRectangle:()=>this.options.getRectangle(n)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,o),this.activeGenerator=gv(this.board,{getStrokeWidth:()=>(ne(this.board).length===1&&!Dr(this.board),_i),getStrokeOpacity:()=>{const a=ne(this.board);return a.length===1&&!Dr(this.board)||!a.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const a=Wx(this.board,this.element);return!!Uo(this.board)||a}}),i}updateImage(n,i,r){if(this.element=r,i!==r&&this.imageComponentRef){const u={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(u)}const o=this.options.getRectangle(r);pm(this.g,o.width,o.height,o.x,o.y),o&&r.angle!==void 0&&Xs(this.g,I.getCenterPoint(o),r.angle);const a=G.getActiveHost(this.board);this.activeGenerator.processDrawing(r,a,{selected:this.isFocus})}setFocus(n,i){this.isFocus=i;const r=G.getActiveHost(this.board);this.activeGenerator.processDrawing(n,r,{selected:i});const o={isFocus:i};this.imageComponentRef.update(o)}destroy(){var n,i;super.destroy(),(n=this.imageComponentRef)==null||n.destroy(),(i=this.activeGenerator)==null||i.destroy()}};YT.key="image-generator";let Bu=YT;const mv=(e,n,i)=>{ne(e).forEach(o=>{if(i!=null&&i.match&&!(i!=null&&i.match(o)))return;const a=G.findPath(e,o),u=i!=null&&i.getMemorizeKey?i==null?void 0:i.getMemorizeKey(o):"";for(let c in n)u&&Q5(u,c,n[c]);i!=null&&i.callback?i.callback(o,a):Qt.setNode(e,n,a)})},uz=(e,n,i)=>{mv(e,{strokeStyle:n},i)},cz=(e,n,i)=>{mv(e,{fill:n},i)},fz=(e,n,i)=>{mv(e,{strokeColor:n},i)},hz=(e,n,i)=>{mv(e,{strokeWidth:n},i)},ka={setFillColor:cz,setStrokeStyle:uz,setProperty:mv,setStrokeWidth:hz,setStrokeColor:fz},Rg=(e,n=!1)=>{let i=e[0],r=e[1];if(n){const u=Math.abs(i[0]-r[0]),c=Math.abs(i[1]-r[1]),h=Math.max(c,u);r=[i[0]+(r[0]>i[0]?h:-h),i[1]+(r[1]>i[1]?h:-h)]}const o=[Math.min(i[0],r[0]),Math.min(i[1],r[1])];let a=[Math.max(i[0],r[0]),Math.max(i[1],r[1])];return[o,a]},I7=(e,n)=>!G.isReadonly(e)&&!G.hasBeenTextEditing(e)&&G.isPointer(e,nn.selection),pd=(e,n)=>{const{pointerDown:i,pointerMove:r,globalPointerUp:o,touchStart:a}=e;let u=null,c=null,h=null,g=null;e.touchStart=m=>{if(c){m.preventDefault();return}a(m)},e.pointerDown=m=>{if(!n.canResize()||!I7(e)||!Al(m)){i(m);return}const w=Pe(e,ke(e,m.x,m.y));if(u=n.hitTest(w),u){u.cursorClass&&G.getBoardContainer(e).classList.add(`${u.cursorClass}`),h=[m.x,m.y],c={path:Array.isArray(u.element)?u.element.map(T=>G.findPath(e,T)):G.findPath(e,u.element),element:u.element,handle:u.handle,handleIndex:u.handleIndex,rectangle:u.rectangle,options:u.options};return}i(m)},e.pointerMove=m=>{if(!n.canResize()||!I7(e)){p(),r(m);return}if(h&&u&&!vu(e)){const w=[m.x,m.y];be(h[0],h[1],w[0],w[1])>s5&&(OG(e,c,n.key),tr.set(e,!0),n.beforeResize&&n.beforeResize(c))}if(!vu(e)&&!of(e)){const w=Pe(e,ke(e,m.x,m.y));_a(e,n.key+"-common-resize-hit-test",()=>{const x=n.hitTest(w);x?(g&&x.cursorClass!==g.cursorClass&&G.getBoardContainer(e).classList.remove(`${g.cursorClass}`),g=x,g.cursorClass&&G.getBoardContainer(e).classList.add(`${g.cursorClass}`)):p()})}else if(h&&vu(e)){m.preventDefault();const w=Pe(e,ke(e,m.x,m.y));_a(e,"with-common-resize",()=>{h&&c&&n.onResize(c,{startPoint:Pe(e,ke(e,h[0],h[1])),endPoint:w,isShift:!!m.shiftKey})});return}r(m)},e.globalPointerUp=m=>{o(m),(vu(e)||u)&&(n.afterResize&&n.afterResize(c),LG(e,n.key),h=null,u=null,c=null,tr.set(e,!1))};const p=()=>{g&&(g.cursorClass&&G.getBoardContainer(e).classList.remove(`${g.cursorClass}`),g=null)};return e},KT=class KT extends Bs{canDraw(n){return!0}draw(n,i){const r={stroke:"",strokeWidth:_i,strokeLineDash:[5]};let o={x:0,y:0,width:0,height:0};return i&&(r.stroke="#999",o=S5(this.board,n,!0)),Fa(this.board,o,r)}};KT.key="GroupGenerator";let jm=KT;class dz{constructor(){this.textManages=[],this.generatorMap=new Map,this.updateActiveSection=()=>{}}addGenerator(n,i){this.generatorMap.set(n,i)}getGenerator(n){return this.generatorMap.get(n)}initializeTextManage(n){this.textManages=[],Array.isArray(n)?this.textManages.push(...n):this.textManages.push(n)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(n=>{n.destroy()}),this.textManages=[]}}class mf extends j_{constructor(n=new dz){super(n)}}class gz extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=gv(this.board,{getRectangle:n=>S5(this.board,n),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!Dr(this.board)}),this.groupGenerator=new jm(this.board),this.getRef().addGenerator(jm.key,this.groupGenerator)}initialize(){super.initialize(),this.initializeGenerator()}onContextChanged(n,i){}}function cB(e){let n,i;const{drawElement:r,pointerMove:o,globalPointerUp:a,insertFragment:u,getDeletedFragment:c,deleteFragment:h,getRelatedFragment:g,getRectangle:p,keyDown:m,onChange:w}=e;return e.drawElement=x=>So.isGroup(x.element)?gz:r(x),e.pointerMove=x=>{_a(e,"with-group",()=>{n==null||n.remove();const T=Pe(e,ke(e,x.x,x.y));let D={anchor:T,focus:T};e.selection&&!bg.isCollapsed(e.selection)&&(D=e.selection);const b=G.getPointer(e);if(!vu(e)&&!sf(e)&&b===nn.selection){const B=cb(e,D);B.length&&(n=ZL(e,B),n&&G.getElementTopHost(e).append(n))}}),o(x)},e.globalPointerUp=x=>{n==null||n.remove(),n=null,a(x)},e.getRelatedFragment=(x,T)=>{const D=YL(e,x,T);return g([...x,...D],T)},e.insertFragment=(x,T,D)=>{var A,H;let b=[];if((A=x==null?void 0:x.elements)!=null&&A.length){b=new Array((H=x==null?void 0:x.elements)==null?void 0:H.length);const R=gf(e,x==null?void 0:x.elements);A5(e,x==null?void 0:x.elements).forEach(W=>{const U=x.elements.map(nt=>nt.id).indexOf(W.id);b.splice(U,1,W.groupId?tx(W,void 0):W)}),R.length&&R.forEach(W=>{const U=x.elements.map(st=>st.id).indexOf(W.id),nt={...tx(W,void 0),id:Mn()};b.splice(U,1,nt),fB(W,x.elements,nt.id,b)}),x.elements=b}u(x,T,D),(b==null?void 0:b.filter(R=>So.isGroup(R))).forEach(R=>{Qt.insertNode(e,R,[e.children.length])})},e.getDeletedFragment=x=>(i=pz(e),i&&i.length&&x.push(...i),c(x)),e.deleteFragment=x=>{i!=null&&i.length&&vz(e,i),h(x),i=null},e.getRectangle=x=>So.isGroup(x)?S5(e,x,!0):p(x),e.keyDown=x=>{if(!G.isReadonly(e)){if(ln.isKeyHotkey("mod+g",x)){x.preventDefault(),Qt.addGroup(e);return}if(ln.isKeyHotkey("mod+shift+g",x)){x.preventDefault(),Qt.removeGroup(e);return}}m(x)},e.onChange=()=>{w(),qL(e).forEach(T=>{const D=Zs(e,T,!1,!0),b=D.some(H=>sS(e,H))&&!D.every(H=>sS(e,H)),B=gn.getElementRef(T),A=gn.getElementG(T);B.getGenerator(jm.key).processDrawing(T,A,b)})},e}const tx=(e,n)=>({...e,groupId:n}),fB=(e,n,i,r)=>{const o=n.filter(a=>a.groupId===e.id);return o.length&&o.forEach(a=>{const u=n.map(c=>c.id).indexOf(a.id);if(So.isGroup(a)){const c={...tx(a,i),id:Mn()};r.splice(u,1,c),fB(a,n,c.id,r)}else r.splice(u,1,tx(a,i))}),r},pz=e=>{const i=[...e.getRelatedFragment([])],r=gf(e),o=D5(e),a=[...r,...o];return a.forEach(u=>{const c=df(e,u,!0);if(c.length){const g=Zs(e,c[0],!1,!0).filter(p=>![...a,...i].map(m=>m.id).includes(p.id));if((g.length===1||g.length===0)&&(i.includes(c[0])||i.push(c[0]),g.length===1&&c.length>1)){const p=mz(e,c.slice(1,c.length),[...a,...i]);let m=c.length;p&&(m=c.findIndex(w=>w.id===p.id)),[...c.slice(1,m)].forEach(w=>{i.includes(w)||i.push(w)})}}}),i},mz=(e,n,i)=>{let r=null;for(let o=0;o<n.length;o++)if(Zs(e,n[o],!1,!0).filter(c=>!i.map(h=>h.id).includes(c.id)).length>0){r=n[o];break}return r},vz=(e,n)=>{const i=D5(e),r=gf(e),o=i.filter(a=>a.groupId);[...r,...o].forEach(a=>{const u=df(e,a,!0);if(u.length){const h=Zs(e,u[0],!1,!0).filter(g=>g.id!==a.id);if(h.length===1){const g=n.map(p=>p.id);if(u.some(p=>g.includes(p.id))){const p=u.find(w=>!g.includes(w.id)),m=G.findPath(e,h[0]);Qt.setNode(e,{groupId:(p==null?void 0:p.id)||void 0},m)}}}})},i3=new WeakMap,ex=new WeakMap,yz=e=>{if(e){if(!i3.get(e)){const n=document.createElement("canvas");return i3.set(e,n),n}return i3.get(e)}return document.createElement("canvas")},Sw=(e,n,i,r=1e4)=>{let o=ex.get(n);return o||(o=Yx(e,n,i,r),ex.set(n,o),o)},wz=(e,n,i)=>{ex.set(n,i)},xz=(e,n)=>{ex.delete(n)};function Yx(e,n,i,r=1e4){r=kx(r,0);const a=yz(e).getContext("2d"),u=te.texts(n),c=[[]];for(const p of u){const[m]=p;te.string(m).split(`
`).forEach((T,D)=>{const b={...m,text:T};if(D===0)c[c.length-1].push(b);else{const B=[];B.push(b),c.push(B)}})}let h=0,g=0;return c.forEach((p,m)=>{let w=0,x=0,T=O7(i.fontSize),D=!1;const b=[[]];p.forEach((B,A)=>{const H=A===p.length-1;if(B["font-size"]&&(H||B.text!=="")){const W=O7(parseFloat(B["font-size"]));W>T&&(T=W)}const R=Cz(B,{fontFamily:i.fontFamily,fontSize:i.fontSize});a.font=R;const k=B.text;for(let W=0;W<k.length;W++){const U=k[W],nt=a.measureText(U).width;w+nt>r?(h=Math.max(h,w),w=nt,x+=T,D=!0,b.push([]),b[b.length-1].push(U)):(b[b.length-1].push(U),w+=nt)}}),x+=T,g+=x,D||(h=Math.max(h,w))}),{width:h,height:g}}const Cz=(e,n)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||n.fontSize}px ${n.fontFamily} `;class vv{constructor(n,i){this.board=n,this.options=i,this.isEditing=!1,this.getSize=(r,o)=>{const a=window.getComputedStyle(this.foreignObject.children[0]),u=a.fontFamily,c=parseFloat(a.fontSize),h=r||this.editor.children[0];return Yx(this.board,h,{fontSize:c,fontFamily:u},o||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(n){const i=this.options.getRectangle();this.g=ze(),this.foreignObject=p5(i.x,i.y,i.width,i.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:n,textPlugins:this.options.textPlugins,onChange:o=>{if(o.operations.some(a=>!pu.isSelectionOperation(a))){const{width:a,height:u}=this.getSize();this.options.onChange&&this.options.onChange({...o,width:a,height:u}),tr.set(this.board,!0)}},afterInit:o=>{this.editor=o},onComposition:o=>{if(o.type==="compositionend"){xz(this.board,this.editor.children[0]);return}const a=Ez(this.editor,o.data);if(a){const u=this.getSize(a.children[0]);wz(this.board,this.editor.children[0],u),this.options.onChange&&this.options.onChange({...u}),tr.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(n){PO(this.g,n)}updateAngle(n,i=0){Xs(this.g,n,i)}updateRectangle(n){const{x:i,y:r,width:o,height:a}=n||this.options.getRectangle();pm(this.g,o,a,i,r)}updateText(n){const i={text:n};this.textComponentRef.update(i)}edit(n,i){this.isEditing=!0,q3.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),Gb()?setTimeout(()=>{const c=j.end(this.editor,[0]);jt.select(this.editor,c)},0):jt.select(this.editor,[0]);const o=c=>{const h=Pe(this.board,ke(this.board,c.x,c.y)),g=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),p=I.isHit(I.getRectangleByPoints([h,h]),g),m=c.target.closest(".plait-board-attached");!p&&!m&&setTimeout(()=>{u()},0)},a=c=>{if(!c.isComposing&&(c.key==="Escape"||c.key==="Tab"||i&&i(c))){c.preventDefault(),c.stopPropagation(),u();return}},u=()=>{if(this.isEditing){this.updateRectangle(),document.removeEventListener("pointerdown",o),document.removeEventListener("keydown",a),q3.set(this.board,!1),tr.set(this.board,!1),n&&n();const c={readonly:!0};this.textComponentRef.update(c),this.isEditing=!1,this.exitCallback=void 0}};return document.addEventListener("pointerdown",o),document.addEventListener("keydown",a),this.exitCallback=u,u}destroy(){var n,i;(n=this.g)==null||n.remove(),(i=this.textComponentRef)==null||i.destroy(),this.exitCallback&&this.exitCallback()}}const Ez=(e,n)=>{if(e.selection&&_t.isCollapsed(e.selection)){const[i,r]=j.node(e,e.selection),o=e.selection.anchor.offset,u={children:[JSON.parse(JSON.stringify(e.children[0]))]},c=i.text.slice(0,o+1)+n+i.text.slice(o+1),h=te.get(u,r);return h.text=c,u}return null},Sz=e=>{const n=e;return n.renderText=(i,r)=>{throw new Error("No implementation for renderText method.")},n};var Tr;(function(e){e.left="left",e.center="center",e.right="right"})(Tr||(Tr={}));const Tz=e=>{const n=e;return n.renderImage=(i,r)=>{throw new Error("No implementation for renderImage method.")},n},SS={isActive(e,n){const i=te.get(e,H7);if(i){const{align:r}=i;return r===n}return!1},setAlign(e,n){const i={align:n};jt.setNodes(e,i,{at:H7})}},H7=[0];var Wr;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Wr||(Wr={}));const N7=[Wr.bold,Wr.color,Wr.italic,Wr.strike,Wr.underline,Wr.fontSize];var nx;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(nx||(nx={}));Wr.bold,Wr.italic,Wr.underline,Wr.strike;const Um=14,Eu={getMarks(e){const n={};let i=[];e.selection?i=e.selection:e.children&&e.children.length>0&&(i={anchor:j.start(e,[0]),focus:j.end(e,[0])});const r=j.nodes(e,{match:se.isText,at:i});for(const o of r){const[a]=o,{text:u,...c}=a;Object.assign(n,c)}for(const o in n)N7.includes(o)||delete n[o];return n},getMarksByElement(e){const n={},i=te.texts(e);for(const r of i){const[o]=r,{text:a,...u}=o;Object.assign(n,u)}for(const r in n)N7.includes(r)||delete n[r];return n},isMarkActive(e,n){var o,a;if(!(e!=null&&e.selection))return;const i=te.get(e,(a=(o=e==null?void 0:e.selection)==null?void 0:o.anchor)==null?void 0:a.path);if(!se.isText(i))return!1;const r=Eu.getMarks(e);return!!(r&&r[n])},toggleMark(e,n){r3(e),Eu.isMarkActive(e,n)?j.removeMark(e,n):j.addMark(e,n,!0)},setFontSizeMark(e,n,i=Um){r3(e),Number(n)===i?j.removeMark(e,Wr.fontSize):j.addMark(e,Wr.fontSize,Number(n))},setColorMark(e,n,i=gr){r3(e),n===i||n===null||n===void 0?j.removeMark(e,"color"):j.addMark(e,"color",n)}};function r3(e){e.selection||jt.select(e,[0])}const Sl={wrapLink(e,n,i){Sl.isLinkActive(e)&&Sl.unwrapLink(e);const{selection:r}=e,o=r&&_t.isCollapsed(r),a={type:"link",url:i,children:[{text:n}]};if(o||te.string(e)==="")jt.insertNodes(e,a);else if(r)jt.wrapNodes(e,a,{split:!0}),jt.collapse(e,{edge:"end"});else{const u={anchor:j.start(e,[0]),focus:j.end(e,[0])};jt.wrapNodes(e,a,{split:!0,at:u})}},unwrapLink(e,n){n||(n=e.selection,!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])})),jt.unwrapNodes(e,{at:n,match:i=>fe.isElement(i)&&i.type==="link"})},isLinkActive(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])});const[i]=j.nodes(e,{match:r=>fe.isElement(r)&&r.type==="link",at:n});return!!i},getLinkElement(e){let n=e.selection;!n&&e.children&&e.children.length>0&&(n={anchor:j.start(e,[0]),focus:j.end(e,[0])});const[i]=j.nodes(e,{match:r=>fe.isElement(r)&&r.type==="link",at:n});return i}};function G7(e){const n=/^(?:\w+:)?\/\/(\S+)$/,i=/^mailto:([^\s@]+@[^\s@]+\.[^\s@]+)$/,r=/^localhost[\:?\d]*(?:[^\:?\d]\S*)?$/,o=/^[^\s\.]+\.\S{2,}$/;if(typeof e!="string")return!1;const a=e.match(i);if(a)return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a[1]);const u=e.match(n);if(!u)return!1;const c=u[1];return c?!!(r.test(c)||o.test(c)):!1}const hB=e=>{const i=dd(e)[0];return!i||i.children.length===0?{}:Eu.getMarks(i)},Az=(e,n,i)=>{let r;if(i!=null&&i.length)r=i;else{const o=ne(e);if(o.length){const a=$G(e);if(!a)return;const u=Eu.getMarks(a),c=o.filter(h=>dd(h).some(p=>Eu.getMarks(p)[n]===u[n]));r=eB(e,c)}}r&&r.length&&r.forEach(o=>{Eu.toggleMark(o,n)})},Dz=(e,n,i,r)=>{const o=J5(e,r);if(o&&o.length){const a=ne(e);o.forEach(u=>{let c;if(typeof i=="function"){const h=a.find(g=>dd(g).includes(u));c=i(h)}else c=i;Eu.setFontSizeMark(u,n,c)})}},bz=(e,n,i,r)=>{const o=J5(e,r);o&&o.length&&o.forEach(a=>{i&&jt.select(a,i),n==="transparent"?j.removeMark(a,Wr.color):Eu.setColorMark(a,n)})},Bz=(e,n,i)=>{const r=J5(e,i);r&&r.length&&r.forEach(o=>SS.setAlign(o,n))},J5=(e,n)=>{let i;return n!=null&&n.length?i=n:i=eB(e),i},TS={setTextAlign:Bz,setTextColor:bz,setFontSize:Dz,setTextMarks:Az},z7=()=>O.jsx("span",{contentEditable:!1,style:{fontSize:0},children:String.fromCodePoint(160)}),Pz=({attributes:e,children:n,element:i})=>O.jsxs("a",{...e,style:{textDecoration:"none",cursor:"inherit"},"data-url":i.url,className:"plait-board-link",children:[O.jsx(z7,{}),n,O.jsx(z7,{})]}),Mz=e=>{const{insertData:n,insertText:i,isInline:r}=e;return e.isInline=o=>o.type&&["link"].includes(o.type)||r(o),e.insertText=o=>{o&&G7(o)?Sl.wrapLink(e,o,o):i(o)},e.insertData=o=>{const a=o.getData("text/plain");a&&G7(a)?Sl.wrapLink(e,a,a):n(o)},e},j7=e=>{const{text:n,readonly:i,onChange:r,onComposition:o,afterInit:a}=e,u=K.useCallback(p=>O.jsx(Lz,{...p}),[]),c=[n],h=K.useMemo(()=>{const p=Mz(AG(EG(xG(eH()))));return a&&a(p),p},[]);K.useEffect(()=>{n!==h.children[0]&&(h.children=[n],h.onChange())},[n,h]);const g=p=>{const{selection:m}=h;if(m&&_t.isCollapsed(m)){const{nativeEvent:w}=p;if(ln.isKeyHotkey("left",w)){p.preventDefault(),jt.move(h,{unit:"offset",reverse:!0});return}if(ln.isKeyHotkey("right",w)){p.preventDefault(),jt.move(h,{unit:"offset"});return}}};return O.jsx(wG,{editor:h,initialValue:c,onChange:p=>{r&&r({newText:h.children[0],operations:h.operations})},children:O.jsx(hG,{className:"slate-editable-container plait-text-container",renderElement:p=>O.jsx(Rz,{...p}),renderLeaf:u,readOnly:i===void 0?!0:i,onCompositionStart:p=>{o&&o(p)},onCompositionUpdate:p=>{o&&o(p)},onCompositionEnd:p=>{o&&o(p)},onKeyDown:g})})},Rz=e=>{const{attributes:n,children:i,element:r}=e;switch(r.type){case"link":return O.jsx(Pz,{...e});default:return O.jsx(Oz,{...e})}},Oz=({attributes:e,children:n,element:i})=>{const r={textAlign:i.align};return O.jsx("div",{style:r,...e,children:n})},Lz=({children:e,leaf:n,attributes:i})=>(n.bold&&(e=O.jsx("strong",{children:e})),n.code&&(e=O.jsx("code",{children:e})),n.italic&&(e=O.jsx("em",{children:e})),n.underlined&&(e=O.jsx("u",{children:e})),O.jsx("span",{style:{color:n.color},...i,children:e})),_z=e=>{const n=e;return n.renderText=(i,r)=>{const o=bx.createRoot(i);let a;const u=O.jsx(j7,{...r,afterInit:g=>{a=g,r.afterInit&&r.afterInit(g)}});o.render(u);let c={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:g=>{if(!(g&&c&&!Object.keys(g).every(w=>g[w]===c[w])))return;const m=Kt.isReadOnly(a);c={...c,...g},o.render(O.jsx(j7,{...c})),m===!0&&c.readonly===!1?setTimeout(()=>{Kt.focus(a)},100):m===!1&&c.readonly===!0&&(Kt.blur(a),Kt.deselect(a))}}},n},AS=new WeakMap,ix=e=>{const n=AS.get(e);return(n==null?void 0:n.length)===2},Fz=e=>{const{touchStart:n,touchMove:i,touchEnd:r}=e;let o=[],a=!1;return e.touchStart=u=>{o=Array.from(u.touches).map(c=>({pointerId:c.identifier,lastPoint:[c.clientX,c.clientY],currentPoint:[c.clientX,c.clientY],hasMoved:!1})),AS.set(e,o),o.length>=2&&e.viewport.zoom,n(u)},e.touchMove=u=>{if(Array.from(u.changedTouches).forEach(c=>{const h=o.find(g=>g.pointerId===c.identifier);h&&(h.lastPoint=h.currentPoint,h.currentPoint=[c.clientX,c.clientY],h.hasMoved=!0)}),o.length===2&&u.preventDefault(),o.length===2&&o.every(c=>c.hasMoved)){const[c,h]=o,g=MA(...c.lastPoint,...h.lastPoint),p=MA(...c.currentPoint,...h.currentPoint),m=p[0]-g[0],w=p[1]-g[1],x=G.getBoardContainer(e).getBoundingClientRect(),T=x.width/2,D=x.height/2,b=e.viewport.zoom,B=$g(e);let A=B[0]+T/b-m/b,H=B[1]+D/b-w/b,R=[A-x.width/2/b,H-x.height/2/b],k=b;const W=be(...c.lastPoint,...h.lastPoint),nt=be(...c.currentPoint,...h.currentPoint)/W,st=[c.currentPoint[0]-c.lastPoint[0],c.currentPoint[1]-c.lastPoint[1]],ft=[h.currentPoint[0]-h.lastPoint[0],h.currentPoint[1]-h.lastPoint[1]],Et=st[0]*ft[0]+st[1]*ft[1],ct=Math.sqrt(st[0]*st[0]+st[1]*st[1]),mt=Math.sqrt(ft[0]*ft[0]+ft[1]*ft[1]),wt=Et/(ct*mt||1);if(wt<-.7||wt<=.8&&a&&nt>=.01?a=!0:a=!1,a){k=Math.min(Math.max(e.viewport.zoom*nt,tb),eb);const P=G.getBoardContainer(e).getBoundingClientRect(),_=p[0]-P.x,N=p[1]-P.y;A=R[0]+_/b,H=R[1]+N/b,R=[A-_/k,H-N/k]}un.updateViewport(e,R,k),o[0].lastPoint=c.currentPoint,o[1].lastPoint=h.currentPoint,o[0].hasMoved=!1,o[1].hasMoved=!1;return}i(u)},e.touchEnd=u=>{const c=o.findIndex(h=>h.pointerId===u.changedTouches[0].identifier);c!==-1&&o.splice(c,1),AS.set(e,o),r(u)},e},dB=({value:e,children:n,options:i,plugins:r,viewport:o,theme:a,onChange:u,onSelectionChange:c,onValueChange:h,onViewportChange:g,onThemeChange:p})=>{const[m,w]=K.useState(()=>{const B=kz(e,i,r,o,a),A=Iz(B);return{v:0,board:B,listRender:A}}),{board:x,listRender:T}=m,D=K.useCallback(()=>{if(u){const k={children:x.children,operations:x.operations,viewport:x.viewport,selection:x.selection,theme:x.theme};u(k)}const B=x.operations.some(k=>jc.isSetSelectionOperation(k)),A=x.operations.some(k=>jc.isSetViewportOperation(k)),H=x.operations.some(k=>jc.isSetThemeOperation(k)),R=x.operations.length>0&&!x.operations.every(k=>jc.isSetSelectionOperation(k)||jc.isSetViewportOperation(k)||jc.isSetThemeOperation(k));h&&R&&h(x.children),c&&B&&c(x.selection),g&&A&&g(x.viewport),p&&H&&p(x.theme.themeColorMode),w(k=>({v:k.v+1,board:x,listRender:T}))},[x,u,c,h]);K.useEffect(()=>(Hw.set(x,()=>{if(x.operations.length&&x.operations.every(R=>R.type==="set_selection")){T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)});return}const A=x.operations.length&&x.operations.some(R=>R.type==="set_viewport");if(A&&lL(x)){Eb(x,!1),T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)});return}T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)}),A?x5(x):oL(x),Uw(x),ne(x).forEach(R=>{gn.getElementRef(R).updateActiveSection()})}),Nw.set(x,()=>{D()}),()=>{Hw.delete(x),Nw.delete(x)}),[x]);const b=K.useRef(!0);return K.useEffect(()=>{if(b.current){b.current=!1;return}e!==m.board.children&&!dw.get(x)&&(x.children=e,a&&(x.theme=a),T.update(x.children,{board:x,parent:x,parentG:G.getElementHost(x)}),un.fitViewport(x))},[e]),O.jsx(O5.Provider,{value:m,children:n})},kz=(e,n,i,r,o)=>{let a=lF(K_(q_(Y_(uF(oF(W_(cF(aF(_z(Tz(Sz(V_(e,n)))))))))))));return i.forEach(u=>{a=u(a)}),Fz(a),r&&(a.viewport=r),o&&(a.theme=o),a},Iz=e=>new Kb(e);function Hz(e,n){return Math.sqrt(Nz(e,n))}function Nz(e,n){return Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)}function ng(e,n,i){return[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i]}function Gz(e,n){const i=e[n+0],r=e[n+1],o=e[n+2],a=e[n+3];let u=3*r[0]-2*i[0]-a[0];u*=u;let c=3*r[1]-2*i[1]-a[1];c*=c;let h=3*o[0]-2*a[0]-i[0];h*=h;let g=3*o[1]-2*a[1]-i[1];return g*=g,u<h&&(u=h),c<g&&(c=g),u+c}function DS(e,n,i,r){const o=r||[];if(Gz(e,n)<i){const a=e[n+0];o.length?Hz(o[o.length-1],a)>1&&o.push(a):o.push(a),o.push(e[n+3])}else{const u=e[n+0],c=e[n+1],h=e[n+2],g=e[n+3],p=ng(u,c,.5),m=ng(c,h,.5),w=ng(h,g,.5),x=ng(p,m,.5),T=ng(m,w,.5),D=ng(x,T,.5);DS([u,p,x,D],0,i,o),DS([D,T,w,g],0,i,o)}return o}function Zo(e,n=.15,i){const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++){const u=a*3;DS(e,u,n,r)}return r}var we;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(we||(we={}));var me;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(me||(me={}));var de;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(de||(de={}));var bs;(function(e){e.name="name",e.content="content"})(bs||(bs={}));var Xo;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(Xo||(Xo={}));var Pa;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(Pa||(Pa={}));var Og;(function(e){e.table="table"})(Og||(Og={}));const $m={isTable:e=>e.type==="table",isVerticalText:e=>{var n;return((n=e.text)==null?void 0:n.direction)==="vertical"}},gB="plait-draw-plugin-key";var Lg;(function(e){e.lineText="line-text",e.geometryText="geometry-text"})(Lg||(Lg={}));const Me={rectangleAndText:4},Kx={strokeWidth:2,fill:U6},zz={selectionStrokeWidth:_i},Vm={width:100,height:100,strokeColor:gr,strokeWidth:2},U7={width:120,height:50},jz={width:138,height:80},$7={width:100,height:80},Uz={width:120,height:100},$z={text:""},tT={defaultTextMaxWidth:34*14},o3={width:44,height:44},vl={width:120,height:60},Vz={width:70,height:80},Wz={width:80,height:80},Xz={width:140,height:70},qz={width:124,height:60},pB={width:120,height:70},s3={width:160,height:100},bS={width:120,height:80},Yz={width:117,height:59},Kz={width:47,height:33},Zz={width:68,height:100},Qz={width:300,height:240},Jz={width:210,height:150,texts:[{id:bs.name,text:"",align:Tr.left},{id:bs.content,text:"",align:Tr.left}]},tj={width:18,height:80},K2={width:120,height:60},ej={width:200,height:150},V7={width:40,height:40},nj={width:20,height:20},ij={width:70,height:56},rj={width:120,height:56},oj={width:70,height:34},sj={width:400,height:280,texts:[{id:bs.name,text:"Opt | Alt | Loop",align:Tr.left},{id:bs.content,text:"[Condition]",align:Tr.left}]},aj={width:230,height:180,texts:[{text:"Class",align:Tr.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:Tr.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Tr.left}]},lj={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:Tr.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Tr.left}]},mB={[we.pentagonArrow]:U7,[we.processArrow]:U7,[we.cloud]:Uz,[we.twoWayArrow]:jz,[we.leftArrow]:$7,[we.rightArrow]:$7},vB={[me.connector]:o3,[me.process]:vl,[me.decision]:Xz,[me.data]:qz,[me.terminal]:vl,[me.manualInput]:Yz,[me.preparation]:vl,[me.manualLoop]:vl,[me.merge]:Kz,[me.delay]:vl,[me.storedData]:vl,[me.or]:o3,[me.summingJunction]:o3,[me.predefinedProcess]:vl,[me.offPage]:vl,[me.document]:pB,[me.multiDocument]:bS,[me.database]:Vz,[me.hardDisk]:vl,[me.internalStorage]:Wz,[me.noteCurlyLeft]:s3,[me.noteCurlyRight]:s3,[me.noteSquare]:s3,[me.display]:vl},yB={[de.actor]:Zz,[de.useCase]:pB,[de.container]:Qz,[de.note]:K2,[de.package]:Jz,[de.combinedFragment]:sj,[de.class]:aj,[de.interface]:lj,[de.activation]:tj,[de.object]:K2,[de.deletion]:V7,[de.activityClass]:K2,[de.simpleClass]:K2,[de.component]:bS,[de.template]:bS,[de.componentBox]:ej,[de.port]:nj,[de.branchMerge]:V7,[de.assembly]:rj,[de.providedInterface]:oj,[de.requiredInterface]:ij},uj={[de.package]:Object.keys(bs),[de.combinedFragment]:Object.keys(bs)},rx=10,cj=6,fj=8,wB=[me.or,me.summingJunction,de.activation,de.deletion,de.port,de.branchMerge,de.assembly,de.providedInterface,de.requiredInterface],hj=[de.package,de.combinedFragment],dj=[me.noteCurlyLeft,me.noteCurlyRight,me.noteSquare,de.requiredInterface,de.deletion],eT=()=>[...Object.keys(we),...Object.keys(me),...Object.keys(de)],xB=()=>Object.keys(Pa),gj=()=>Object.keys(me),pj=()=>Object.keys(de),W7=()=>Object.keys(qn),mj=()=>Object.keys(cx),vj=1e3,CB={[zi.default]:{strokeColor:gr,fill:"#FFFFFF"},[zi.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[zi.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[zi.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[zi.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[zi.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},rm=42,yj={width:580,height:524},wj={width:524,height:580},xj={width:580,height:524},Cj={width:524,height:580},EB={[Pa.swimlaneHorizontal]:Cj,[Pa.swimlaneVertical]:xj,[Pa.swimlaneHorizontalWithHeader]:wj,[Pa.swimlaneVerticalWithHeader]:yj},ox=5,SB={strokeWidth:2},Ej=4,Sj=6,Tj=1,Aj=1,Dj=12,dg=3,bj="",Wm=new WeakMap,X7=(e,n,i,r)=>{const o=Wm.get(e);return Wm.set(e,{...o,[XB(n,i)]:r})},Sm=(e,n,i)=>Wm.get(e)[XB(n,i)],q7=(e,n)=>{const i=Wm.get(e);delete i[n],Wm.set(e,i)};class nT{get shape(){return this.element.shape||this.element.type}constructor(n,i,r,o){this.board=n,this.texts=r,this.element=i,this.options=o}initialize(){const n=(this.board.getPluginOptions(wS)||{}).textPlugins;this.textManages=this.texts.map(r=>{const o=this.createTextManage(r,n);return X7(this.board,this.element,r,o),o}),gn.getElementRef(this.element).initializeTextManage(this.textManages)}draw(n){const i=I.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const o=Sm(this.board,this.element,r);r.text&&o&&(o.draw(r.text),n.append(o.g),(this.element.angle||this.element.angle===0)&&o.updateAngle(i,this.element.angle))})}update(n,i,r,o){this.element=n;const a=I.getCenterPoint(this.board.getRectangle(this.element)),u=(this.board.getPluginOptions(wS)||{}).textPlugins,c=i.filter(h=>!r.find(g=>g.id===h.id));c.length&&c.forEach(h=>{const g=Sm(this.board,n,h),p=this.textManages.findIndex(m=>m===g);p>-1&&h.text&&this.textManages.splice(p,1),g==null||g.destroy(),q7(this.board,h.id)}),r.forEach(h=>{if(h.text){let g=Sm(this.board,this.element,h);g?(g.updateText(h.text),g.updateRectangle()):(g=this.createTextManage(h,u),X7(this.board,n,h,g),g.draw(h.text),o.append(g.g),this.textManages.push(g)),(this.element.angle||this.element.angle===0)&&g.updateAngle(a,this.element.angle)}})}createTextManage(n,i){return new vv(this.board,{getRectangle:()=>this.getRectangle(n),onChange:o=>this.options.onChange(this.element,o,n),getMaxWidth:()=>this.getMaxWidth(n),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,n):this.getRectangle(n),textPlugins:i})}getRectangle(n){const i=br(this.shape).getTextRectangle;return i?i(this.board,this.element,n):vf(this.board,this.element)}getMaxWidth(n){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(n).width}destroy(){gn.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(i=>{q7(this.board,i.id)})}}const BS=e=>{const n=ne(e);return n&&n.length===1&&At.isElementByTable(n[0])},Bj=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>At.isElementByTable(r)),iT=new WeakMap;function gg(e){return iT.get(e)}function TB(e,n){return iT.set(e,n)}function Y7(e){return iT.delete(e)}function yv(e,n){const i=e==null?void 0:e.buildTable(n);if(!i||!i.points||!i.columns||!i.rows)throw new Error("can not get table cells points");const r=I.getRectangleByPoints(i.points),o=i.columns.length,a=i.rows.length,u=K7(i.columns,r.width,o,!0),c=K7(i.rows,r.height,a,!1);return i.cells.map(g=>{const p=i.rows.findIndex(A=>A.id===g.rowId),m=i.columns.findIndex(A=>A.id===g.columnId);let w=r.x;for(let A=0;A<m;A++)w+=u[A];let x=r.y;for(let A=0;A<p;A++)x+=c[A];const T=Z7(g,u,m,!0),D=w+T,b=Z7(g,c,p,!1),B=x+b;return{...g,points:[[w,x],[D,B]]}})}function md(e,n,i){try{const r=yv(e,n),o=r&&n.cells.findIndex(a=>a.id===i);return r[o]}catch{throw new Error("can not get table cell points")}}function K7(e,n,i,r){const o=[],a=r?"width":"height";let u=n;e.forEach((g,p)=>{g[a]&&(o[p]=g[a],u-=g[a])});const c=i-o.filter(g=>!!g).length,h=c>0?u/c:0;for(let g=0;g<i;g++)o[g]||(o[g]=h);return o}function Z7(e,n,i,r){const o=r?e.colspan||1:e.rowspan||1;let a=0;for(let u=0;u<o;u++){const c=i+u;a+=n[c]}return a}function Q7(e,n,i){const r=e.buildTable(n),o=yv(e,r),a=I.getRectangleByPoints([i,i]),u=o.find(c=>{const h=I.getRectangleByPoints(c.points);return I.isHit(a,h)});return u?r.cells.find(c=>c.id===u.id):null}function J7(e,n){const i=AB(e,n);i&&i.edit()}function AB(e,n){return Sm(e,void 0,n)}const DB=(e,n,i,r)=>{const o=e.columns.map(u=>u.id===n?{...u,width:i}:u),a=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:o,points:a}},bB=(e,n,i,r)=>{const o=e.rows.map(u=>u.id===n?{...u,height:i}:u),a=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:o,points:a}};function Pj(e,n,i,r){const o=`${r}Id`;e.forEach(a=>{a[o]===n&&(a[o]=i)})}function t8(e,n){e[`${n}s`].forEach(i=>{const r=Mn();Pj(e.cells,i.id,r,n),i.id=r})}function Mj(e){e.forEach(n=>{const i=Mn();n.id=i})}function BB(e){return e.text}function Rj(e,n,i){const r=yv(e,n),o=i.map(a=>r.find(c=>c.id===a.id).points);return I.getRectangleByPoints(o)}const a3=(e,n,i=null)=>{const r={id:Mn(),rowId:e,columnId:n};return i!==null&&(r.text={children:[{text:i}],align:Tr.center}),r},Oj=6,l3=new WeakMap,qg=e=>{let n="";switch(!0){case At.isText(e):{n=xs.text;break}case At.isBasicShape(e):{n=xs.basicShape;break}case At.isFlowchart(e):{n=xs.flowchart;break}case At.isArrowLine(e):{n=xs.arrowLine;break}case At.isUML(e):n=xs.UML}return n},PB=()=>({...qx(xs.arrowLine)}),vd=e=>{let n="";At.isBasicShape({shape:e})?n=e===we.text?xs.text:xs.basicShape:At.isUML({shape:e})?n=xs.UML:n=xs.flowchart;const i={...qx(n)},r={...i.text};return delete i.text,{textProperties:r,geometryProperties:i}},rT=(e,n)=>{var a;const i=qg(e);let r=((a=qx(i))==null?void 0:a.text)||{};const o=n.find(u=>u.type==="set_node");if(o){const{properties:u,newProperties:c}=o;for(const h in c){const g=c[h];g==null?delete r[h]:r[h]=g}for(const h in u)c.hasOwnProperty(h)||delete r[h];Q5(i,"text",r)}},Lj=(e,n)=>{const i=l3.has(e)?l3.get(e):[],r=i.indexOf(n);n===we.text||r===0||(r!==-1?i.splice(r,1):i.length===Oj&&i.pop(),i.unshift(n),l3.set(e,i))},_j="debug:plait:line-mirror",Z2=Gg(_j),oT=(e,n)=>{const i=[...n];return Ce.isVertical(i,e,dg)&&(i[0]=e[0]),Ce.isHorizontal(i,e,dg)&&(i[1]=e[1]),i};function Fj(e,n,i,r){const o={previous:null,next:null},a=e[r],u=e[r+1],c=Ce.isHorizontal(a,u),h=Ce.isVertical(a,u),g=e[r-1]??e[0],p=e[r-2]??n;(c&&Ce.isHorizontal(p,g)||h&&Ce.isVertical(p,g))&&(o.previous=g);const m=e[r+2]??e[e.length-1],w=e[r+3]??i;return(c&&Ce.isHorizontal(m,w)||h&&Ce.isVertical(m,w))&&(o.next=m),o}function kj(e,n,i,r){let o=e,a=n;if(Ce.isHorizontal(e,n)){const u=Ce.getOffsetY(i.startPoint,i.endPoint);let c=e[1]+u;r.previous&&Math.abs(r.previous[1]-c)<dg?c=r.previous[1]:r.next&&Math.abs(r.next[1]-c)<dg&&(c=r.next[1]),o=[e[0],c],a=[n[0],c]}if(Ce.isVertical(e,n)){const u=Ce.getOffsetX(i.startPoint,i.endPoint);let c=e[0]+u;r.previous&&Math.abs(r.previous[0]-c)<dg?c=r.previous[0]:r.next&&Math.abs(r.next[0]-c)<dg&&(c=r.next[0]),o=[c,e[1]],a=[c,n[1]]}return[o,a]}function MB(e,n,i,r,o){let a=null,u=null;const c=r[o],h=r[o+1];if(!c||!h)return{index:a,deleteCount:u};const g=i.slice(1,-1),p=g.findIndex(w=>Ce.isEquals(w,c)),m=g.findIndex(w=>Ce.isEquals(w,h));if(Math.max(p,m)>-1){if(p>-1&&m>-1)return{index:p,deleteCount:2};if(p>-1&&m===-1)return p<g.length-1&&Ce.isAlign([g[p],g[p+1],c,h])?{index:p,deleteCount:2}:{index:p,deleteCount:1};if(p===-1&&m>-1)return m>0&&Ce.isAlign([g[m],g[m-1],c,h])?{index:m-1,deleteCount:2}:{index:m,deleteCount:1}}else for(let w=0;w<g.length-1;w++){const x=g[w],T=g[w+1];if(Ce.isAlign([x,T,c,h])){a=w,u=2;break}if(Ce.isAlign([x,T,c])){a=Math.min(w+1,g.length-1),u=1;break}if(Ce.isAlign([x,T,h])){a=Math.max(w-1,0),u=1;break}}if(a===null)if(u=0,g.length>0){const w=Cv(e,n),x=Ev(e,n,w),T=Pg(oB(x,e)),D=gu(T.slice(1,T.length-1)),b=[r[0],...g,r[r.length-1]],B=RB(e,b,D,x);for(let A=o-1;A>=0;A--){const H=B.slice(1,-1).findIndex(R=>Ce.isEquals(R,r[A]));if(H>-1){a=H+1;break}}a===null&&(a=0,Ce.isAlign(r)&&(u=g.length))}else a=0;return{index:a,deleteCount:u}}function RB(e,n,i,r){for(let o=1;o<n.length-2;o++)Ij(e,o,n,i,r);return n}const Ij=(e,n,i,r,o)=>{const a=i[n-1],u=i[n],c=i[n+1],h=i[n+2],g=[a,u],p=[c,h],m=Ce.isAlign(g),w=Ce.isAlign(p);let x=!1,T=!1;if(!m||!w){const D=PS(r,g[0],g[1]),b=PS(r,p[0],p[1]),B=D.length>0&&b.length>0;x=!m&&!B,T=!w&&!B}if(x||T){const D=[u,c],b=Nj(D,r),B=Gj(e,D,b,o.sourceRectangle,o.targetRectangle);if(B.length===1){const A=B[0];x&&i.splice(n,1,A[0]),T&&i.splice(n+1,1,A[1])}else{const H=Ce.isHorizontal(u,c)?0:1;if(x){const R=[u[0],u[1]];R[H]=a[H],i.splice(n,1,R)}if(T){const R=[c[0],c[1]];R[H]=h[H],i.splice(n+1,1,R)}}}};function Hj(e,n,i,r,o){const{deleteCount:a}=MB(e,n,i,r,o);return a!==null&&a>1}function PS(e,n,i){let r=[],o=-1,a=-1;for(let u=0;u<e.length;u++)if(Ce.isAlign([e[u],n])&&(o=u),o>-1&&Ce.isAlign([e[u],i])){a=u;break}return o>-1&&a>-1&&(r=e.slice(o,a+1)),r}function Nj(e,n){const i=Ce.isHorizontal(e[0],e[1]),r=[];for(let o=0;o<n.length-1;o++){const a=n[o],u=n[o+1],c=Ce.isHorizontal(a,u,.1);i&&c&&r.push([a,u]),!i&&!c&&r.push([a,u])}return r}function Gj(e,n,i,r,o){Z2.isDebug()&&Z2.clear();const a=[];for(let u=0;u<i.length;u++){const c=i[u],h=[n[0][0],n[0][1]],g=[n[1][0],n[1][1]],m=Ce.isHorizontal(h,g)?0:1;h[m]=c[0][m],g[m]=c[1][m];const w=I.getRectangleByPoints([h,g,...c]);!I.isHit(w,r)&&!I.isHit(w,o)&&(a.push([h,g]),Z2.isDebug()&&Z2.drawPolygon(e,I.getCornerPoints(w)))}return a}const OB=e=>e.length===1?!0:e.some((n,i)=>{const r=e[i-1],o=e[i+1],a=r&&[r,n],u=o&&[n,o],c=a&&Ce.isAlign(a),h=u&&Ce.isAlign(u);return i===0?!h:i===e.length-1?!c:!c&&!h}),e8=20,zj=(e,n,i)=>{const r=ze();if(dr.isSourceMark(e,ur.none)&&dr.isTargetMark(e,ur.none))return null;const o=Tn(e),a=o*o/3;if(n.length===1&&(n=[n[0],[n[0][0]+.1,n[0][1]]]),!dr.isSourceMark(e,ur.none)){const u=zm(n[0],n[1],e8+a),c=n8(e,{marker:e.source.marker,source:u,target:n[0],isSource:!0},i);c&&r.appendChild(c)}if(!dr.isTargetMark(e,ur.none)){const u=zm(n[n.length-1],n[n.length-2],e8+a),c=n8(e,{marker:e.target.marker,source:u,target:n[n.length-1],isSource:!1},i);c&&r.appendChild(c)}return r},n8=(e,n,i)=>{const{marker:r,target:o,source:a,isSource:u}=n;let c;switch(r){case ur.openTriangle:{c=Vj(e,a,o,i);break}case ur.solidTriangle:{c=$j(a,o,i);break}case ur.arrow:{c=Uj(e,a,o,i);break}case ur.sharpArrow:{c=jj(a,o,i);break}case ur.oneSideUp:{c=i8(a,o,u?"down":"up",i);break}case ur.oneSideDown:{c=i8(a,o,u?"up":"down",i);break}case ur.hollowTriangle:{c=Xj(a,o,i);break}case ur.singleSlash:{c=Wj(a,o,u,i);break}}return c},jj=(e,n,i)=>{const r=n,{pointLeft:o,pointRight:a}=Ug(e,n,20),u=ze(),c=g5();let h=`M${a[0]},${a[1]}A25,25,20,0,1,${o[0]},${o[1]}L${r[0]},${r[1]}Z`;return c.setAttribute("d",h),c.setAttribute("stroke",`${i==null?void 0:i.stroke}`),c.setAttribute("stroke-width",`${i==null?void 0:i.strokeWidth}`),c.setAttribute("fill",`${i==null?void 0:i.stroke}`),u.appendChild(c),u},Uj=(e,n,i,r)=>{const o=fi(n,i),a=Tn(e),u=[i[0]+a*o[0]/2,i[1]+a*o[1]/2],c=be(...n,...u),h=[u[0]-(c*3/5+a)/2*o[0],u[1]-(c*3/5+a)/2*o[1]],{pointLeft:g,pointRight:p}=Ug(n,u,30),m=qs([g,u,p,h],{...r,fill:r.stroke},!0);return m.querySelector("path").setAttribute("stroke-linejoin","round"),m},$j=(e,n,i)=>{const r=n,{pointLeft:o,pointRight:a}=Ug(e,r,30);return qs([o,r,a],{...i,fill:i.stroke},!0)},Vj=(e,n,i,r)=>{const o=fi(n,i),a=Tn(e),u=[i[0]+a*o[0]/2,i[1]+a*o[1]/2],{pointLeft:c,pointRight:h}=Ug(n,u,40);return qs([c,u,h],r)},i8=(e,n,i,r)=>{const{pointLeft:o,pointRight:a}=Ug(e,n,40);return qs([i==="up"?a:o,n],r)},Wj=(e,n,i,r)=>{const o=be(...e,...n),a=zm(n,e,o/2),u=i?120:60,c=Dg(...e,...a,u*Math.PI/180),h=Dg(...n,...a,u*Math.PI/180);return qs([c,h],r)},Xj=(e,n,i)=>{const{pointLeft:r,pointRight:o}=Ug(e,n,30);return qs([r,o,n],{...i,fill:"white"},!0)};class LB extends Bs{canDraw(n){return!0}draw(n){let i;return i=Kj(this.board,n),i}}const Bi=(e,n,i)=>{const r=Sw(e,n,{fontSize:Um,fontFamily:xg},i);return qj(r)},qj=e=>({...e,width:e.width<ox?ox:e.width}),Yj=(e,n,i,r,o,a)=>({id:Mn(),type:"arrow-line",shape:e,source:i,texts:o||[],target:r,opacity:1,points:n,...a}),To=(e,n)=>{switch(n.shape){case qn.elbow:return tC(e,n);case qn.curve:return _B(e,n);default:{const i=dr.getPoints(e,n),r=Cv(e,n);return i[0]=r.source.point,i[i.length-1]=r.target.point,i}}},_B=(e,n)=>{if(n.points.length===2){const i=Cv(e,n),{source:r,target:o}=i,a=i.source.boundElement,u=i.target.boundElement;let c=[r.point];const g=12+be(...r.point,...o.point)/3;if(a&&c.push(hg(r.point,r.vector,g)),u&&c.push(hg(o.point,o.vector,g)),a&&!u||!a&&u){c.push(o.point);const m=tU(c);return Zo(m)}return!a&&!u&&(c.push(hg(r.point,r.vector,g)),c.push(hg(o.point,o.vector,g))),c.push(o.point),Zo(c)}else{let i=dr.getPoints(e,n);i=Pg(i);const r=fv(i);return Zo(r)}},Kj=(e,n)=>{const i=Tn(n),r=Kg(e,n),o=Zg(e,n),a=pf(o,i),u={stroke:r,strokeWidth:i,strokeLineDash:a},c=ze();let h=To(e,n),g;n.shape===qn.curve?g=G.getRoughSVG(e).curve(h,u):g=qs(h,u);const p=Mn();g.setAttribute("mask",`url(#${p})`),n.strokeStyle===Co.dotted&&Ze(g,"round"),c.appendChild(g);const{mask:m,maskTargetFillRect:w}=eU(e,n,p);c.appendChild(m),g.appendChild(w);const x=zj(n,h,{stroke:r,strokeWidth:i});return x&&c.appendChild(x),c},_g=(e,n,i)=>{const r=hT(e,i,n),o=r.connectorPoint||r.edgePoint;return Zj(o,i)},Zj=(e,n)=>{let i=I.getRectangleByPoints(n.points);return[(e[0]-i.x)/i.width,(e[1]-i.y)/i.height]},Qj=(e,n)=>{const i=I.getRectangleByPoints(n.points),r=yf(n);return br(r).getConnectorPoints(i).find(a=>be(...a,...e)<=fj)},sT=(e,n,i)=>{const r=n.texts[i],o=To(e,n),a=q6(o,r.position),u=Bi(e,r.text);return{x:a[0]-u.width/2,y:a[1]-u.height/2,width:u.width,height:u.height}},Jj=e=>hd(e,{match:n=>At.isArrowLine(n),recursion:n=>At.isDrawElement(n)}),tU=e=>{const n=[],i=e.length/3;for(let r=0;r<i;r++){const o=e[r],a=e[r+1],u=e[r+2],c=be(...o,...a),h=be(...u,...a),g=zm(o,a,c*2/3),p=zm(u,a,h*2/3);n.push(o,g,p,u)}return n},aT=(e,n,i,r,o,a,u)=>{const c=fT(e,r),h=c?_g(e,r,c):void 0,g=o?_g(e,i,o):void 0,p=c?c.id:void 0,m=new LB(e),w=PB();let x,T;x=w.source,T=w.target,x&&delete w.source,T&&delete w.target;const D=Yj(n,[i,r],{marker:x||ur.none,connection:g,boundId:o==null?void 0:o.id},{marker:T||ur.arrow,connection:h,boundId:p},[],{strokeWidth:SB.strokeWidth,...w,...u}),B=To(e,D)[0];return D.points[1]=oT(B,r),m.processDrawing(D,a),G.getElementTopHost(e).append(a),D};function eU(e,n,i){const r=EO();r.setAttribute("id",i);const o=To(e,n);let a=I.getRectangleByPoints(o);a=I.getOutlineRectangle(a,-30);const u=RE(a,{fill:"white"});r.appendChild(u),n.texts.forEach((g,p)=>{let m=sT(e,n,p);m=I.inflate(m,Ej*2);const w=RE(m,{fill:"black"});r.appendChild(w)});const h=RE(a);return h.setAttribute("opacity","0"),h.setAttribute("fill","none"),{mask:r,maskTargetFillRect:h}}const lT=(e,n,i)=>{const r=n.texts;if(!r.length)return-1;const o=To(e,n);return r.findIndex(a=>{const u=q6(o,a.position),c=Bi(e,a.text),h={x:u[0]-c.width/2,y:u[1]-c.height/2,width:c.width,height:c.height};return I.isHit(h,I.getRectangleByPoints([i,i]))})},uT=e=>hj.includes(e),Su=e=>At.isGeometry(e)&&uT(e.shape),nU=e=>uj[e],iU=(e,n,i={})=>{const r=Mn(),o=rU(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:o,points:n,...i}},rU=e=>{var u;const i={...vd(e).textProperties},r=i==null?void 0:i.align;i==null||delete i.align;const o=((u=vT(e))==null?void 0:u.texts)||[];return(nU(e)||[]).map(c=>{const h=o==null?void 0:o.find(g=>(g==null?void 0:g.key)===c);return{id:c,text:gd((h==null?void 0:h.text)||"",r||(h==null?void 0:h.align)||Tr.center,i)}})},oU=(e,n,i)=>{const r=br(n.shape),o=I.getRectangleByPoints([i,i]);let a;return r.getTextRectangle&&(a=n.texts.find(u=>{const c=r.getTextRectangle(e,n,{id:u.id});return I.isHit(o,c)})),a};class FB extends Bs{canDraw(n){return!0}draw(n){let i;return i=lU(this.board,n),i}}const Jc=(e,n)=>{switch(n.shape){case Ym.straight:return n.points;case Ym.curve:{if(n.points.length===2)return Zo(n.points);{let i=n.points;const r=fv(i);return Zo(r)}}default:return null}},sU=(e,n,i)=>({id:Mn(),type:"vector-line",shape:e,opacity:1,points:n,...i}),aU=(e,n,i,r,o)=>{const a=new FB(e),u=PB(),c=sU(n,[...i,r],{strokeWidth:SB.strokeWidth,...u}),h=i[i.length-1];return c.points[c.points.length-1]=oT(h,r),a.processDrawing(c,o),G.getElementTopHost(e).append(o),c},lU=(e,n)=>{const i=Tn(n),r=Kg(e,n),o=Zg(e,n),a=pf(o,i),u=Qx(e,n),c={stroke:r,strokeWidth:i,strokeLineDash:a,fill:u},h=ze();let g=Jc(e,n);const p=qs(g,c),m=Mn();return p.setAttribute("mask",`url(#${m})`),n.strokeStyle===Co.dotted&&Ze(p,"round"),h.appendChild(p),h},Yg=e=>{const n=[];for(let i=0;i<e.length;i++){let r=i==e.length-1?0:i+1;n.push([(e[i][0]+e[r][0])/2,(e[i][1]+e[r][1])/2])}return n},kB=(e,n)=>{const i=[];for(let r=1;r<=e.length;r++){let o=e[r-1],a=r===e.length?e[0]:e[r];const u=FG(n,o,a);i.push(...u)}return i},pr=(e,n)=>{for(let i=1;i<=e.length;i++){let r=e[i-1],o=i===e.length?e[0]:e[i];if(X6(n,r,o))return[r,o]}return null};function MS(e){const n=e.width/7,i=e.height/3.2,r=n/8.5,o=i/20,a=[e.x+n,e.y+i],u=[{rx:r,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2,endY:e.y+i/2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*4.2,endY:e.y+i/2.2},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5.8,endY:e.y+i},{rx:r,ry:o*1.3,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*6,endY:e.y+i*2.2},{rx:r,ry:o*1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*5,endY:e.y+i*2.8},{rx:r,ry:o/1.2,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n*2.8,endY:e.y+i*2.8},{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+i*2.2},{rx:r,ry:o*1.42,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+n,endY:e.y+i}];return{startPoint:a,arcCommands:u}}const IB={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,arcCommands:a}=MS(n),u=`M ${o[0]} ${o[1]} `+a.map(h=>`A ${h.rx} ${h.ry} ${h.xAxisRotation} ${h.largeArcFlag} ${h.sweepFlag} ${h.endX} ${h.endY}`).join(`
`)+" Z",c=r.path(u,{...i,fillStyle:"solid"});return CO(c,"round"),c},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,arcCommands:r}=MS(e);let o=1/0,a=n,u=i;for(const c of r){const h=Ix(n,u,c),g=be(n[0],n[1],h[0],h[1]);g<o&&(o=g,a=h),u=[c.endX,c.endY]}return a},getEdgeByConnectionPoint(e,n){const i=IB.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=.6666666666666666;return I.getRectangleByPoints(n.points),hi(e,n,i)}},HB=(e,n,i)=>lT(e,n,i)!==-1,Xm=(e,n)=>ab(n,e)<=a5,NB=(e,n,i)=>{const r=To(e,n);return HB(e,n,i)||Xm(r,i)},GB=(e,n,i)=>{const r=Jc(e,n);return xv(n.points)&&rf(i,r)||Xm(r,i)},uU=(e,n,i)=>{const r=br(n.shape);if(Su(n))return n.texts.some(a=>{const u=r.getTextRectangle(e,n,{id:a.id});return sx(i,I.getCornerPoints(u),n.angle)});{const o=r.getTextRectangle?r.getTextRectangle(e,n):vf(e,n);return sx(i,I.getCornerPoints(o),n.angle)}},zB=(e,n,i)=>{const r=br(n.shape);if(Su(n))return n.texts.some(a=>{const u=r.getTextRectangle(e,n,{id:a.id});return I.isPointInRectangle(u,i)});{const o=r.getTextRectangle?r.getTextRectangle(e,n):vf(e,n);return I.isPointInRectangle(o,i)}},jB=e=>{if(!cT(e))return!0;const n=K5(e);return j.isEmpty(n,n.children[0])},cU=(e,n,i)=>{const r=I.getRectangleByPoints([i.anchor,i.focus]);if(At.isGeometry(n)){const o=r8(e,r,n);return o||!jB(n)&&uU(e,n,r)}if(At.isImage(n))return r8(e,r,n);if(At.isArrowLine(n)){const o=To(e,n);return Gw(o,r)}if(At.isVectorLine(n)){const o=Jc(e,n);return Gw(o,r)}return null},r8=(e,n,i)=>{const r=I.getRectangleByPoints(i.points);return sx(n,I.getCornerPoints(r),i.angle)},sx=(e,n,i)=>{let r=S_(n,i)||n;return Gw(r,e)},UB=(e,n)=>{let i=$B(e,n),r=n.length;i&&(r=n.indexOf(i)+1);const o=n.slice(0,r),a=hU(o);return a?a[0]:oz(e,o,"asc")[0]},$B=(e,n)=>{let i=null;for(let r=0;r<n.length;r++){const o=n[r];if(Zx(e,o)||wv(o)){const a=Qx(e,o);if(sz(a)){i=o;break}}}return i},fU=(e,n)=>$B(e,[n])!==null,hU=e=>{const n=e.filter(i=>At.isText(i)||At.isLine(i)||At.isImage(i));return n.length?n:null},dU="debug:plait:hit:shape:edge:sample-points",ig=Gg(dU),gU=[we.cloud],pU=(e,n,i,r=!0)=>{const o=e.getRectangle(n);if(i=af(e,i,n)||i,At.isGeometry(n)&&o){if(ig.isDebug()&&gU.includes(n.shape)){ig.clear();const{startPoint:c,arcCommands:h}=MS(o),g=[c,...h.map(x=>[x.endX,x.endY])];ig.drawCircles(e,g,5,!1);let p=1/0,m=i,w=c;for(const x of h){const T=Ix(i,w,x),D=be(i[0],i[1],T[0],T[1]),{center:b}=lb(w,x);ig.drawCircles(e,[b],8,!1,{fill:"yellow"}),D<p&&(p=D,m=T),w=[x.endX,x.endY]}ig.drawCircles(e,[i],12,!1,{fill:"black",stroke:"black"}),ig.drawCircles(e,[m],12,!1,{fill:"green",stroke:"green"})}if(VB(e,n,i,a5))return!0;const a=br(yf(n));if(At.isText(n)){const c=vf(e,n);return I.isPointInRectangle(c,i)}return r&&jB(n)&&!fU(e,n)?!1:zB(e,n,i)||a.isInsidePoint(o,i)}if(At.isImage(n)){const a=I.getRectangleByPoints(n.points);return I.isPointInRectangle(a,i)}return At.isArrowLine(n)?NB(e,n,i):At.isVectorLine(n)?GB(e,n,i):null},VB=(e,n,i,r)=>{const o=QB(n,i);return be(o[0],o[1],i[0],i[1])<=r},mU=(e,n,i,r)=>{const o=I.inflate(I.getRectangleByPoints(n.points),r);return br(yf(n)).isInsidePoint(o,i)},vU=(e,n,i)=>{const r=e.getRectangle(n);if(i=af(e,i,n)||i,At.isGeometry(n)&&!At.isGeometryByTable(n)){const o=br(yf(n)),a=o.isInsidePoint(r,i);if(a)return a;if(o.getTextRectangle){const u=zB(e,n,i);if(u)return u}}if(At.isImage(n)){const o=I.getRectangleByPoints(n.points);return I.isPointInRectangle(o,i)}return At.isArrowLine(n)?NB(e,n,i):At.isVectorLine(n)?GB(e,n,i):null},vf=(e,n)=>{const i=At.isText(n)?n.autoSize:!1,r=I.getRectangleByPoints(n.points),o=Tn(n),a=r.width-Me.rectangleAndText*2-o*2,u=Bi(e,n.text,i?tT.defaultTextMaxWidth:a);return i?{height:u.height,width:u.width,x:r.x+Me.rectangleAndText+o,y:r.y+(r.height-u.height)/2}:{height:u.height,width:a>0?a:0,x:r.x+Me.rectangleAndText+o,y:r.y+(r.height-u.height)/2}},hi=(e,n,i)=>{const r=I.getRectangleByPoints(n.points),o=i*r.width-Me.rectangleAndText*2-Tn(n)*2,a=Bi(e,n.text,o);return{height:a.height,width:o,x:r.x+(r.width-o)/2,y:r.y+(r.height-a.height)/2}},Tn=e=>At.isText(e)?0:e.strokeWidth||Kx.strokeWidth,Pu=(e,n)=>{Lj(e,n.shape),Qt.insertNode(e,n,[e.children.length]),zg(e),cd(e,n),un.updatePointerType(e,nn.selection)},cT=e=>At.isText(e)?!0:At.isImage(e)?!1:At.isGeometry(e)?eP(e):At.isArrowLine(e)?dd(e).length>0:At.isElementByTable(e)?e.cells.some(n=>BB(n)):!0,yU=e=>e.some(n=>cT(n)),wv=e=>At.isDrawElement(e)?At.isText(e)||At.isArrowLine(e)||At.isImage(e)?!1:At.isVectorLine(e)?xv(e.points):At.isGeometry(e)?_U(e):!0:!1,Zx=(e,n)=>At.isCustomGeometryElement(e,n)&&xv(n.points),fT=(e,n)=>{let i=WB(e,n);if(i){const r=hT(e,i,n);if(r.isHitConnector||r.isHitEdge)return i}return null},hT=(e,n,i)=>{const r=af(e,i,n)||i,o=Qj(r,n),a=QB(n,r);return{isHitEdge:VB(e,n,r,cj),isHitConnector:!!o,connectorPoint:o,edgePoint:a}},WB=(e,n,i=rx)=>{let r=null;return wU(e,o=>{r===null&&mU(e,o,af(e,n,o)||n,i*2)&&(r=o)}),r},wU=(e,n)=>{Ar(e,i=>{!G.isBoard(i)&&At.isShapeElement(i)&&n(i)},ud(e),!0)},o8=(e,n,i,r,o)=>br(i).draw(e,n,r,o),xU=(e,n,i={hasMask:!0,hasConnector:!0})=>{const r=ze(),o=I.getRectangleByPoints(n.points),a=I.inflate(o,W3),u=yf(n);let c;At.isElementByTable(n)&&(c={element:n});const h=o8(e,a,u,{stroke:Ko,strokeWidth:W3},c);if(r.appendChild(h),i.hasMask){const g=o8(e,a,u,{stroke:Ko,strokeWidth:0,fill:wv(n)?m5:Kx.fill,fillStyle:"solid"},c);r.appendChild(g)}return i.hasConnector&&br(u).getConnectorPoints(o).forEach(p=>{const m=fd(G.getRoughSVG(e),p,8,{stroke:Ko,strokeWidth:_i,fill:"#FFF",fillStyle:"solid"});r.appendChild(m)}),r},XB=(e,n)=>e&&Su(e)?`${e.id}-${n.id}`:n.id,xv=e=>{const n=e[0],i=e[e.length-1];return n[0]===i[0]&&n[1]===i[1]},ax=e=>Ux(e,Lg.geometryText,$z.text),Kg=(e,n)=>{const i=MU(e.theme.themeColorMode);return n.strokeColor||i},Qx=(e,n)=>{const i=At.isFlowchart(n)&&wv(n)?RU(e.theme.themeColorMode):Kx.fill;return n.fill||i},Zg=(e,n)=>n.strokeStyle||Co.solid;class qB extends Bs{canDraw(n,i){return!0}draw(n,i){const r=I.getRectangleByPoints(n.points),o=n.shape;if(o===we.text)return;const a=Qx(this.board,n),u=Tn(n),c=Kg(this.board,n),h=Zg(this.board,n),g=pf(h,u);return DU(this.board,I.inflate(r,-u),o,{stroke:c,strokeWidth:u,fill:a,strokeLineDash:g})}}function YB(e,n){const i=[],r=n.shape,o=10;if(r===qn.straight){const a=At.isArrowLine(n)?dr.getPoints(e,n):n.points;for(let u=0;u<a.length-1;u++)be(...a[u],...a[u+1])<o||i.push([(a[u][0]+a[u+1][0])/2,(a[u][1]+a[u+1][1])/2])}if(r===qn.curve){const a=At.isArrowLine(n)?dr.getPoints(e,n):n.points,u=At.isArrowLine(n)?_B(e,n):Jc(e,n);if(a.length===2){const h=u.length-1,g=Math.round((0+h)/2);i.push(u[g])}else for(let c=0;c<a.length-1;c++){const h=u.findIndex(w=>w[0]===a[c][0]&&w[1]===a[c][1]),g=u.findIndex(w=>w[0]===a[c+1][0]&&w[1]===a[c+1][1]),p=Math.round((h+g)/2);be(...a[c],...a[c+1])<o||i.push(u[p])}}if(r===qn.elbow){const a=tC(e,n),u=Ev(e,n);if(!wT(n,u)){const[c,h]=nP(e,n);for(let g=0;g<a.length-1;g++){if(g==0&&Ce.isEquals(a[g+1],c)||g===a.length-2&&Ce.isEquals(a[a.length-2],h))continue;const[p,m]=a[g],[w,x]=a[g+1],T=[(p+w)/2,(m+x)/2];i.push(T)}}}return i}var fr;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(fr||(fr={}));const KB=(e,n,i)=>{let r=At.isArrowLine(n)?dr.getPoints(e,n):n.points;const o=RS(r,i);if(o!==-1){const c=o;if(o===0)return{handle:fr.source,handleIndex:c};if(o===r.length-1)return{handle:fr.target,handleIndex:c};if(n.shape!==qn.elbow)return{handleIndex:c}}const a=YB(e,n),u=RS(a,i);if(u!==-1)return{handle:fr.addHandle,handleIndex:u}};function RS(e,n){const i=e.map(o=>({x:o[0]-Ba/2,y:o[1]-Ba/2,width:Ba,height:Ba})),r=i.find(o=>I.isHit(I.getRectangleByPoints([n,n]),o));return r?i.indexOf(r):-1}class ZB extends Bs{constructor(n,i={active:!0}){super(n,i),this.board=n,this.onlySelectedCurrentLine=!1}canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=ne(this.board);if(this.onlySelectedCurrentLine=o.length===1,this.onlySelectedCurrentLine){r.classList.add(uv);const a=At.isArrowLine(n)?dr.getPoints(this.board,n):n.points;let u=[...a],c=[];n.shape===qn.elbow&&(u=a.slice(0,1).concat(a.slice(-1)),c=iP(this.board,n,i.linePoints)),u.map(m=>Om(this.board,m)).forEach(m=>{const w=D7(this.board,m);r.appendChild(w)});const p=YB(this.board,n).map(m=>Om(this.board,m));if(!G.hasBeenTextEditing(this.board))for(let m=0;m<p.length;m++){const w=p[m];if(n.shape===qn.elbow&&c.length){const T=RS(p,w);if(Hj(this.board,n,[...a],c,T)){const b=D7(this.board,w);r.appendChild(b);continue}}const x=bG(this.board,w);r.appendChild(x)}}else{const a=this.board.getRectangle(n);if(a){const u=qr(this.board,a);let c="0.5";(u.height===0||u.width===0)&&(c="0.8");const h=Fa(this.board,u,{stroke:Wg,strokeWidth:zz.selectionStrokeWidth});h.style.opacity=c,r.appendChild(h)}}return r}needUpdate(){return ne(this.board).length===1!==this.onlySelectedCurrentLine}}const ZT=class ZT extends Bs{constructor(n){super(n,{active:!0}),this.board=n,this.hoverElement=null}canDraw(n,i){const r=ne(this.board);return!!(i.selected&&r.length===1&&!Dr(this.board))}draw(n,i){return this.autoCompleteG=ze(),pT(this.board,n,!0).forEach((o,a)=>{const u=fd(G.getRoughSVG(this.board),o,Sj,{stroke:"none",fill:Rm(Wg,Tj),fillStyle:"solid"});u.classList.add(`line-auto-complete-${a}`),this.autoCompleteG.appendChild(u)}),this.autoCompleteG}removeAutoCompleteG(n){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${n}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};ZT.key="line-auto-complete-generator";let Mu=ZT;class CU extends nT{get textManage(){return this.textManages[0]}constructor(n,i,r,o){super(n,i,[{id:i.id,text:r}],o)}update(n,i,r,o){Su(n)||super.update(n,[{text:i,id:n.id}],[{text:r,id:n.id}],o)}}class Jx extends Bs{canDraw(n,i){return!0}draw(n,i){const r=I.getRectangleByPoints(n.points),o=Tn(n),a=Kg(this.board,n),u=Zg(this.board,n),c=pf(u,o);return br(Og.table).draw(this.board,r,{strokeWidth:o,stroke:a,strokeLineDash:c},{element:n})}}const yf=e=>At.isImage(e)?we.rectangle:At.isTable(e)?Og.table:e.shape,dT=(e,n)=>At.isUMLClassOrInterface({shape:n})?new Jx(e):new qB(e),EU=(e,n,i)=>{const r=vd(n),o={id:Mn(),type:"geometry",angle:0,opacity:1,points:i,strokeWidth:Vm.strokeWidth,...r.geometryProperties};let a,u;return n===de.class?(a=[{id:Mn(),height:30},{id:Mn()},{id:Mn()}],u=[{id:Mn()}]):(a=[{id:Mn(),height:50},{id:Mn()}],u=[{id:Mn()}]),{...o,shape:n,rows:a,columns:u,cells:SU(e,a,u,n)}},SU=(e,n,i,r)=>{var u;const o=n.length*i.length,a=((u=vT(r))==null?void 0:u.texts)||[];return new Array(o).fill("").map((c,h)=>{const g=Math.floor(h/i.length),p=h%i.length;return{id:Mn(),rowId:n[g].id,columnId:i[p].id,text:{children:[{text:a[h].text}],align:a[h].align}}})},gT=(e,n,i,r={},o={})=>wB.includes(e)?AU(e,n,r):TU(e,n,i,r,o),TU=(e,n,i,r={},o={})=>{let a={},u=Tr.center;return e===we.text&&(a={autoSize:!0},u=void 0),o={...o},o!=null&&o.align&&(u=o==null?void 0:o.align),o==null||delete o.align,{id:Mn(),type:"geometry",shape:e,angle:0,opacity:1,text:gd(i,u,o),points:n,...a,...r}},AU=(e,n,i={})=>({id:Mn(),type:"geometry",shape:e,angle:0,opacity:1,points:n,...i}),DU=(e,n,i,r)=>br(i).draw(e,n,r),QB=(e,n)=>{const i=I.getRectangleByPoints(e.points),r=yf(e);return br(r).getNearestPoint(i,n)},bU=e=>vB[e],BU=e=>mB[e]||Vm,PU=e=>yB[e],pT=(e,n,i=!1)=>{const r=(12+Ba/2)*2,o=I.getRectangleByPoints(n.points),a=qr(e,o),u=i?a:o;return I.getEdgeCenterPoints(I.inflate(u,r))},JB=(e,n)=>n.findIndex(i=>{const r=I.getRectangleByPoints([e]);let o=I.getRectangleByPoints([i]);return o=I.inflate(o,Ba),I.isHit(r,o)}),MU=e=>CB[e].strokeColor,RU=e=>CB[e].fill,mT=(e,n,i)=>{i=i?Number(i):Um;const r=Yx(e,gd(n),{fontSize:i,fontFamily:xg});return{width:r.width+Me.rectangleAndText*2,height:r.height}},tP=(e,n)=>{const i=vT(e);return I.getPoints(I.getRectangleByCenterPoint(n,i.width,i.height))},vT=e=>{const n=gj().includes(e),i=pj().includes(e);return n?bU(e):i?PU(e):BU(e)},yT=(e,n,i)=>{const r=vd(we.text);return gT(we.text,n,i,r.geometryProperties,{...r.textProperties})},qm=(e,n,i)=>{const r=vd(i);return At.isUMLClassOrInterface({shape:i})?EU(e,i,n):uT(i)?iU(i,n,{strokeWidth:Vm.strokeWidth,...r.geometryProperties}):gT(i,n,"",{strokeWidth:Vm.strokeWidth,...r.geometryProperties},{...r.textProperties})},u3=(e,n,i)=>{const r=i?Sm(e,n,i):pv(n);r&&r.edit(()=>{})},eP=e=>LU(e)||Su(e),OU=e=>!wB.includes(e)&&!uT(e),LU=e=>At.isGeometry(e)&&OU(e.shape),_U=e=>!dj.includes(e.shape),FU=e=>e.source.boundId&&e.source.boundId===e.target.boundId,wT=(e,n)=>nz(n)&&!FU(e),tC=(e,n)=>{const i=Cv(e,n),r=Ev(e,n,i);if(wT(n,r))return gu(HG(i.source.point,i.source.direction,i.target.point,i.target.direction,j6));const o=Pg(oB(r,e)),a=o.slice(1,o.length-1);if(n.points.length===2)return gu(o);{const u=gu(a),h=Pg(dr.getPoints(e,n)).slice(1,-1);if(OB(h))return gu(o);const g=[u[0],...h,u[u.length-1]],p=RB(e,g,u,r),m=[o[0]];for(let x=0;x<p.length-1;x++){let T=p[x],D=p[x+1];if(Ce.isAlign([T,D]))m.push(T);else{const B=PS(u,T,D);B.length?(m.push(T),m.push(...B)):(m.push(T),console.log("unknown data points"))}}return m.push(o[o.length-2],o[o.length-1]),gu(m)}},nP=(e,n)=>{const i=Ev(e,n);return[i.nextSourcePoint,i.nextTargetPoint]},kU=(e,n,i)=>{let r=n.source.boundId?Es(e,n.source.boundId):void 0,o=n.target.boundId?Es(e,n.target.boundId):void 0;if(!r){const g=i.source;r=s8(g.point,g.vector)}if(!o){const g=i.target;o=s8(g.point,g.vector)}let a=I.getRectangleByPoints(r.points);const u=bl(I.getCornerPoints(a),r)||I.getCornerPoints(a);a=I.getRectangleByPoints(u),a=I.inflate(a,Tn(r)*2);let c=I.getRectangleByPoints(o.points);const h=bl(I.getCornerPoints(c),o)||I.getCornerPoints(c);return c=I.getRectangleByPoints(h),c=I.inflate(c,Tn(o)*2),{sourceRectangle:a,targetRectangle:c}},s8=(e,n)=>{const i=hg(e,n,-25),r=I.getPoints(I.getRectangleByCenterPoint(i,50,50));return gT(we.rectangle,r,"")};function iP(e,n,i){let r=i??tC(e,n);const[o,a]=nP(e,n);return r.splice(0,1,o),r.splice(-1,1,a),Pg(r)}const lx=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>At.isDrawElement(r)),xT=e=>ne(e).filter(i=>At.isArrowLine(i)),rP=e=>ne(e).filter(i=>At.isVectorLine(i)),IU=e=>{const n=ne(e);return n&&n.length===1&&At.isSwimlane(n[0])},HU=e=>{const n=ne(e);return n&&n.length===1&&At.isLine(n[0])},oP=(e,n,i)=>{const r=qm(e,n,i);return Pu(e,r),r},NU=(e,n,i)=>{const r=vd(we.text),o=mT(e,i,r.textProperties["font-size"]),a=[n,[n[0]+o.width,n[1]+o.height]],u=yT(e,a,i);Pu(e,u)},GU=(e,n,i)=>{const r=Rg(n),o=Je.get(e,i),a={points:r,text:{...o.text}};At.isText(o)&&o.autoSize&&(a.autoSize=!1),Qt.setNode(e,a,i)},zU=(e,n)=>{const i=ne(e),r=[];i.forEach(o=>{if(At.isGeometry(o)&&!At.isText(o)){const a=G.findPath(e,o);Qt.setNode(e,{shape:n},a),PV(e,{...o,shape:n},r)}}),r.length&&r.forEach(o=>{Ao.resizeArrowLine(e,o.property,o.path)})},sP=(e,n,i,r)=>{let o=n.points,a=At.isText(n)?n.autoSize:!1;const u=Me.rectangleAndText;if(a){const c=i<ox?ox:i,h=K5(n);if(SS.isActive(h,Tr.right))o=[[o[1][0]-(c+u*2),o[0][1]],[o[1][0],o[0][1]+r]];else if(SS.isActive(h,Tr.center)){const g=Math.abs(o[0][0]-o[1][0]),p=(c-g)/2;o=[[o[0][0]-p-u,o[0][1]],[o[1][0]+p+u,o[0][1]+r]]}else o=[o[0],[o[0][0]+c+u*2,o[0][1]+r]];Dl(n)&&(o=W5(I.getRectangleByPoints(n.points),I.getRectangleByPoints(o),I.getCenterPoint(I.getRectangleByPoints(n.points)),I.getCenterPoint(I.getRectangleByPoints(o)),n.angle))}return{points:o}},jU=(e,n,i,r,o)=>{const a={text:i,...sP(e,n,r,o)},u=e.children.findIndex(c=>c===n);Qt.setNode(e,a,[u])},UU=(e,n,i,r)=>{if(At.isText(n)?n.autoSize:!1){const a={...sP(e,n,i,r)},u=e.children.findIndex(c=>c===n);Qt.setNode(e,a,[u])}},$U=(e,n,i)=>{const{width:r,height:o,url:a}=n,u=G.getBoardContainer(e).clientWidth,c=G.getBoardContainer(e).clientHeight,h=Pe(e,ke(e,u/2,c/2)),g=i?[i,[i[0]+r,i[1]+o]]:[[h[0]-r/2,h[1]-o/2],[h[0]+r/2,h[1]+o/2]],p={id:Mn(),type:"image",points:g,url:a};Qt.insertNode(e,p,[e.children.length]),Qt.addSelectionWithTemporaryElements(e,[p])},aP=(e,n,i)=>{Qt.setNode(e,n,i)},VU=(e,n,i)=>{const r=G.findPath(e,n);Qt.setNode(e,{texts:i},r)},WU=(e,n,i)=>{var u;const r=G.findPath(e,n),a=[...(u=n.texts)!=null&&u.length?[...n.texts]:[]];a.splice(i,1),Qt.setNode(e,{texts:a},r)},XU=(e,n,i)=>{Q5(xs.arrowLine,n,i),xT(e).forEach(o=>{const a=G.findPath(e,o);let u=n===Ws.source?o.source:o.target;u={...u,marker:i},Qt.setNode(e,{[n]:u},a)})},qU=(e,n)=>{xT(e).map(r=>{const o={...n};if(r.shape===n.shape)return;const a=G.findPath(e,r);Qt.setNode(e,o,a)})},YU=(e,n,i,r)=>{const o=dr.getPoints(e,n),a=i===Ws.source?o[0]:o[o.length-1],u=_g(e,a,r);if(u){let c=n.source,h=n.target;i===Ws.source?c={...c,boundId:r.id,connection:u}:h={...h,boundId:r.id,connection:u};const g=G.findPath(e,n);aP(e,{source:c,target:h},g)}};function KU(e){const n={...e};return At.isHorizontalSwimlane(e)?(n.cells=e.cells.map((i,r)=>(r===0&&e.header&&(i={...e.cells[0],rowspan:e.rows.length}),i.text&&!i.text.direction&&(i={...i,text:{...i.text,direction:"vertical"}}),i)),n):(e.header&&(n.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),n)}const lP=(e,n)=>{const i=EB[e];return I.getPoints(I.getRectangleByCenterPoint(n,i.width,i.height))},ux=(e,n)=>{const i=JU(e),r=t$(e),o=n[1][0]-n[0][0],a=n[1][1]-n[0][1],u=a8(r,"row",i,a),c=a8(r,"column",i,o);return{id:Mn(),type:"swimlane",shape:r,points:n,rows:u,columns:c,header:i,cells:ZU(r,u,c,i)}},a8=(e,n,i,r)=>{const o=u=>new Array(u).fill("").map(()=>({id:Mn()}));let a=o(3);if(n==="row"&&e===Xo.swimlaneVertical||n==="column"&&e===Xo.swimlaneHorizontal){a=i?a:o(2);const u=n==="row"?"height":"width";let c=rm;r<rm*a.length&&(c=Math.min(r/a.length/rm*rm,rm)),a=a.map((h,g)=>g===0||g===1&&i?{...h,[u]:c}:h)}return a},ZU=(e,n,i,r)=>{let o=[],a=0;r&&(o=[a3(n[0].id,i[0].id,"New Swimlane")],a=1);const u=new Array(6).fill("").map((c,h)=>{if(h<3){const m=e===Xo.swimlaneVertical?n[a].id:n[h].id,w=e===Xo.swimlaneVertical?i[h].id:i[a].id;return a3(m,w,r?"Lane":"New Swimlane")}const g=e===Xo.swimlaneVertical?n[a+1].id:n[h-3].id,p=e===Xo.swimlaneVertical?i[h-3].id:i[a+1].id;return a3(g,p)});return[...o,...u]},QU=e=>At.isHorizontalSwimlane(e)?e.rows.length:At.isVerticalSwimlane(e)?e.columns.length:0,JU=e=>[Pa.swimlaneHorizontalWithHeader,Pa.swimlaneVerticalWithHeader].includes(e),t$=e=>[Pa.swimlaneHorizontalWithHeader,Pa.swimlaneHorizontal].includes(e)?Xo.swimlaneHorizontal:Xo.swimlaneVertical,uP=(e,n=e.pointer)=>xB().includes(n),e$=(e,n,i)=>{if(i>0&&At.isSwimlane(n)){const r=QU(n);if(At.isHorizontalSwimlane(n))if(i>r)cP(e,n,n.rows.length,i-r);else{const o=n.rows.length-(r-i);hP(e,n,o,r-i)}if(At.isVerticalSwimlane(n))if(i>r)fP(e,n,n.columns.length,i-r);else{const o=n.columns.length-(r-i);dP(e,n,o,r-i)}}},cP=(e,n,i,r=1)=>{if(At.isHorizontalSwimlane(n)){const o=[...n.rows],a=[];for(let p=0;p<r;p++)a.push({id:Mn()});o.splice(i,0,...a);const u=[...n.cells];a.forEach(p=>{u.push(...gP(n,p.id,"column"))});const c=md(e,n,n.cells[n.cells.length-1].id).points,h=I.getRectangleByPoints(c).height,g=[n.points[0],[n.points[1][0],n.points[1][1]+h*r]];eC(e,n,n.columns,o,u,g)}},fP=(e,n,i,r=1)=>{if(At.isVerticalSwimlane(n)){const o=[...n.columns],a=[];for(let p=0;p<r;p++)a.push({id:Mn()});o.splice(i,0,...a);const u=[...n.cells];a.forEach(p=>{u.push(...gP(n,p.id,"row"))});const c=md(e,n,n.cells[n.cells.length-1].id).points,h=I.getRectangleByPoints(c).width,g=[n.points[0],[n.points[1][0]+h*r,n.points[1][1]]];eC(e,n,o,n.rows,u,g)}},hP=(e,n,i,r=1)=>{if(At.isHorizontalSwimlane(n)){if(r>n.rows.length)return;const o=[...n.rows];if(o.splice(i,r),o.length===0){const a=G.findPath(e,n);Qt.removeNode(e,a)}else{let a=[...n.cells];const u=[];for(let g=i;g<r+i;g++){const p=n.rows[g];u.push(p),a=a.filter(m=>m.rowId!==p.id)}let c=0;u.forEach(g=>{if(g.height)c+=g.height;else{const p=n.cells.find(w=>w.rowId===g.id),m=md(e,n,p.id).points;c+=I.getRectangleByPoints(m).height}});const h=[n.points[0],[n.points[1][0],n.points[1][1]-c]];eC(e,n,n.columns,o,a,h)}}},dP=(e,n,i,r=1)=>{if(At.isVerticalSwimlane(n)){if(r>n.columns.length)return;const o=[...n.columns];if(o.splice(i,r),o.length===0){const a=G.findPath(e,n);Qt.removeNode(e,a)}else{let a=[...n.cells];const u=[];for(let g=i;g<r+i;g++){const p=n.columns[g];u.push(p),a=a.filter(m=>m.columnId!==p.id)}let c=0;u.forEach(g=>{if(g.width)c+=g.width;else{const p=n.cells.find(w=>w.columnId===g.id),m=md(e,n,p.id).points;c+=I.getRectangleByPoints(m).width}});const h=[n.points[0],[n.points[1][0]-c,n.points[1][1]]];eC(e,n,o,n.rows,a,h)}}},gP=(e,n,i)=>{const r=e[`${i}s`].map(o=>({id:Mn(),rowId:i==="row"?o.id:n,columnId:i==="row"?n:o.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:Tr.center,direction:i==="row"?void 0:"vertical"}},r},eC=(e,n,i,r,o,a)=>{const u=G.findPath(e,n);Qt.setNode(e,{columns:i,rows:r,cells:o,points:a},u)},n$=(e,n,i)=>{var u;const o={texts:(u=n.texts)==null?void 0:u.map(c=>c.id===i.id?{...c,...i}:c)},a=e.children.findIndex(c=>c===n);Qt.setNode(e,o,[a])},i$=(e,n,i,r,o)=>{const a=Je.get(e,n),u=md(e,a,i),c=a.cells.findIndex(D=>D.id===u.id);let h=[...a.rows],g=[...a.columns],p=[...a.cells],m=[...a.points];const{width:w,height:x}=I.getRectangleByPoints(u.points),T=Me.rectangleAndText;if($m.isVerticalText(u)){const D=a.columns.findIndex(b=>b.id===u.columnId);if(o>w){const b=o+T*2,B=b-w,A=DB(a,a.columns[D].id,b,B);m=A.points,g=A.columns}}else{const D=a.rows.findIndex(A=>A.id===u.rowId),B=a.rows[D].height??Math.max(x,0);if(o>B){const A=o+T*2,H=A-B,R=bB(a,a.rows[D].id,A,H);m=R.points,h=R.rows}}p[c]={...p[c],text:r},Qt.setNode(e,{rows:h,columns:g,cells:p,points:m},n)},r$=(e,n,i,r)=>{const o=gg(n);let a=n.cells;o!=null&&o.length?a=n.cells.map(u=>o.map(c=>c.id).includes(u.id)?l8(u,i):u):a=n.cells.map(u=>u.text?l8(u,i):u),Qt.setNode(e,{cells:a},r)},l8=(e,n)=>{const i={...e};return n?i.fill=n:delete i.fill,i},o$=(e,n)=>{rP(e).map(r=>{if(r.shape===n.shape)return;const o=G.findPath(e,r);Qt.setNode(e,{...n},o)})},s$=(e,n,i,r)=>{const a=xB().includes(i);let u=vB[i]||mB[i]||yB[i]||Vm;a&&(u=EB[i]);const c=ag(r);if(c){let h=0;[Fe.left,Fe.right].includes(c)?h=-u.width/2:h=-u.height/2;const g=hg(n,r,h),p=I.getPoints(I.getRectangleByCenterPoint(g,u.width,u.height));if(a){const m=ux(i,p);return Pu(e,m),m}return oP(e,p,i)}return null},Ao={setText:jU,setDrawTexts:n$,insertGeometry:oP,resizeGeometry:GU,insertText:NU,setTextSize:UU,resizeArrowLine:aP,setArrowLineTexts:VU,removeArrowLineText:WU,setArrowLineMark:XU,setArrowLineShape:qU,setVectorLineShape:o$,insertImage:$U,connectArrowLineToDraw:YU,switchGeometryShape:zU,setTableText:i$,addSwimlaneRow:cP,addSwimlaneColumn:fP,removeSwimlaneRow:hP,removeSwimlaneColumn:dP,updateSwimlaneCount:e$,setTableFill:r$,insertDrawByVector:s$},OS=(e,n,i,r=0)=>{const o=I.getCenterPoint(n),a=W6(n,Ba);if(r){const u=nr([i],o,-r)[0];let c=a.find(h=>I.isHit(I.getRectangleByPoints([u,u]),h.rectangle));return c&&(c.cursorClass=PG(c.cursorClass,r)),c}else return a.find(u=>I.isHit(I.getRectangleByPoints([i,i]),u.rectangle))},a$=e=>({x:e.x-Kw-Em,y:e.y+e.height+Kw,width:Em,height:Em}),l$="debug:plait:resize-for-rotation",Us=Gg(l$);function u$(e){const{afterChange:n,drawSelectionRectangle:i}=e;let r,o,a=!1,u=null;const c=()=>{const g=ne(e);return g.length>=1&&g.every(p=>(At.isDrawElement(p)||At.isCustomGeometryElement(e,p)&&p.points.length>1)&&!HU(e)&&!IU(e))};return pd(e,{key:"draw-elements",canResize:c,hitTest:g=>{const p=ne(e),m=pn(e,p,!1),w=Wo(p),x=OS(e,m,g,w);return x?{element:[...p],rectangle:m,handle:x.handle,cursorClass:x.cursorClass}:null},onResize:(g,p)=>{r==null||r.remove(),Us.isDebug()&&Us.clear();const m=Cw(e,g.handle),w=p.isShift||g.element.length===1&&At.isImage(g.element[0]),x=I.getCenterPoint(g.rectangle),T=Jw(g.handle),{originPoint:D,handlePoint:b}=LS(e,T,g.rectangle),B=Wo(g.element);let A;if(B){A={angle:B,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[k,W]=nr([p.startPoint,p.endPoint],x,-A.angle);p.startPoint=k,p.endPoint=W}const H=pP(e,g,p,{originPoint:D,handlePoint:b},w,m),R=nC(e,g.element,H);if(u=R.activePoints,r=R.snapG,G.getElementTopHost(e).append(r),A){const k=I.getPoints(g.rectangle),W=k.map(Et=>yu(Et,D,R.xZoom,R.yZoom)),U=I.getRectangleByPoints(W);Us.isDebug()&&Us.drawRectangle(e,U,{stroke:"blue"});const nt=I.getCenterPoint(U),st=W5(I.getRectangleByPoints(k),I.getRectangleByPoints(W),x,nt,A.angle),ft=I.getCenterPoint(I.getRectangleByPoints(st));A=Object.assign(A,{offsetX:ft[0]-nt[0],offsetY:ft[1]-nt[1],newCenterPoint:ft}),Us.isDebug()&&Us.drawRectangle(e,st)}g.element.forEach(k=>{const W=G.findPath(e,k);let U;if(A){U=lS(k.points,x,-A.angle).map(ft=>yu(ft,D,R.xZoom,R.yZoom));const st=U.map(ft=>[ft[0]+A.offsetX,ft[1]+A.offsetY]);U=lS(st,A.newCenterPoint,A.angle)}else Dl(k)&&(a=!0),Dl(k)&&T_(k.angle)?U=c$(e,k.points,D,R.xZoom,R.yZoom):U=k.points.map(nt=>yu(nt,D,R.xZoom,R.yZoom));if(At.isGeometry(k))Ao.resizeGeometry(e,U,W);else if(At.isLine(k)||At.isCustomGeometryElement(e,k)||At.isVectorLine(k))Qt.setNode(e,{points:U},W);else if(At.isImage(k))if(w)Qt.setNode(e,{points:U},W);else{const nt=I.getRectangleByPoints(k.points),st=I.getCenterPoint(nt),ft=yu(st,D,R.xZoom,R.yZoom),Et=I.getRectangleByCenterPoint(ft,nt.width,nt.height);Qt.setNode(e,{points:I.getPoints(Et)},W)}})},afterResize:g=>{if(r==null||r.remove(),r=null,a){a=!1,u=null;const p=ne(e);Qt.addSelectionWithTemporaryElements(e,p)}}}),e.afterChange=()=>{n(),o&&(o.remove(),o=null);const g=ne(e);c()&&!Dr(e)&&g.length>1&&(o=f$(e,u,a),G.getActiveHost(e).append(o))},e.drawSelectionRectangle=()=>{if(a){const g=I.getRectangleByPoints(u),p=qr(e,g);return Fa(e,I.inflate(p,_i),{stroke:Ko,strokeWidth:_i})}return i()},e}const LS=(e,n,i)=>{const r=BG(e,n),o=P7(i,r),a=P7(i,n);return{originPoint:o,handlePoint:a}},CT=(e,n,i,r,o)=>{const[a,u]=e;let c=0,h=0;if(r)if(o)c=Ce.getOffsetX(a,u)/(i[0]-n[0]),h=c;else{let g=Ce.getOffsetX(a,u),p=Ce.getOffsetY(a,u);c=g/(i[0]-n[0]),h=p/(i[1]-n[1])}else{const g=Ce.isHorizontal(n,i,.1)||!1;let p=g?Ce.getOffsetX(a,u):Ce.getOffsetY(a,u),m=g?i[0]-n[0]:i[1]-n[1];const w=p/m;o?(c=w,h=w):g?c=w:h=w}return{xZoom:c,yZoom:h}},yu=(e,n,i,r)=>{const o=(e[0]-n[0])*i,a=(e[1]-n[1])*r;return[e[0]+o,e[1]+a]},c$=(e,n,i,r,o)=>{const a=I.getRectangleByPoints(n);Us.isDebug()&&Us.drawRectangle(e,a,{stroke:"black"});let u=n;u=nr(u,I.getCenterPoint(a),1/2*Math.PI),Us.isDebug()&&Us.drawRectangle(e,u,{stroke:"blue"}),u=u.map(h=>yu(h,i,r,o)),Us.isDebug()&&Us.drawRectangle(e,u);const c=I.getRectangleByPoints(u);return nr(u,I.getCenterPoint(c),-.5*Math.PI)},f$=(e,n,i)=>{const r=ze(),o=ne(e),a=i?I.getRectangleByPoints(n):pn(e,o,!1),u=qr(e,a);let c=I.getCornerPoints(u);const h=Wo(o);if(h){const g=I.getCenterPoint(u);c=nr(c,g,h)}return c.forEach(g=>{const p=V6(e,g);r.append(p)}),r},h$="debug:plait:point-for-geometry",u8=Gg(h$),Q2=10;function pP(e,n,i,r,o,a){const{originPoint:u,handlePoint:c}=r,h=[i.startPoint,i.endPoint],{xZoom:g,yZoom:p}=CT(h,u,c,a,o);let m,w=[];if(Array.isArray(n.element)){m=n.element;const H=pn(e,n.element,!1);w=I.getPoints(H)}else m=[n.element],w=n.element.points;const x=w.map(H=>yu(H,u,g,p)),T=I.getRectangleByPoints(x),D=dv(T,Wo(m)),b=yu(c,u,g,p),[B,A]=fi(u,b);return{resizePoints:h,resizeOriginPoint:w,activeRectangle:D,originPoint:u,handlePoint:c,directionFactors:[Mg(B),Mg(A)],isAspectRatio:o,isFromCorner:a}}function nC(e,n,i){const r=ze(),o=_b(e,n);let a=p$(o,i);a.deltaX===0&&a.deltaY===0&&(a=d$(o,i));const u=Wo(n),c=g$(a,i,u),h=v$(e,c.activePoints,o,i,u),g=m$(e,c.activePoints,o,i,u);return r.append(h,g),{...c,...a,snapG:r}}function d$(e,n){let i={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o,directionFactors:a}=n,u=a[0]!==0||r,c=a[1]!==0||r;if(u){const h=nd(o,!0),g=a[0]===-1?h[0]:h[2],p=mm(e,g,!0);if(Math.abs(p)<Cu&&(i.deltaX=p,i.deltaX!==0&&r))return i.deltaY=i.deltaX/(o.width/o.height),i}if(c){const h=nd(o,!1),g=a[1]===-1?h[0]:h[2],p=mm(e,g,!1);if(Math.abs(p)<Cu&&(i.deltaY=p,i.deltaY!==0&&r))return i.deltaX=i.deltaY*(o.width/o.height),i}return i}function g$(e,n,i){const{deltaX:r,deltaY:o}=e,{resizePoints:a,isCreate:u}=n,c=[a[0],[a[1][0]+r,a[1][1]+o]];let h=c,g=0,p=0;if(!u){const{originPoint:m,handlePoint:w,isFromCorner:x,isAspectRatio:T,resizeOriginPoint:D}=n,b=CT(c,m,w,x,T);g=b.xZoom,p=b.yZoom,h=D.map(B=>yu(B,m,g,p)),i&&(h=W5(I.getRectangleByPoints(D),I.getRectangleByPoints(h),I.getCenterPoint(I.getRectangleByPoints(D)),I.getCenterPoint(I.getRectangleByPoints(h)),i))}return{xZoom:g,yZoom:p,activePoints:h}}function p$(e,n){let i={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:o}=n,a=e.find(c=>Math.abs(c.width-o.width)<Cu);if(a){const c=a.width-o.width;if(i.deltaX=c*n.directionFactors[0],r){const h=c/(o.width/o.height);return i.deltaY=h*n.directionFactors[1],i}}const u=e.find(c=>Math.abs(c.height-o.height)<Cu);if(u){const c=u.height-o.height;if(i.deltaY=c*n.directionFactors[1],r){const h=c*(o.width/o.height);return i.deltaX=h*n.directionFactors[0],i}}return i}function J2(e,n){return n?[[e.x,e.y-Q2],[e.x+e.width,e.y-Q2]]:[[e.x-Q2,e.y],[e.x-Q2,e.y+e.height]]}function m$(e,n,i,r,o){u8.isDebug()&&u8.clear();const a=I.getRectangleByPoints(n),u=dv(a,o),{isAspectRatio:c,directionFactors:h}=r,g=h[0]!==0||c,p=h[1]!==0||c;return Fb(e,u,i,g,p)}function v$(e,n,i,r,o){let a=[],u=[];const c=r.directionFactors[0]!==0||r.isAspectRatio,h=r.directionFactors[1]!==0||r.isAspectRatio,g=I.getRectangleByPoints(n),p=dv(g,o);for(let w of i)p.width===w.width&&c&&a.push(J2(w,!0)),p.height===w.height&&h&&u.push(J2(w,!1));a.length&&c&&a.push(J2(p,!0)),u.length&&h&&u.push(J2(p,!1));const m=[...a,...u];return kb(e,m)}const y$=(e,n,i)=>aB(e,n,i,r=>{if(At.isArrowLine(r)){let o={...r.source},a={...r.target},u=[...r.points];return r.source.boundId&&(u[0]=Yc(Es(e,r.source.boundId),r.source.connection),Es(e,r.source.boundId,n)||(delete o.boundId,delete o.connection)),r.target.boundId&&(u[u.length-1]=Yc(Es(e,r.target.boundId),r.target.connection),Es(e,r.target.boundId,n)||(delete a.boundId,delete a.connection)),u=u.map(c=>[c[0]-i[0],c[1]-i[1]]),{...r,points:u,source:o,target:a}}}),w$=(e,n,i)=>{lB(e,n,i,(r,o)=>{At.isArrowLine(r)&&(r.source.boundId&&n.find(u=>[r.source.boundId,o[r.source.boundId]].includes(u.id))&&(r.source.boundId=o[r.source.boundId]),r.target.boundId&&n.find(u=>[r.target.boundId,o[r.target.boundId]].includes(u.id))&&(r.target.boundId=o[r.target.boundId])),At.isElementByTable(r)&&(t8(r,"row"),t8(r,"column"),Mj(r.cells))})},fm=3/4,x$={draw(e,n,i){const r=om(n),a=G.getRoughSVG(e).polygon(r,{...i,fillStyle:"solid"});return Ze(a,"round"),a},isInsidePoint(e,n){const i=om(e);return rf(n,i)},getCornerPoints(e){return om(e)},getNearestPoint(e,n){return Yn(n,om(e))},getEdgeByConnectionPoint(e,n){const i=om(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=vf(e,n);return r.y=i.y+(i.height*fm-r.height)/2,r}},om=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*fm],[e.x+e.width*3/5,e.y+e.height*fm],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*fm],[e.x,e.y+e.height*fm]];function rr(e){const n=e.getPolygonPoints,i={draw(r,o,a){const u=n(o),h=G.getRoughSVG(r).polygon(u,{...a,fillStyle:"solid"});return Ze(h,"round"),h},isInsidePoint(r,o){const a=n(r);return rf(o,a)},getCornerPoints(r){return n(r)},getNearestPoint(r,o){return Yn(o,n(r))},getNearestCrossingPoint(r,o){const a=n(r),u=kB(a,o);let c=u[0],h=be(o[0],o[1],c[0],c[1]);return u.filter((g,p)=>p>0).forEach(g=>{let p=be(o[0],o[1],g[0],g[1]);p<h&&(h=p,c=g)}),c},getEdgeByConnectionPoint(r,o){const a=n(r),u=I.getConnectionPoint(r,o);return pr(a,u)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):n(r)}};return e.getTextRectangle&&(i.getTextRectangle=e.getTextRectangle),i}const C$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],E$=rr({getPolygonPoints:C$,getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.5)}),c3=rr({getPolygonPoints:I.getEdgeCenterPoints,getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,1/2)});function ET(e){const n={draw(i,r,o){const a=[r.x+r.width/2,r.y+r.height/2],c=G.getRoughSVG(i).ellipse(a[0],a[1],r.width,r.height,{...o,fillStyle:"solid"});return Ze(c,"round"),c},isInsidePoint(i,r){const o=[i.x+i.width/2,i.y+i.height/2];return Tu(r,o,i.width/2,i.height/2)},getCornerPoints(i){return I.getEdgeCenterPoints(i)},getNearestPoint(i,r){const o=[i.x+i.width/2,i.y+i.height/2];return Kr(r,o,i.width/2,i.height/2)},getTangentVectorByConnectionPoint(i,r){const o=I.getConnectionPoint(i,r),a=[i.x+i.width/2,i.y+i.height/2],u=[o[0]-a[0],-(o[1]-a[1])],c=i.width/2,h=i.height/2,g=Rl(u[0],u[1],c,h);return Ol(u[0],u[1],g)},getConnectorPoints(i){return I.getEdgeCenterPoints(i)},getTextRectangle:(i,r)=>hi(i,r,.75)};return e!=null&&e.draw&&(n.draw=e.draw),e!=null&&e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const f3=ET(),S$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],T$=rr({getPolygonPoints:S$,getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,3/4)}),A$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],D$=rr({getPolygonPoints:A$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,1-.32);return r.x=i.x+i.width*.32+Me.rectangleAndText,r}}),b$=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],B$=rr({getPolygonPoints:b$,getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,3/4)}),c8=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],f8=rr({getPolygonPoints:c8,getConnectorPoints:e=>{const n=c8(e);return Yg(n)},getTextRectangle:(e,n)=>hi(e,n,1/2)}),P$=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],M$=rr({getPolygonPoints:P$,getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,3/5),o=i.y+i.height/5,a=i.y+i.height;return r.y=o+(a-o-r.height)/2,r}}),R$=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},O$=rr({getPolygonPoints:R$,getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,3/4);return r.x=i.x+Me.rectangleAndText,r}}),L$=e=>{const n=e.width>e.height/2;return[[e.x,e.y],[e.x+(n?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(n?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(n?e.height/2:e.width),e.y+e.height/2]]},_$=rr({getPolygonPoints:L$,getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),o=i.width>i.height+20?(i.width-i.height)/i.width:3/4;return hi(e,n,o)}}),F$=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],k$=rr({getPolygonPoints:F$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,1-.32);return r.x=i.x+Me.rectangleAndText,r}}),vn={draw(e,n,i){return Fa(e,n,{...i,fillStyle:"solid"})},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},I$={draw(e,n,i){return jg(G.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid"},!1,Cg(n))},isInsidePoint(e,n){return h5(n,e,Cg(e))},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return mP(n,e,Cg(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},Cg=e=>Math.min(e.width*.1,e.height*.1);function mP(e,n,i){const{x:r,y:o,width:a,height:u}=n,c=I.getCornerPoints(n);let h=Yn(e,c),g=null;return e[0]>=r&&e[0]<=r+i&&e[1]>=o&&e[1]<=o+i&&(g=[r+i,o+i]),e[0]>=r&&e[0]<=r+i&&e[1]>=o+u&&e[1]<=o+u-i&&(g=[r+i,o+u-i]),e[0]>=r+a-i&&e[0]<=r+a&&e[1]>=o&&e[1]<=o+i&&(g=[r+a-i,o+i]),e[0]>=r+a-i&&e[0]<=r+a&&e[1]>=o+u-i&&e[1]<=o+u&&(g=[r+a-i,o+u-i]),g&&(h=Kr(e,g,i,i)),h}const $h=3/4,H$={draw(e,n,i){const r=G.getRoughSVG(e),o=n.x,a=n.y,u=n.x+n.width,c=n.y+n.height*$h,h=Cg(n),g=[o+h,a],p=[u-h,a],m=[u,a+h],w=[u,c-h],x=[u-h,c],T=[o+h,c],D=[o,c-h],b=[o,a+h],B=[o+n.width/4,c],A=[o+n.width/4,n.y+n.height],H=[o+n.width/2,c],R=r.path(`M${p[0]} ${p[1]} A ${h} ${h}, 0, 0, 1, ${m[0]} ${m[1]} L ${w[0]} ${w[1]} A ${h} ${h}, 0, 0, 1, ${x[0]} ${x[1]} L    ${H[0]} ${H[1]}  ${A[0]} ${A[1]}   ${B[0]} ${B[1]}   ${T[0]} ${T[1]} A ${h} ${h}, 0, 0, 1, ${D[0]} ${D[1]} L ${b[0]} ${b[1]} A ${h} ${h}, 0, 0, 1, ${g[0]} ${g[1]} Z`,{...i,fillStyle:"solid"});return Ze(R,"round"),R},isInsidePoint(e,n){const i=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,rf(n,i)||h5(n,e,Cg(e))},getCornerPoints(e){return h3(e)},getNearestPoint(e,n){return Yn(n,h3(e))},getEdgeByConnectionPoint(e,n){const i=h3(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*$h],[e.x,e.y+e.height/2]]},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=vf(e,n);return r.y=i.y+(i.height*$h-r.height)/2,r}},h3=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*$h],[e.x+e.width/2,e.y+e.height*$h],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*$h],[e.x,e.y+e.height*$h]],h8=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],N$=rr({getPolygonPoints:h8,getConnectorPoints(e){const n=h8(e);return Yg(n)},getTextRectangle(e,n){return hi(e,n,3/4)}}),d8=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],G$=rr({getPolygonPoints:d8,getConnectorPoints(e){const n=d8(e);return[...Yg(n),...n]},getTextRectangle:(e,n)=>{const i=hi(e,n,.5),r=I.getRectangleByPoints(n.points);return i.y=r.y+r.height*2.5/5+(r.height-r.height*2.5/5-i.height)/2,i}}),z$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],j$=rr({getPolygonPoints:z$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),g8=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],U$=rr({getPolygonPoints:g8,getConnectorPoints:e=>{const n=g8(e);return[n[1],n[3],n[5],n[7],n[9]]},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,1/2);return r.y=i.y+i.height/5+(i.height-i.height/5-r.height)/2,r}}),$$={draw(e,n,i){return jg(G.getRoughSVG(e),n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid"},!1,tw(n))},isInsidePoint(e,n){return h5(n,e,tw(e))},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return V$(n,e,tw(e))},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n),r=tw(e),o=vP(e,r,i);if(o){const a=[i[0]-o[0],-(i[1]-o[1])],u=r,c=r,h=Rl(a[0],a[1],u,c);return Ol(a[0],a[1],h)}return null},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},tw=e=>Math.min(e.width/2,e.height/2);function V$(e,n,i){let r=null,o=vP(n,i,e);if(o)r=Kr(e,o,i,i);else{const a=I.getCornerPoints(n);r=Yn(e,a)}return r}function vP(e,n,i){const{x:r,y:o,width:a,height:u}=e;let c=null;return i[0]>=r&&i[0]<=r+n&&i[1]>=o&&i[1]<=o+n&&(c=[r+n,o+n]),i[0]>=r&&i[0]<=r+n&&i[1]>=o+u-n&&i[1]<=o+u&&(c=[r+n,o+u-n]),i[0]>=r+a-n&&i[0]<=r+a&&i[1]>=o&&i[1]<=o+n&&(c=[r+a-n,o+n]),i[0]>=r+a-n&&i[0]<=r+a&&i[1]>=o+u-n&&i[1]<=o+u&&(c=[r+a-n,o+u-n]),c}const p8=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],W$=rr({getPolygonPoints:p8,getConnectorPoints:e=>{const n=p8(e);return Yg(n)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+i.height/4+(i.height*3/4-u.height)/2}}}),X$=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],q$=rr({getPolygonPoints:X$,getConnectorPoints:e=>I.getEdgeCenterPoints(e),getTextRectangle(e,n){return hi(e,n,.6666666666666666)}}),m8=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],Y$=rr({getPolygonPoints:m8,getConnectorPoints:e=>{const n=m8(e);return Yg(n)},getTextRectangle:(e,n)=>hi(e,n,.75)}),v8=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],K$=rr({getPolygonPoints:v8,getConnectorPoints:e=>{const n=v8(e);return[...Yg(n),...n]},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=o*2/3,u=n.text,c=Bi(e,u,a);return{height:c.height,width:a>0?a:0,x:i.x+Me.rectangleAndText+r+o/6,y:i.y+(i.height*2/3-c.height)/2}}}),Z$={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} L${n.x+n.width*3/4} ${n.y} A  ${n.width/4} ${n.height/2}, 0, 0, 1,${n.x+n.width*3/4} ${n.y+n.height} L${n.x} ${n.y+n.height} Z`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]),r=I.isHit({...e,width:e.width*3/4},i),o=Tu(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||o},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,vn.getCornerPoints(e));return i[0]>e.x+e.width*3/4?Kr(n,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):i},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width/4,u=e.height/2,c=Rl(o[0],o[1],a,u);return Ol(o[0],o[1],c)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},Q$={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width/10} ${n.y} L${n.x+n.width} ${n.y} A  ${n.width/10} ${n.height/2}, 0, 0, 0,${n.x+n.width} ${n.y+n.height} L${n.x+n.width/10} ${n.y+n.height}A  ${n.width/10} ${n.height/2}, 0, 0, 1,${n.x+n.width/10} ${n.y}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]),r=I.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},i),o=Tu(n,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),a=!Tu(n,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&a||o},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,vn.getCornerPoints(e));if(i[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],o=Kr(n,r,e.width/10,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}if(i[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],o=Kr(n,r,e.width/10,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}return i},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);let r=[e.x+e.width/10,e.y+e.height/2],o=e.width/10,a=e.height/2;const u=i[0]>e.x+e.width*9/10&&i[1]>e.y;u&&(r=[e.x+e.width,e.y+e.height/2]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a),g=Ol(c[0],c[1],h);return u?g.map(p=>-p):g},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e,n){return hi(e,n,.75)}},J$={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.06} ${n.y} L${n.x+n.width*.06} ${n.y+n.height} M${n.x+n.width-n.width*.06} ${n.y} L${n.x+n.width-n.width*.06} ${n.y+n.height}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2-i.width*.06*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r+i.width*.06,y:i.y+(i.height-u.height)/2}}},tV=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],eV=rr({getPolygonPoints:tV,getConnectorPoints:e=>I.getEdgeCenterPoints(e),getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{width:o>0?o:0,height:u.height,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-i.height/2-u.height)/2}}}),nV=ET({draw(e,n,i){const r=G.getRoughSVG(e),o=n.width/2,a=n.height/2,u=[n.x+n.width,n.y+n.height/2],c=r.path(`M${u[0]} ${u[1]}
        A${o},${a} 0 1,1 ${u[0]} ${u[1]-.01}
        M${n.x} ${n.y+n.height/2}
        L${n.x+n.width} ${n.y+n.height/2}
        M${n.x+n.width/2} ${n.y}
        L${n.x+n.width/2} ${n.y+n.height}
        `,{...i,fillStyle:"solid"});return Ze(c,"round"),c}}),iV=ET({draw(e,n,i){const r=G.getRoughSVG(e),o=n.width/2,a=n.height/2,u=[n.x+n.width,n.y+n.height/2],c=[n.x+n.width/2,n.y+n.height/2],h=PA([n.x,n.y],[n.x+n.width,n.y+n.height],c[0],c[1],o,a),g=PA([n.x+n.width,n.y],[n.x,n.y+n.height],c[0],c[1],o,a),p=r.path(`M${u[0]} ${u[1]}
        A${o},${a} 0 1,1 ${u[0]} ${u[1]-.01}
        M${h[0][0]} ${h[0][1]}
        L${h[1][0]} ${h[1][1]}
        M${g[0][0]} ${g[0][1]}
        L${g[1][0]} ${g[1][1]}
        `,{...i,fillStyle:"solid"});return Ze(p,"round"),p}}),rV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9}
            Q${n.x+n.width-n.width/4} ${n.y+n.height-n.height/9*3}, ${n.x+n.width/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}           
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){let i=Yn(n,vn.getCornerPoints(e)),r=fv([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=Zo(r),i[1]>e.y+e.height-e.height/9){if(i[0]===e.x+e.width/2)return i[1]=e.y+e.height-e.height/9,i;i=Yn(n,r,!1)}return i},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);return i[0]>e.x&&i[0]<e.x+e.width/4?fi([e.x+e.width/4,e.y+e.height],i):i[0]>e.x+e.width/4&&i[0]<e.x+e.width/4*3?fi([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):i[0]>e.x+e.width/4*3?fi([e.x+e.width,e.y+e.height-e.height/9],i):fi(i,[e.x+e.width/4,e.y+e.height])},getTextRectangle:(e,n)=>hi(e,n,.88)},y8=e=>{const n=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let i=fv([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return i=Zo(i),[...n,...i]},oV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height-n.height/9} V${n.y+10} H${n.x+5} V${n.y+5} H${n.x+10} V${n.y} H${n.x+n.width} V${n.y+n.height-n.height/9-10-3} L${n.x+n.width-5} ${n.y+n.height-n.height/9-10-3-4} V${n.y+n.height-n.height/9-5-3}
                 L${n.x+n.width-10} ${n.y+n.height-n.height/9-5-3-4} V${n.y+n.height-n.height/9}
                
             Q${n.x+n.width-10-(n.width-10)/4} ${n.y+n.height-n.height/9*3}, ${n.x+(n.width-10)/2} ${n.y+n.height-n.height/9} T${n.x} ${n.y+n.height-n.height/9}
              
                M${n.x+5} ${n.y+10} H${n.x+n.width-10} V${n.y+n.height-n.height/9} 
                    
                M${n.x+10} ${n.y+5} H${n.x+n.width-5} V${n.y+n.height-n.height/9-10-3}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,y8(e),!1)},getConnectorPoints(e){let n=fv([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);n=Zo(n);const i=Yn([e.x+e.width/2,e.y+e.height],n);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[i[0],i[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,n){const i=kB(y8(e),n);let r=i[0],o=be(n[0],n[1],r[0],r[1]);return i.filter((a,u)=>u>0).forEach(a=>{let u=be(n[0],n[1],a[0],a[1]);u<o&&(o=u,r=a)}),r},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);if(i[0]>e.x&&i[0]<e.x+(e.width-10)/4)return fi([e.x+(e.width-10)/4,e.y+e.height],i);if(i[0]>e.x+(e.width-10)/4&&i[0]<e.x+(e.width-10)/4*3)return fi([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(i[0]>e.x+(e.width-10)/4*3&&i[0]<e.x+e.width-10)return fi([e.x+(e.width-10),e.y+e.height-e.height/9],i);const r=Z6(n)||Fe.bottom,o=id(r);return[o.x,o.y]},getTextRectangle:(e,n)=>hi(e,n,.88)},sV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+n.height*.15}  
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x+n.width} ${n.y+n.height*.15} 
            A${n.width/2} ${n.height*.15}, 0, 0, 0,${n.x} ${n.y+n.height*.15} 
            V${n.y+n.height-n.height*.15}
            A${n.width/2} ${n.height*.15}, 0, 0, 0, ${n.x+n.width} ${n.y+n.height-n.height*.15}
            V${n.y+n.height*.15}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]),r=I.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},i),o=Tu(n,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),a=Tu(n,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||o||a},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,vn.getCornerPoints(e));if(i[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],o=Kr(n,r,e.width/2,e.height*.15);return o[1]>r[1]&&(o[1]=r[1]*2-o[1]),o}if(i[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],o=Kr(n,r,e.width/2,e.height*.15);return o[1]<r[1]&&(o[1]=r[0]*2-o[1]),o}return i},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],o=e.width/2,a=e.height*.15;i[1]<e.y+e.height*.15&&i[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a);return Ol(c[0],c[1],h)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,1);r.y+=Tn(n);const o=i.y+i.height*.45,a=i.y+i.height-i.height*.3;return r.y=o+(a-o-r.height)/2,r}},aV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width-n.width*.15} ${n.y}  
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y+n.height} 
            A${n.width*.15} ${n.height/2}, 0, 0, 0,${n.x+n.width-n.width*.15} ${n.y} 
            H${n.x+n.width*.15}
            A${n.width*.15} ${n.height/2}, 0, 0, 0, ${n.x+n.width*.15} ${n.y+n.height}
            H${n.x+n.width-n.width*.15}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]),r=I.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},i),o=Tu(n,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),a=Tu(n,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||o||a},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,vn.getCornerPoints(e));if(i[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],o=Kr(n,r,e.width*.15,e.height/2);return o[0]>r[0]&&(o[0]=r[0]*2-o[0]),o}if(i[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],o=Kr(n,r,e.width*.15,e.height/2);return o[0]<r[0]&&(o[0]=r[0]*2-o[0]),o}return i},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);let r=[e.x+e.width*.15,e.y+e.height/2],o=e.width*.15,a=e.height/2;i[0]>e.x+e.width-e.width*.15&&i[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const c=[i[0]-r[0],-(i[1]-r[1])],h=Rl(c[0],c[1],o,a);return Ol(c[0],c[1],h)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-i.width*.45-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+i.width*.15+Me.rectangleAndText+r,y:i.y+(i.height-u.height)/2}}},lV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} h${n.width} v${n.height} h${-n.width} v${-n.height}
            M${n.x} ${n.y+n.height/10} h${n.width}
            M${n.x+n.width/10} ${n.y} v${n.height}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-i.width*.1-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+i.width*.1+Me.rectangleAndText+r,y:i.y+i.height*.1+(i.height-i.height*.1-u.height)/2}}};function w8(e){const n=e.width*.09,i=e.x+e.width,r=e.y+e.height/2;return{startPoint:[i,e.y],upperCurve:{controlPoint1:[i-n,e.y],controlPoint2:[i,r],endPoint:[i-n,r]},lowerCurve:{controlPoint1:[i,r],controlPoint2:[i-n,e.y+e.height],endPoint:[i,e.y+e.height]}}}const uV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,upperCurve:a,lowerCurve:u}=w8(n),c=[`M${o[0]} ${o[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`,`C${u.controlPoint1[0]} ${u.controlPoint1[1]},
            ${u.controlPoint2[0]} ${u.controlPoint2[1]},
            ${u.endPoint[0]} ${u.endPoint[1]}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},getNearestPoint(e,n){const{startPoint:i,upperCurve:r,lowerCurve:o}=w8(e),a=Zo([i,r.controlPoint1,r.controlPoint2,r.endPoint],.001),u=Zo([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),c=[...a,...u];let h=1/0,g=n;for(const p of c){const m=be(n[0],n[1],p[0],p[1]);m<h&&(h=m,g=[...p])}return g},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,.9);return r.x=i.x+Tn(n)+Me.rectangleAndText,r}};function x8(e){const n=e.width*.09,i=e.y+e.height/2;return{startPoint:[e.x,e.y],upperCurve:{controlPoint1:[e.x+n,e.y],controlPoint2:[e.x,i],endPoint:[e.x+n,i]},lowerCurve:{controlPoint1:[e.x,i],controlPoint2:[e.x+n,e.y+e.height],endPoint:[e.x,e.y+e.height]}}}const cV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,upperCurve:a,lowerCurve:u}=x8(n),c=[`M${o[0]} ${o[1]}`,`C${a.controlPoint1[0]} ${a.controlPoint1[1]},
            ${a.controlPoint2[0]} ${a.controlPoint2[1]},
            ${a.endPoint[0]} ${a.endPoint[1]}`,`C${u.controlPoint1[0]} ${u.controlPoint1[1]},
            ${u.controlPoint2[0]} ${u.controlPoint2[1]},
            ${u.endPoint[0]} ${u.endPoint[1]}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,upperCurve:r,lowerCurve:o}=x8(e),a=Zo([i,r.controlPoint1,r.controlPoint2,r.endPoint],.001),u=Zo([r.endPoint,o.controlPoint1,o.controlPoint2,o.endPoint],.001),c=[...a,...u];let h=1/0,g=[...n];for(const p of c){const m=be(n[0],n[1],p[0],p[1]);m<h&&(h=m,g=[...p])}return g},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=hi(e,n,.9);return r.x=i.x+Tn(n)+Me.rectangleAndText+i.width*.1,r}},fV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width*.075} ${n.y+n.height} H${n.x} V${n.y} H${n.x+n.width*.075}
           `,{...i,fillStyle:"solid",fill:"transparent"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.88)},hV=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],dV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x+n.width*.15} ${n.y} 
            H${n.x+n.width-n.width*.1} 
            A ${n.width*.1} ${n.height/2}, 0, 0, 1,${n.x+n.width-n.width*.1} ${n.y+n.height}
            H${n.x+n.width*.15}
            L${n.x} ${n.y+n.height/2}
            Z
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=rf(n,i),o=Tu(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||o},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,hV(e));return i[0]>e.x+e.width-e.width*.1?Kr(n,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):i},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n),r=[e.x+e.width-e.width*.1,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width*.1,u=e.height/2,c=Rl(o[0],o[1],a,u);return Ol(o[0],o[1],c)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>hi(e,n,.75)},lg={draw(e,n,i,r){const o=ze();try{const a=yv(e,{...r==null?void 0:r.element});if(a){const u=G.getRoughSVG(e),{x:c,y:h,width:g,height:p}=n,m=G2(u,[c,h],[c+g,h],i),w=G2(u,[c,h],[c,h+p],i);o.append(m,w),a.forEach(x=>{const T=I.getRectangleByPoints(x.points),{x:D,y:b,width:B,height:A}=T,H=Fa(e,{x:D+_i,y:b+_i,width:B-_i*2,height:A-_i*2},{fill:x.fill,fillStyle:"solid",strokeWidth:0}),R=G2(u,[D+B,b],[D+B,b+A],i),k=G2(u,[D,b+A],[D+B,b+A],i);o.append(H,R,k)}),Ze(o,"round")}}catch(a){console.error(a)}return o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return mP(n,e,Cg(e))},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle(e,n,i){try{if(i&&i.id){const r=md(e,n,i.id);if(r)return $m.isVerticalText(r)?gV(e,r):yP(e,r)}}catch(r){console.error(r)}return{x:0,y:0,width:0,height:0}}};function gV(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.height-Me.rectangleAndText*2-r*2;return wP(e,n,o,i)}function yP(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2;return wP(e,n,o,i)}function wP(e,n,i,r){const o=n.text;if(o){const a=Bi(e,o,i);return{width:i>0?i:0,height:a.height,x:r.x-i/2+r.width/2,y:r.y+(r.height-a.height)/2}}else return{width:0,height:0,x:r.x,y:r.y}}const pV=(e,n,i=!1)=>{if(n.text){const r=I.getRectangleByPoints(n.points),o=Tn(n);let a=r.width-Me.rectangleAndText*2-o*2;return i&&(a=r.height-Me.rectangleAndText*2-o*2),Bi(e,n.text,a).height}return 0};function C8(e){const n=e.x+e.width/2,i={width:e.width/3/2,height:e.height/4/2};return e.y+e.height/4/2,{headArcCommand:{rx:i.width,ry:i.height,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:n,endY:e.y},bodyLine:[[n,e.y+e.height/4],[n,e.y+e.height/4*3]],armsLine:[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],leftLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12,e.y+e.height]],rightLegLine:[[n,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]}}const mV={draw(e,n,i){const r=G.getRoughSVG(e),{headArcCommand:o,bodyLine:a,armsLine:u,leftLegLine:c,rightLegLine:h}=C8(n),g=[`M${a[0][0]} ${a[0][1]}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${o.endX} ${o.endY}`,`A${o.rx} ${o.ry} ${o.xAxisRotation} ${o.largeArcFlag} ${o.sweepFlag} ${a[0][0]} ${a[0][1]}`,`V${a[1][1]}`,`M${u[0][0]} ${u[0][1]} H${u[1][0]}`,`M${c[0][0]} ${c[0][1]} L${c[1][0]} ${c[1][1]}`,`M${h[0][0]} ${h[0][1]} L${h[1][0]} ${h[1][1]}`].join(" "),p=r.path(g,{...i,fillStyle:"solid"});return Ze(p,"round"),p},getNearestPoint(e,n){const{headArcCommand:i,bodyLine:r,armsLine:o,leftLegLine:a,rightLegLine:u}=C8(e),c=[e.x+e.width/2,e.y+e.height/4/2],h=Kr(n,c,i.rx,i.ry),g=be(...n,...h),m=f5(n,[r,o,a,u]),w=be(...n,...m);return g<w?h:m},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);if(i[1]>=e.y&&i[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],o=[i[0]-r[0],-(i[1]-r[1])],a=e.width/2,u=e.height/2,c=Rl(o[0],o[1],a,u);return Ol(o[0],o[1],c)}return i[1]>=e.y+e.height/4&&i[1]<e.y+e.height/4*3?i[0]<e.x+e.width/2?Gm(fi([e.x,e.y+e.height/2],i),-(Math.PI/2)):Gm(fi([e.x+e.width,e.y+e.height/2],i),-(Math.PI/2)):i[1]>=e.y+e.height/4*3?i[0]<e.x+e.width/2?fi(i,[e.x+e.width/12,e.y+e.height]):fi([e.x+e.width/12*11,e.y+e.height],i):fi(i,[e.x+e.width/4,e.y+e.height])},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=i.width+40,o=n.text;return{height:Bi(e,o,r).height,width:r>0?r:0,x:i.x-20,y:i.y+i.height+4}}},vV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+40} ${n.y} L${n.x+40} ${n.y+n.height} `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=40-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-u.height)/2}}};function E8(e){const i=e.width*.7,r=e.x+e.width*.8;return{headerHeight:25,points:{leftTop:[e.x,e.y+25],topStart:[e.x,e.y],topEnd:[e.x+i,e.y],cornerPoint:[r,e.y+25],rightTop:[e.x+e.width,e.y+25],rightBottom:[e.x+e.width,e.y+e.height],leftBottom:[e.x,e.y+e.height],leftMiddle:[e.x,e.y+25],middlePoint:[r,e.y+25]}}}const yV={draw(e,n,i){const r=G.getRoughSVG(e),{points:o}=E8(n),a=[`M${o.leftTop[0]} ${o.leftTop[1]}`,`V${o.topStart[1]}`,`H${o.topEnd[0]}`,`L${o.cornerPoint[0]} ${o.cornerPoint[1]}`,`H${o.rightTop[0]}`,`V${o.rightBottom[1]}`,`H${o.leftBottom[0]}`,`V${o.leftMiddle[1]}`,`H${o.middlePoint[0]}`].join(" "),u=r.path(a,{...i,fillStyle:"solid"});return Ze(u,"round"),u},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const{points:i}=E8(e),r=[[i.topStart,i.leftTop],[i.leftTop,i.leftBottom],[i.leftBottom,i.rightBottom],[i.rightBottom,i.rightTop],[i.topStart,i.topEnd],[i.topEnd,i.cornerPoint],[i.cornerPoint,i.rightTop],[i.leftMiddle,i.middlePoint]];return f5(n,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);return i[0]>e.x+e.width*.7&&i[1]<e.y+25?fi([e.x+e.width*.7,e.y],i):fi([e.x+e.width*.8,e.y+25],i)},getTextRectangle(e,n,i){var u;const r=I.getRectangleByPoints(n.points),o=Tn(n),a=(u=n.texts)==null?void 0:u.find(c=>c.id===(i==null?void 0:i.id));if((i==null?void 0:i.id)===bs.name&&a){const c=r.width*.7-Me.rectangleAndText-o,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+(25-h.height)/2}}if((i==null?void 0:i.id)===bs.content&&a){const c=r.width-Me.rectangleAndText*2-o*2,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+25+(r.height-25-h.height)/2}}return r}},wV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y+25} 
            V${n.y}
            H${n.x+n.width} 
            V${n.y+n.height}
            H${n.x}
            V${n.y+25}
            H${n.x+n.width/3-8}
            L${n.x+n.width/3} ${n.y+16}
            V${n.y}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle(e,n,i){var u;const r=I.getRectangleByPoints(n.points),o=Tn(n),a=(u=n.texts)==null?void 0:u.find(c=>c.id===(i==null?void 0:i.id));if((i==null?void 0:i.id)===bs.name&&a){const c=r.width/3-8-Me.rectangleAndText-o,h=Bi(e,a.text,c);return{height:h.height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+(25-h.height)/2}}if((i==null?void 0:i.id)===bs.content&&a){const c=r.width-Me.rectangleAndText*2-o*2;return{height:Bi(e,a.text,c).height,width:c>0?c:0,x:r.x+Me.rectangleAndText+o,y:r.y+25+Me.rectangleAndText+o}}return r}};function S8(e){return[[[e.x,e.y],[e.x+e.width,e.y+e.height]],[[e.x+e.width,e.y],[e.x,e.y+e.height]]]}const xV={draw(e,n,i){const r=G.getRoughSVG(e),o=S8(n),a=r.path(o.map(([u,c])=>`M${u[0]} ${u[1]} L${c[0]} ${c[1]}`).join(" "),{...i,fillStyle:"solid",strokeWidth:4});return Ze(a,"round"),a},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=S8(e);let r=1/0,o=n;return i.forEach(a=>{const u=Fx(n,a),c=be(n[0],n[1],u[0],u[1]);c<r&&(r=c,o=u)}),o},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},CV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} H${n.x+n.width} V${n.y+n.height} H${n.x} Z M${n.x+n.width*.125} ${n.y} L${n.x+n.width*.125} ${n.y+n.height} M${n.x+n.width-n.width*.125} ${n.y} L${n.x+n.width-n.width*.125} ${n.y+n.height}`,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2-i.width*.125*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r+i.width*.125,y:i.y+(i.height-u.height)/2}}},EV={draw(e,n,i){const o=G.getRoughSVG(e).path(`M${n.x} ${n.y} 
            h${n.width-16}
            v16
            h16
            v${n.height-16}
            h${-n.width}
            Z
            M${n.x+n.width-16} ${n.y} 
            A16 16, 0,0,1, ${n.x+n.width} ${n.y+16}
            `,{...i,fillStyle:"solid"});return Ze(o,"round"),o},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const i=Yn(n,vn.getCornerPoints(e));return i[0]>e.x+e.width-16&&i[1]<e.y+16?Kr(n,[e.x+e.width-16,e.y+16],16,16):i},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2],o=[i[0]-r[0],-(i[1]-r[1])],a=Rl(o[0],o[1],16,16);return Ol(o[0],o[1],a)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle:(e,n)=>{const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r-15,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-u.height)/2}}};function T8(e){const n=e.y+e.height/2,i=e.x+e.width*.3,r=e.width*.13,o=e.height*.285,a=i+r,u=e.width*.233;return{startPoint:[e.x,n],line1:[[e.x,n],[i,n]],circleArcCommand:{rx:r,ry:o,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:i,endY:n},verticalArcCommand:{rx:u,ry:e.height/2,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:a,endY:e.y+e.height},line2:[[a+u,n],[e.x+e.width,n]]}}const SV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,line1:a,circleArcCommand:u,verticalArcCommand:c,line2:h}=T8(n),g=[`M${o[0]} ${o[1]}`,`H${a[1][0]}`,`A${u.rx} ${u.ry} ${u.xAxisRotation} ${u.largeArcFlag} ${u.sweepFlag} ${a[1][0]+u.rx*2} ${u.endY}`,`A${u.rx} ${u.ry} ${u.xAxisRotation} ${u.largeArcFlag} ${u.sweepFlag} ${u.endX} ${u.endY}`,`M${c.endX} ${n.y}`,`A${c.rx} ${c.ry} ${c.xAxisRotation} ${c.largeArcFlag} ${c.sweepFlag} ${c.endX} ${c.endY}`,`M${h[0][0]} ${h[0][1]} H${h[1][0]}`].join(" "),p=r.path(g,{...i,fillStyle:"solid"});return Ze(p,"round"),p},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line1:i,line2:r,circleArcCommand:o,verticalArcCommand:a}=T8(e),u=Yn(n,[...i,...r]),c=be(...n,...u),h=[i[1][0]+o.rx,i[1][1]],g=Kr(n,h,o.rx,o.ry),p=be(...n,...g),m=[a.endX,e.y],w=Ix(n,m,a),x=be(...n,...w),T=Math.min(c,p,x);return T===c?u:T===p?g:w},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n);return i[0]>e.x+e.width*.43&&i[1]<e.y+e.height/2?Gm(fi(i,[e.x,e.y+e.height/2]),-Math.PI):i[0]>e.x+e.width*.43&&i[1]>e.y+e.height/2?fi(i,[e.x,e.y+e.height/2]):fi(i,[e.x,e.y+e.height/2])}};function A8(e){const n=e.width*.39,i=e.height/2;return{startPoint:[e.x,e.y],leftArcCommand:{rx:n,ry:i,xAxisRotation:0,largeArcFlag:0,sweepFlag:1,endX:e.x,endY:e.y+e.height},line:{startX:e.x+e.width*.41,startY:e.y+e.height/2,endX:e.x+e.width,endY:e.y+e.height/2}}}const TV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,leftArcCommand:a,line:u}=A8(n),c=[`M${o[0]} ${o[1]}`,`A${a.rx} ${a.ry} ${a.xAxisRotation} ${a.largeArcFlag} ${a.sweepFlag} ${a.endX} ${a.endY}`,`M${u.startX} ${u.startY} H${u.endX}`].join(" "),h=r.path(c,{...i,fillStyle:"solid",fill:"transparent"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){const{startPoint:i,leftArcCommand:r,line:o}=A8(e);let a=1/0,u=n;const c=Ix(n,i,r),h=be(n[0],n[1],c[0],c[1]);h<a&&(a=h,u=c);const g=[o.startX,o.startY],p=[o.endX,o.endY],m=Fx(n,[g,p]),w=be(n[0],n[1],m[0],m[1]);return w<a&&(a=w,u=m),u},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)}},D8=.54;function b8(e){const n=e.y+e.height/2,i=e.width*(1-D8)/2,r=e.height/2,o=[e.x,n],a=e.x+e.width*D8;return{startPoint:o,line:{startX:o[0],startY:n,endX:a,endY:n},arcCommands:[{rx:i,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:e.x+e.width,endY:n},{rx:i,ry:r,xAxisRotation:0,largeArcFlag:1,sweepFlag:1,endX:a,endY:n}]}}const AV={draw(e,n,i){const r=G.getRoughSVG(e),{startPoint:o,line:a,arcCommands:u}=b8(n),c=[`M${o[0]} ${o[1]}`,`H${a.endX}`,...u.map(g=>`A${g.rx} ${g.ry} ${g.xAxisRotation} ${g.largeArcFlag} ${g.sweepFlag} ${g.endX} ${g.endY}`)].join(" "),h=r.path(c,{...i,fillStyle:"solid"});return Ze(h,"round"),h},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getNearestPoint(e,n){const{line:i,arcCommands:r}=b8(e),o=[i.startX,i.startY],a=[i.endX,i.endY],u=Yn(n,[o,a]),c=be(...n,...u),h=[e.x+3*e.width/4,i.startY],g=Kr(n,h,r[0].rx,r[0].ry),p=be(...n,...g);return c<p?u:g},getTangentVectorByConnectionPoint(e,n){const i=I.getConnectionPoint(e,n),r=[e.x+e.width*3/4,e.y+e.height/2];if(i[0]>e.x+e.width*.54){const o=[i[0]-r[0],-(i[1]-r[1])],a=e.width*.46/2,u=e.height/2,c=Rl(o[0],o[1],a,u);return Ol(o[0],o[1],c)}return fi(i,[e.x,e.y+e.height/2])}};function ew(e){const n=e.x+12,i=e.width>70?24:e.width*.2,r=e.height-28-e.height*.35>1?14:e.height*.175,o=e.y+e.height*.175,a=e.y+e.height-e.height*.175-r;return{boxSize:{width:i,height:r},points:{mainStart:[n,e.y],topBoxStart:[n,o],topBoxEnd:[n,o+r],bottomBoxStart:[n,a],bottomBoxEnd:[n,a+r],mainEnd:[n,e.y+e.height],rightTop:[e.x+e.width,e.y],rightBottom:[e.x+e.width,e.y+e.height]}}}const xP={draw(e,n,i){const r=G.getRoughSVG(e),{boxSize:o,points:a}=ew(n),u=[`M${a.mainStart[0]} ${a.mainStart[1]}`,`H${a.rightTop[0]}`,`V${a.rightBottom[1]}`,`H${a.mainEnd[0]}`,`M${a.topBoxStart[0]} ${a.topBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${a.bottomBoxStart[0]} ${a.bottomBoxStart[1]}`,`h${o.width/2} v${o.height} h${-o.width} v${-o.height} h${o.width/2}`,`M${a.mainStart[0]} ${a.mainStart[1]}`,`V${a.topBoxStart[1]}`,`M${a.topBoxEnd[0]} ${a.topBoxEnd[1]}`,`V${a.bottomBoxStart[1]}`,`M${a.bottomBoxEnd[0]} ${a.bottomBoxEnd[1]}`,`V${a.mainEnd[1]}`].join(" "),c=r.path(u,{...i,fillStyle:"solid"});return Ze(c,"round"),c},getNearestPoint(e,n){const{boxSize:i,points:r}=ew(e),o=[[r.mainStart,[r.rightTop[0],r.mainStart[1]]],[[r.rightTop[0],r.mainStart[1]],r.rightBottom],[r.rightBottom,[r.mainEnd[0],r.rightBottom[1]]],[[r.mainEnd[0],r.rightBottom[1]],r.mainStart],[r.topBoxStart,[r.topBoxStart[0]+i.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]+i.width/2,r.topBoxStart[1]],[r.topBoxStart[0]+i.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]+i.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-i.width/2,r.topBoxEnd[1]]],[[r.topBoxStart[0]-i.width/2,r.topBoxEnd[1]],[r.topBoxStart[0]-i.width/2,r.topBoxStart[1]]],[[r.topBoxStart[0]-i.width/2,r.topBoxStart[1]],r.topBoxStart],[r.bottomBoxStart,[r.bottomBoxStart[0]+i.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]+i.width/2,r.bottomBoxStart[1]],[r.bottomBoxStart[0]+i.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]+i.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-i.width/2,r.bottomBoxEnd[1]]],[[r.bottomBoxStart[0]-i.width/2,r.bottomBoxEnd[1]],[r.bottomBoxStart[0]-i.width/2,r.bottomBoxStart[1]]],[[r.bottomBoxStart[0]-i.width/2,r.bottomBoxStart[1]],r.bottomBoxStart],[r.mainStart,r.topBoxStart],[r.topBoxEnd,r.bottomBoxStart],[r.bottomBoxEnd,r.mainEnd]];return f5(n,o)},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getTangentVectorByConnectionPoint(e,n){const{points:i}=ew(e),r=I.getConnectionPoint(e,n);return fi(i.mainStart,r)},getConnectorPoints(e){const{points:n}=ew(e);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[n.mainStart[0],e.y+e.height/2]]},getTextRectangle(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-24-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+24+Me.rectangleAndText+r,y:i.y+(i.height-u.height)/2}}},DV={draw(e,n,i){const r=G.getRoughSVG(e),o=n.width-45*2-18>1?45:n.width*.25,a=n.height-30-8*2>1?30:n.height*.2,u={x:n.x+n.width-18-o,y:n.y+8,width:o,height:a},c=r.path(`M${n.x} ${n.y} 
            H${n.x+n.width} 
            V${n.y+n.height} 
            H${n.x} Z

            `,{...i,fillStyle:"solid"}),h=xP.draw(e,u,i);return c.append(h),Ze(c,"round"),c},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-45*2-18>1?45:i.width*.25,a=i.width-18-o-Me.rectangleAndText-r*2,u=n.text,c=Bi(e,u,a);return{height:c.height,width:a>0?a:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-c.height)/2}}},bV={draw(e,n,i){const r=G.getRoughSVG(e);return jg(r,n.x,n.y,n.x+n.width,n.y+n.height,{...i,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,n){const i=I.getRectangleByPoints([n,n]);return I.isHit(e,i)},getCornerPoints(e){return I.getCornerPoints(e)},getNearestPoint(e,n){return Yn(n,vn.getCornerPoints(e))},getEdgeByConnectionPoint(e,n){const i=vn.getCornerPoints(e),r=I.getConnectionPoint(e,n);return pr(i,r)},getConnectorPoints(e){return I.getEdgeCenterPoints(e)},getTextRectangle(e,n){const i=I.getRectangleByPoints(n.points),r=Tn(n),o=i.width-Me.rectangleAndText*2-r*2,a=n.text,u=Bi(e,a,o);return{height:u.height,width:o>0?o:0,x:i.x+Me.rectangleAndText+r,y:i.y+(i.height-u.height)/2}}},BV={[we.rectangle]:vn,[we.diamond]:c3,[we.ellipse]:f3,[we.parallelogram]:f8,[we.roundRectangle]:I$,[we.text]:vn,[we.triangle]:G$,[we.leftArrow]:D$,[we.trapezoid]:N$,[we.rightArrow]:k$,[we.cross]:E$,[we.star]:U$,[we.pentagon]:M$,[we.hexagon]:T$,[we.octagon]:B$,[we.pentagonArrow]:O$,[we.processArrow]:_$,[we.twoWayArrow]:j$,[we.comment]:x$,[we.roundComment]:H$,[we.cloud]:IB,[me.process]:vn,[me.decision]:c3,[me.connector]:f3,[me.data]:f8,[me.terminal]:$$,[me.database]:sV,[me.hardDisk]:aV,[me.internalStorage]:lV,[me.manualInput]:W$,[me.preparation]:q$,[me.manualLoop]:Y$,[me.merge]:K$,[me.delay]:Z$,[me.storedData]:Q$,[me.or]:nV,[me.summingJunction]:iV,[me.predefinedProcess]:J$,[me.offPage]:eV,[me.document]:rV,[me.multiDocument]:oV,[me.noteCurlyLeft]:uV,[me.noteCurlyRight]:cV,[me.noteSquare]:fV,[me.display]:dV,[Xo.swimlaneHorizontal]:lg,[Xo.swimlaneVertical]:lg,[Og.table]:lg,[de.actor]:mV,[de.useCase]:f3,[de.container]:vV,[de.note]:EV,[de.package]:yV,[de.combinedFragment]:wV,[de.class]:lg,[de.interface]:lg,[de.activation]:vn,[de.object]:vn,[de.deletion]:xV,[de.activityClass]:CV,[de.simpleClass]:vn,[de.component]:xP,[de.componentBox]:DV,[de.template]:bV,[de.port]:vn,[de.branchMerge]:c3,[de.assembly]:SV,[de.requiredInterface]:TV,[de.providedInterface]:AV},br=e=>BV[e],Cv=(e,n)=>{const i=Tn(n),r=n.source.boundId?Es(e,n.source.boundId):void 0,o=n.target.boundId?Es(e,n.target.boundId):void 0;let a=r?Yc(r,n.source.connection):n.points[0],u=o?Yc(o,n.target.connection):n.points[n.points.length-1],c=ag([u[0]-a[0],u[1]-a[1]])||Fe.right,h=IG(c);const g=id(c),p=id(h),m={key:Ws.source,point:a,direction:c,vector:[g.x,g.y]},w={key:Ws.target,point:u,direction:h,vector:[p.x,p.y]};if(r){const x=dr.isSourceMarkOrTargetMark(n,ur.none,Ws.source)?0:i,T=B8(r,n.source.connection);if(m.vector=T,m.boundElement=r,Dl(r)){const D=ag(Gm(T,r.angle));c=D||c}else{const D=ag(T);c=D||c}m.direction=c,a=Yc(r,n.source.connection,c,x),m.point=bl(a,r)||a}if(o){const x=dr.isSourceMarkOrTargetMark(n,ur.none,Ws.target)?0:i,T=B8(o,n.target.connection);if(w.vector=T,w.boundElement=o,Dl(o)){const D=ag(Gm(T,o.angle));h=D||h}else{const D=ag(T);h=D||h}w.direction=h,u=Yc(o,n.target.connection,h,x),w.point=bl(u,o)||u}return{source:m,target:w}},Yc=(e,n,i,r)=>{const o=I.getRectangleByPoints(e.points);if(i&&r){const a=id(i),u=I.getConnectionPoint(o,n);return[u[0]+a.x*r,u[1]+a.y*r]}else return I.getConnectionPoint(o,n)},B8=(e,n)=>{const i=I.getRectangleByPoints(e.points),r=yf(e),o=br(r);let a=[0,0];const u=Z6(n);if(u&&e.shape!==we.ellipse){const c=id(u);return[c.x,c.y]}if(o.getEdgeByConnectionPoint){const c=o.getEdgeByConnectionPoint(i,n);if(c){const h=[c[1][0]-c[0][0],c[1][1]-c[0][1]];return R7(h)}}if(o.getTangentVectorByConnectionPoint){const c=o.getTangentVectorByConnectionPoint(i,n);if(c)return R7(c)}return a},Ev=(e,n,i)=>{i=i??Cv(e,n);const{sourceRectangle:r,targetRectangle:o}=kU(e,n,i),{sourceOuterRectangle:a,targetOuterRectangle:u}=ez(r,o),c=i.source.point,h=i.target.point,g=F7(c,a,i.source.direction),p=F7(h,u,i.target.direction);return{sourcePoint:c,nextSourcePoint:g,sourceRectangle:r,sourceOuterRectangle:a,targetPoint:h,nextTargetPoint:p,targetRectangle:o,targetOuterRectangle:u}},PV=(e,n,i)=>{const r=hd(e,{match:o=>At.isArrowLine(o)?o.source.boundId===o.id||o.target.boundId===o.id:!1,recursion:o=>!0});r.length&&r.forEach(o=>{const a=o.source.boundId===n.id,u=a?"source":"target",c={...o[u]},h=To(e,o),g=a?h[0]:h[h.length-1];c.connection=_g(e,g,n);const p=G.findPath(e,o),m=i.findIndex(w=>Se.equals(w.path,p));m===-1?i.push({property:{[u]:c},path:p}):i[m].property={...i[m].property,[u]:c}})};var ur;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(ur||(ur={}));var qn;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(qn||(qn={}));var Ws;(function(e){e.source="source",e.target="target"})(Ws||(Ws={}));const dr={isSourceMarkOrTargetMark(e,n,i){return i===Ws.source?e.source.marker===n:e.target.marker===n},isSourceMark(e,n){return dr.isSourceMarkOrTargetMark(e,n,Ws.source)},isTargetMark(e,n){return dr.isSourceMarkOrTargetMark(e,n,Ws.target)},isBoundElementOfSource(e,n){return e.source.boundId===n.id},isBoundElementOfTarget(e,n){return e.target.boundId===n.id},getPoints(e,n){let i;if(n.source.boundId){const a=Es(e,n.source.boundId),u=Yc(a,n.source.connection);i=bl(u,a)||u}else i=n.points[0];let r;if(n.target.boundId){const a=Es(e,n.target.boundId),u=Yc(a,n.target.connection);r=bl(u,a)||u}else r=n.points[n.points.length-1];const o=n.points.length>2?n.points.slice(1,n.points.length-1):[];return[i,...o,r]}};var xs;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(xs||(xs={}));var cx;(function(e){e.vectorLine="vectorLine"})(cx||(cx={}));var Ym;(function(e){e.straight="straight",e.curve="curve"})(Ym||(Ym={}));const At={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>At.isArrowLine(e)||At.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===we.text,isImage:e=>e.type==="image",isTable:e=>$m.isTable(e),isDrawElement:e=>!!(At.isGeometry(e)||At.isLine(e)||At.isImage(e)||At.isTable(e)||At.isSwimlane(e)),isCustomGeometryElement:(e,n)=>{const i=e.getPluginOptions(gB);return!!((i==null?void 0:i.customGeometryTypes)||[]).includes(n.type)},isShapeElement:e=>At.isImage(e)||At.isGeometry(e)||At.isTable(e)||At.isSwimlane(e),isBasicShape:e=>Object.keys(we).includes(e.shape),isFlowchart:e=>Object.keys(me).includes(e.shape),isUML:e=>Object.keys(de).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>At.isSwimlane(e)&&e.shape===Xo.swimlaneVertical,isHorizontalSwimlane:e=>At.isSwimlane(e)&&e.shape===Xo.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(de).includes(e.shape)&&[de.class,de.interface].includes(e.shape),isGeometryByTable:e=>At.isUMLClassOrInterface(e),isElementByTable:e=>At.isTable(e)||At.isSwimlane(e)||At.isGeometryByTable(e)};class P8 extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=gv(this.board,{getStrokeWidth:()=>(ne(this.board).length===1&&!Dr(this.board),_i),getStrokeOpacity:()=>ne(this.board).length===1&&!Dr(this.board)?1:.5,getRectangle:n=>I.getRectangleByPoints(n.points),hasResizeHandle:()=>Wx(this.board,this.element)}),this.lineAutoCompleteGenerator=new Mu(this.board),this.shapeGenerator=new qB(this.board),eP(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(Zw.key,this.activeGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getElementTopHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(n,i){n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(i.element,n.element)):(!(n.selected===i.selected)||n.selected)&&(this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}))}updateText(n,i){Su(this.element)?this.textGenerator.update(this.element,n.texts,i.texts,this.getElementG()):this.textGenerator.update(this.element,n.text,i.text,this.getElementG())}initializeTextManage(){const n=(i,r,o)=>{r.newText?Su(i)?Ao.setDrawTexts(this.board,i,{id:o.id,text:r.newText}):Ao.setText(this.board,i,r.newText,r.width,r.height):Ao.setTextSize(this.board,i,r.width,r.height),r.operations&&rT(i,r.operations)};Su(this.element)?this.textGenerator=new nT(this.board,this.element,this.element.texts,{onChange:n}):this.textGenerator=new CU(this.board,this.element,this.element.text,{onChange:n,getMaxWidth:()=>{let i=vf(this.board,this.element).width;const r=br(this.element.shape).getTextRectangle;return r&&(i=r(this.board,this.element).width),At.isText(this.element)&&this.element.autoSize?tT.defaultTextMaxWidth:i}}),this.textGenerator.initialize()}destroy(){var n;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(n=this.textGenerator)==null||n.destroy()}}const MV="debug:plait:line-turning",M8=Gg(MV);class RV extends mf{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new LB(this.board),this.activeGenerator=new ZB(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=To(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),this.getRef().updateActiveSection=()=>{const i=To(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:i})},M8.isDebug()&&M8.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const n={};if(this.element.source.boundId){const i=Es(this.board,this.element.source.boundId);i&&(n.source=i)}if(this.element.target.boundId){const i=Es(this.board,this.element.target.boundId);i&&(n.target=i)}return n}onContextChanged(n,i){const r=this.getBoundedElements(),o=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const a=To(this.board,this.element);if(n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),this.updateText(i.element.texts,n.element.texts),this.updateTextRectangle()):(n.selected!==i.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),o){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:a}),this.updateTextRectangle();return}}initializeTextManages(){var n;if((n=this.element.texts)!=null&&n.length){const i=[];this.element.texts.forEach((r,o)=>{const a=this.createTextManage(r,o);i.push(a)}),this.getRef().initializeTextManage(i)}}drawText(){var n;(n=this.element.texts)!=null&&n.length&&this.getRef().getTextManages().forEach((i,r)=>{i.draw(this.element.texts[r].text),this.getElementG().append(i.g)})}createTextManage(n,i){return new vv(this.board,{getRectangle:()=>sT(this.board,this.element,i),onChange:r=>{const o=G.findPath(this.board,this.element),u=[...Je.get(this.board,o).texts];u.splice(i,1,{text:r.newText?r.newText:this.element.texts[i].text,position:this.element.texts[i].position}),Ao.setArrowLineTexts(this.board,this.element,u),r.operations&&rT(this.element,r.operations)},getMaxWidth:()=>tT.defaultTextMaxWidth,textPlugins:[]})}updateText(n,i){if(n===i)return;const r=n.length,o=i.length,a=this.getRef().getTextManages();if(o===r)for(let u=0;u<r;u++)n[u].text!==i[u].text&&a[u].updateText(i[u].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(i=>{i.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class OV extends mf{constructor(){super()}initializeGenerator(){this.shapeGenerator=new FB(this.board),this.activeGenerator=new ZB(this.board),this.getRef().updateActiveSection=()=>{const n=Jc(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n})}}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const n=Jc(this.board,this.element);this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:n}),super.initialize()}onContextChanged(n,i){const r=Jc(this.board,this.element);n.element!==i.element||n.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:r})):(n.selected!==i.selected||this.activeGenerator.needUpdate()||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const LV=e=>{const{keyDown:n,dblClick:i}=e;return e.keyDown=r=>{const o=ne(e),a=o.length===1,u=o[0];if(!G.isReadonly(e)&&!X5(r)&&!Y5(r)&&!q5(r)&&a&&At.isGeometry(u)){r.preventDefault(),u3(e,u);return}n(r)},e.dblClick=r=>{if(r.preventDefault(),!G.isReadonly(e)){const o=Pe(e,ke(e,r.x,r.y)),a=Ll(e,o,void 0,!1);if(a&&At.isGeometry(a)&&cT(a))if(Su(a)){const u=oU(e,a,o)||a.texts.find(c=>c.id.includes(bs.content))||a.texts[0];u3(e,a,u)}else u3(e,a)}i(r)},e},R8=e=>{const n=eT();return G.isInPointer(e,n)&&Xx(e)},nw=e=>{const n=eT();return G.isInPointer(e,n)&&Bl(e)},_V=e=>{const{pointerMove:n,globalPointerUp:i,pointerUp:r}=e;let o=null,a=null,u=null;return e.pointerMove=c=>{o==null||o.remove(),o=ze();const h=eT(),p=G.isInPointer(e,h)&&Xx(e),m=Pe(e,ke(e,c.x,c.y)),w=G.getPointer(e),x=dT(e,w);if(p){const T=vd(w);if(w===we.text){const D=mT(e,ax(e),T.textProperties["font-size"]),b=I.getPoints(I.getRectangleByCenterPoint(m,D.width,D.height));if(a=yT(e,b,ax(e)),u)u.textManage.updateRectangle(),u.g.append(u.textManage.g);else{const B=new vv(e,{getRectangle:()=>vf(e,a)});B.draw(a.text),u={g:ze(),textManage:B},G.getHost(e).append(u.g),u.g.append(B.g)}}else{const D=tP(w,m);a=qm(e,D,w),x.processDrawing(a,o),G.getElementTopHost(e).append(o)}}n(c)},e.pointerUp=c=>{R8(e)&&a||r(c)},e.globalPointerUp=c=>{R8(e)&&a&&(Pu(e,a),u==null||u.textManage.destroy(),u==null||u.g.remove(),u=null),a=null,o==null||o.remove(),o=null,i(c)},e},FV=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,keyDown:o,keyUp:a,touchMove:u}=e;let c=null,h=null,g=null,p=!1,m;return e.keyDown=w=>{p=ln.isKeyHotkey("shift",w),o(w)},e.keyUp=w=>{p=!1,a(w)},e.pointerDown=w=>{if(!G.isReadonly(e)&&nw(e)){const x=Pe(e,ke(e,w.x,w.y));c=x;const T=G.getPointer(e);if(T===we.text){const D=vd(T),b=mT(e,ax(e),D.textProperties["font-size"]),B=I.getPoints(I.getRectangleByCenterPoint(x,b.width,b.height)),A=yT(e,B,ax(e));Pu(e,A),c=null}}n(w)},e.touchMove=w=>{c&&nw(e)&&w.preventDefault(),u(w)},e.pointerMove=w=>{h==null||h.remove(),h=ze();const x=Pe(e,ke(e,w.x,w.y)),T=G.getPointer(e),D=dT(e,T);if(m==null||m.remove(),c&&nw(e)){let b=Rg([c,x],p);const B=I.getRectangleByPoints(b),[A,H]=fi(c,x),R=nC(e,[],{resizePoints:b,activeRectangle:B,directionFactors:[Mg(A),Mg(H)],isAspectRatio:p,isFromCorner:!0,isCreate:!0});m=R.snapG,G.getElementTopHost(e).append(m),b=Rg(R.activePoints,p),g=qm(e,b,T),D.processDrawing(g,h),G.getElementTopHost(e).append(h)}i(w)},e.pointerUp=w=>{if(nw(e)&&c){const x=Pe(e,ke(e,w.x,w.y)),{width:T,height:D}=I.getRectangleByPoints([c,x]);if(Math.hypot(T,D)<8){const b=G.getPointer(e);if(b!==we.text){const B=tP(b,x);g=qm(e,B,b)}}g&&Pu(e,g),m==null||m.remove(),h==null||h.remove(),h=null,c=null,g=null;return}r(w)},e},kV=e=>{const n=e,{getDeletedFragment:i,buildFragment:r,insertFragment:o}=n;return n.getDeletedFragment=a=>{const u=lx(n);if(u.length){const c=u.filter(T=>At.isGeometry(T)),h=u.filter(T=>At.isArrowLine(T)),g=u.filter(T=>At.isVectorLine(T)),p=u.filter(T=>At.isImage(T)),m=u.filter(T=>At.isTable(T)),w=u.filter(T=>At.isSwimlane(T)),x=[...sm(n,c),...sm(n,p),...sm(n,m),...sm(n,w)].filter(T=>!h.includes(T));a.push(...c,...h,...g,...p,...m,...w,...x.filter(T=>!h.includes(T)))}return i(a)},n.buildFragment=(a,u,c,h)=>{const g=lx(n,h);let p=[];if(g.length){if(c===Ma.cut){const D=g.filter(B=>At.isGeometry(B)),b=g.filter(B=>At.isArrowLine(B));p=sm(n,D).filter(B=>!b.includes(B))}const m=[...g,...p],w=y$(n,m,u?[u.x,u.y]:[0,0]),T={text:tB(m),type:Au.elements,elements:w};a=jx(a,T)}return r(a,u,c,h)},n.insertFragment=(a,u,c)=>{var g,p,m;const h=ne(n);if((g=a==null?void 0:a.files)!=null&&g.length){const w=$6.map(T=>"image/"+T),x=!Uo(n)&&!(h.length===1&&n.isImageBindingAllowed(h[0]));if(w.includes(a.files[0].type)&&x){const T=a.files[0];nB(n,T,vj,D=>{Ao.insertImage(n,D,u)});return}}if((p=a==null?void 0:a.elements)!=null&&p.length){const w=(m=a.elements)==null?void 0:m.filter(x=>At.isDrawElement(x));a.elements&&a.elements.length>0&&w.length>0&&w$(n,w,u)}if(a!=null&&a.text&&(!a.elements||a.elements.length===0)&&!(h.length===1&&h[0].children)){Ao.insertText(n,u,a.text);return}o(a,u,c)},n},sm=(e,n)=>Jj(e).filter(r=>n.find(o=>dr.isBoundElementOfSource(r,o)||dr.isBoundElementOfTarget(r,o))),IV=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,touchStart:o}=e;let a=null,u,c=null,h=null;return e.touchStart=g=>{const p=W7(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Bl(e))return g.preventDefault();o(g)},e.pointerDown=g=>{const p=W7(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Bl(e)){const w=Pe(e,ke(e,g.x,g.y));a=w;const x=fT(e,w);x&&(u=x)}n(g)},e.pointerMove=g=>{c==null||c.remove(),c=ze();let p=Pe(e,ke(e,g.x,g.y));if(a){const m=G.getPointer(e);h=aT(e,m,a,p,u,c)}i(g)},e.globalPointerUp=g=>{h&&(Qt.insertNode(e,h,[e.children.length]),zg(e),cd(e,h),un.updatePointerType(e,nn.selection)),c==null||c.remove(),c=null,u=null,a=null,h=null,r(g)},e},HV=e=>{let n,i,r,o,a;return pd(e,{key:"draw-line",canResize:()=>!0,hitTest:c=>{const h=xT(e);if(h.length>0){let g=null;return h.forEach(p=>{const m=KB(e,p,c);m&&(g={element:p,handle:m.handle,handleIndex:m.handleIndex})}),g}return null},beforeResize:c=>{if(c.element.shape===qn.elbow&&c.handle!==fr.source&&c.handle!==fr.target){const h=Ev(e,c.element);if(wT(c.element,h))return;const g=[...c.element.points],p=c.handleIndex,m=tC(e,c.element);r=m[0],o=m[m.length-1],a=iP(e,c.element,m);const w=MB(e,c.element,[...g],a,p);n=w.index,i=w.deleteCount}},onResize:(c,h)=>{let g=[...c.element.points],p={...c.element.source},m={...c.element.target},w=c.handleIndex;const x=fT(e,h.endPoint);if(c.handle===fr.source||c.handle===fr.target){const T=c.handle===fr.source?p:m;g[w]=h.endPoint,x?(T.connection=_g(e,h.endPoint,x),T.boundId=x.id):(T.connection=void 0,T.boundId=void 0)}else if(c.element.shape===qn.elbow){if(a&&r&&o){const T=Fj(a,r,o,w),D=a[w],b=a[w+1],[B,A]=kj(D,b,h,T);let H=[...g].slice(1,g.length-1);n!==null&&i!==null&&(OB(H)?H=[B,A]:H.splice(n,i,B,A),g=[r,...H,o])}}else c.handle===fr.addHandle?g.splice(w+1,0,h.endPoint):g[w]=h.endPoint;if(!x){w=c.handle===fr.addHandle?w+1:w;const T=To(e,c.element),D=[...g];D[0]=T[0],D[D.length-1]=T[T.length-1],(c.element.shape!==qn.elbow||c.element.shape===qn.elbow&&D.length===2)&&D.forEach((b,B)=>{B!==w&&g[w]&&(g[w]=oT(b,g[w]))})}Ao.resizeArrowLine(e,{points:g,source:p,target:m},c.path)},afterResize:c=>{if(c.element.shape===qn.elbow){const h=Je.get(e,c.path);let g=h&&[...h.points];if(g.length>2&&a&&r&&o){const p=a[0],m=a[a.length-1];g.splice(0,1,p),g.splice(-1,1,m),g=gu(g),Ce.isEquals(g[0],p)&&g.splice(0,1),Ce.isEquals(g[g.length-1],m)&&g.pop(),g.length===1&&(g=[]),g=[r,...g,o],Ao.resizeArrowLine(e,{points:g},c.path)}}n=null,i=null,r=null,o=null,a=null}}),e},NV=e=>{const{pointerMove:n,pointerUp:i}=e;let r=null;return e.pointerMove=o=>{if(r==null||r.remove(),G.isReadonly(e)){n(o);return}const a=Object.keys(qn),u=G.isInPointer(e,a),c=Pe(e,ke(e,o.x,o.y)),h=RG(e,g=>{const{element:p,handle:m}=g,w=m===fr.target||m===fr.source;return At.isArrowLine(p)&&w});if(u||h){const g=WB(e,c);if(g){const p=hT(e,g,c),m=p.isHitEdge||p.isHitConnector;if(r=xU(e,g,{hasMask:m,hasConnector:!0}),m){const w=fd(G.getRoughSVG(e),p.connectorPoint||p.edgePoint,6,{stroke:Ko,strokeWidth:W3,fill:Ko,fillStyle:"solid"});r.appendChild(w)}Dl(g)&&Xs(r,I.getCenterPointByPoints(g.points),g.angle),G.getElementTopHost(e).append(r)}}n(o)},e.pointerUp=o=>{r==null||r.remove(),r=null,i(o)},e},CP=e=>Ux(e,Lg.lineText,bj),GV=e=>{const{dblClick:n}=e;return e.dblClick=i=>{var r,o;if(!G.isReadonly(e)){const a=Pe(e,ke(e,i.x,i.y)),u=Ll(e,a);if(u&&At.isArrowLine(u)){const c=u&&G.findPath(e,u),h=To(e,u),g=Yn(a,h),p=(r=u.texts)!=null&&r.length?[...u.texts]:[],m=lT(e,u,a);if(HB(e,u,a))O8(e,u,m);else{const x=CP(e),T=((o=qx("arrow-line"))==null?void 0:o.text)||{},D=gd(x,void 0,T),b=K6(h,g);p.push({text:D,position:b}),Ao.setArrowLineTexts(e,u,p),setTimeout(()=>{if(c){const B=Je.get(e,c),A=Xg(B);O8(e,B,A.length-1,!0)}})}}}n(i)},e};function O8(e,n,i,r=!1){const a=Xg(n)[i];a.edit(()=>{const u=te.string(a.getText()),c=CP(e);(!u||r&&u===c)&&Ao.removeArrowLineText(e,n,i)})}class zV extends mf{constructor(){super()}initializeGenerator(){this.imageGenerator=new Bu(this.board,{getRectangle:n=>({x:n.points[0][0],y:n.points[0][1],width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]}),getImageItem:n=>({url:n.url,width:n.points[1][0]-n.points[0][0],height:n.points[1][1]-n.points[0][1]})}),this.lineAutoCompleteGenerator=new Mu(this.board),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}onContextChanged(n,i){n.element!==i.element?(this.imageGenerator.updateImage(this.getElementG(),i.element,n.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})):(!(n.selected===i.selected)||n.selected)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}))}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const jV="plait-arrow-line-auto-complete-plugin-key",pg=new WeakMap,UV=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,touchMove:o}=e;let a=null,u=null,c,h;return e.pointerDown=g=>{const p=lx(e),m=p.length===1&&p[0],w=ed(e,g.x,g.y);if(!G.isReadonly(e)&&m&&At.isShapeElement(m)){const x=pT(e,m,!0),T=JB(af(e,w,m,!0)||w,x),D=x[T];if(D){eS(e);const b=eL(e,D);a=Pe(e,ke(e,b[0],b[1])),c=m,un.updatePointerType(e,qn.elbow)}}n(g)},e.touchMove=g=>{if(a&&c)return g.preventDefault();o(g)},e.pointerMove=g=>{u==null||u.remove(),u=ze();let p=Pe(e,ke(e,g.x,g.y));if(a&&c&&be(...af(e,p,c)||p,...a)>s5*2){const w=I.getRectangleByPoints(c.points),x=yf(c),T=br(x);let D=a;T.getNearestCrossingPoint&&(D=T.getNearestCrossingPoint(w,a));const b=bl(D,c)||D;h=aT(e,qn.elbow,b,p,c,u),Qt.addSelectionWithTemporaryElements(e,[])}i(g)},e.globalPointerUp=g=>{var p;if(h){Qt.insertNode(e,h,[e.children.length]),zg(e),cd(e,h);const m=(p=e.getPluginOptions(jV))==null?void 0:p.afterComplete;m&&m(h)}else{const m=pg.get(e);m&&(Qt.insertNode(e,m.temporaryArrowLineElement,[e.children.length]),Pu(e,m.temporaryShapeElement),pg.delete(e))}a&&(un.updatePointerType(e,nn.selection),a=null),u==null||u.remove(),u=null,c=null,h=null,r(g)},e},L8=100,$V=e=>{const{pointerMove:n,pointerLeave:i,globalPointerUp:r}=e;let o=null,a=null,u=null,c=null,h=null;e.pointerMove=p=>{o==null||o.remove(),G.getBoardContainer(e).classList.remove(gm.crosshair);const m=lx(e);c==null||c.remove(),h==null||h.remove();const w=m.length===1&&m[0],x=ed(e,p.x,p.y);if(!G.isReadonly(e)&&!Dr(e)&&w&&At.isShapeElement(w)){const T=pT(e,w,!0),D=JB(af(e,x,w,!0)||x,T),b=T[D];if(gn.getElementRef(w).getGenerator(Mu.key).recoverAutoCompleteG(),b){if(o=fd(G.getRoughSVG(e),b,Dj,{stroke:"none",fill:Rm(Wg,Aj),fillStyle:"solid"}),G.getActiveHost(e).append(o),G.getBoardContainer(e).classList.add(gm.crosshair),Dl(w)){const H=e.getRectangle(w),R=qr(e,H);Xs(o,I.getCenterPoint(R),w.angle)}if(At.isGeometry(w)&&!At.isText(w)){const H=I.getRectangleByPoints(w.points);let R=I.getEdgeCenterPoints(H)[D];const k=az(D);let W=oi(R,L8,k);const U=dT(e,w.shape),nt=w.points.map(ct=>oi(ct,L8+uB(w.points[0],w.points[1],L_(k)),k));c=ze(),h=ze(),c.style.opacity="0.6",h.style.opacity="0.6",u=qm(e,nt,w.shape),u.angle=w.angle,u.fill=w.fill,u.strokeColor=w.strokeColor,u.strokeStyle=w.strokeStyle,u.strokeWidth=w.strokeWidth,u.groupId=w.groupId;const st=bl(R,w)||R,ft=bl(W,u)||W;a=aT(e,qn.elbow,st,ft,w,c),pg.set(e,{temporaryArrowLineElement:a,temporaryShapeElement:u});const Et=_g(e,ft,u);a.target.boundId=u.id,a.target.connection=Et,U.processDrawing(u,h),G.getElementTopHost(e).append(h)}return}}pg.delete(e),n(p)},e.pointerLeave=p=>{g(),i(p)};const g=()=>{o&&(o==null||o.remove(),G.getBoardContainer(e).classList.remove(gm.crosshair),c==null||c.remove(),h==null||h.remove()),pg.get(e)&&pg.delete(e)};return e.globalPointerUp=p=>{r(p),g()},e},VV=e=>{let n=0;const i=100;return pd(e,{key:"line-text",canResize:()=>!0,hitTest:o=>{let a=null;const u=Ll(e,o,c=>At.isArrowLine(c));if(u){const c=lT(e,u,o),g=Xg(u)[c];if(c!==-1&&!g.isEditing)return n=c,{element:u,handle:CS.e}}return a},onResize:(o,a)=>{const u=o.element;if(u){const c=a.endPoint,h=To(e,u);if(ab(c,h)<=i){const p=Yn(c,h,!1),m=K6(h,p),w=[...u.texts];w[n]={...w[n],position:m},Ao.setArrowLineTexts(e,u,w)}}}}),e},WV=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r,afterChange:o,drawSelectionRectangle:a}=e;let u=null,c,h=!1;const g=()=>{const p=ne(e);return p.length>0&&p.every(m=>At.isDrawElement(m)&&!At.isArrowLine(m)||At.isCustomGeometryElement(e,m))};return e.pointerDown=p=>{if(!g()||G.isReadonly(e)||G.hasBeenTextEditing(e)||!Al(p)){n(p);return}const m=ed(e,p.x,p.y),w=ne(e),x=pn(e,w,!1),T=qr(e,x),D=a$(T),b=Wo(w),B=b?nr(m,I.getCenterPoint(T),-b):m;D&&I.isHit(I.getRectangleByPoints([B,B]),D)&&(u={elements:[...w],startPoint:m}),n(p)},e.pointerMove=p=>{if(u){p.preventDefault();const m=!!p.shiftKey;iz(e,u);const w=ed(e,p.x,p.y),x=pn(e,u.elements,!1),T=qr(e,x),D=I.getCenterPoint(T);!Wo(u.elements)&&u.elements.length>1&&(h=!0),_a(e,"with-common-rotate",()=>{if(u&&u.startPoint){let b=D_(u.startPoint,w,D);const B=Wo(u.elements);b=Lm(B+b),m&&(b+=Math.PI/12/2,b-=b%(Math.PI/12));let A=b%(Math.PI/2);if(Math.PI/2-A<=uS(5)){const H=Math.PI/2-A;b+=H}if(A<=uS(5)){const H=-A;b+=H}u.angle=Lm(b-B)||0,A_(e,u.elements,u.angle),tr.set(e,!0),G.getBoardContainer(e).classList.add("element-rotating")}});return}i(p)},e.globalPointerUp=p=>{if(r(p),h){h=!1;const m=ne(e);Qt.addSelectionWithTemporaryElements(e,m)}G.getBoardContainer(e).classList.remove("element-rotating"),rz(e),u=null,tr.set(e,!1)},e.afterChange=()=>{if(o(),c&&(c.remove(),c=null),g()&&!Dr(e)){if(h&&u){const p=pn(e,u.elements,!1),m=qr(e,p);c=b7(e,m),c.classList.add(DA),u.angle&&Xs(c,I.getCenterPoint(m),u.angle)}else{const p=ne(e),m=pn(e,p,!1),w=qr(e,m);c=b7(e,w),c.classList.add(DA),Xs(c,I.getCenterPoint(w),Wo(p))}G.getActiveHost(e).append(c)}},e.drawSelectionRectangle=()=>{if(h&&u){const p=pn(e,u.elements,!1),m=qr(e,p),w=Fa(e,I.inflate(m,_i),{stroke:Ko,strokeWidth:_i});return w.classList.add(uv),u.angle&&Xs(w,I.getCenterPoint(m),u.angle),w}return a()},e};class EP extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=gv(this.board,{getStrokeWidth:()=>_i,getStrokeOpacity:()=>1,getRectangle:n=>{const i=gg(n);return i!=null&&i.length?Rj(this.board,this.element,i):I.getRectangleByPoints(n.points)},hasResizeHandle:()=>{const n=gg(this.element);return n!=null&&n.length?!1:Wx(this.board,this.element)}}),this.tableGenerator=new Jx(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new Mu(this.board),this.getRef().addGenerator(Mu.key,this.lineAutoCompleteGenerator),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(i=>{if($m.isVerticalText(i)){const r=AB(this.board,i);if(r){const a=br(Og.table).getTextRectangle(this.board,this.element,{id:i.id,board:this.board});r.g.classList.add("vertical-cell-text"),Xs(r.g,I.getCenterPoint(a),uS(-90))}}})}getDrawShapeTexts(n){return n.filter(i=>BB(i)).map(i=>({id:i.id,text:i.text,board:this.board}))}initializeTextManage(){const n=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new nT(this.board,this.element,n,{onChange:(i,r,o)=>{const a=G.findPath(this.board,i);r.newText&&Ao.setTableText(this.board,a,o.id,r.newText,r.height),r.operations&&rT(i,r.operations)},getRenderRectangle:(i,r)=>{const o=md(this.board,i,r.id);if($m.isVerticalText(o)){const a=I.getRectangleByPoints(o.points),u=Tn(o),c=a.height-Me.rectangleAndText*2-u*2;return{width:pV(this.board,o,!0),height:c>0?c:0,x:a.x+Me.rectangleAndText+u,y:a.y+(a.height-c)/2}}else return yP(this.board,o)}}),this.textGenerator.initialize()}onContextChanged(n,i){if(n.element!==i.element||n.hasThemeChanged){const r=gg(i.element);r!=null&&r.length&&(Y7(i.element),TB(n.element,r)),this.tableGenerator.processDrawing(n.element,this.getElementG()),this.activeGenerator.processDrawing(n.element,G.getActiveHost(this.board),{selected:this.selected});const o=this.getDrawShapeTexts(i.element.cells),a=this.getDrawShapeTexts(n.element.cells);this.textGenerator.update(n.element,o,a,this.getElementG()),this.rotateVerticalText()}else{const r=n.selected===i.selected,o=gg(n.element);(!r||o!=null&&o.length||n.selected)&&this.activeGenerator.processDrawing(n.element,G.getActiveHost(this.board),{selected:this.selected}),this.selected||Y7(n.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const _8=20;function XV(e){let n;return pd(e,{key:"draw-table",canResize:()=>{const r=ne(e);return BS(e)&&!Dl(r[0])},hitTest:r=>{const a=ne(e)[0];if(a&&At.isElementByTable(a)){let u=e.getRectangle(a),c=OS(e,u,r,a.angle);if(c){const g=vg(e,a);if(g&&BS(e)||!g&&!Cw(e,c.handle))return{element:a,handle:c.handle,cursorClass:c.cursorClass,rectangle:u}}const h=yv(e,a);for(let g=0;g<h.length;g++)if(u=I.getRectangleByPoints(h[g].points),c=OS(e,u,r,0),c&&!Cw(e,c.handle))return{element:a,handle:c.handle,cursorClass:c.cursorClass,rectangle:u,options:{cell:h[g]}}}return null},onResize:(r,o)=>{var u,c,h,g;n==null||n.remove();const a=G.findPath(e,r.element);if((u=r.options)!=null&&u.cell&&r.rectangle){const p=Jw(r.handle),{originPoint:m,handlePoint:w}=LS(e,p,r.rectangle),x=[o.startPoint,o.endPoint],{xZoom:T,yZoom:D}=CT(x,m,w,!1,!1),b=(c=r.options)==null?void 0:c.cell.points,B=b.map(W=>yu(W,m,T,D)),A=B[1][0]-b[1][0],H=B[1][1]-b[1][1],R=B[1][0]-B[0][0],k=B[1][1]-B[0][1];if(A!==0&&R>=_8){const{columns:W,points:U}=DB(r.element,(h=r.options)==null?void 0:h.cell.columnId,R,A);Qt.setNode(e,{columns:W,points:U},a)}else if(H!==0&&k>=_8){const{rows:W,points:U}=bB(r.element,(g=r.options)==null?void 0:g.cell.rowId,k,H);Qt.setNode(e,{rows:W,points:U},a)}}else{const p=Cw(e,r.handle),m=o.isShift,w=Jw(r.handle),{originPoint:x,handlePoint:T}=LS(e,w,r.rectangle),D=pP(e,r,o,{originPoint:x,handlePoint:T},m,p),b=nC(e,[r.element],D);n=b.snapG,G.getElementTopHost(e).append(n);const B=b.activePoints,A=r.element.points,H=I.getRectangleByPoints(A),R=I.getRectangleByPoints(B),k=R.width-H.width,W=R.height-H.height;let U=[...r.element.columns],nt=[...r.element.rows];k!==0&&(U=U.map(st=>st.width?{...st,width:st.width+k*(st.width/H.width)}:st)),W!==0&&(nt=nt.map(st=>st.height?{...st,height:st.height+W*(st.height/H.height)}:st)),Qt.setNode(e,{points:Rg(B),columns:U,rows:nt},a)}},afterResize:r=>{n==null||n.remove(),n=null}}),e}const qV=e=>{const n=e,{drawElement:i,getRectangle:r,isRectangleHit:o,isHit:a,isMovable:u,dblClick:c,keyDown:h,pointerUp:g}=n;return n.drawElement=p=>At.isElementByTable(p.element)?EP:i(p),n.isHit=(p,m,w)=>{if(At.isElementByTable(p)){const x=I.getRectangleByPoints(p.points),T=lg.getNearestPoint(x,m);return be(T[0],T[1],m[0],m[1])<=a5||I.isPointInRectangle(x,m)}return a(p,m,w)},n.getRectangle=p=>At.isElementByTable(p)?I.getRectangleByPoints(p.points):r(p),n.isMovable=p=>At.isElementByTable(p)?!0:u(p),n.isRectangleHit=(p,m)=>{if(At.isElementByTable(p)){const w=I.getRectangleByPoints([m.anchor,m.focus]),x=I.getRectangleByPoints(p.points);return Gw(I.getCornerPoints(x),w)}return o(p,m)},n.keyDown=p=>{const m=ne(e),w=m.length===1,x=m[0];if(!G.isReadonly(e)&&!G.hasBeenTextEditing(n)&&!X5(p)&&!Y5(p)&&!q5(p)&&w&&(p.preventDefault(),At.isElementByTable(x))){const T=gg(x);let D=x.cells.find(b=>b.text);if(T!=null&&T.length&&(D=T.find(b=>b.text)),D){J7(e,D);return}}h(p)},n.dblClick=p=>{if(p.preventDefault(),!G.isReadonly(e)){const m=Pe(e,ke(e,p.x,p.y)),w=Ll(e,m);if(w&&At.isElementByTable(w)){const x=Q7(n,w,m);if(x&&x.text){J7(e,x);return}}}c(p)},n.pointerUp=p=>{const m=G.isPointer(n,nn.selection)||G.isPointer(n,nn.hand);if(!Al(p)||of(n)||!m){g(p);return}if(BS(n)){const x=Pe(n,ke(n,p.x,p.y)),T=Bj(n)[0],D=Q7(n,T,x);D&&D.text&&TB(T,[D])}g(p)},n.buildTable=p=>p,XV(n)},d3=e=>uP(e)&&Xx(e),g3=e=>uP(e)&&Bl(e),YV=e=>{const{pointerMove:n,globalPointerUp:i,pointerUp:r}=e;let o=null,a=null;return e.pointerMove=u=>{o==null||o.remove(),o=ze();const c=new Jx(e),h=G.getPointer(e),g=d3(e),p=Pe(e,ke(e,u.x,u.y));if(g){const m=lP(h,p);a=ux(h,m),c.processDrawing(a,o),G.getElementTopHost(e).append(o)}n(u)},e.pointerUp=u=>{d3(e)&&a||r(u)},e.globalPointerUp=u=>{d3(e)&&a&&Pu(e,a),a=null,o==null||o.remove(),o=null,i(u)},e},KV=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,keyDown:o,keyUp:a}=e;let u=null,c=null,h=null,g=!1,p;return e.keyDown=m=>{g=ln.isKeyHotkey("shift",m),o(m)},e.keyUp=m=>{g=!1,a(m)},e.pointerDown=m=>{!G.isReadonly(e)&&g3(e)&&(u=Pe(e,ke(e,m.x,m.y))),n(m)},e.pointerMove=m=>{c==null||c.remove(),c=ze();const w=new Jx(e),x=Pe(e,ke(e,m.x,m.y)),T=G.getPointer(e);if(p==null||p.remove(),u&&g3(e)){let D=Rg([u,x],g);const b=I.getRectangleByPoints(D),[B,A]=fi(u,x),H=nC(e,[],{resizePoints:D,activeRectangle:b,directionFactors:[Mg(B),Mg(A)],isAspectRatio:g,isFromCorner:!0,isCreate:!0});p=H.snapG,G.getElementTopHost(e).append(p),D=Rg(H.activePoints,g),h=ux(T,D),w.processDrawing(h,c),G.getElementTopHost(e).append(c)}i(m)},e.pointerUp=m=>{if(g3(e)&&u){const w=Pe(e,ke(e,m.x,m.y)),{width:x,height:T}=I.getRectangleByPoints([u,w]);if(Math.hypot(x,T)<8){const D=G.getPointer(e),b=lP(D,w);h=ux(D,b)}h&&Pu(e,h),p==null||p.remove(),c==null||c.remove(),c=null,u=null,h=null;return}r(m)},e},ZV=e=>{const{drawElement:n,buildTable:i,pointerUp:r}=e;return e.drawElement=o=>At.isSwimlane(o.element)?EP:n(o),e.buildTable=o=>At.isSwimlane(o)?KU(o):i(o),KV(YV(e))},QV=e=>{const{pointerDown:n,pointerMove:i,dblClick:r,globalKeyDown:o}=e;let a=null,u=null,c=[];const h=()=>{u&&Qt.insertNode(e,u,[e.children.length]),G.getBoardContainer(e).classList.remove("vector-line-closed"),a==null||a.remove(),a=null,u=null,c=[]};return e.pointerDown=g=>{const p=mj(),m=G.isInPointer(e,p);if(!G.isReadonly(e)&&m&&Bl(e)){let w=Pe(e,ke(e,g.x,g.y));if(c.length>1&&be(...w,...c[0])<=rx){c.push(c[0]),h();return}c.push(w);return}n(g)},e.pointerMove=g=>{a==null||a.remove(),a=ze();let p=Pe(e,ke(e,g.x,g.y));G.getPointer(e)===cx.vectorLine&&c.length>0&&(be(...p,...c[0])<=rx?(p=c[0],G.getBoardContainer(e).classList.add("vector-line-closed")):G.getBoardContainer(e).classList.remove("vector-line-closed"),u=aU(e,Ym.straight,c,p,a)),i(g)},e.dblClick=g=>{if(!G.isReadonly(e)&&u){h(),un.updatePointerType(e,nn.selection);return}r(g)},e.globalKeyDown=g=>{if(!G.isReadonly(e)){const p=ln.isKeyHotkey("esc",g),m=ln.isKeyHotkey("v",g);(p||m)&&u&&(h(),m&&un.updatePointerType(e,nn.selection))}o(g)},e},JV=e=>(pd(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:i=>{const r=rP(e);if(r.length>0){let o=null;return r.forEach(a=>{const u=KB(e,a,i);u&&(o={element:a,handle:u.handle,handleIndex:u.handleIndex})}),o}return null},onResize:(i,r)=>{let o=[...i.element.points],a=i.handleIndex;if(i.handle===fr.source||i.handle===fr.target)if(o[a]=r.endPoint,xv(i.element.points))o[o.length-1]=r.endPoint;else{const u=i.handle===fr.source?o[o.length-1]:o[0];be(...r.endPoint,...u)<=rx&&(o[a]=u)}else i.handle===fr.addHandle?o.splice(a+1,0,r.endPoint):o[a]=r.endPoint;Qt.setNode(e,{points:o},i.path)}}),e),SP=e=>{const{drawElement:n,getRectangle:i,isRectangleHit:r,isHit:o,isInsidePoint:a,isMovable:u,isAlign:c,getRelatedFragment:h,getOneHitElement:g}=e;return e.drawElement=p=>At.isGeometry(p.element)?(At.isUML(p.element),P8):At.isArrowLine(p.element)?RV:At.isVectorLine(p.element)?OV:At.isImage(p.element)?zV:n(p),e.getRectangle=p=>{if(At.isGeometry(p))return I.getRectangleByPoints(p.points);if(At.isArrowLine(p)){const m=To(e,p),w=p.texts.map((T,D)=>sT(e,p,D)),x=I.getRectangleByPoints(m);return I.getBoundingRectangle([x,...w])}if(At.isVectorLine(p)){const m=Jc(e,p),w=I.getRectangleByPoints(m);return I.getBoundingRectangle([w])}return At.isImage(p)?I.getRectangleByPoints(p.points):i(p)},e.isRectangleHit=(p,m)=>{const w=cU(e,p,m);return w!==null?w:r(p,m)},e.isHit=(p,m,w)=>{const x=pU(e,p,m,w);return x!==null?x:o(p,m,w)},e.getOneHitElement=p=>p.every(w=>At.isDrawElement(w))?UB(e,p):g(p),e.isInsidePoint=(p,m)=>{const w=vU(e,p,m);return w!==null?w:a(p,m)},e.isMovable=p=>{if(At.isGeometry(p)||At.isImage(p)||At.isVectorLine(p))return!0;if(At.isArrowLine(p)){const m=ne(e),w=x=>!!m.find(T=>T.id===x);return!!(!p.source.boundId&&!p.target.boundId||p.source.boundId&&w(p.source.boundId)&&m.includes(p)||p.target.boundId&&w(p.target.boundId)&&m.includes(p))}return u(p)},e.isAlign=p=>At.isGeometry(p)||At.isImage(p)?!0:c(p),e.getRelatedFragment=(p,m)=>{const w=m!=null&&m.length?m:ne(e),T=e.children.filter(D=>At.isArrowLine(D)).filter(D=>{const b=w.find(H=>H.id===D.source.boundId),B=w.find(H=>H.id===D.target.boundId),A=w.includes(D);return b&&B&&!A});return h([...p,...T],m)},ZV(qV(u$(QV($V(NV(JV(HV(VV(GV(WV(IV(UV(_V(FV(kV(LV(e)))))))))))))))))},Te={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var ie;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(ie||(ie={}));var qo;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(qo||(qo={}));function _S(e){return e.origin.layout?e.origin.layout:Te.isAbstract(e.origin)?TP(_S(e.parent)):e.parent?_S(e.parent):null}const Pl=e=>e===ie.rightBottomIndented||e===ie.rightTopIndented||e===ie.leftBottomIndented||e===ie.leftTopIndented,tW=e=>e===ie.right||e===ie.left||e===ie.downward||e===ie.upward,Qo=e=>e===ie.standard,Xr=e=>e===ie.right||e===ie.left||e===ie.standard||Pl(e),Km=e=>e===ie.right||e===ie.left||e===ie.standard,FS=e=>e===ie.upward||e===ie.downward,Kc=e=>e===ie.leftTopIndented||e===ie.rightTopIndented||e===ie.upward,eW=e=>e===ie.leftBottomIndented||e===ie.rightBottomIndented||e===ie.downward,Zm=e=>e===ie.left||e===ie.leftTopIndented||e===ie.leftBottomIndented,fx=e=>e===ie.right||e===ie.rightTopIndented||e===ie.rightBottomIndented,p3=e=>Pl(e)?qo.indented:(Qo(e)||tW(e),qo.logic),TP=e=>Pl(e)?fx(e)?ie.right:ie.left:e;class Qm{constructor(n,i,r,o){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const a=i.getHorizontalGap(n,o),u=i.getVerticalGap(n,o);this.origin=n,this.width=i.getWidth(n),this.height=i.getHeight(n),this.x=this.y=0,o&&(this.parent=o);const c=_S(this);this.layout=c&&c!==ie.standard?c:r.rootLayoutType;const h=i.getVerticalConnectingPosition(n,o);h&&(this.verticalConnectingPosition=h),this.addGap(a,u)}isRoot(){return this.depth===0}addGap(n,i){const r=this;r.hGap+=n,r.vGap+=i,r.width+=2*n,r.height+=2*i}eachNode(n){AP(this,n)}getBoundingBox(){const n={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(i=>{n.left=Math.min(n.left,i.x),n.top=Math.min(n.top,i.y),n.right=Math.max(n.right,i.x+i.width),n.bottom=Math.max(n.bottom,i.y+i.height)}),n.width=n.right-n.left,n.height=n.bottom-n.top,n}translate(n=0,i=0){this.eachNode(r=>{r.x+=n,r.y+=i})}right2left(){const n=this,i=n.getBoundingBox();n.eachNode(r=>{r.x=r.x-(r.x-i.left)*2-r.width,r.left=!0}),n.translate(i.width,0)}down2up(){const n=this,i=n.getBoundingBox();n.eachNode(r=>{r.y=r.y-(r.y-i.top)*2-r.height,r.up=!0}),n.translate(0,i.height)}}function AP(e,n){var i;(i=e.children)==null||i.forEach(r=>{AP(r,n)}),n(e)}class nW{constructor(n,i,r,o,a,u,c,h,g,p){this.left=n,this.right=i,this.top=r,this.bottom=o,this.width=a,this.height=u,this.rootX=c,this.rootY=h,this.rootWidth=g,this.rootHeight=p}}function iW(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var kS;(function(e){e.middle="middle",e.bottom="bottom"})(kS||(kS={}));class rd{constructor(n,i,r,o,a){this.width=n,this.height=i,this.y=r,this.children=o,this.childrenCount=o.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=a}}const wf=e=>{var n;return e.children?(n=e.children)==null?void 0:n.filter(i=>i instanceof Qm?!Te.isAbstract(i.origin):i instanceof rd?!Te.isAbstract(i.origin.origin):!Te.isAbstract(i)):[]},DP=(e,n)=>{const i=e.children.indexOf(n);return e.children.find(r=>{if(r instanceof Qm)return Te.isAbstract(r.origin)&&r.origin.end===i;if(r instanceof rd&&e instanceof rd){if(Te.isAbstract(r.origin.origin)){const{end:o}=tf(r.origin.origin,e.origin);return o===i}return!1}return Te.isAbstract(r)&&r.end===i})},rW=(e,n)=>{const i=e.children.indexOf(n);return e.children.find(r=>{if(r instanceof Qm)return Te.isAbstract(r.origin)&&r.origin.start===i;if(r instanceof rd&&e instanceof rd){if(Te.isAbstract(r.origin.origin)){const{start:o}=tf(r.origin.origin,e.origin);return o===i}return!1}return Te.isAbstract(r)&&r.start===i})},tf=(e,n)=>{let i=e.start,r=e.end;if(Qo(n.layout)){const o=n.origin.rightNodeCount;i>=o&&(r-=o,i-=o)}return{start:i,end:r}};function hx(e,n,i){e.children[n].modifier+=i}function oW(e){return e.childrenCount===0?null:e.children[0]}function bP(e){let n=wf(e);return e.childrenCount===0?null:n[n.length-1]}function sW(e,n){if(Te.isAbstract(e.children[n].origin.origin))return;let i=e.children[n-1],r=e.children[n],o=i.modifier+i.preliminary+i.width,a=r.modifier+r.preliminary,u=0,c=e,h=e;for(;i||r;){if(i){let p=u+i.modifier+i.preliminary+i.width;p>o&&(o=p),o=PP(c,i,o,u),c=i,u=i.modifier+u,i=bP(i)}if(r){let p=r.modifier+r.preliminary;p<a&&(a=p),a=uW(h,r,a),h=r,r=oW(r)}}const g=o-a;g>0&&hx(e,n,g)}function aW(e){const n=e.children[0];let i=n.preliminary+n.modifier;const r=wf(e),o=r[r.length-1];let a=o.modifier+o.preliminary+o.width;n.origin.blackNode&&n.origin.blackNode.rootX>n.origin.blackNode.left&&(i=i+(n.origin.blackNode.rootX-n.origin.blackNode.left)),o.origin.blackNode&&o.origin.blackNode.rootX+o.origin.blackNode.rootWidth<o.origin.blackNode.right&&(a=a-(o.origin.blackNode.right-(o.origin.blackNode.rootX+o.origin.blackNode.rootWidth))),n.origin.verticalConnectingPosition&&o.origin.verticalConnectingPosition&&(i=i+n.width-n.origin.vGap,a=a-o.origin.vGap);let u=e.width/2;e.origin.verticalConnectingPosition&&(u=e.width-e.origin.vGap);const c=(i+a)/2-u;c>0?e.preliminary=c:e.children.forEach((h,g)=>{hx(e,g,Math.abs(c))})}function IS(e){if(e.childrenCount!==0){IS(e.children[0]);for(let n=1;n<e.childrenCount;n++){const i=e.children.find(r=>{let o=null;if(Te.isAbstract(r.origin.origin)){let{end:a}=tf(r.origin.origin,e.origin);o=a}return o===n-1});i&&lW(e,i),IS(e.children[n]),sW(e,n)}aW(e)}}function BP(e,n){n+=e.modifier,e.x=e.preliminary+n;for(let i=0;i<e.childrenCount;i++)BP(e.children[i],n)}function lW(e,n,i){const{start:r,end:o}=tf(n.origin.origin,e.origin),a=e.children.indexOf(n),u=e.children[r];let c=e.children[o];const h=u.modifier;let g=c.modifier+c.preliminary+c.width,p=c.modifier,m=e;for(e.children[a].modifier=u.modifier;c.childrenCount;){m=c;const T=bP(c);c=T||c;let D=p+c.modifier+c.preliminary+c.width;g=PP(m,c,g,p),p+=c.modifier,D>g&&(g=D)}const w=n.origin.blackNode?n.origin.blackNode.rootX*2+n.origin.blackNode.rootWidth:n.width,x=g-h;if(x>w){const T=(x-w)/2;hx(e,a,T)}else{const T=(w-x)/2;for(let D=r;D<o+1;D++)hx(e,D,T)}}function PP(e,n,i,r){const o=DP(e,n);return o?Math.max(o.modifier+o.width+r,i):i}function uW(e,n,i){const r=rW(e,n);return r?Math.min(r.modifier+r.preliminary,i):i}function cW(e){IS(e),BP(e,0)}function HS(e,n=0){e.x=n,e.children.forEach(i=>{if(Te.isAbstract(i.origin)){let r=0;for(let o=i.origin.start;o<=i.origin.end;o++){const a=e.children[o].getBoundingBox();r=Math.max(a.width,r)}HS(i,e.x+e.width/2+r)}else HS(i,e.x+e.width/2)})}function fW(e,n){let i=e.y+e.height,r=null;o(e);function o(a){a.children.forEach((u,c)=>{const h=a.children.find(p=>Te.isAbstract(p.origin)&&p.origin.end===c-1);if(h){const p=r!=null&&r.origin.isCollapsed?n.getExtendHeight(u.origin):0;i=hW(a,h)+p}if(Te.isAbstract(u.origin))return;let g=i+u.vGap;r&&!Km(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?g=g+n.getExtendHeight(u.origin):g=g+n.getIndentedCrossLevelGap()),u.y=g,r=u,i=u.y+u.height,o(u)})}}function hW(e,n){const i=n.origin,r=e.children.indexOf(n),o=e.children[i.start],a=e.children[i.end];e.children[r].y=o.y;const u=o.y;let c=a.y+a.height,h=a,g=e;for(;h!=null&&h.children.length;){g=h;const x=wf(g);h=x[x.length-1];const T=DP(g,h);c=T?Math.max(T.y+T.height,h.y+h.height):h.y+h.height}const p=c-u,m=n.blackNode?n.blackNode.height:n.height,w=n.blackNode?n.blackNode.rootY*2+n.blackNode.rootHeight:n.height;if(w>p){const x=(w-p)/2;for(let T=i.start;T<=i.end;T++)e.children[T].eachNode(D=>{D.y+=x})}else{const x=(p-w)/2;e.children[r].y+=x}return Math.max(n.y+m,o.y+p)}function MP(e,n,i){i?n.y=e.x:n.x=e.x,e.children.forEach((r,o)=>{MP(r,n.children[o],i)})}function RP(e,n,i=0){var r,o;if(n){if(Te.isAbstract(e.origin)){const{start:a,end:u}=tf(e.origin,e.parent);for(let c=a;c<=u;c++){const h=(r=e.parent)==null?void 0:r.children[c].getBoundingBox().right;i=Math.max(h,i)}}e.x=i,i+=e.width}else{if(Te.isAbstract(e.origin))for(let a=e.origin.start;a<=e.origin.end;a++){const u=(o=e.parent)==null?void 0:o.children[a].getBoundingBox().bottom;i=Math.max(u,i)}e.y=i,i+=e.height}e.children.forEach(a=>{RP(a,n,i)})}const OP=(e,n)=>{const i=[];return e.children.forEach(r=>{i.push(OP(r,n))}),n?(e.blackNode&&(e.blackNode=iW(e.blackNode)),new rd(e.height,e.width,e.x,i,e)):new rd(e.width,e.height,e.y,i,e)};class dW{constructor(){}layout(n,i,r,o,a=!1,u){const c=[],h=[],g=this.buildLayoutNode(n,r,o,c,u);switch(c.filter(m=>m.origin.children.length>0).forEach(m=>{const w=m.layout,x=o.toTop||Xr(o.rootLayoutType)&&Kc(w),T=o.toLeft||!Xr(o.rootLayoutType)&&Zm(w),D=Xr(w),b=this.layout(m.origin,p3(w),r,{toTop:x,toLeft:T,rootLayoutType:o.rootLayoutType},D,m.parent);!o.toTop&&x&&i!==qo.indented&&b.down2up(),!o.toLeft&&T&&b.right2left();const B=b.getBoundingBox();m.width=B.width,m.height=B.height,m.blackNode=new nW(B.left,B.right,B.top,B.bottom,B.width,B.height,b.x,b.y,b.width,b.height),h.push(b)}),i){case qo.indented:HS(g),fW(g,r);break;case qo.fishBone:break;case qo.logic:default:RP(g,a);const m=OP(g,a);cW(m),MP(m,g,a);break}const p=[];return c.filter(m=>m.origin.children.length>0).forEach((m,w)=>{if(m.parent){const x=h[w];x.parent=m.parent;let T,D;Xr(m.parent.layout)?(T=x.x,D=0):(T=0,D=x.y),x.translate(m.x-T,m.y-D);const B=m.parent.children.indexOf(m),A=m.parent.children[B];m.parent.children[B]=Object.assign(A,x);const H=p.find(R=>R.parent===m.parent&&!Te.isAbstract(m.origin));H?(H.offsetX<T&&(H.offsetX=T),H.offsetX<D&&(H.offsetX=D)):Te.isAbstract(m.origin)||p.push({parent:m.parent,offsetX:T,offsetY:D})}}),p.forEach(m=>{m.parent.children.forEach(w=>w.translate(m.offsetX,m.offsetY))}),g}buildLayoutNode(n,i,r,o,a){const u=new Qm(n,i,r,a);if(!u.origin.isCollapsed){const c=[u];let h;for(;h=c.pop();)if(!h.origin.isCollapsed){const g=h.origin.children,p=g?g.length:0;if(h.children=[],g&&p)for(let m=0;m<p;m++){const w=new Qm(g[m],i,r,h);h.children.push(w),w.depth=h.depth+1,(h.layout!==w.layout&&(p3(h.layout)!==p3(w.layout)||Xr(h.layout)!==Xr(w.layout))||Te.isAbstract(w.origin))&&!w.origin.isCollapsed?o.push(w):c.push(w)}}}return u}}class gW{static layout(n,i,r){const o=new dW;if(Qo(r)){const m=n.children.length,w=[],x=[],T={...n};for(let A=0;A<m;A++){const H=n.children[A];if(Te.isAbstract(H)&&H.end<n.rightNodeCount){w.push(H);continue}if(Te.isAbstract(H)&&H.start>=n.rightNodeCount){x.push(H);continue}A<n.rightNodeCount?w.push(H):x.push(H)}T.children=w;const D=o.layout(T,qo.logic,i,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);T.children=x;const b=o.layout(T,qo.logic,i,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);b.right2left(),D.translate(b.x-D.x,b.y-D.y);const B=D.children.filter(A=>Te.isAbstract(A.origin));return D.children=D.children.filter(A=>!Te.isAbstract(A.origin)),b.children.forEach(A=>{D.children.push(A),A.parent=D}),D.children=D.children.concat(B),D.x=b.x,D.origin=n,D}const a=Pl(r),u=a?qo.indented:qo.logic,c=a?!0:Xr(r),h=Kc(r),g=Zm(r),p=o.layout(n,u,i,{toTop:h,toLeft:g,rootLayoutType:r},c);return h&&p.down2up(),g&&p.right2left(),p}}const Jm=new WeakMap;var an;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(an||(an={}));const dx={[ie.right]:[an.right],[ie.left]:[an.left],[ie.upward]:[an.top],[ie.downward]:[an.bottom],[ie.rightBottomIndented]:[an.right,an.bottom],[ie.rightTopIndented]:[an.right,an.top],[ie.leftBottomIndented]:[an.left,an.bottom],[ie.leftTopIndented]:[an.left,an.top]};var wu;(function(e){e.mind="mind"})(wu||(wu={}));const pW=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],mW=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],vW=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],yW=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],wW=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],xW=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],LP={...$b,branchColors:pW,rootFill:"#f5f5f5",rootTextColor:gr},CW={...Vb,branchColors:mW,rootFill:gr,rootTextColor:"#FFFFFF"},EW={...Wb,branchColors:vW,rootFill:"#FFFFFF",rootTextColor:gr},SW={...Xb,branchColors:yW,rootFill:"#153D5D",rootTextColor:"#FFFFFF"},TW={...qb,branchColors:wW,rootFill:"#FFFFFF",rootTextColor:gr},AW={...Yb,branchColors:xW,rootFill:"#FFFFFF",rootTextColor:gr},_P=[LP,CW,EW,SW,TW,AW],DW={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},iC="plait-mind-plugin-key",cr=4,Eg="#6698FF",F8="#AAAAAA",NS=2,k8=8,iw=10,Fh=2,Gi=20,am=10,bW=Rm("#000000",.2),BW="#6698FF",I8="white",PW=240;var Fg;(function(e){e.mindCentralText="mind-center-text",e.abstractNodeText="abstract-node-text"})(Fg||(Fg={}));function GS(e,n){const i=e.getPluginOptions(iC),r=n.data.emojis.length;return{width:FP(n)*r+r*2*i.emojiPadding+(r-1)*i.spaceBetweenEmojis,height:n.height}}function FP(e){return He.isMind(e)?20:16}const od=(e,n,i)=>n[i],kg={branch:{color:F8,width:2},shape:{strokeColor:F8,strokeWidth:2}},rC={shape:{rectangleRadius:4,strokeWidth:2,fill:"none"}},MW=e=>{const n=e.rightNodeCount,i=e.children;let r=[],o=[];for(let a=0;a<i.length;a++){const u=i[a];if(Te.isAbstract(u)&&u.end<n){r.push(u);continue}if(Te.isAbstract(u)&&u.start>=n){o.push(u);continue}a<n?r.push(u):o.push(u)}return{leftChildren:o,rightChildren:r}},Sv=e=>{const n=Ut.findParent(e);if(!n)return;const i=n.children.indexOf(e);return n.children.find(r=>Te.isAbstract(r)&&i>=r.start&&i<=r.end)},kP=e=>{const n=Ut.findParent(e);if(!n)return[];const i=n.children.indexOf(e);return n.children.filter(r=>Te.isAbstract(r)&&r.start>i)},IP=(e,n)=>{const i=[];return n.filter(r=>!Te.isAbstract(r)&&!He.isMind(r)).forEach(r=>{const o=Sv(r);if(o&&n.indexOf(o)===-1&&i.indexOf(o)===-1){const{start:a,end:u}=o;Ut.getParent(r).children.slice(a,u+1).every(g=>n.indexOf(g)>-1)&&i.push(o)}}),i},HP=(e,n)=>{const i=[];return n.filter(r=>!Te.isAbstract(r)&&!He.isMind(r)).forEach(r=>{const o=Sv(r);if(o&&n.indexOf(o)>0){const a=i.findIndex(u=>u.abstract===o);a===-1?i.push({abstract:o,references:[r]}):i[a].references.push(r)}}),i};function NP(e,n){const i=n.indexOf(e.references[0]),r=n.indexOf(e.references[e.references.length-1]);return{start:i,end:r}}const GP=(e,n,i=1,r=!0,o=new Map)=>{const a=Je.parent(e,n),u=n[n.length-1]!==0;let c;if(!u)c=a.children.filter(m=>Te.isAbstract(m));else{const m=Je.get(e,Se.previous(n));c=kP(m)}if(c.length&&c.forEach(m=>{let w=o.get(m);w||(w={start:0,end:0},o.set(m,w)),w.start=w.start+i,w.end=w.end+i}),!u)return o;const h=Je.get(e,Se.previous(n)),g=Sv(h),p=!r&&g&&g.end===n[n.length-1]-1;if(g&&!p){let m=o.get(g);m||(m={start:0,end:0},o.set(g,m)),m.end=m.end+i}return o},zP=(e,n,i=new Map)=>(n.forEach(r=>{if(!He.isMind(r)){const o=kP(r).filter(u=>!n.includes(u));o.length&&o.forEach(u=>{let c=i.get(u);c||(c={start:0,end:0},i.set(u,c)),c.start=c.start-1,c.end=c.end-1});const a=Sv(r);if(a&&!n.includes(a)){let u=i.get(a);u||(u={start:0,end:0},i.set(a,u)),u.end=u.end-1}}}),i),jP=(e,n)=>!!Ut.getAncestors(e,n).find(r=>Te.isAbstract(r)),ST=(e,n)=>Te.isAbstract(n)||jP(e,n)?$P(e,n):od(e,n,"branchColor")||od(e,n,"strokeColor")||VP(e,n),TT=(e,n)=>od(e,n,"branchShape")||sd.bight,UP=(e,n)=>od(e,n,"branchWidth")||od(e,n,"strokeWidth")||NS,RW=(e,n)=>td(n.branchWidth)?kg.branch.width:n.branchWidth,$P=(e,n)=>n.branchColor||n.strokeColor?n.branchColor||n.strokeColor:kg.branch.color,VP=(e,n)=>{const i=G.findPath(e,n);return OW(e,i[1])},OW=(e,n)=>{const i=AT(e),r=i.branchColors.length,o=n%r;return i.branchColors[o]},AT=e=>{const i=G.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return i&&DW.isMindThemeColor(i)?i:LP},DT=(e,n)=>{if(He.isMind(n)){const i=AT(e).rootFill;return n.strokeColor||i}return Te.isAbstract(n)||jP(e,n)?n.strokeColor||kg.shape.strokeColor:od(e,n,"strokeColor")||VP(e,n)},oC=(e,n)=>n.strokeStyle||Co.solid,Tv=(e,n)=>n.strokeWidth||(Te.isAbstract(n)?kg.shape.strokeWidth:rC.shape.strokeWidth),WP=(e,n)=>{if(n.fill)return n.fill;const i=AT(e).rootFill;return He.isMind(n)?i:rC.shape.fill},tv=(e,n)=>od(e,n,"shape")||Ru.roundRectangle;function bT(e){const n=pv(e);n==null||n.edit(()=>{},i=>{const r=i;return r.key==="Enter"&&!r.shiftKey})}const m3=(e,n)=>(n!=null&&n.length?n:ne(e)).filter(r=>Ut.isMindElement(e,r)),H8=e=>{const n=[];return e.forEach(i=>{dx[i].forEach(o=>{!n.includes(o)&&!n.includes(BT(o))&&n.push(o)})}),n},LW=(e,n)=>{const i=dx[e],r=dx[n];if(!r)throw new Error(`unexpected layout: ${n} on correct layout`);return r.find(o=>i.includes(BT(o)))},_W=(e,n)=>{const i=n===an.left||n===an.right;let r=ie.standard;switch(e){case ie.left:r=ie.right;break;case ie.right:r=ie.left;break;case ie.downward:r=ie.upward;break;case ie.upward:r=ie.downward;break;case ie.rightBottomIndented:r=i?ie.leftBottomIndented:ie.rightTopIndented;break;case ie.leftBottomIndented:r=i?ie.rightBottomIndented:ie.leftTopIndented;break;case ie.rightTopIndented:r=i?ie.leftTopIndented:ie.rightBottomIndented;break;case ie.leftTopIndented:r=i?ie.rightTopIndented:ie.leftBottomIndented;break}return r},XP=()=>ie.standard,N8=e=>{const n=[],i=e.map(BT);for(const r in ie){const o=ie[r],a=dx[o];if(a){const u=a.some(h=>e.includes(h)),c=a.some(h=>i.includes(h));u&&!c&&n.push(o)}}return n},BT=e=>{let n=an.right;switch(e){case an.top:n=an.bottom;break;case an.bottom:n=an.top;break;case an.right:n=an.left;break;case an.left:n=an.right;break}return n},uf=e=>e.layout||XP(),FW=e=>{function n(r,o){return He.isMind(r)?cr*12:(o&&o.isRoot(),cr*3)}function i(r,o){return He.isMind(r)?cr*12:cr*8.5}return{getHeight(r){return zn.getNodeHeight(e,r)},getWidth(r){return zn.getNodeWidth(e,r)},getHorizontalGap(r,o){const a=o&&o.layout||uf(r),u=Xr(a);return Pl(a)?cr*6:u?i(r):n(r,o)},getVerticalGap(r,o){const a=o&&o.layout||uf(r);return Pl(a)?cr*3.5:Xr(a)?n(r,o):i(r)},getVerticalConnectingPosition(r,o){if(r.shape===Ru.underline&&o&&Km(o.layout))return kS.bottom},getExtendHeight(r){return 0},getIndentedCrossLevelGap(){return cr*1}}},kW="",IW="",HW=e=>Ux(e,Fg.mindCentralText,kW),NW=e=>Ux(e,Fg.abstractNodeText,IW),G8=(e,n)=>{const i=HW(e),r=sC(i,{layout:ie.right});r.type="mind";const o=zn.getNodeWidth(e,r),a=zn.getNodeHeight(e,r);return r.points=[[n[0]-o/2,n[1]-a/2]],r},sC=(e,n)=>{const i={id:Mn(),type:"mind_child",data:{topic:gd(e)},children:[]};let r;for(r in n)td(n[r])||(i[r]=n[r]);return i},GW=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],zW=14,jW=18,UW=34,qP=e=>e.children.reduce((i,r)=>i+qP(r),0)+e.children.length,YP=(e,n)=>{let i=Ut.findParent(n);for(;i;){if(i===e)return!0;i=Ut.findParent(i)}return!1},Tm=e=>{let n=[];return e.forEach(i=>{e.some(o=>YP(o,i))||n.push(i)}),n},z8=(e,n)=>e.y>n.y,KP=e=>{const n={...e};n.id=Mn(),n.children=[];for(const i of e.children)n.children.push(KP(i));return n},gx=(e,n,i)=>{const r={};He.isMind(n)||(GW.forEach(a=>{r[a]=n[a]}),delete r.layout);const o=sC("",r);Qt.insertNode(e,o,i),zg(e),cd(e,o),setTimeout(()=>{bT(o)})},$W=e=>{const n=[],i=[];for(let r=0;r<e.length;r++){const o=Ut.getParent(e[r]),a=i.indexOf(o);a===-1?(i.push(o),n.push([e[r]])):n[a].push(e[r])}return{parentElements:i,abstractIncludedGroups:n}},zS=e=>{if(He.isMind(e))return jW;if(Ut.isMindElement(null,e))return zW;throw new Error("can not find default font-size")},VW="#6698FF80",Gc=3.5,j8=10,rw=8,ev={horizontal:{nodeAndText:cr*2.5,emojiAndText:cr*1.5},vertical:{nodeAndText:cr,nodeAndImage:cr,imageAndText:cr*1.5}},PT={horizontal:{nodeAndText:cr*4,emojiAndText:cr*2},vertical:{nodeAndText:cr*2}},v3=(e,n)=>{const r=He.isMind(n)?PT.horizontal.nodeAndText:ev.horizontal.nodeAndText,o=Tv(e,n);return r+o},y3=(e,n)=>{const i=He.isMind(n),r=Tv(e,n);return(i?PT.vertical.nodeAndText:ev.vertical.nodeAndText)+r},U8=e=>He.isMind(e)?PT.horizontal.emojiAndText:ev.horizontal.emojiAndText,zn={getNodeWidth(e,n){const i=v3(e,n);return Ut.hasEmojis(n)?zn.getEmojiLeftSpace(e,n)+GS(e,n).width+U8(n)+zn.getTopicDynamicWidth(e,n)+i:i+zn.getTopicDynamicWidth(e,n)+i},getNodeHeight(e,n){const i=Sw(e,n.data.topic,{fontSize:Um,fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n)),r=Tw(e,n,i.width,i.height),o=y3(e,n);return Ut.hasImage(n)?zn.getTextTopSpace(e,n)+r.height+o:o+r.height+o},getTopicDynamicWidth(e,n){var u;const i=Sw(e,n.data.topic,{fontSize:zS(n),fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n)),r=Tw(e,n,i.width,i.width),o=n.manualWidth||r.width,a=Ut.hasImage(n)?(u=n.data.image)==null?void 0:u.width:0;return Math.max(o,a)},getTopicHeight(e,n){const i=Sw(e,n.data.topic,{fontSize:Um,fontFamily:xg},zn.getTopicMaxDynamicWidth(e,n));return Tw(e,n,i.width,i.height).height},getTopicMaxDynamicWidth(e,n){var r,o;const i=zS(n);return n.manualWidth?Math.max(n.manualWidth,Ut.hasImage(n)?(r=n.data.image)==null?void 0:r.width:0):Math.max(i*UW,Ut.hasImage(n)?(o=n.data.image)==null?void 0:o.width:0)},getNodeResizableMinWidth(e,n){const i=zn.getNodeTopicMinWidth(e,n);return Ut.hasImage(n)&&n.data.image.width>i?n.data.image.width:i},getNodeTopicMinWidth(e,n){return WW(e,n)},getTextLeftSpace(e,n){const i=v3(e,n);return Ut.hasEmojis(n)?zn.getEmojiLeftSpace(e,n)+GS(e,n).width+U8(n):i},getTextTopSpace(e,n){const i=y3(e,n);return Ut.hasImage(n)?zn.getImageTopSpace(e,n)+n.data.image.height+ev.vertical.imageAndText:i},getImageTopSpace(e,n){return Tv(e,n)+ev.vertical.nodeAndImage},getEmojiLeftSpace(e,n){const i=e.getPluginOptions(iC);return v3(e,n)-i.emojiPadding},getEmojiTopSpace(e,n){return y3(e,n)}},WW=(e,n)=>{const i=zS(n);return Eu.getMarksByElement(n.data.topic)[Wr.fontSize]||i},Tw=(e,n,i,r)=>{const o=zn.getNodeTopicMinWidth(e,n);return{width:i<o?o:i,height:r}};function Ci(e){const n=e.x+e.hGap;let i=e.y+e.vGap;const r=e.width-e.hGap*2,o=e.height-e.vGap*2;return{x:n,y:i,width:r,height:o}}function XW(e,n){const i=zn.getNodeWidth(e,n),r=zn.getNodeHeight(e,n);return{x:n.points[0][0],y:n.points[0][1],width:i,height:r}}function ZP(e,n,i){const r=Jm.get(i);return!!(r&&cv(n[0],n[1],Ci(r))===0)}function QP(e,n){let{x:i,y:r}=Ci(Ut.getNode(n));i=i+zn.getEmojiLeftSpace(e,n);const{width:o}=GS(e,n);return{x:i,y:r,width:o,height:zn.getNodeHeight(e,n)}}function JP(e,n){let i=Ci(n);return t9(e,i,n.origin)}function t9(e,n,i){const r=n.x+zn.getTextLeftSpace(e,i),o=n.y+zn.getTextTopSpace(e,i),a=zn.getTopicDynamicWidth(e,i);return{height:zn.getTopicHeight(e,i),width:a,x:r,y:o}}function aC(e,n){let{x:i,y:r}=Ci(Ut.getNode(n));const o=n.manualWidth||n.width;i=o>n.data.image.width?i+zn.getTextLeftSpace(e,n)+(o-n.data.image.width)/2:i+zn.getTextLeftSpace(e,n),r=zn.getImageTopSpace(e,n)+r;const{width:a,height:u}=n.data.image;return{x:i,y:r,width:a,height:u}}const e9=(e,n,i)=>{const r=aC(e,n),o=I.getOutlineRectangle(r,-9/2);return I.isPointInRectangle(o,i)},qW=(e,n,i)=>{const r=aC(e,n);return W6(r,Ba).find(u=>I.isHit(I.getRectangleByPoints([i,i]),u.rectangle))},YW=(e,n)=>{const i={...n};return delete i.rightNodeCount,i.type="mind_child",i.layout===ie.standard&&delete i.layout,i},jS=e=>{const n={...e};return delete n.start,delete n.end,n},KW=(e,n)=>{const i={...n};return te.string(i.data.topic)||(i.data.topic={children:[{text:""}]}),i==null||delete i.strokeColor,i==null||delete i.fill,i==null||delete i.shape,i==null||delete i.strokeWidth,i==null||delete i.isCollapsed,{...i,layout:i.layout??ie.right,type:"mind"}},ZW=(e,n)=>{iB(e,n),gn.getElementRef(n).getGenerator(Bu.key).setFocus(n,!0)},Aw=(e,n)=>{WG(e),gn.getElementRef(n).getGenerator(Bu.key).setFocus(n,!1)},n9=e=>{gn.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{n9(n)})},i9=e=>{gn.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(n=>{i9(n)})},$8=(e,n)=>{Lu(e,n),n?G.getBoardContainer(e).classList.add("mind-node-dragging"):G.getBoardContainer(e).classList.remove("mind-node-dragging")},QW=(e,n,i)=>{let r=wf(e);if(He.isMind(e)&&Qo(uf(e))){const u=r9(e,n);u&&(r=r.slice(0,e.rightNodeCount)),u||(r=r.slice(e.rightNodeCount,r.length),i=[...i,i[i.length-1]-e.rightNodeCount])}let o=i[i.length-1]!==0,a=i[i.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(a=!1,o=!1),{hasPreviousNode:o,hasNextNode:a}},r9=(e,n)=>{const i=n.target;return He.isMind(e)&&Qo(uf(e))&&e.children.indexOf(i)!==-1&&e.children.indexOf(i)<e.rightNodeCount||He.isMind(i)&&Qo(uf(i))&&n.detectResult==="right"},JW=(e,n,i)=>{if(!He.isMind(n.origin)&&!Te.isAbstract(n.origin)){const r=Ys.getCorrectLayoutByElement(e,n==null?void 0:n.parent.origin);if(Qo(r)){const a=n.parent.children.findIndex(u=>u===n)>=(n.parent.origin.rightNodeCount||0);return yl(i,[a?"right":"left"])}if(Zm(r))return yl(i,["right"]);if(fx(r))return yl(i,["left"]);if(r===ie.upward)return yl(i,["bottom"]);if(r===ie.downward)return yl(i,["top"])}else{const r=Ys.getCorrectLayoutByElement(e,n==null?void 0:n.origin);if(Qo(r))return yl(i,["top","bottom"]);if(r===ie.upward)return yl(i,["left","right","bottom"]);if(r===ie.downward)return yl(i,["left","right","top"]);if(Zm(r))return yl(i,["right","top","bottom"]);if(fx(r))return yl(i,["left","top","bottom"])}return null},yl=(e,n)=>{const i=e;return n.forEach(r=>{const o=i.findIndex(a=>a===r);o!==-1&&i.splice(o,1)}),i.length?i:null},tX=(e,n,i,r)=>{let o=null;return Ar(e,a=>{if(!Ut.isMindElement(e,a)||o)return;const u=Ut.getNode(a),c=eX(u,n);c&&(o=JW(e,u,c)),i=null;const h=r.every(g=>nX(g,u.origin));o&&h&&(i={target:u.origin,detectResult:o[0]})},ud(e)),i},eX=(e,n)=>{const{x:i,y:r,width:o,height:a}=Ci(e),u=r+a/2,c=i+o/2,h=e.y,g=e.y+e.height,p=e.x,m=e.x+e.width,w=[];return n[1]>r&&n[1]<r+a?(n[0]>p&&n[0]<c&&w.push("left"),n[0]>c&&n[0]<m&&w.push("right"),(n[0]>i&&n[0]<c||n[0]>c&&n[0]<i+o)&&(n[1]<u?w.push("top"):w.push("bottom")),w.length?w:null):n[0]>i&&n[0]<i+o?(n[1]>h&&n[1]<u&&w.push("top"),n[1]>u&&n[1]<g&&w.push("bottom"),(n[1]>r&&n[1]<r+a||n[1]>u&&n[1]<r+a)&&(n[0]<c?w.push("left"):w.push("right")),w.length?w:null):null},nX=(e,n)=>e!==n&&!YP(e,n),iX=(e,n)=>{let i=G.findPath(e,n==null?void 0:n.target);const r=He.isMind(n==null?void 0:n.target)?uf(n==null?void 0:n.target):Ys.getCorrectLayoutByElement(e,Ut.getParent(n==null?void 0:n.target)),o=wf(n.target);return FS(r)&&((n.detectResult==="top"||n.detectResult==="bottom")&&i.push(o.length),n.detectResult==="right"&&(i=Se.next(i))),Km(r)&&(n.detectResult==="right"&&(He.isMind(n==null?void 0:n.target)&&Qo(r)?i.push(n==null?void 0:n.target.rightNodeCount):i.push(o.length)),n.detectResult==="left"&&i.push(o.length),n.detectResult==="bottom"&&(i=Se.next(i))),Pl(r)&&(Kc(r)&&n.detectResult==="top"&&(i=Se.next(i)),eW(r)&&n.detectResult==="bottom"&&(i=Se.next(i)),Zm(r)&&n.detectResult==="left"&&i.push(o.length),fx(r)&&n.detectResult==="right"&&i.push(o.length)),i};function rX(e,n){const i=Ci(n);return MT(e,i,n.origin)}function MT(e,n,i){const r=WP(e,i),o=DT(e,i),a=Tv(e,i),u=oC(e,i),c=pf(u,a),h=I.inflate(n,-a);return jg(G.getRoughSVG(e),h.x,h.y,h.x+h.width,h.y+h.height,{stroke:o,strokeWidth:a,fill:r,fillStyle:"solid",strokeLineDash:c},!1,rC.shape.rectangleRadius)}var Xn;(function(e){e.left="left",e.center="center",e.right="right"})(Xn||(Xn={}));var _n;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(_n||(_n={}));const Vo=(e,n)=>{let i=e.x,r=e.y;return n[0]===Xn.center&&(i=e.x+e.width/2),n[0]===Xn.right&&(i=e.x+e.width),n[1]===_n.middle&&(r=e.y+e.height/2),n[1]===_n.bottom&&(r=e.y+e.height),[i,r]},Zc=(e,n)=>n?e.left?an.left:an.right:e.up?an.top:an.bottom,Cs=(e,n)=>{if(n===an.left&&(e[0]===Xn.right?e[0]=Xn.left:e[0]===Xn.left&&(e[0]=Xn.right)),n===an.bottom||n===an.top){let i=Xn.center,r=_n.middle;e[1]===_n.top&&(i=Xn.left),e[1]===_n.bottom&&(i=Xn.right),e[0]===Xn.left&&(r=_n.top),e[0]===Xn.right&&(r=_n.bottom),e[0]=i,e[1]=r}n===an.top&&(e[1]===_n.bottom?e[1]=_n.top:e[1]===_n.top&&(e[1]=_n.bottom))};function oX(e,n,i,r=!0,o=null,a,u){const c=TT(e,n.origin),h=a||UP(e,i.origin),g=o||ST(e,i.origin),p=oC(e,i.origin),m=tv(e,i.origin)===Ru.underline;let w,x,T,D,b=n,B=i;const A=Ci(b),H=Ci(B);w=b.x+b.width/2,x=z8(n,i)?A.y:A.y+A.height,T=n.left?B.x+B.hGap+H.width:B.x+B.hGap,D=m?B.y+B.height-B.vGap:B.y+B.height/2;let R=z8(n,i)?n.left?[-1,-1]:[1,-1]:n.left?[-1,1]:[1,1],k=[[w,x],[w,x],[w,x],[w,D-B.hGap*3*R[1]/5],[w,D-B.hGap*R[1]/5],[w+B.hGap*R[0]/4,D],[w+B.hGap*R[0]*3/5,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D]];const W=pf(p,h);if(c===sd.polyline){const nt=[[w,x],[w,D],[T,D],m&&r?[T+(B.width-B.hGap*2)*R[0],D]:[T,D]];return qs(nt,{stroke:g,strokeWidth:h,strokeLineDash:W})}const U=Zo(k,.001);return WO(U,{stroke:g,strokeWidth:h})}function sX(e,n,i,r,o=null,a,u){const c=TT(e,n.origin),h=o||ST(e,i.origin),g=a||UP(e,i.origin),p=oC(e,i.origin),m=c===sd.polyline?!0:!He.isMind(n.origin),w=tv(e,n.origin),T=tv(e,i.origin)===Ru.underline,D=w===Ru.underline,b=Ci(i),B=Ci(n),A=Zc(i,r),H=[Xn.right,_n.middle],R=[Xn.left,_n.middle];Cs(H,A),Cs(R,A),r&&D&&!He.isMind(n.origin)&&(H[1]=_n.bottom),r&&T&&(R[1]=_n.bottom);let k=Vo(B,H),W=Vo(b,R);const nt=m?oi(k,8,A):k;let st=m?[k,nt,nt]:[];const ft=(n.hGap+i.hGap)/3,Et=-(n.hGap+i.hGap)/2.4;let ct=[nt,oi(nt,ft,A),oi(W,Et,A),W];const mt=oi(W,b.width,A),wt=T&&r?[mt,mt,mt]:[],V=Zo([...st,...ct,...wt]),P=pf(p,g);let _;if(c===sd.polyline){const $=oi(nt,8,A),Q=[...st,$,r?[$[0],W[1]]:[W[0],$[1]],W,...wt];_=qs(Q,{stroke:h,strokeWidth:g,strokeLineDash:P})}else _=G.getRoughSVG(e).curve(V,{stroke:h,strokeWidth:g,strokeLineDash:P});return p===Co.dotted&&Ze(_,"round"),_}function o9(e,n,i,r,o,a,u,c){return Ut.isIndentedLayout(e,n.origin)?oX(e,n,i,o,a,u):sX(e,n,i,r,a,u)}const aX="foreign-object-emoji";class lX{constructor(n){this.board=n,this.emojiComponentRef=null}draw(n,i,r){this.destroy();const o={board:this.board,emojiItem:i,element:r,fontSize:FP(r)};this.emojiComponentRef=this.board.renderEmoji(n,o)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const QT=class QT{constructor(n){this.board=n,this.emojiGenerators=[]}drawEmojis(n){if(this.destroy(),Ut.hasEmojis(n)){this.g=ze(),this.g.classList.add("emojis");const i=QP(this.board,n),r=p5(i.x,i.y,i.width,i.height);r.classList.add(aX),this.g.append(r);const o=document.createElement("div");return o.classList.add("node-emojis-container"),r.append(o),this.emojiGenerators=n.data.emojis.map(a=>{const u=new lX(this.board);return u.draw(o,a,n),u}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(n=>n.destroy()),this.emojiGenerators=[]}};QT.key="node-emojis-generator";let nv=QT;const uX=(e,n,i,r)=>{const o=gn.getElementRef(n),a=Ut.getNode(n),u=ze();u.classList.add("dragging","fake-node","plait-board-attached");const c={...a,x:a.x+i,y:a.y+r},h=JP(e,a),g=rX(e,c),p=pv(n).g.cloneNode(!0);if(pm(p,h.width,h.height,h.x+i,h.y+r),u==null||u.append(g),u==null||u.append(p),Ut.hasEmojis(n)){const w=o.getGenerator(nv.key).g.cloneNode(!0),x=QP(e,n);pm(w,x.width,x.height,x.x+i,x.y+r),u==null||u.append(w)}if(Ut.hasImage(n)){const w=o.getGenerator(Bu.key).g.cloneNode(!0),x=aC(e,n);pm(w,x.width,x.height,x.x+i,x.y+r),u==null||u.append(w)}return u},cX=(e,n,i)=>{const r=n.target,o=ze(),a=Je.get(e,Se.parent(i)),u=Ys.getCorrectLayoutByElement(e,a),c=Xr(u),{hasNextNode:h,hasPreviousNode:g}=QW(a,n,i),p=30,m=12;let w,x,T,D;if(!g&&!h){const nt=Ut.getNode(a),st=Ci(nt);D=Zc(nt,c),T=nt,He.isMind(r)&&Qo(u)&&(n.detectResult==="left"?(D=an.left,T.left=!0):(D=an.right,T.left=!1));const ft=[Xn.right,_n.middle];Cs(ft,D);const Et=Vo(st,ft);if(Pl(u)){const ct=[Xn.center,Kc(u)?_n.top:_n.bottom],mt=Vo(st,ct);x=oi(mt,m,D),x[1]=Kc(u)?x[1]-m:x[1]+m}else x=oi(Et,p,D)}else if(!g&&h){const nt=Je.get(e,i);T=Ut.getNode(nt);const st=Ci(T);D=Zc(T,c);const ft=[Xn.left,_n.top];Cs(ft,D);let Et=-12;Ut.isIndentedLayout(e,a)&&(Et=Kc(u)?Et/2+T.height-T.vGap:0),x=Vo(st,ft),x=qc(x,Et,D)}else if(g&&!h){const nt=Je.get(e,Se.previous(i));T=Ut.getNode(nt);const st=Ci(T);D=Zc(T,c);const ft=[Xn.left,_n.bottom];Cs(ft,D);let Et=m;Ut.isIndentedLayout(e,a)&&(Et=Kc(u)?-Et-(T.height-T.vGap):Et),x=Vo(st,ft),x=qc(x,Et,D)}else{const nt=Je.get(e,Se.previous(i));T=Ut.getNode(nt);const st=Ci(T),ft=Je.get(e,i),Et=Ut.getNode(ft),ct=Ci(Et),mt=[Xn.left,_n.bottom],wt=[Xn.left,_n.top];D=Zc(T,c),Cs(mt,D),Cs(wt,D);const V=Vo(st,mt),P=Vo(ct,wt);x=[(V[0]+P[0])/2,(V[1]+P[1])/2]}let b=x,B=x;const A=c?m:p,H=c?p:m;b=qc(b,-A/2,D),B=qc(B,A/2,D),B=oi(B,H,D);const R=Math.min(b[0],B[0]),k=Math.min(b[1],B[1]);w={...T,x:R,y:k,width:p,height:m,hGap:Ut.isIndentedLayout(e,a)?cr*4+(T.origin.strokeWidth||NS):0,vGap:Ut.isIndentedLayout(e,a)?cr:0};const W=jg(G.getRoughSVG(e),w.x,w.y,w.x+p,w.y+m,{stroke:Eg,strokeWidth:2,fill:Eg,fillStyle:"solid"}),U=o9(e,Ut.getNode(a),w,c,!1,Eg,NS);return o==null||o.appendChild(U),o==null||o.appendChild(W),o};var Sr;(function(e){e.start="start",e.end="end"})(Sr||(Sr={}));var Am;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(Am||(Am={}));function V8(e,n,i,r,o){const a=ze(),u=Ut.getParent(i),c=Ys.getCorrectLayoutByElement(e,i),h=Xr(c),g=u.children.slice(i.start,i.end+1),p=pn(e,g,!0),m=qr(e,p);let w=I.getOutlineRectangle(m,-3.5);o&&(w=hm(w,o,r,h));const x=hX(n,w.x,w.y,w.x+w.width,w.y+w.height,h,{stroke:Eg,strokeWidth:1,fillStyle:"solid"}),T=[Xn.center,_n.top],D=[Xn.center,_n.bottom],b=Zc(Ut.getNode(i),h);Cs(T,b),Cs(D,b);let B=Vo(w,T),A=Vo(w,D);const H=oi(B,-10/2,b),R=oi(B,j8/2,b),k=oi(A,-10/2,b),W=oi(A,j8/2,b),U=n.line(H[0],H[1],R[0],R[1],W8(r===Sr.start)),nt=n.line(k[0],k[1],W[0],W[1],W8(r===Sr.end));return fX(e,r,h),Ze(U,"round"),Ze(nt,"round"),a.append(U),a.append(nt),a.append(x),a}function W8(e){return e?{stroke:Eg,strokeWidth:4,fillStyle:"solid"}:{stroke:VW,strokeWidth:3,fillStyle:"solid"}}function fX(e,n,i){n?i?G.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):G.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(G.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),G.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function hX(e,n,i,r,o,a,u){const c=Math.abs(n-r),h=Math.abs(i-o),g=5,w=10+4*2;if(a){const x=(c-w-g*2)/2,T=h-g*2;return e.path(`M${n+g},${i}
            l${x},0
            m${w},0
            l${x},0
            a${g},${g},0,0,1,${g},${g}
            l0,${T}
            a${g},${g},0,0,1,-${g},${g}
            l-${x},0
            m-${w},0
            l-${x},0
            a${g},${g},0,0,1,-${g},-${g}
            l0,-${T}
            a${g},${g},0,0,1,${g},-${g}`,u)}else{const x=(h-w-g*2)/2,T=c-g*2;return e.path(`M${n+g},${i}
            l${T},0
            a${g},${g},0,0,1,${g},${g}
            l0,${x}
            m0,${w}
            l0,${x}
            a${g},${g},0,0,1,-${g},${g}
            l-${T},0
            a${g},${g},0,0,1,-${g},-${g}
            l0,-${x}
            m0,-${w}
            l0,-${x}
            a${g},${g},0,0,1,${g},-${g}`,u)}}const JT=class JT extends Bs{canDraw(n,i){return!!i.selected}draw(n,i){const r=ze(),o=Ut.getNode(n),a=Ci(o),u=qr(this.board,a),c=Tv(this.board,n),h=_i,g=I.inflate(u,h),p=jg(G.getRoughSVG(this.board),g.x,g.y,g.x+g.width,g.y+g.height,{stroke:Eg,strokeWidth:h,fill:""},!0,rC.shape.rectangleRadius+(h+c)/2);return Te.isAbstract(n)&&(this.abstractOutlineG=V8(this.board,G.getRoughSVG(this.board),n),r.append(this.abstractOutlineG),p.classList.add("abstract-element")),r.appendChild(p),r.classList.add(uv),r}updateAbstractOutline(n,i,r){const o=V8(this.board,G.getRoughSVG(this.board),n,i,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(o),this.abstractOutlineG=o)}};JT.key="mind-node-active";let cf=JT;const hm=(e,n,i,r)=>r?i===Sr.start?{...e,y:n,height:e.height+e.y-n}:{...e,height:n-e.y}:i===Sr.start?{...e,x:n,width:e.width+e.x-n}:{...e,width:n-e.x},dX=(e,n,i,r,o,a)=>{const u=Ut.getNode(r),{start:c,end:h}=tf(u.origin,o),g=i[c],p=i[h];if(n===Sr.start){const m=i.filter(D=>Te.isAbstract(D)&&D.end<r.start);let w;if(m.length){const D=m.map(b=>{const{end:B}=tf(b,o);return B}).sort((b,B)=>B-b)[0];w=i[D+1]}else w=i[0];const x=pn(e,[w],!0),T=pn(e,[p],!1);return a?{max:T.y-Gc,min:x.y-Gc}:{max:T.x-Gc,min:x.x-Gc}}else{const m=i.filter(D=>Te.isAbstract(D)&&D.start>r.end);let w;if(m.length){const D=m.map(b=>{const{start:B}=tf(b,o);return B}).sort((b,B)=>b-B)[0];w=i[D-1]}else{const D=i.filter(b=>!Te.isAbstract(b));w=i[D.length-1]}const x=pn(e,[w],!0),T=pn(e,[g],!1);return a?{max:x.y+x.height+Gc,min:T.y+T.height+Gc}:{max:x.x+x.width+Gc,min:T.x+T.width+Gc}}},s9=(e,n,i)=>{const r=Ys.getCorrectLayoutByElement(e,n),o=Xr(r),u=Ut.getParent(n).children.slice(n.start,n.end+1);let c=pn(e,u,!0);c=I.getOutlineRectangle(c,-3.5);const h=X8(c,o,Sr.start),g=X8(c,o,Sr.end),p=I.getRectangleByPoints([i,i]);if(I.isHit(p,h))return Sr.start;if(I.isHit(p,g))return Sr.end},X8=(e,n,i)=>{let r;if(i===Sr.start){const o=n?e.y:e.x;r=hm(e,o+rw/2,Sr.end,n),r=hm(r,o-rw/2,i,n)}else{const o=n?e.y+e.height:e.x+e.width;r=hm(e,o-rw/2,Sr.start,n),r=hm(r,o+rw/2,i,n)}return r};function gX(e,n,i,r){const o=n.filter(p=>!Te.isAbstract(p)),a=o.map(p=>pn(e,[p],!1)),u=pn(e,[o[0]],!0),c={x:u.x-u.width,y:u.y-u.height,width:u.width,height:u.height},h=pn(e,[o[o.length-1]],!0),g={x:h.x+h.width,y:h.y+h.height,width:h.width,height:h.height};a.push(g),a.unshift(c);for(let p=0;p<a.length-1;p++){const m=r?a[p].y:a[p].x,w=r?a[p].height:a[p].width;if(i>=m+w/2&&i<=a[p+1][r?"y":"x"]+a[p+1][r?"height":"width"]/2)return p-1}return 0}function pX(e,n,i){let r;const o=ne(e).filter(a=>Te.isAbstract(a)).find(a=>(r=s9(e,a,i),r));return n===o||(n&&(gn.getElementRef(n).getGenerator(cf.key).updateAbstractOutline(n),n=void 0),o&&(n=o,gn.getElementRef(n).getGenerator(cf.key).updateAbstractOutline(n,r))),n}const a9=e=>{const n=Ut.findParent(e);if(n){const i=n.children.findIndex(r=>r.id===e.id);if(He.isMind(n)&&uf(n)===ie.standard&&n.rightNodeCount&&i<=n.rightNodeCount-1)return!0}return!1},RT=(e,n,i,r=[])=>{let o=r.findIndex(u=>Se.equals(u.path,n));const a=Je.get(e,n);return o===-1?r.push({path:n,rightNodeCount:a.rightNodeCount+i}):r[o].rightNodeCount+=i,r},l9=(e,n,i=[])=>(n.forEach(r=>{if(a9(r)){const o=Ut.getParent(r),a=G.findPath(e,o);let u=i.findIndex(c=>Se.equals(c.path,a));u===-1?i.push({path:a,rightNodeCount:o.rightNodeCount-1}):i[u].rightNodeCount-=1}}),i);function OT(e,n){const i=wf(n);return G.findPath(e,n).concat(i.length)}function mX(e,n,i){return G.findPath(e,n).concat(i?i-1:0)}function vX(e,n){const i=G.findPath(e,n);return ut.next(i)}const LT=(e,n)=>{const i=Ut.getAncestors(e,n);i.unshift(n);const r=i[i.length-1];let o=uf(r);if(He.isMind(n))return o;const a=Ut.getNode(n);let u=o;o===ie.standard&&(u=a.left?ie.left:ie.right);let c=null;const h=i.find(g=>g.layout||Te.isAbstract(g));if(h)if(Te.isAbstract(h)){const g=Ut.getParent(h),p=LT(e,g);c=TP(p)}else c=h==null?void 0:h.layout;if(c===ie.standard||!c)return u;{const g=LW(u,c);return g?_W(c,g):c}},u9=(e,n)=>{const i=[];n.layout&&i.unshift(LT(e,n));let r=Ut.findParent(n);for(;r;)r.layout&&i.unshift(r.layout),r=Ut.findParent(r);return i},yX=(e,n)=>{const i=Ut.findParent(n);if(i){const r=u9(e,i);if(r[0]===ie.standard){const g=Ut.getNode(n);r[0]=g.left?ie.left:ie.right}const o=H8(r);let a=N8(o);const u=[r[r.length-1]],c=H8(u),h=N8(c);return a=a.filter(g=>h.some(p=>p===g)),a}},Ys={getAvailableSubLayoutsByElement:yX,getBranchLayouts:u9,getCorrectLayoutByElement:LT},wX="mindmap",He={isMind:e=>e.type==="mind"||e.type===wX},Ut={isIndentedLayout(e,n){const i=Ys.getCorrectLayoutByElement(e,n);return Pl(i)},isMindElement(e,n){return!!(n.data&&n.data.topic||n.type==="mind_child")},getParent(e){if(He.isMind(e))throw new Error("mind root node can not get parent");return Wh.get(e)},findParent(e){return He.isMind(e)?void 0:Wh.get(e)},getRoot(e,n){const i=G.findPath(e,n);return Je.get(e,i.slice(0,1))},getAncestors(e,n){const i=G.findPath(e,n),r=[];for(const o of Se.ancestors(i,{reverse:!0})){const a=Je.get(e,o);a&&!G.isBoard(a)&&r.push(a)}return r},getNode(e){const n=Jm.get(e);if(!n)throw new Error(`can not get node from ${JSON.stringify(e)}`);return n},findParentNode(e){if(He.isMind(e))return;const n=Ut.getParent(e);return Ut.getNode(n)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var Ru;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(Ru||(Ru={}));var sd;(function(e){e.bight="bight",e.polyline="polyline"})(sd||(sd={}));function xX(e,n,i){const o=RW(e,n.origin),a=$P(e,n.origin),u=oC(e,n.origin),c=n.parent,h=TT(e,n.origin),g=Ci(n);let p=c.children.slice(n.origin.start,n.origin.end+1).map(st=>st.origin);const m=pn(e,p,!0),w=Zc(n,i),x=[Xn.right,_n.top],T=[Xn.right,_n.bottom],D=[Xn.left,_n.middle];Cs(x,w),Cs(T,w),Cs(D,w);let b=Vo(m,x),B=Vo(m,T),A=Vo(g,D),H=uB(A,b,i)-15*2;b=oi(b,15,w);let R=oi(b,H,w);B=oi(B,15,w);let k=oi(B,H,w),W=oi(A,-15,w);const U=pf(u,o);if(h===sd.polyline){const st=ze(),ft=qs([b,R,W,k,B],{stroke:a,strokeWidth:o}),Et=qs([A,W],{stroke:a,strokeWidth:o,strokeLineDash:U});return st.appendChild(ft),st.appendChild(Et),st}return G.getRoughSVG(e).path(`M${b[0]},${b[1]} Q${R[0]},${R[1]} ${W[0]},${W[1]} Q${k[0]},${k[1]} ${B[0]},${B[1]} M${A[0]},${A[1]} L${W[0]},${W[1]}`,{stroke:a,strokeWidth:o,strokeLineDash:U})}const c9=(e,n)=>{n.forEach((i,r)=>{const o=r.start+i.start,a=r.end+i.end,u=G.findPath(e,r);o>a?Qt.removeNode(e,u):Qt.setNode(e,{start:o,end:a},u)})},f9=(e,n)=>{const i=n.rightNodeCount,r=n.children.find(o=>Te.isAbstract(o)&&o.end>=i&&o.start<i);if(r){const o=G.findPath(e,r);Qt.setNode(e,{end:i-1},o)}},CX=(e,n)=>{let i=Tm(n);const{parentElements:r,abstractIncludedGroups:o}=$W(i);o.forEach((a,u)=>{const c=r[u];EX(e,c,a)})},EX=(e,n,i)=>{const r=i.map(c=>n.children.indexOf(c)).sort((c,h)=>c-h),o=n==null?void 0:n.rightNodeCount,a=r[0],u=r[r.length-1];if(Qo(Ys.getCorrectLayoutByElement(e,n))&&o&&a<o&&u>=o){const c=n.children.length,h=[...G.findPath(e,n),c],g=r.filter(m=>m>=o),p=r.filter(m=>m<o);w3(e,h,p[0],p[p.length-1]),w3(e,Se.next(h),g[0],g[g.length-1])}else{const c=[...G.findPath(e,n),n.children.length];w3(e,c,a,u)}},w3=(e,n,i,r)=>{const o=NW(e),a=sC(o,{strokeWidth:kg.branch.width,branchWidth:kg.branch.width});a.start=i,a.end=r,Qt.insertNode(e,a,n),zg(e),cd(e,a)},SX=(e,n,i)=>{const r={data:{...n.data}};i&&(r.data.topic=i);const o=G.findPath(e,n);Qt.setNode(e,r,o)},TX=(e,n,i)=>{const r=G.findPath(e,n),{width:o}=Tw(e,n,i,0),a={manualWidth:o,data:{...n.data,topic:{...n.data.topic}}};Qt.setNode(e,a,r)},h9=(e,n,i)=>{const r=e.pathRef(i);n.forEach(o=>{r.current&&Qt.insertNode(e,o,r.current)}),r.unref()},AX=(e,n,i,r)=>{var c;const o=Je.get(e,ut.parent(r)),a=[...ut.parent(r),(c=o.children)==null?void 0:c.length],u=n.map(h=>{const{start:g,end:p}=NP(h,i);return{...h.abstract,start:g+r[r.length-1],end:p+r[r.length-1]}});h9(e,u,a)},_T=(e,n)=>{n.forEach(i=>{Qt.setNode(e,{rightNodeCount:i.rightNodeCount},i.path)})},DX=(e,n)=>{if(Ut.isMindElement(e,n)){Nx(e,n);const i=G.findPath(e,n);if(n.isCollapsed){const r={isCollapsed:!1};js.withoutSaving(e,()=>{Qt.setNode(e,r,i)})}gx(e,n,OT(e,n))}},bX=(e,n)=>{if(Ut.isMindElement(e,n)&&!He.isMind(n)&&!Te.isAbstract(n)){const i=G.findPath(e,n);if(a9(n)){const o=RT(e,i.slice(0,1),1);_T(e,o)}const r=GP(e,ut.next(i));c9(e,r),gx(e,n,vX(e,n))}},BX=(e,n)=>{Qt.insertNode(e,n,[e.children.length]),Qt.addSelectionWithTemporaryElements(e,[n])},PX=(e,n,i)=>{const o=[...n.data.emojis||[]];o.push(i);const a={data:{...n.data,emojis:o}},u=G.findPath(e,n);Qt.setNode(e,a,u)},MX=(e,n,i)=>{const r=n.data.emojis.filter(u=>u!==i),o={data:{topic:n.data.topic}};Ut.hasImage(n)&&(o.data.image=n.data.image),r.length>0&&(o.data.emojis=r);const a=G.findPath(e,n);Qt.setNode(e,o,a)},RX=(e,n,i,r)=>{const o={data:{...n.data}},a=n.data.emojis.map(c=>c===i?r:c);o.data.emojis=a;const u=G.findPath(e,n);Qt.setNode(e,o,u)},OX=(e,n)=>{Aw(e,n);const i={data:{...n.data,topic:{...n.data.topic}}};delete i.data.image;const r=G.findPath(e,n);Qt.setNode(e,i,r)},LX=(e,n,i)=>{const r={data:{...n.data,image:i,topic:{...n.data.topic}}},o=G.findPath(e,n);Qt.setNode(e,r,o)},d9=(e,n,i)=>{var o;const r=Je.get(e,i);r&&n&&((o=r.children)==null||o.forEach((a,u)=>{var c;a.layout&&((Km(n)&&FS(a.layout)||FS(n)&&Km(a.layout))&&Qt.setNode(e,{layout:null},[...i,u]),(c=a.children)!=null&&c.length&&d9(e,n,[...i,u]))}))},_X=(e,n)=>{const i=(r,o)=>{if(Ut.isMindElement(e,r)){d9(e,n,o);const a=Je.get(e,o);if(He.isMind(a)&&Qo(n)){let u={rightNodeCount:a.children.length/2};Qt.setNode(e,u,o),f9(e,a)}Qt.setNode(e,{layout:n},o)}};ka.setProperty(e,{},{callback:i})},FX=(e,n)=>{ka.setProperty(e,{shape:n})},kX=(e,n)=>{ka.setProperty(e,{branchShape:n})},IX=(e,n)=>{ka.setProperty(e,{branchWidth:n})},HX=(e,n)=>{ka.setProperty(e,{branchColor:n})},ir={setLayout:_X,setShape:FX,setBranchShape:kX,setBranchWidth:IX,setBranchColor:HX,setTopic:SX,setNodeManualWidth:TX,addEmoji:PX,removeEmoji:MX,replaceEmoji:RX,insertAbstract:CX,setAbstractsByRefs:c9,setAbstractByStandardLayout:f9,insertNodes:h9,insertAbstractNodes:AX,setRightNodeCountByRefs:_T,removeImage:OX,setImage:LX,insertChildNode:DX,insertSiblingNode:bX,insertMind:BX};class NX extends Bs{constructor(n){super(n,{prepend:!0})}canDraw(n,i){return tv(this.board,n)===Ru.roundRectangle}draw(n,i){const r=Ci(i.node);return MT(this.board,r,i.node.origin)}}const tA=class tA extends Bs{canDraw(n,i){const r=ne(this.board);return!!((i!=null&&i.isHit||i!=null&&i.isHitAwarenessRectangle||i!=null&&i.isHitStandardLeftAwarenessRectangle)&&US(this.board)||i!=null&&i.isSelected&&r.length===1&&US(this.board)||n.isCollapsed)}draw(n,i){const r=ze(),o=ST(this.board,n),{startPoint:a,endPoint:u,hasCollapsedIcon:c,hasExpandedIcon:h,hasAddIcon:g,collapsedIconCenter:p,expandedIconCenter:m,addCenter:w,hasLeftAddIcon:x,standardRef:T}=g9(this.board,n);return this.toggleCollapseAndAdd(p,w,T==null?void 0:T.addCenter,o,r,c,g,x,!!(i!=null&&i.isHitAddArea),!!(i!=null&&i.isHitStandardLeftAddArea),!!(i!=null&&i.isShowCollapseAnimation),!!(i!=null&&i.isShowAddAnimation)),this.toggleExpandBadge(n,[a,u],m,o,r,!!h,!!(i!=null&&i.isHitExpandArea)),r}toggleCollapseAndAdd(n,i,r,o,a,u,c,h,g,p,m,w){var T;if((T=this.collapseOrAddG)==null||T.remove(),!u&&!c&&!h)return;if(this.collapseOrAddG=ze(),u){const D=ze();this.collapseOrAddG.appendChild(D),D.classList.add("collapse-button"),m&&D.classList.add("animated");const b=G.getRoughSVG(this.board).circle(n[0],n[1],Gi,{fill:"#fff",stroke:o,strokeWidth:Fh,fillStyle:"solid"}),B=oi(n,-10/2),A=oi(n,am/2),H=G.getRoughSVG(this.board).line(B[0],B[1],A[0],A[1],{fill:"#fff",stroke:o,strokeWidth:Fh,fillStyle:"solid"});D.appendChild(b),D.appendChild(H),Ze(H,"round")}const x=(D,b,B)=>{const A=ze();D.appendChild(A),A.classList.add("add-button"),w&&A.classList.add("animated");const H=G.getRoughSVG(this.board).circle(b[0],b[1],Gi+Fh,{fill:B?BW:bW,stroke:xS,fillStyle:"solid"}),R=[b[0]-am/2,b[1]],k=[b[0]+am/2,b[1]],W=[b[0],b[1]-am/2],U=[b[0],b[1]+am/2],nt=G.getRoughSVG(this.board).line(R[0],R[1],k[0],k[1],{stroke:I8,strokeWidth:Fh});Ze(nt,"round");const st=G.getRoughSVG(this.board).line(W[0],W[1],U[0],U[1],{stroke:I8,strokeWidth:Fh});Ze(st,"round"),A.appendChild(H),A.appendChild(nt),A.appendChild(st)};c&&i&&x(this.collapseOrAddG,i,g),h&&r&&x(this.collapseOrAddG,r,p),a.appendChild(this.collapseOrAddG)}toggleExpandBadge(n,i,r,o,a,u,c){var A;if((A=this.expandG)==null||A.remove(),!u)return;this.expandG=ze(),this.expandG.classList.add("expanded-button");const h=i[1],g=G.getRoughSVG(this.board).line(i[0][0],i[0][1],h[0],h[1],{fill:o,stroke:o,fillStyle:"solid",strokeWidth:Fh}),p=c?Rm(o,.4):Rm(o,.2),m=G.getRoughSVG(this.board).circle(r[0],r[1],Gi+Fh,{fill:p,stroke:xS,fillStyle:"solid"}),w=qP(n);let x=`${w}`,T=r[1]+4.5;w>=99&&(x="...",T=r[1]+1);const{width:D,height:b}=Yx(this.board,gd(x),{fontSize:Number(nx.fontSize12),fontFamily:xg}),B=SO(r[0]-D/2,T,o,`${x}`);B.setAttribute("style",`font-size: ${Number(nx.fontSize12)}px;`),this.expandG.appendChild(g),this.expandG.appendChild(m),this.expandG.appendChild(B),a.appendChild(this.expandG)}};tA.key="mind-node-more";let iv=tA;const g9=(e,n)=>{var b,B;const i=He.isMind(n),r=i&&n.layout===ie.standard,o=GX(e,n),a=q8(e,n,o),u=oi(a,iw,o),c=((b=n.children)==null?void 0:b.length)>0&&!i&&!n.isCollapsed,h=((B=n.children)==null?void 0:B.length)>0&&!i&&n.isCollapsed,g=!h,p=oi(u,Gi/2,o),m=c?p:null,w=h?p:null;let x=null;g&&(x=c?oi(p,iw+Gi,o):p);let T=null;if(g){const A=oi(x,Gi/2,o);T=I.getRectangleByPoints([qc(a,-20/2,o),qc(A,Gi/2,o)])}else if(h){const A=oi(w,Gi/2,o);T=I.getRectangleByPoints([qc(a,-20/2,o),qc(A,Gi/2,o)])}let D=null;if(r){const A=q8(e,n,o,!0),H=[A[0]-iw-Gi/2,A[1]],R=I.getRectangleByPoints([[A[0]-Gi-iw,A[1]-Gi/2],[A[0],A[1]+Gi/2]]);D={addCenter:H,awarenessRectangle:R}}return{startPoint:a,endPoint:u,hasCollapsedIcon:c,hasExpandedIcon:h,hasAddIcon:g,collapsedIconCenter:m,expandedIconCenter:w,addCenter:x,awarenessRectangle:T,hasLeftAddIcon:r,standardRef:D}},GX=(e,n)=>{const i=Ut.getNode(n),r=Ys.getCorrectLayoutByElement(e,n),o=Xr(r);let a=Zc(i,o);return Pl(r)&&(a=Kc(r)?an.top:an.bottom),a},q8=(e,n,i,r=!1)=>{const o=Ut.getNode(n),a=tv(e,n)===Ru.underline,u=Ci(o);let c=[Xn.right,_n.middle];return r&&(c[0]=Xn.left),Cs(c,i),(i===an.left||i===an.right)&&a&&!He.isMind(n)&&(c[1]=_n.bottom),Vo(u,c)},US=e=>!vu(e)&&!Dr(e)&&!of(e)&&!sf(e);class p9 extends mf{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(n,i)=>i.origin.id}initializeGenerator(){this.nodeShapeGenerator=new NX(this.board),this.nodeEmojisGenerator=new nv(this.board),this.activeGenerator=new cf(this.board),this.nodeMoreGenerator=new iv(this.board),this.imageGenerator=new Bu(this.board,{getRectangle:r=>aC(this.board,r),getImageItem:r=>r.data.image});const n=(this.board.getPluginOptions(wS)||{}).textPlugins,i=new vv(this.board,{getRectangle:()=>JP(this.board,this.node),onChange:r=>{ir.setTopic(this.board,this.element,r.newText)},getMaxWidth:()=>zn.getTopicMaxDynamicWidth(this.board,this.element),textPlugins:n||[]});this.getRef().addGenerator(cf.key,this.activeGenerator),this.getRef().addGenerator(nv.key,this.nodeEmojisGenerator),this.getRef().addGenerator(Bu.key,this.imageGenerator),this.getRef().addGenerator(iv.key,this.nodeMoreGenerator),this.getRef().initializeTextManage(i),this.getRef().updateActiveSection=()=>{this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}}initialize(){super.initialize(),this.initializeGenerator(),this.node=Ut.getNode(this.element),this.index=mg.get(this.element)||0,this.roughSVG=G.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG()),this.drawEmojis(),this.imageGenerator.processDrawing(this.element,this.getElementG()),He.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(n,i){const r=Ut.getNode(n.element),o=I.isEqual(this.node,r);if(this.node=r,!o||n.element!==i.element||n.hasThemeChanged)this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),!Ut.hasImage(i.element)&&Ut.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),Ut.hasImage(i.element)&&Ut.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),i.element,n.element),Ut.hasImage(i.element)&&!Ut.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const a=n.selected===i.selected,u=n.parent===i.parent;(!a||n.selected)&&(this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected}),this.nodeMoreGenerator.processDrawing(this.element,this.getElementG(),{isSelected:this.selected})),u||this.drawLink()}}drawEmojis(){const n=this.nodeEmojisGenerator.drawEmojis(this.element);n&&this.getElementG().append(n)}drawLink(){if(He.isMind(this.element))return;const n=Ut.getParent(this.element),i=Ut.getNode(n);this.linkLineG&&this.linkLineG.remove();const r=Ys.getCorrectLayoutByElement(this.board,n);Te.isAbstract(this.node.origin)?this.linkLineG=xX(this.board,this.node,Xr(r)):this.linkLineG=o9(this.board,i,this.node,Xr(r)),this.getElementG().append(this.linkLineG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),Jm.get(this.element)===this.node&&Jm.delete(this.element),this.getRef().destroyTextManage()}}class zX extends p9{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(n){n.element!==this.element&&this.initialized&&this.updateMindLayout(n.element)}updateMindLayout(n=this.element){const i=n.layout||XP();this.root=gW.layout(n,FW(this.board),i),this.updateMindNodeLocation(n)}updateMindNodeLocation(n){const{x:i,y:r,hGap:o,vGap:a}=this.root,u=i+o,c=r+a;Ar(this.root,h=>{h.x=h.x-u+n.points[0][0],h.y=h.y-c+n.points[0][1],Jm.set(h.origin,h)})}}const jX=5,UX=e=>{const{pointerDown:n,pointerMove:i,globalPointerUp:r}=e;let o=[],a=[],u,c,h,g=null,p;return e.pointerDown=m=>{if(G.isReadonly(e)||G.hasBeenTextEditing(e)||!G.isPointer(e,nn.selection)||!Al(m)){n(m);return}const w=Pe(e,ke(e,m.x,m.y)),x=ne(e),T=Ll(e,w);if(T&&Ut.isMindElement(e,T)&&!He.isMind(T)&&!Te.isAbstract(T)){const D=x.filter(B=>Ut.isMindElement(e,B)&&!He.isMind(B)&&!Te.isAbstract(B));x.length>0&&x.includes(T)?(o=D,u=w):(o=[T],u=w)}o.length&&(a=IP(e,o)),n(m)},e.pointerMove=m=>{if(!e.options.readonly&&o.length&&u){const w=Pe(e,ke(e,m.x,m.y));if(be(u[0],u[1],w[0],w[1])<jX)return;$8(e,!0),h==null||h.remove();const T=Pe(e,ke(e,m.x,m.y));g=tX(e,T,g,[...o,...a]),g!=null&&g.target&&(p=iX(e,g),h=cX(e,g,p),G.getHost(e).appendChild(h));const D=w[0]-u[0],b=w[1]-u[1];c==null||c.remove(),c=ze(),[...o,...a].forEach(B=>{n9(B)}),o.forEach(B=>{const A=uX(e,B,D,b);c==null||c.appendChild(A)}),G.getHost(e).appendChild(c);return}i(m)},e.globalPointerUp=m=>{const w=Tm(o);if(!e.options.readonly&&w.length){if(w.push(...a),of(e)&&w.forEach(x=>{i9(x)}),g){const x=e.pathRef(p),T=Se.hasPrevious(p)&&e.pathRef(Se.previous(p)),D=e.pathRef(G.findPath(e,g.target));let b=HP(e,w);const B=w.filter(ft=>!b.some(Et=>Et.abstract===ft)).map(ft=>Te.isAbstract(ft)?jS(ft):ft);if(p[p.length-1]!==0){const ft=Je.get(e,Se.previous(p)),Et=Sv(ft);if(Et&&Et.end!==p[p.length-1]-1){const mt=b.map(wt=>jS(wt.abstract));B.push(...mt),b=[]}}const H=zP(e,w);GP(e,p,B.length,!1,H),ir.setAbstractsByRefs(e,H);let R=l9(e,w);const k=Je.get(e,Se.parent(p));r9(k,g)&&D.current&&(R=RT(e,D.current.slice(0,1),B.length,R)),ir.setRightNodeCountByRefs(e,R),P5.removeElements(e,w);let U=x.current;const nt=Se.parent(x.current||p);if(!U){const ft=T&&T.unref();if(ft)U=Se.next(ft);else{const Et=Je.get(e,nt),ct=wf(Et);U=[...nt,ct.length||0]}}ir.insertNodes(e,B,U),b.length&&ir.insertAbstractNodes(e,b,B,U),D.current&&x.current&&Se.isAncestor(D.current,x.current)&&g.target.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},D.current),D.unref(),x.unref();let st=[];Ar(e,ft=>{o.some(ct=>ct.id===ft.id)&&st.push(ft)}),Qt.addSelectionWithTemporaryElements(e,st)}$8(e,!1),o=[],c==null||c.remove(),c=void 0,h==null||h.remove(),h=void 0,g=null}r(m)},e},$X=e=>{const n=e,{pointerDown:i,pointerMove:r,pointerUp:o}=e;let a,u,c,h;return e.pointerDown=g=>{if(!Al(g)||G.isReadonly(e)){i(g);return}const p=ne(e).filter(w=>Te.isAbstract(w)),m=Pe(e,ke(e,g.x,g.y));if(a=p.find(w=>(u=s9(e,w,m),u)),a){n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.start);return}i(g)},e.pointerMove=g=>{ne(e);const p=Pe(e,ke(e,g.x,g.y));if(c=pX(e,c,p),u&&a){const m=Ys.getCorrectLayoutByElement(e,a),w=Xr(m),x=Ut.getParent(a);let T=x.children;const D=Ys.getCorrectLayoutByElement(e,x);if(Qo(D)){const st=x.rightNodeCount,{leftChildren:ft,rightChildren:Et}=MW(x);a.end<st&&(T=Et),a.start>=st&&(T=ft)}n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.resizing);const b=w?p[1]:p[0],B=Ut.getNode(x),A=dX(e,u,T,a,B,w),H=Math.min(A.max,Math.max(A.min,b));let R=gX(e,T,H,w);if(u===Sr.start&&R+1===a.start||u===Sr.end&&R===a.end)h=void 0;else{if(Qo(B.layout)){const st=B.origin.rightNodeCount;a.start>=st&&(R+=st)}h=u===Sr.start?{start:R+1}:{end:R}}const U=gn.getElementRef(a).getGenerator(cf.key),nt=Om(e,[H,H]);U.updateAbstractOutline(a,u,w?nt[1]:nt[0])}r(g)},e.pointerUp=g=>{if(u=void 0,a){if(n!=null&&n.onAbstractResize&&n.onAbstractResize(Am.end),h){const p=G.findPath(e,a);Qt.setNode(e,h,p)}else gn.getElementRef(a).getGenerator(cf.key).updateAbstractOutline(a);a=void 0;return}o(g)},e},VX=e=>{const n=e;return e.setPluginOptions(iC,{spaceBetweenEmojis:4,emojiPadding:0}),n},WX="m",XX=e=>{const n=e,{keyDown:i,pointerDown:r,pointerMove:o,pointerUp:a}=e;let u=null,c=null;n.pointerDown=g=>{const p=G.isPointer(e,wu.mind);if(!G.isReadonly(e)&&Bl(e)&&p){const m=Pe(e,ke(e,g.x,g.y)),w=G8(n,m);ir.insertMind(e,w),un.updatePointerType(e,nn.selection);return}r(g)},n.pointerMove=g=>{if(G.isReadonly(e)){o(g);return}const p=G.isPointer(e,wu.mind);Xx(e)&&p?_a(e,"with-mind-create",()=>{let m=G.getMovingPointInBoard(e);if(m){m=Pe(n,ke(e,m[0],m[1])),c=G8(n,m);const w=XW(n,c),x=MT(e,w,c),T=t9(n,w,c);if(u)u.textManage.updateRectangle(T),u.nodeG.remove(),u.nodeG=x,u.g.append(x),u.g.append(u.textManage.g);else{const D=new vv(e,{getRectangle:()=>T});D.draw(c.data.topic),u={g:ze(),nodeG:x,textManage:D},u.g.classList.add("root"),u.g.setAttribute("plait-mind-temporary","true"),G.getHost(e).append(u.g),u.g.append(u.nodeG,D.g)}}}):h(),o(g)},n.pointerUp=g=>{if(c){ir.insertMind(e,c),un.updatePointerType(e,nn.selection),c=null,h();return}a(g)},e.keyDown=g=>{if(G.isReadonly(e)||ne(e).length>0){i(g);return}if(g.key===WX&&!G.isPointer(e,wu.mind)){un.updatePointerType(e,wu.mind),Vr(e,Xi.drawing),g.preventDefault();return}i(g)};function h(){u&&(u.textManage.destroy(),u.g.remove(),u=null)}return n},qX=e=>{const n=e,{keyDown:i,globalKeyDown:r}=n;return n.keyDown=o=>{const a=ne(n),u=a.length===1,c=a.length===1&&Ut.isMindElement(n,a[0]),h=a[0];if(zG(o)&&c&&!He.isMind(h)&&h.children&&h.children.length>0){Qt.setNode(n,{isCollapsed:!h.isCollapsed},G.findPath(n,h));return}if(!G.isReadonly(n)){if(jG(o)&&c){o.preventDefault(),ir.insertChildNode(n,h);return}if(UG(o)&&c&&!He.isMind(h)&&!Te.isAbstract(h)){ir.insertSiblingNode(n,h);return}if(!X5(o)&&!Y5(o)&&!q5(o)&&u&&Ut.isMindElement(n,h)){o.preventDefault(),bT(h);return}}i(o)},n.globalKeyDown=o=>{if(G.isFocus(n)&&G.hasBeenTextEditing(n)&&ln.isHotkey("mod+z",o)){const{history:a}=n,{undos:u}=a,c=u.length>0?u[u.length-1][0]:void 0;c&&c.type==="insert_node"&&Ut.isMindElement(n,c.node)&&pv(c.node).isEditing&&n.undo()}r(o)},n},YX=(e,n)=>!e||!n?!1:e.target===n.target&&e.isHit===n.isHit&&e.isHitAwarenessRectangle===n.isHitAwarenessRectangle&&e.isHitCollapseArea===n.isHitCollapseArea&&e.isHitExpandArea===n.isHitExpandArea&&e.isHitAddArea===n.isHitAddArea&&e.isHitStandardLeftAddArea===n.isHitStandardLeftAddArea&&e.isHitStandardLeftAwarenessRectangle===n.isHitStandardLeftAwarenessRectangle,KX=e=>{const{pointerMove:n,pointerLeave:i,pointerUp:r}=e;let o=null;e.pointerMove=u=>{US(e)&&_a(e,"with-mind-node-hover-hit-test",()=>{o&&!gn.hasMounted(o.target)&&(o=null);const c=x3(e,u.x,u.y);if(!(o&&c&&YX(o,c))){if(o&&(!c||c.target!==o.target)){const h=Es(e,o.target.id);h&&h===o.target&&a({target:o.target,isHit:!1,isHitAwarenessRectangle:!1,isHitCollapseArea:!1,isHitExpandArea:!1,isHitAddArea:!1,isHitStandardLeftAddArea:!1,isHitStandardLeftAwarenessRectangle:!1})}c?(a(c,o),o=c):o&&(o=null)}}),n(u)},e.pointerUp=u=>{if(o&&(o.isHitCollapseArea||o.isHitExpandArea)){const g={isCollapsed:!o.target.isCollapsed},p=G.findPath(e,o.target);Qt.setNode(e,g,p),setTimeout(()=>{const m=x3(e,u.x,u.y);m?(a(m),o=m):o=null},0);return}const c=h=>{if(h.isHitAddArea&&He.isMind(h.target)&&h.target.layout===ie.standard){const g=G.findPath(e,h.target),p=RT(e,g,1);_T(e,p);const m=mX(e,h.target,p[0].rightNodeCount);gx(e,h.target,m)}else{const g=OT(e,h.target);gx(e,h.target,g)}};if(o&&(o.isHitAddArea||o.isHitStandardLeftAddArea)&&!G.isReadonly(e)){o&&c(o);return}if(Gb()){const h=x3(e,u.x,u.y);if(h&&(h.isHitAddArea||h.isHitStandardLeftAddArea)){c(h);return}if(h&&(h.isHitExpandArea||h.isHitCollapseArea)){const p={isCollapsed:!h.target.isCollapsed},m=G.findPath(e,h.target);Qt.setNode(e,p,m);return}}r(u)};const a=(u,c)=>{const h=gn.getElementRef(u.target),g=h==null?void 0:h.getGenerator(iv.key);if(g){const p=(c==null?void 0:c.target)===u.target,m=gn.getElementG(u.target);g.processDrawing(u.target,m,{isHit:u.isHit,isHitStandardLeftAddArea:u.isHitStandardLeftAddArea,isHitStandardLeftAwarenessRectangle:u.isHitStandardLeftAwarenessRectangle,isHitAwarenessRectangle:u.isHitAwarenessRectangle,isHitCollapseArea:u.isHitCollapseArea,isHitExpandArea:u.isHitExpandArea,isHitAddArea:u.isHitAddArea,isSelected:vg(e,u.target),isShowCollapseAnimation:(u.isHit||u.isHitCollapseArea)&&!vg(e,u.target)&&!p,isShowAddAnimation:(u.isHit||u.isHitAddArea)&&!vg(e,u.target)&&!p})}};return e.pointerLeave=u=>{o&&a({target:o.target,isHit:!1,isHitAwarenessRectangle:!1,isHitCollapseArea:!1,isHitExpandArea:!1,isHitAddArea:!1,isHitStandardLeftAddArea:!1,isHitStandardLeftAwarenessRectangle:!1}),o=null,i(u)},e},x3=(e,n,i)=>{let r=null,o=!1,a=!1,u=!1,c=!1,h=!1,g=!1,p=!1;const m=Pe(e,ke(e,n,i));return Ar(e,w=>{if(r||!Ut.isMindElement(e,w))return;const x=ZP(e,m,w),{hasCollapsedIcon:T,hasExpandedIcon:D,hasAddIcon:b,collapsedIconCenter:B,expandedIconCenter:A,addCenter:H,awarenessRectangle:R,hasLeftAddIcon:k,standardRef:W}=g9(e,w),U=R&&I.isHit(I.getRectangleByPoints([m,m]),R),nt=T&&I.isHit(I.getRectangleByPoints([m,m]),I.getRectangleByCenterPoint(B,Gi,Gi)),st=D&&I.isHit(I.getRectangleByPoints([m,m]),I.getRectangleByCenterPoint(A,Gi,Gi)),ft=b&&I.isHit(I.getRectangleByPoints([m,m]),I.getRectangleByCenterPoint(H,Gi,Gi)),Et=k&&W&&I.isHit(I.getRectangleByPoints([m,m]),W.awarenessRectangle),ct=k&&W&&I.isHit(I.getRectangleByPoints([m,m]),I.getRectangleByCenterPoint(W.addCenter,Gi,Gi));(x||U||Et)&&(o=x,r=w,u=nt,c=!!st,h=ft,a=!!U,p=!!Et,g=!!ct)},ud(e),!0),r?{target:r,isHit:o,isHitAwarenessRectangle:a,isHitCollapseArea:u,isHitExpandArea:c,isHitAddArea:h,isHitStandardLeftAddArea:g,isHitStandardLeftAwarenessRectangle:p}:null},ZX=e=>{const{keyDown:n,pointerUp:i,globalPointerUp:r,buildFragment:o,insertFragment:a,deleteFragment:u,afterChange:c}=e;return e.pointerUp=h=>{const g=Uo(e);if(g&&Ut.isMindElement(e,g)&&!uO(h)&&(G.isReadonly(e)||!Al(h)||!G.isPointer(e,nn.selection))){Aw(e,g),i(h);return}if(G.isReadonly(e)){i(h);return}const p=Pe(e,ke(e,h.x,h.y)),m=Ll(e,p),w=m&&Ut.isMindElement(e,m)&&Ut.hasImage(m)&&e9(e,m,p);if(w&&g&&m===g){eS(e),i(h);return}g&&Ut.isMindElement(e,g)&&Aw(e,g),w&&m&&(eS(e),ZW(e,m)),i(h)},e.keyDown=h=>{const g=Uo(e);if(!G.isReadonly(e)&&g&&($r.isDeleteBackward(h)||$r.isDeleteForward(h))){cd(e,g),ir.removeImage(e,g);return}n(h)},e.globalPointerUp=h=>{if(G.isFocus(e)){const g=h.target instanceof Node&&G.getBoardContainer(e).contains(h.target),p=Uo(e);p&&Ut.isMindElement(e,p)&&!g&&Aw(e,p)}r(h)},e.buildFragment=(h,g,p,m)=>{const w=Uo(e);return w&&(h=AL(Au.medias,[w.data.image],"")),o(h,g,p,m)},e.deleteFragment=h=>{const g=Uo(e);g&&ir.removeImage(e,g),u(h)},e.insertFragment=(h,g,p)=>{var T,D;const m=ne(e),w=!!Uo(e),x=m.length===1&&Ut.isMindElement(e,m[0]);if(w||x){if((T=h==null?void 0:h.files)!=null&&T.length){const b=$6.map(A=>"image/"+A),B=m[0]||Uo(e);if(b.includes(h.files[0].type)){const A=h.files[0];nB(e,A,PW,H=>{ir.setImage(e,B,H)});return}}if((D=h==null?void 0:h.medias)!=null&&D.length){const b=m[0]||Uo(e);ir.setImage(e,b,h.medias[0]);return}}a(h,g,p)},e.afterChange=()=>{c();const h=Uo(e);h&&Ut.isMindElement(e,h)&&gn.getElementRef(h).getGenerator(Bu.key).setFocus(h,!0)},e},QX=e=>{let n=null;return pd(e,{key:"mind-node",canResize:()=>!0,hitTest:r=>{const o=JX(e,r);return o?{element:o,handle:null,cursorClass:Da.ew}:null},beforeResize:r=>{n={minWidth:zn.getNodeResizableMinWidth(e,r.element),currentWidth:zn.getTopicDynamicWidth(e,r.element),path:G.findPath(e,r.element),textManage:pv(r.element)}},onResize:(r,o)=>{let a=n.currentWidth+Ce.getOffsetX(o.startPoint,o.endPoint);a<=n.minWidth&&(a=n.minWidth);const u=Je.get(e,n.path);u&&zn.getNodeTopicMinWidth(e,u)!==a&&ir.setNodeManualWidth(e,u,a)},afterResize:r=>{n=null}}),e},JX=(e,n)=>{const i=ne(e).filter(r=>Ut.isMindElement(e,r));if(i.length>0){const r=i.find(o=>{const a=tq(e,o);return cv(n[0],n[1],a)<=0});return r||null}return null},tq=(e,n)=>{const i=Ut.getNode(n),r=Ci(i);return{x:r.x+r.width-k8,y:r.y,width:k8*2,height:r.height}},eq=e=>(pd(e,{key:"mind-node-image",canResize:()=>!0,hitTest:i=>{const r=Uo(e),o=r&&Ut.isMindElement(e,r)?r:void 0;if(o){const a=qW(e,o,i);if(a)return{element:o,handle:a.handle,cursorClass:a.cursorClass}}return null},onResize:(i,r)=>{const o=Ce.getOffsetX(r.startPoint,r.endPoint),a=i.element.data.image.width,u=i.element.data.image.height,c=i.path;let h=a+o;h<=100&&(h=100);const g=a/u,p=h/g,m={...i.element.data.image,width:h,height:p};ir.setImage(e,Je.get(e,c),m),iB(e,Je.get(e,c))}}),e),nq=(e,n,i)=>{let r=[];const o=IP(e,n),a=HP(e,[...n,...o]),u=n.filter(h=>!a.find(g=>g.abstract===h));u.push(...a.map(h=>h.abstract));const c=u.map(h=>Ut.getNode(h));return u.forEach((h,g)=>{const p=Ci(c[g]),m=[[p.x-i[0],p.y-i[1]]],w=a.find(x=>x.abstract===h);if(Te.isAbstract(h)&&w){const{start:x,end:T}=NP(w,u);r.push({...h,points:m,start:x,end:T})}else if(Te.isAbstract(h)){let x={...h,points:m};delete x.start,delete x.end,r.push(x)}else r.push({...h,points:m})}),r},iq=(e,n,i,r)=>{let o,a;const u=ne(e);let c=[];const h=u.length===1,g=u[0],p=g&&G.findPath(e,g),m=g&&wf(g).length;g&&g.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},p),n.forEach((w,x)=>{if(o=KP(w),h&&r!==Ma.duplicate)He.isMind(w)&&(o=YW(e,o)),Te.isAbstract(o)&&(o.start=o.start+m,o.end=o.end+m),a=[...p,m+x];else{const T=[i[0]+w.points[0][0],i[1]+w.points[0][1]];o.points=[T],Te.isAbstract(w)&&(o=jS(o)),He.isMind(w)||(o=KW(e,o)),a=[e.children.length]}c.push(o),Qt.insertNode(e,o,a)}),Qt.addSelectionWithTemporaryElements(e,c)},rq=(e,n,i)=>{const r=sC(i,{}),o=G.findPath(e,n);Qt.insertNode(e,r,OT(e,n)),n.isCollapsed&&Qt.setNode(e,{isCollapsed:!1},o),Qt.addSelectionWithTemporaryElements(e,[r])},oq=e=>{const n=e;let i;const{getDeletedFragment:r,insertFragment:o,buildFragment:a,deleteFragment:u}=n;return n.getDeletedFragment=c=>{const h=m3(n);if(h.length){i=Tm(h).reverse();const g=zP(n,i);ir.setAbstractsByRefs(n,g);const p=l9(n,h);ir.setRightNodeCountByRefs(n,p);const m=Tm(h);c.push(...m)}return r(c)},n.deleteFragment=c=>{if(u(c),i){const h=sq(n,i);h&&cd(n,h),i=null}},n.buildFragment=(c,h,g,p)=>{const m=m3(n,p),w=Tm(m);if(w.length){const x=nq(n,w,h?[h.x,h.y]:[0,0]),D={text:tB(m),type:Au.elements,elements:x};c=jx(c,D)}return a(c,h,g,p)},n.insertFragment=(c,h,g)=>{var p,m;if((p=c==null?void 0:c.elements)!=null&&p.length){const w=(m=c.elements)==null?void 0:m.filter(x=>Ut.isMindElement(n,x));w&&w.length>0&&iq(n,w,h,g)}if(c!=null&&c.text){const w=m3(n);if(w.length===1){rq(n,w[0],gd(c.text));return}}o(c,h,g)},n},sq=(e,n)=>{let i;const r=n[0],o=G.findPath(e,r);let a=o;if(Se.hasPrevious(o)&&(a=Se.previous(o)),Te.isAbstract(r)){const g=Ut.getParent(r);n.includes(g.children[r.start])||(i=g.children[r.start])}try{i||(i=Je.get(e,a))}catch{}const u=n[0],c=Ut.findParent(u),h=n.every(g=>Ut.findParent(g)===c);return c&&h&&!i&&(i=c),i},aq=e=>{const n=e;return n.renderEmoji=(i,r)=>{throw new Error("No implementation for renderEmoji method.")},n},lq=e=>!(!e.data||!e.data.topic),uq=e=>{const n={children:[{text:""}]};if(e.data)e.data.topic||(e.data.topic=n);else{const i={topic:n};e.data=i}},m9=e=>{const n=e,{drawElement:i,dblClick:r,isRectangleHit:o,isHit:a,getRectangle:u,isMovable:c,isRecursion:h,isAlign:g,isImageBindingAllowed:p,canAddToGroup:m,canSetZIndex:w,isExpanded:x,getOneHitElement:T,normalizeElement:D}=n;return n.normalizeElement=b=>{He.isMind(b.element)&&Ar(b.element,B=>{lq(B)||uq(B)}),D(b)},n.drawElement=b=>He.isMind(b.element)?zX:Ut.isMindElement(n,b.element)?p9:i(b),n.applyTheme=b=>{const B=b,A=!G.isBoard(b)&&((B==null?void 0:B.branchColor)||(B==null?void 0:B.fill)||(B==null?void 0:B.strokeColor));if(He.isMind(b)&&A){const H=G.findPath(n,b);Qt.setNode(n,{fill:null,strokeColor:null,branchColor:null},H)}},n.getRectangle=b=>Ut.isMindElement(n,b)?(gn.hasMounted(b)||console.error("mind element has not been mounted"),Ci(Ut.getNode(b))):u(b),n.canAddToGroup=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!1:m(b),n.canSetZIndex=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!1:w(b),n.isRecursion=b=>Ut.isMindElement(n,b)&&b.isCollapsed?!1:h(b),n.isRectangleHit=(b,B)=>{if(Ut.isMindElement(n,b)){const A=Ci(Ut.getNode(b));return I.isHit(I.getRectangleByPoints([B.anchor,B.focus]),A)}return o(b,B)},n.isHit=(b,B,A)=>{if(Ut.isMindElement(n,b)){const H=Ci(Ut.getNode(b));return I.isHit(I.getRectangleByPoints([B,B]),H)}return a(b,B,A)},n.getOneHitElement=b=>b.every(A=>Ut.isMindElement(n,A))?b[0]:T(b),n.isMovable=b=>He.isMind(b)?!0:c(b),n.isImageBindingAllowed=b=>Ut.isMindElement(n,b)?!0:p(b),n.isAlign=b=>He.isMind(b)?!0:g(b),n.isExpanded=b=>Ut.isMindElement(n,b)&&!He.isMind(b)?!b.isCollapsed:x(b),n.dblClick=b=>{if(G.isReadonly(n)){r(b);return}const B=Pe(n,ke(n,b.x,b.y));n.children.filter(A=>He.isMind(A)).forEach(A=>{Ar(A,H=>{!G.hasBeenTextEditing(n)&&ZP(n,B,H)&&bT(H)},ud(n))}),!G.hasBeenTextEditing(n)&&r(b)},aq(QX(eq(ZX(KX(oq(qX(VX(XX($X(UX(n)))))))))))};var C3={exports:{}},Y8;function cq(){return Y8||(Y8=1,function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(n,i){n(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var o=Object.prototype.hasOwnProperty,a;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",a="isArray"in Array?Array.isArray:function(m){return Object.prototype.toString.call(m)==="[object Array]"};function u(m,w){return m!=null&&w!=null&&m.toLowerCase()===w.toLowerCase()}function c(m,w){var x,T,D=m.length;if(!D||!w)return!1;for(x=w.toLowerCase(),T=0;T<D;++T)if(x===m[T].toLowerCase())return!0;return!1}function h(m){for(var w in m)o.call(m,w)&&(m[w]=new RegExp(m[w],"i"))}function g(m){return(m||"").substr(0,500)}(function(){var w,x,T,D,b,B,A=r.mobileDetectRules;for(w in A.props)if(o.call(A.props,w)){for(x=A.props[w],a(x)||(x=[x]),b=x.length,D=0;D<b;++D)T=x[D],B=T.indexOf("[VER]"),B>=0&&(T=T.substring(0,B)+"([\\w._\\+]+)"+T.substring(B+5)),x[D]=new RegExp(T,"i");A.props[w]=x}h(A.oss),h(A.phones),h(A.tablets),h(A.uas),h(A.utils),A.oss0={WindowsPhoneOS:A.oss.WindowsPhoneOS,WindowsMobileOS:A.oss.WindowsMobileOS}})(),r.findMatch=function(m,w){for(var x in m)if(o.call(m,x)&&m[x].test(w))return x;return null},r.findMatches=function(m,w){var x=[];for(var T in m)o.call(m,T)&&m[T].test(w)&&x.push(T);return x},r.getVersionStr=function(m,w){var x=r.mobileDetectRules.props,T,D,b,B;if(o.call(x,m)){for(T=x[m],b=T.length,D=0;D<b;++D)if(B=T[D].exec(w),B!==null)return B[1]}return null},r.getVersion=function(m,w){var x=r.getVersionStr(m,w);return x?r.prepareVersionNo(x):NaN},r.prepareVersionNo=function(m){var w;return w=m.split(/[a-z._ \/\-]/i),w.length===1&&(m=w[0]),w.length>1&&(m=w[0]+".",w.shift(),m+=w.join("")),Number(m)},r.isMobileFallback=function(m){return r.detectMobileBrowsers.fullPattern.test(m)||r.detectMobileBrowsers.shortPattern.test(m.substr(0,4))},r.isTabletFallback=function(m){return r.detectMobileBrowsers.tabletPattern.test(m)},r.prepareDetectionCache=function(m,w,x){if(m.mobile===i){var T,D,b;if(D=r.findMatch(r.mobileDetectRules.tablets,w),D){m.mobile=m.tablet=D,m.phone=null;return}if(T=r.findMatch(r.mobileDetectRules.phones,w),T){m.mobile=m.phone=T,m.tablet=null;return}r.isMobileFallback(w)?(b=p.isPhoneSized(x),b===i?(m.mobile=r.FALLBACK_MOBILE,m.tablet=m.phone=null):b?(m.mobile=m.phone=r.FALLBACK_PHONE,m.tablet=null):(m.mobile=m.tablet=r.FALLBACK_TABLET,m.phone=null)):r.isTabletFallback(w)?(m.mobile=m.tablet=r.FALLBACK_TABLET,m.phone=null):m.mobile=m.tablet=m.phone=null}},r.mobileGrade=function(m){var w=m.mobile()!==null;return m.os("iOS")&&m.version("iPad")>=4.3||m.os("iOS")&&m.version("iPhone")>=3.1||m.os("iOS")&&m.version("iPod")>=3.1||m.version("Android")>2.1&&m.is("Webkit")||m.version("Windows Phone OS")>=7||m.is("BlackBerry")&&m.version("BlackBerry")>=6||m.match("Playbook.*Tablet")||m.version("webOS")>=1.4&&m.match("Palm|Pre|Pixi")||m.match("hp.*TouchPad")||m.is("Firefox")&&m.version("Firefox")>=12||m.is("Chrome")&&m.is("AndroidOS")&&m.version("Android")>=4||m.is("Skyfire")&&m.version("Skyfire")>=4.1&&m.is("AndroidOS")&&m.version("Android")>=2.3||m.is("Opera")&&m.version("Opera Mobi")>11&&m.is("AndroidOS")||m.is("MeeGoOS")||m.is("Tizen")||m.is("Dolfin")&&m.version("Bada")>=2||(m.is("UC Browser")||m.is("Dolfin"))&&m.version("Android")>=2.3||m.match("Kindle Fire")||m.is("Kindle")&&m.version("Kindle")>=3||m.is("AndroidOS")&&m.is("NookTablet")||m.version("Chrome")>=11&&!w||m.version("Safari")>=5&&!w||m.version("Firefox")>=4&&!w||m.version("MSIE")>=7&&!w||m.version("Opera")>=10&&!w?"A":m.os("iOS")&&m.version("iPad")<4.3||m.os("iOS")&&m.version("iPhone")<3.1||m.os("iOS")&&m.version("iPod")<3.1||m.is("Blackberry")&&m.version("BlackBerry")>=5&&m.version("BlackBerry")<6||m.version("Opera Mini")>=5&&m.version("Opera Mini")<=6.5&&(m.version("Android")>=2.3||m.is("iOS"))||m.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||m.version("Opera Mobi")>=11&&m.is("SymbianOS")?"B":(m.version("BlackBerry")<5||m.match("MSIEMobile|Windows CE.*Mobile")||m.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(m){return r.findMatch(r.mobileDetectRules.oss0,m)||r.findMatch(r.mobileDetectRules.oss,m)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function p(m,w){this.ua=g(m),this._cache={},this.maxPhoneWidth=w||600}return p.prototype={constructor:p,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===i&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===i&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===i&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(m){return r.getVersion(m,this.ua)},versionStr:function(m){return r.getVersionStr(m,this.ua)},is:function(m){return c(this.userAgents(),m)||u(m,this.os())||u(m,this.phone())||u(m,this.tablet())||c(r.findMatches(r.mobileDetectRules.utils,this.ua),m)},match:function(m){return m instanceof RegExp||(m=new RegExp(m,"i")),m.test(this.ua)},isPhoneSized:function(m){return p.isPhoneSized(m||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===i&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?p.isPhoneSized=function(m){return m<0?i:r.getDeviceSmallerSide()<=m}:p.isPhoneSized=function(){},p._impl=r,p.version="1.4.5 2021-03-13",p})})(function(n){if(e.exports)return function(i){e.exports=i()};if(typeof window<"u")return function(i){window.MobileDetect=i()};throw new Error("unknown environment")}())}(C3)),C3.exports}var fq=cq();const hq=hf(fq),K8=e=>O.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),dq=e=>{const n=e;return e.setPluginOptions(iC,{emojiPadding:0,spaceBetweenEmojis:4}),n.renderEmoji=(i,r)=>{const o=document.createElement("span");i.appendChild(o);const a=bx.createRoot(o);a.render(O.jsx(K8,{...r}));let u={...r};return{destroy:()=>{setTimeout(()=>{a.unmount()},0)},update:h=>{u={...u,...h},a.render(O.jsx(K8,{...u}))}}},n},Z8=e=>{const n={src:e.imageItem.url,draggable:!1,width:"100%"};return O.jsx("div",{style:{display:"flex"},children:O.jsx("img",{...n,className:yn("image-origin",{"image-origin--focus":e.isFocus})})})};var Ig=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(Ig||{});const FT={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},kT={json:"application/json",drawnix:"application/vnd.drawnix+json",...FT},gq={drawnix:1},IT=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),pq=IT?Promise.resolve().then(function(){return Cq}):Promise.resolve().then(function(){return bq});async function mq(...e){return(await pq).default(...e)}IT?Promise.resolve().then(function(){return Sq}):Promise.resolve().then(function(){return Pq});const vq=IT?Promise.resolve().then(function(){return Aq}):Promise.resolve().then(function(){return Rq});async function yq(...e){return(await vq).default(...e)}const wq=async e=>{const n=await e.getFile();return n.handle=e,n};var xq=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const n=[];e.forEach((o,a)=>{n[a]={description:o.description||"Files",accept:{}},o.mimeTypes?o.mimeTypes.map(u=>{n[a].accept[u]=o.extensions||[]}):n[a].accept["*/*"]=o.extensions||[]});const i=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:n,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(i.map(wq));return e[0].multiple?r:r[0]},Cq={__proto__:null,default:xq};function Dw(e){function n(i){if(Object(i)!==i)return Promise.reject(new TypeError(i+" is not an object."));var r=i.done;return Promise.resolve(i.value).then(function(o){return{value:o,done:r}})}return Dw=function(i){this.s=i,this.n=i.next},Dw.prototype={s:null,n:null,next:function(){return n(this.n.apply(this.s,arguments))},return:function(i){var r=this.s.return;return r===void 0?Promise.resolve({value:i,done:!0}):n(r.apply(this.s,arguments))},throw:function(i){var r=this.s.return;return r===void 0?Promise.reject(i):n(r.apply(this.s,arguments))}},new Dw(e)}const v9=async(e,n,i=e.name,r)=>{const o=[],a=[];var u,c=!1,h=!1;try{for(var g,p=function(m){var w,x,T,D=2;for(typeof Symbol<"u"&&(x=Symbol.asyncIterator,T=Symbol.iterator);D--;){if(x&&(w=m[x])!=null)return w.call(m);if(T&&(w=m[T])!=null)return new Dw(w.call(m));x="@@asyncIterator",T="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());c=!(g=await p.next()).done;c=!1){const m=g.value,w=`${i}/${m.name}`;m.kind==="file"?a.push(m.getFile().then(x=>(x.directoryHandle=e,x.handle=m,Object.defineProperty(x,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>w})))):m.kind!=="directory"||!n||r&&r(m)||o.push(v9(m,n,w,r))}}catch(m){h=!0,u=m}finally{try{c&&p.return!=null&&await p.return()}finally{if(h)throw u}}return[...(await Promise.all(o)).flat(),...await Promise.all(a)]};var Eq=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const n=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await n.values()).next()).done?[n]:v9(n,e.recursive,void 0,e.skipDirectory)},Sq={__proto__:null,default:Eq},Tq=async(e,n=[{}],i=null,r=!1,o=null)=>{Array.isArray(n)||(n=[n]),n[0].fileName=n[0].fileName||"Untitled";const a=[];let u=null;if(e instanceof Blob&&e.type?u=e.type:e.headers&&e.headers.get("content-type")&&(u=e.headers.get("content-type")),n.forEach((g,p)=>{a[p]={description:g.description||"Files",accept:{}},g.mimeTypes?(p===0&&u&&g.mimeTypes.push(u),g.mimeTypes.map(m=>{a[p].accept[m]=g.extensions||[]})):u?a[p].accept[u]=g.extensions||[]:a[p].accept["*/*"]=g.extensions||[]}),i)try{await i.getFile()}catch(g){if(i=null,r)throw g}const c=i||await window.showSaveFilePicker({suggestedName:n[0].fileName,id:n[0].id,startIn:n[0].startIn,types:a,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1});!i&&o&&o(c);const h=await c.createWritable();return"stream"in e?(await e.stream().pipeTo(h),c):"body"in e?(await e.body.pipeTo(h),c):(await h.write(await e),await h.close(),c)},Aq={__proto__:null,default:Tq},Dq=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((n,i)=>{const r=document.createElement("input");r.type="file";const o=[...e.map(h=>h.mimeTypes||[]),...e.map(h=>h.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=o||"",r.style.display="none",document.body.append(r);const a=h=>{typeof u=="function"&&u(),n(h)},u=e[0].legacySetup&&e[0].legacySetup(a,()=>u(i),r),c=()=>{window.removeEventListener("focus",c),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",c)}),r.addEventListener("change",()=>{window.removeEventListener("focus",c),r.remove(),a(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),bq={__proto__:null,default:Dq},Bq=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((n,i)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const o=u=>{typeof a=="function"&&a(),n(u)},a=e[0].legacySetup&&e[0].legacySetup(o,()=>a(i),r);r.addEventListener("change",()=>{let u=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(u=u.filter(c=>c.webkitRelativePath.split("/").every(h=>!e[0].skipDirectory({name:h,kind:"directory"})))):u=u.filter(c=>c.webkitRelativePath.split("/").length===2),o(u)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),Pq={__proto__:null,default:Bq},Mq=async(e,n={})=>{Array.isArray(n)&&(n=n[0]);const i=document.createElement("a");let r=e;"body"in e&&(r=await async function(u,c){const h=u.getReader(),g=new ReadableStream({start:w=>async function x(){return h.read().then(({done:T,value:D})=>{if(!T)return w.enqueue(D),x();w.close()})}()}),p=new Response(g),m=await p.blob();return h.releaseLock(),new Blob([m],{type:c})}(e.body,e.headers.get("content-type"))),i.download=n.fileName||"Untitled",i.href=URL.createObjectURL(await r);const o=()=>{typeof a=="function"&&a()},a=n.legacySetup&&n.legacySetup(o,()=>a(),i);return i.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(i.href),3e4),o()}),i.click(),null},Rq={__proto__:null,default:Mq};const y9=e=>{var r,o;const n=(r=e.extensions)==null?void 0:r.reduce((a,u)=>(a.push(kT[u]),a),[]),i=(o=e.extensions)==null?void 0:o.reduce((a,u)=>u==="jpg"?a.concat(".jpg",".jpeg"):a.concat(`.${u}`),[]);return mq({description:e.description,extensions:i,mimeTypes:n,multiple:e.multiple??!1})},Oq=(e,n)=>yq(e,{fileName:`${n.name}.${n.extension}`,description:n.description,extensions:[`.${n.extension}`]},n.fileHandle);var HT=(e=>(e.drawnix="drawnix",e))(HT||{});const Lq=()=>new Date().getTime().toString(),w9=async(e,n=Lq())=>{const i=kq(e),r=new Blob([i],{type:kT.drawnix});return{fileHandle:await Oq(r,{name:n,extension:"drawnix",description:"Drawnix file"})}},_q=async e=>{const n=await y9({description:"Drawnix files"});return Iq(e,await Gq(n))},Fq=e=>e&&e.type===HT.drawnix&&Array.isArray(e.elements)&&typeof e.viewport=="object",kq=e=>{const n={type:HT.drawnix,version:gq.drawnix,source:"web",elements:e.children,viewport:e.viewport,theme:e.theme};return JSON.stringify(n,null,2)},Iq=async(e,n)=>{const i=await zq(n);let r;try{if(r=JSON.parse(i),Fq(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},Hq=(e,n,i)=>new File([e],i||"",{type:n}),Nq=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((n,i)=>{const r=new FileReader;r.onload=o=>{var a;if(!((a=o.target)!=null&&a.result))return i(new Error("Couldn't convert blob to ArrayBuffer"));n(o.target.result)},r.readAsArrayBuffer(e)}),Gq=async e=>{var n;return e.type||(n=e==null?void 0:e.name)!=null&&n.endsWith(".drawnix")&&(e=Hq(await Nq(e),kT.drawnix,e.name)),e},zq=async e=>{let n;return"text"in Blob?n=await e.text():n=await new Promise(i=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&i(r.result)}}),n},jq=async e=>new Promise((n,i)=>{const r=new FileReader;r.onload=()=>{const o=r.result;n(o)},r.onerror=o=>i(o),r.readAsDataURL(e)}),Q8=e=>!!e&&Object.values(FT).includes(e),Uq=e=>new Promise((n,i)=>{const r=new Image;r.onload=()=>{n(r)},r.onerror=o=>{i(o)},r.src=e}),$q=(e,n,i)=>{const r=e.width>i?i:e.width,o=r/e.width*e.height;return{url:n,width:r,height:o}},$S=async(e,n,i,r)=>{const o=ne(e)[0]||Uo(e),a=o?240:400,u=await jq(n),c=await Uq(u),h=$q(c,u,a),g=i&&Ll(e,i);if(r&&g&&Ut.isMindElement(e,g)){ir.setImage(e,g,h);return}o&&Ut.isMindElement(e,o)&&!r?ir.setImage(e,o,h):Ao.insertImage(e,h,i)};class Vq{constructor(n={}){this.overlay=null,this.imageContainer=null,this.image=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.animationFrameId=null,this.pendingUpdate=!1,this.state={zoom:1,x:0,y:0,isDragging:!1,dragStartX:0,dragStartY:0,imageStartX:0,imageStartY:0},this.styleElement=null,this.options={zoomStep:n.zoomStep||.2,minZoom:n.minZoom||.1,maxZoom:n.maxZoom||5,enableKeyboard:n.enableKeyboard!==!1},this.addStyles(),this.bindEvents()}open(n,i=""){this.createOverlay(),this.createImage(n,i),this.resetState(),document.body.style.overflow="hidden"}close(){this.overlay&&(this.cleanupDragEvents(),document.removeEventListener("mousemove",this.delegationHandler),document.removeEventListener("mouseup",this.delegationHandler),document.removeEventListener("keydown",this.delegationHandler),document.removeEventListener("wheel",this.delegationHandler),this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),document.body.removeChild(this.overlay),this.overlay=null,this.image=null,this.imageContainer=null,this.closeButton=null,this.controlsContainer=null,this.delegationHandler=null,this.dragHandler=null,this.mouseUpHandler=null,this.pendingUpdate=!1),document.body.style.overflow=""}createOverlay(){this.overlay=document.createElement("div"),this.overlay.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(45, 45, 45, 0.95);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      cursor: grab;
    `,this.overlay.addEventListener("click",n=>{n.target===this.overlay&&this.close()}),this.createCloseButton(),this.createControls(),document.body.appendChild(this.overlay)}createCloseButton(){this.closeButton=document.createElement("div"),this.closeButton.innerHTML="",this.closeButton.className="image-viewer-close-btn",this.closeButton.addEventListener("click",()=>this.close()),this.overlay.appendChild(this.closeButton)}createControls(){this.controlsContainer=document.createElement("div"),this.controlsContainer.style.cssText=`
      position: absolute;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 10001;
    `,this.addStyles();const n=document.createElement("button");n.innerHTML="+",n.className="image-viewer-control-btn",n.addEventListener("click",()=>this.zoomIn());const i=document.createElement("button");i.innerHTML="-",i.className="image-viewer-control-btn",i.addEventListener("click",()=>this.zoomOut());const r=document.createElement("button");r.innerHTML="",r.className="image-viewer-control-btn",r.addEventListener("click",()=>this.resetState()),this.controlsContainer.appendChild(i),this.controlsContainer.appendChild(r),this.controlsContainer.appendChild(n),this.overlay.appendChild(this.controlsContainer)}createImage(n,i){this.imageContainer=document.createElement("div"),this.imageContainer.style.cssText=`
      position: relative;
      cursor: grab;
      display: flex;
      align-items: center;
      justify-content: center;
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
    `,this.image=document.createElement("img"),this.image.src=n,this.image.alt=i,this.image.style.cssText=`
      max-width: calc(100vw - 80px);
      max-height: calc(100vh - 160px);
      width: auto;
      height: auto;
      display: block;
      user-select: none;
      pointer-events: none;
      object-fit: contain;
    `,this.imageContainer.appendChild(this.image),this.overlay.appendChild(this.imageContainer),this.bindDragEvents()}bindDragEvents(){this.imageContainer&&(this.dragHandler=n=>{if(!this.state.isDragging)return;const i=n.clientX-this.state.dragStartX,r=n.clientY-this.state.dragStartY;this.state.x=this.state.imageStartX+i,this.state.y=this.state.imageStartY+r,this.pendingUpdate||(this.pendingUpdate=!0,this.animationFrameId=requestAnimationFrame(()=>{this.updateImageTransform(),this.pendingUpdate=!1}))},this.mouseUpHandler=()=>{this.state.isDragging&&(this.state.isDragging=!1,this.imageContainer&&(this.imageContainer.style.cursor="grab"),this.overlay&&(this.overlay.style.cursor="grab"),this.cleanupDragEvents())},this.imageContainer.addEventListener("mousedown",n=>{n.preventDefault(),this.state.isDragging=!0,this.state.dragStartX=n.clientX,this.state.dragStartY=n.clientY,this.state.imageStartX=this.state.x,this.state.imageStartY=this.state.y,this.imageContainer&&(this.imageContainer.style.cursor="grabbing"),this.overlay&&(this.overlay.style.cursor="grabbing"),this.dragHandler&&this.mouseUpHandler&&(document.addEventListener("mousemove",this.dragHandler,{passive:!0}),document.addEventListener("mouseup",this.mouseUpHandler,{once:!0}))}))}cleanupDragEvents(){this.dragHandler&&document.removeEventListener("mousemove",this.dragHandler),this.mouseUpHandler&&document.removeEventListener("mouseup",this.mouseUpHandler)}bindEvents(){this.delegationHandler=n=>{if(this.overlay){if(n.type==="keydown"&&this.options.enableKeyboard){const i=n;switch(i.key){case"Escape":this.close();break;case"+":case"=":i.preventDefault(),this.zoomIn();break;case"-":i.preventDefault(),this.zoomOut();break;case"0":i.preventDefault(),this.resetState();break}}else if(n.type==="wheel"){const i=n;i.preventDefault(),i.deltaY<0?this.zoomIn():this.zoomOut()}}},document.addEventListener("keydown",this.delegationHandler),document.addEventListener("wheel",this.delegationHandler,{passive:!1})}zoomIn(){this.state.zoom=Math.min(this.state.zoom+this.options.zoomStep,this.options.maxZoom),this.updateImageTransform()}zoomOut(){this.state.zoom=Math.max(this.state.zoom-this.options.zoomStep,this.options.minZoom),this.updateImageTransform()}resetState(){this.state.zoom=1,this.state.x=0,this.state.y=0,this.updateImageTransform()}updateImageTransform(){this.imageContainer&&(this.imageContainer.style.transform=`
      translate(${this.state.x}px, ${this.state.y}px) 
      scale(${this.state.zoom})
    `)}addStyles(){this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.textContent=`
        .image-viewer-control-btn {
          background: rgba(0, 0, 0, 0.8);
          color: white;
          border: none;
          padding: 8px 14px;
          border-radius: 4px;
          cursor: pointer;
          font-size: 18px;
          transition: background 0.2s;
          user-select: none;
        }
        
        .image-viewer-control-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
        
        .image-viewer-close-btn {
          position: absolute;
          top: 20px;
          right: 30px;
          color: white;
          font-size: 18px;
          cursor: pointer;
          z-index: 10001;
          user-select: none;
          width: 36px;
          height: 34px;
          display: flex;
          border-radius: 50%;
          justify-content: center;
          background: rgba(0, 0, 0, 0.8);
          transition: all 0.2s ease;
          line-height: 34px;
          padding-bottom:2px;
        }
        
        .image-viewer-close-btn:hover {
          background: rgba(0, 0, 0, 0.4);
        }
      `,document.head.appendChild(this.styleElement))}removeStyles(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}destroy(){this.close(),this.removeStyles()}}const Wq=e=>{const n=e,{insertFragment:i,drop:r,pointerUp:o}=n,a=new Vq({zoomStep:.3,minZoom:.1,maxZoom:5,enableKeyboard:!0});return n.insertFragment=(u,c,h)=>{var g;if((g=u==null?void 0:u.files)!=null&&g.length&&Q8(u.files[0].type)){const p=u.files[0];$S(e,p,c,!1);return}i(u,c,h)},n.drop=u=>{var c,h;if((h=(c=u.dataTransfer)==null?void 0:c.files)!=null&&h.length){const g=u.dataTransfer.files[0];if(Q8(g.type)){const p=Pe(e,ke(e,u.x,u.y));return $S(e,g,p,!0),!0}}return r(u)},n.pointerUp=u=>{const c=Uo(e);if(c&&!vu(e)&&!Dr(e)&&!of(e)){const h=Pe(e,ke(e,u.x,u.y)),g=Ll(e,h);g&&Ut.isMindElement(e,g)&&Ut.hasImage(g)&&e9(e,g,h)&&c===g&&a.open(g.data.image.url)}o(u)},n},Xq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":"","toolbar.arrow.elbow":"","toolbar.arrow.curve":"","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.noteCurlyLeft":"","toolbar.shape.noteCurlyRight":"","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":"","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"","zoom.100":" 100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":"","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"","general.undo":"","general.redo":"","general.menu":"","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"","dialog.mermaid.sequence":"","dialog.mermaid.class":"","dialog.mermaid.otherTypes":" Drawnix ","dialog.mermaid.syntax":"Mermaid ","dialog.mermaid.placeholder":" Mermaid ","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":" Markdown ","dialog.markdown.syntax":"Markdown ","dialog.markdown.placeholder":" Markdown ","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":" Mermaid ","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":"","cleanConfirm.description":"?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":"","popupToolbar.fillColor":"","popupToolbar.fontColor":"","popupToolbar.link":"","popupToolbar.stroke":"","popupToolbar.opacity":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","draw.lineText":"","draw.geometryText":"","mind.centralText":"","mind.abstractNodeText":"","markdown.example":`# 
  
  -  bug   
    -  
      -    
  
  -    
    -  
      -    
  
  -   
    -   
      -    
      
  ##      
  
  ### Hello world    
  
  ####       `,"tutorial.title":"Drawnix","tutorial.description":"All-in-one ","tutorial.dataDescription":"","tutorial.appToolbar":"...","tutorial.creationToolbar":"","tutorial.themeDescription":""},qq={"toolbar.hand":"Hand  H","toolbar.selection":"Selection  V","toolbar.mind":"Mind  M","toolbar.text":"Text  T","toolbar.arrow":"Arrow  A","toolbar.shape":"Shape","toolbar.image":"Image  Cmd+U","toolbar.extraTools":"Extra Tools","toolbar.pen":"Pen  P","toolbar.eraser":"Eraser  E","toolbar.arrow.straight":"Straight Arrow Line","toolbar.arrow.elbow":"Elbow Arrow Line","toolbar.arrow.curve":"Curve Arrow Line","toolbar.shape.rectangle":"Rectangle  R","toolbar.shape.ellipse":"Ellipse  O","toolbar.shape.triangle":"Triangle","toolbar.shape.terminal":"Terminal","toolbar.shape.noteCurlyLeft":"Curly Note  Left","toolbar.shape.noteCurlyRight":"Curly Note  Right","toolbar.shape.diamond":"Diamond","toolbar.shape.parallelogram":"Parallelogram","toolbar.shape.roundRectangle":"Round Rectangle","zoom.in":"Zoom In  Cmd++","zoom.out":"Zoom Out  Cmd+-","zoom.fit":"Fit to Screen","zoom.100":"Zoom to 100%","theme.default":"Default","theme.colorful":"Colorful","theme.soft":"Soft","theme.retro":"Retro","theme.dark":"Dark","theme.starry":"Starry","color.none":"Topic Color","color.unknown":"Other Color","color.default":"Basic Black","color.white":"White","color.gray":"Grey","color.deepBlue":"Deep Blue","color.red":"Red","color.green":"Green","color.yellow":"Yellow","color.purple":"Purple","color.orange":"Orange","color.pastelPink":"Paster Pink","color.cyan":"Cyan","color.brown":"Brown","color.forestGreen":"Forest Green","color.lightGray":"Light Grey","general.undo":"Undo","general.redo":"Redo","general.menu":"App Menu","general.duplicate":"Duplicate","general.delete":"Delete","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"Open","menu.saveFile":"Save File","menu.exportImage":"Export Image","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Clear Board","menu.github":"GitHub","dialog.mermaid.title":"Mermaid to Drawnix","dialog.mermaid.description":"Currently supports","dialog.mermaid.flowchart":"flowcharts","dialog.mermaid.sequence":"sequence diagrams","dialog.mermaid.class":"class diagrams","dialog.mermaid.otherTypes":", and other diagram types (rendered as images).","dialog.mermaid.syntax":"Mermaid Syntax","dialog.mermaid.placeholder":"Write your Mermaid chart definition here","dialog.mermaid.preview":"Preview","dialog.mermaid.insert":"Insert","dialog.markdown.description":"Supports automatic conversion of Markdown syntax to mind map.","dialog.markdown.syntax":"Markdown Syntax","dialog.markdown.placeholder":"Write your Markdown text definition here...","dialog.markdown.preview":"Preview","dialog.markdown.insert":"Insert","dialog.error.loadMermaid":"Failed to load Mermaid library","extraTools.mermaidToDrawnix":"Mermaid to Drawnix","extraTools.markdownToDrawnix":"Markdown to Drawnix","cleanConfirm.title":"Clear Board","cleanConfirm.description":"This will clear the entire board. Do you want to continue?","cleanConfirm.cancel":"Cancel","cleanConfirm.ok":"OK","popupLink.delLink":"Delete Link","popupToolbar.fillColor":"Fill Color","popupToolbar.fontColor":"Font Color","popupToolbar.link":"Insert Link","popupToolbar.stroke":"Stroke","popupToolbar.opacity":"Opacity","textPlaceholders.link":"Link","textPlaceholders.text":"Text","line.source":"Start","line.target":"End","line.arrow":"Arrow","line.none":"None","stroke.solid":"Solid","stroke.dashed":"Dashed","stroke.dotted":"Dotted","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"Text","draw.geometryText":"Text","mind.centralText":"Central Topic","mind.abstractNodeText":"Summary","tutorial.title":"Drawnix","tutorial.description":"All-in-one whiteboard, including mind maps, flowcharts, free drawing, and more","tutorial.dataDescription":"All data is stored locally in your browser","tutorial.appToolbar":"Export, language settings, ...","tutorial.creationToolbar":"Select a tool to start your creation","tutorial.themeDescription":"Switch between light and dark themes"},Yq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"Mind-  M","toolbar.text":"  T","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":"","toolbar.pen":"  P","toolbar.eraser":"  E","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.noteCurlyLeft":"   ","toolbar.shape.noteCurlyRight":"   ","toolbar.shape.diamond":"","toolbar.shape.parallelogram":"","toolbar.shape.roundRectangle":" ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":"  ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":"","color.unknown":" ","color.default":"","color.white":"","color.gray":"","color.deepBlue":"","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":"","color.cyan":"","color.brown":"","color.forestGreen":"","color.lightGray":"-","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"Language","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":"","menu.exportImage":"","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":"GitHub","dialog.mermaid.title":"Mermaid  Drawnix","dialog.mermaid.description":"","dialog.mermaid.flowchart":"-","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"    (  ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"    Mermaid-","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown  mind-.","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"     Markdown","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":"Mermaid  Drawnix","extraTools.markdownToDrawnix":"Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"    .   ?","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","popupToolbar.opacity":"","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":"","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  - Let me see who made this bug   
    -  
      - Turns out it was me   

  - Unexpectedly, it cannot run; why is that   
    - Unexpectedly, it can run now; why is that?  
      -    

  - What can run  
    - then do not touch it  
      -    
    
  ## Boy or girl     

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":" : -, -,     ","tutorial.dataDescription":"      ","tutorial.appToolbar":",  , ...","tutorial.creationToolbar":" ,   ","tutorial.themeDescription":"     "},Kq={"toolbar.hand":"  H","toolbar.selection":"  V","toolbar.mind":"   M","toolbar.eraser":"  E","toolbar.text":"  T","toolbar.pen":"  P","toolbar.arrow":"  A","toolbar.shape":"","toolbar.image":"  Cmd+U","toolbar.extraTools":" ","toolbar.arrow.straight":" ","toolbar.arrow.elbow":" ","toolbar.arrow.curve":" ","toolbar.shape.rectangle":"  R","toolbar.shape.ellipse":"  O","toolbar.shape.triangle":"","toolbar.shape.terminal":"","toolbar.shape.noteCurlyLeft":"   ","toolbar.shape.noteCurlyRight":"   ","toolbar.shape.diamond":"","toolbar.shape.parallelogram":" ","toolbar.shape.roundRectangle":"  ","zoom.in":"  Cmd++","zoom.out":"  Cmd+-","zoom.fit":" ","zoom.100":"  100%","theme.default":"","theme.colorful":"","theme.soft":"","theme.retro":"","theme.dark":"","theme.starry":"","color.none":" ","color.unknown":" ","color.default":" ","color.white":"","color.gray":"","color.deepBlue":" ","color.red":"","color.green":"","color.yellow":"","color.purple":"","color.orange":"","color.pastelPink":" ","color.cyan":"","color.brown":"","color.forestGreen":"  ()","color.lightGray":" ","general.undo":"","general.redo":"","general.menu":" ","general.duplicate":"","general.delete":"","language.switcher":"","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"","menu.saveFile":" ","menu.exportImage":" ","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":" ","menu.github":" ","dialog.mermaid.title":" Mermaid  Drawnix","dialog.mermaid.description":" ","dialog.mermaid.flowchart":" ","dialog.mermaid.sequence":" ","dialog.mermaid.class":" ","dialog.mermaid.otherTypes":"     ( ).","dialog.mermaid.syntax":" Mermaid","dialog.mermaid.placeholder":"   ...","dialog.mermaid.preview":"","dialog.mermaid.insert":"","dialog.markdown.description":"    Markdown   .","dialog.markdown.syntax":" Markdown","dialog.markdown.placeholder":"  Markdown ...","dialog.markdown.preview":"","dialog.markdown.insert":"","dialog.error.loadMermaid":"    Mermaid","extraTools.mermaidToDrawnix":" Mermaid  Drawnix","extraTools.markdownToDrawnix":" Markdown  Drawnix","cleanConfirm.title":" ","cleanConfirm.description":"     .   ","cleanConfirm.cancel":"","cleanConfirm.ok":"","popupLink.delLink":" ","popupToolbar.fillColor":" ","popupToolbar.fontColor":" ","popupToolbar.link":" ","popupToolbar.stroke":"","popupToolbar.opacity":" ","textPlaceholders.link":"","textPlaceholders.text":"","line.source":"","line.target":"","line.arrow":"","line.none":" ","stroke.solid":"","stroke.dashed":"","stroke.dotted":"","markdown.example":`# I have started

  -          
    -  
      -      

  -          
    -         
      -    

  -      
    -     
      -    
    
  ##         

  ### Hello world    

  #### Wow, a programmer     `,"draw.lineText":"","draw.geometryText":"","mind.centralText":" ","mind.abstractNodeText":"","tutorial.title":"Drawnix","tutorial.description":"          ","tutorial.dataDescription":"     ","tutorial.appToolbar":"   ...","tutorial.creationToolbar":"   ","tutorial.themeDescription":"    "},Zq={"toolbar.hand":"Ko  H","toolbar.selection":"Chn  V","toolbar.mind":"Mind Map  M","toolbar.text":"Vn bn  T","toolbar.arrow":"Mi tn  A","toolbar.shape":"Hnh dng","toolbar.image":"Hnh nh  Cmd+U","toolbar.extraTools":"Cng c m rng","toolbar.pen":"Bt v  P","toolbar.eraser":"Ty  E","toolbar.arrow.straight":"Mi tn thng","toolbar.arrow.elbow":"Mi tn vung gc","toolbar.arrow.curve":"Mi tn cong","toolbar.shape.rectangle":"Hnh ch nht  R","toolbar.shape.ellipse":"Hnh elip  O","toolbar.shape.triangle":"Hnh tam gic","toolbar.shape.terminal":"Terminal","toolbar.shape.noteCurlyLeft":"Ghi ch ngoc mc tri","toolbar.shape.noteCurlyRight":"Ghi ch ngoc mc phi","toolbar.shape.diamond":"Hnh thoi","toolbar.shape.parallelogram":"Hnh bnh hnh","toolbar.shape.roundRectangle":"Hnh ch nht bo trn","zoom.in":"Phng to  Cmd++","zoom.out":"Thu nh  Cmd+-","zoom.fit":"Va mn hnh","zoom.100":"Zoom 100%","theme.default":"Mc nh","theme.colorful":"y mu sc","theme.soft":"Nh nhng","theme.retro":"C in","theme.dark":"Ti","theme.starry":"Bu tri sao","color.none":"Mu ch ","color.unknown":"Mu khc","color.default":"en c bn","color.white":"Trng","color.gray":"Xm","color.deepBlue":"Xanh m","color.red":"","color.green":"Xanh l","color.yellow":"Vng","color.purple":"Tm","color.orange":"Cam","color.pastelPink":"Hng phn","color.cyan":"Xanh l","color.brown":"Nu","color.forestGreen":"Xanh rng","color.lightGray":"Xm nht","general.undo":"Hon tc","general.redo":"Lm li","general.menu":"Menu ng dng","general.duplicate":"Nhn bn","general.delete":"Xa","language.switcher":"Ngn ng","language.chinese":"","language.english":"English","language.russian":"","language.arabic":"","language.vietnamese":"Ting Vit","menu.open":"M","menu.saveFile":"Lu tp","menu.exportImage":"Xut hnh nh","menu.exportImage.svg":"SVG","menu.exportImage.png":"PNG","menu.exportImage.jpg":"JPG","menu.cleanBoard":"Xa bng","menu.github":"GitHub","dialog.mermaid.title":"Mermaid sang Drawnix","dialog.mermaid.description":"Hin h tr","dialog.mermaid.flowchart":"lu ","dialog.mermaid.sequence":"biu  tun t","dialog.mermaid.class":"biu  lp","dialog.mermaid.otherTypes":", v cc loi biu  khc (hin th di dng hnh nh).","dialog.mermaid.syntax":"C php Mermaid","dialog.mermaid.placeholder":"Vit nh ngha biu  Mermaid ca bn  y...","dialog.mermaid.preview":"Xem trc","dialog.mermaid.insert":"Chn","dialog.markdown.description":"H tr t ng chuyn i c php Markdown sang s  t duy.","dialog.markdown.syntax":"C php Markdown","dialog.markdown.placeholder":"Vit ni dung Markdown ca bn  y...","dialog.markdown.preview":"Xem trc","dialog.markdown.insert":"Chn","dialog.error.loadMermaid":"Khng th ti th vin Mermaid","extraTools.mermaidToDrawnix":"Mermaid sang Drawnix","extraTools.markdownToDrawnix":"Markdown sang Drawnix","cleanConfirm.title":"Xa bng","cleanConfirm.description":"Thao tc ny s xa ton b bng. Bn c mun tip tc khng?","cleanConfirm.cancel":"Hy","cleanConfirm.ok":"ng ","popupLink.delLink":"Xa lin kt","popupToolbar.fillColor":"Mu t","popupToolbar.fontColor":"Mu ch","popupToolbar.link":"Chn lin kt","popupToolbar.stroke":"ng vin","popupToolbar.opacity":" trong sut","textPlaceholders.link":"Lin kt","textPlaceholders.text":"Vn bn","line.source":"Bt u","line.target":"Kt thc","line.arrow":"Mi tn","line.none":"Khng","stroke.solid":"Nt lin","stroke.dashed":"Nt t","stroke.dotted":"Nt chm","markdown.example":`# Ti  bt u
  
    - Hy xem ai  to ra li ny   
      -  
        - Ha ra l ti   
  
    - Bt ng thay, n khng chy c; ti sao vy   
      - Bt ng thay, gi n chy c ri; ti sao vy?  
        -    
  
    - Ci g chy c  
      - th ng chm vo n  
        -    
      
    ## Trai hay gi     
  
    ### Xin cho th gii    
  
    #### Wow, mt lp trnh vin     `,"draw.lineText":"Vn bn","draw.geometryText":"Vn bn","mind.centralText":"Ch  trung tm","mind.abstractNodeText":"Tm tt","tutorial.title":"DPIT Draw MindMap","tutorial.description":"Bng trng tt c trong mt, bao gm s  t duy, lu , v t do v hn th na","tutorial.dataDescription":"Tt c d liu c lu tr cc b trong trnh duyt ca bn","tutorial.appToolbar":"Xut, ci t ngn ng, ...","tutorial.creationToolbar":"Chn mt cng c  bt u sng to","tutorial.themeDescription":"Chuyn i gia ch  sng v ti"},x9={zh:Xq,en:qq,ru:Yq,ar:Kq,vi:Zq},C9=K.createContext(void 0),Qq=({children:e,defaultLanguage:n="zh"})=>{const[i,r]=K.useState(()=>localStorage.getItem("language")||n),o=c=>{localStorage.setItem("language",c),r(c)},a=c=>x9[i][c]||c,u=K.useMemo(()=>({language:i,setLanguage:o,t:a}),[i]);return O.jsx(C9.Provider,{value:u,children:e})},si=()=>{const e=K.useContext(C9);if(!e)throw new Error("useI18n must be used within I18nProvider");return e},Jq=()=>({t:n=>{const i=localStorage.getItem("language")||"zh";return x9[i][n]||n},language:localStorage.getItem("language")||"zh"}),E9=e=>{const n=e;n.renderImage=(r,o)=>{const a=bx.createRoot(r);a.render(O.jsx(Z8,{...o}));let u={...o};return{destroy:()=>{setTimeout(()=>{a.unmount()},0)},update:h=>{u={...u,...h},a.render(O.jsx(Z8,{...u}))}}};const{t:i}=Jq();return n.getI18nValue=r=>r===Lg.lineText?i("draw.lineText"):r===Lg.geometryText?i("draw.geometryText"):r===Fg.mindCentralText?i("mind.centralText"):r===Fg.abstractNodeText?i("mind.abstractNodeText"):null,Wq(n)},Jo=Ae.forwardRef(({children:e,padding:n,className:i,style:r,...o},a)=>O.jsx("div",{className:yn("island",i),style:{"--padding":n,...r},ref:a,...o,children:e})),tY=K.forwardRef(({children:e,gap:n,align:i,justifyContent:r,className:o,style:a},u)=>O.jsx("div",{className:yn("stack stack_horizontal",o),style:{"--gap":n,alignItems:i,justifyContent:r,...a},ref:u,children:e})),eY=K.forwardRef(({children:e,gap:n,align:i,justifyContent:r,className:o,style:a},u)=>O.jsx("div",{className:yn("stack stack_vertical",o),style:{"--gap":n,justifyItems:i,justifyContent:r,...a},ref:u,children:e})),Yr={Row:tY,Col:eY};class nY extends DOMException{constructor(n="Request Aborted"){super(n,"AbortError")}}const iY=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,rY=(e,n,{checkForDefaultPrevented:i=!0}={})=>function(o){if(e==null||e(o),!i||!(o!=null&&o.defaultPrevented))return n==null?void 0:n(o)},oY=e=>{const n=e.split(","),i=n[0].match(/:(.*?);/)[1],r=atob(n[1]);let o=r.length;const a=new Uint8Array(o);for(;o--;)a[o]=r.charCodeAt(o);return new Blob([a],{type:i})},sY=(e,n={})=>SL(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...n});function S9(e,n){const i=document.createElement("a"),r=window.URL.createObjectURL(e);i.href=r,i.download=n,document.body.append(i),i.click(),window.URL.revokeObjectURL(r),i.remove()}const NT=(e,n)=>{const i=[];for(let r=0;r<e.length;r+=n)i.push(e.slice(r,r+n));return i},rv=e=>(e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter"),zw||MO?e.replace(/\bCtrlOrCmd\b/gi,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/gi,"Ctrl")),jn=Ae.forwardRef((e,n)=>{const{id:i}={id:"drawnix"},r=Ae.useRef(null);Ae.useImperativeHandle(n,()=>r.current);const o=`tool-icon_size_${e.size||"medium"}`,[a,u]=K.useState(!1),c=K.useRef(!0),h=async p=>{var w;const m="onClick"in e&&((w=e.onClick)==null?void 0:w.call(e,p));if(iY(m))try{u(!0),await m}catch(x){if(x instanceof nY)console.warn(x);else throw x}finally{c.current&&u(!1)}};K.useEffect(()=>(c.current=!0,()=>{c.current=!1}),[]);const g=K.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const p=e.type==="icon"?"button":e.type;return O.jsxs("button",{className:yn("tool-icon_type_button",o,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:p,onClick:h,onPointerDown:m=>{var w;(w=e.onPointerDown)==null||w.call(e,{pointerType:m.pointerType||null,event:m})},onPointerUp:m=>{var w;(w=e.onPointerUp)==null||w.call(e,{pointerType:m.pointerType||null})},ref:r,disabled:a||!!e.disabled,children:[(e.icon||e.label)&&O.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&O.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&O.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&O.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return O.jsxs("label",{className:yn("tool-icon",e.className),title:e.title,onPointerDown:p=>{var m;g.current=p.pointerType||null,(m=e.onPointerDown)==null||m.call(e,{pointerType:p.pointerType||null,event:p})},onPointerUp:p=>{var m;(m=e.onPointerUp)==null||m.call(e,{pointerType:p.pointerType||null}),requestAnimationFrame(()=>{g.current=null})},children:[O.jsx("input",{className:`tool-icon_type_radio ${o}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${i}-${e.id}`,onChange:()=>{var p;(p=e.onChange)==null||p.call(e,{pointerType:g.current})},checked:e.checked,ref:r}),O.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&O.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});jn.displayName="ToolButton";const je=e=>e,aY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),lY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),uY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),cY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),fY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),hY=je(O.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3"}),O.jsx("path",{d:"M18 13.3l-6.3 -6.3"})]})),dY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),gY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:O.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),pY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{id:"terminal",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),mY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),vY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),yY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),wY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),xY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),CY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),EY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),SY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),T9=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:O.jsxs("g",{strokeWidth:"1.5",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),O.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),O.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),TY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:O.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",d:"M7.5 15.833c-3.583 1.167-3.583-2.083-5-2.5m10 4.167v-2.917c0-.833.083-1.166-.417-1.666 2.334-.25 4.584-1.167 4.584-5a3.833 3.833 0 0 0-1.084-2.667 3.5 3.5 0 0 0-.083-2.667s-.917-.25-2.917 1.084a10.25 10.25 0 0 0-5.166 0C5.417 2.333 4.5 2.583 4.5 2.583a3.5 3.5 0 0 0-.083 2.667 3.833 3.833 0 0 0-1.084 2.667c0 3.833 2.25 4.75 4.584 5-.5.5-.5 1-.417 1.666V17.5",strokeWidth:"1.25"})})),AY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:O.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),O.jsx("path",{d:"M15 8h.01"}),O.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),O.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),O.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),O.jsx("path",{d:"M19 16v6"}),O.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),DY=je(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:O.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),bY=je(O.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:O.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),BY=je(O.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:O.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),PY=je(O.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:O.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),MY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:O.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[O.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),O.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),RY=je(O.jsx("svg",{viewBox:"0 0 32 32",className:"no-color-icon",children:O.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[O.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),O.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),OY=je(O.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:O.jsx("polyline",{points:"20 6 9 17 4 12"})})),LY=je(O.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:O.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[O.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),O.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),_Y=je(O.jsx("svg",{viewBox:"0 0 24 24",children:O.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:O.jsxs("g",{id:"Group",children:[O.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),O.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),FY=je(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[O.jsx("path",{d:"M-18-19h60v40h-60z"}),O.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),kY=je(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:O.jsx("g",{fill:"currentColor",children:O.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),IY=je(O.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:O.jsxs("g",{fill:"currentColor",children:[O.jsx("rect",{rx:"1",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),O.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),HY=({currentColor:e})=>O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:O.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[O.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),O.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),NY=je(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:O.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),GY=je(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:O.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),px=je(O.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:O.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),zY=je(O.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{strokeWidth:"1.25",children:[O.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),O.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),GT=je(O.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),jY=je(O.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("g",{id:"image",stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M10.496 7c-.824 0-1.572-.675-1.498-1.5 0-.825.674-1.5 1.498-1.5.823 0 1.497.675 1.497 1.5S11.319 7 10.496 7zM13.8 9.476V2.2H2.2v5.432l.1-.078C3.132 6.904 4.029 6.5 5 6.5c.823 0 1.552.27 2.342.778.226.145.449.304.735.518.06.045.546.413.69.52 1.634 1.21 2.833 1.6 4.798 1.207l.235-.047zm0 1.523V10.7c-5 1-6.3-3-8.8-3-1.5 0-2.8 1.6-2.8 1.6v4.6h11.6V11zM14 1c.6 0 1 .536 1 1.071v11.784c0 .642-.4 1.071-1 1.071H2c-.6 0-1-.429-1-1.07V2.07c0-.535.4-1.07 1-1.07h12z"})})})),A9=je(O.jsx("svg",{stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:O.jsxs("g",{strokeWidth:1.8,fill:"none",children:[O.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),O.jsx("path",{d:"M12 3l-4 7h8z"}),O.jsx("path",{d:"M17 17m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"}),O.jsx("path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z"})]})})),UY=je(O.jsx("svg",{stroke:"currentColor",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",children:O.jsx("path",{stroke:"none",fill:"currentColor",d:"M407.48,111.18C335.587,108.103 269.573,152.338 245.08,220C220.587,152.338 154.573,108.103 82.68,111.18C80.285,168.229 107.577,222.632 154.74,254.82C178.908,271.419 193.35,298.951 193.27,328.27L193.27,379.13L296.9,379.13L296.9,328.27C296.816,298.953 311.255,271.42 335.42,254.82C382.596,222.644 409.892,168.233 407.48,111.18Z"})})),$Y=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M14.85,2.5 C15.4851275,2.5 16,3.01487254 16,3.65 L16,12.35 C16,12.9851275 15.4851275,13.5 14.85,13.5 L1.15,13.5 C0.514872538,13.5 0,12.9851275 0,12.35 L0,3.65 C0,3.01487254 0.514872538,2.5 1.15,2.5 L14.85,2.5 Z M14.85,3.7 L1.15,3.7 C1.17735931,3.7 1.2,3.72264069 1.2,3.75 L1.2,12.25 C1.2,12.2773593 1.17735931,12.3 1.15,12.3 L14.85,12.3 C14.8226407,12.3 14.8,12.2773593 14.8,12.25 L14.8,3.75 C14.8,3.72264069 14.8226407,3.7 14.85,3.7 Z M3.5,10.5 L3.5,5.5 L5.25,5.5 L7,7.8 L8.75,5.5 L10.5,5.5 L10.5,10.5 L8.75,10.5 L8.75,7.5 L7,9.8 L5.25,7.5 L5.25,10.5 L3.5,10.5 Z M12.5,10.5 L11,8.5 L12.5,8.5 L12.5,5.5 L11,5.5 L12.5,5.5 L12.5,8.5 L14,8.5 L12.5,10.5 Z"})})})),VY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",fill:"currentColor",children:O.jsx("path",{d:"M12.253 4.13h-1.2v-1a2.8 2.8 0 0 0-5.6 0v4a2.8 2.8 0 0 0 2.8 2.8v1.2a4 4 0 0 1-4-4v-4a4 4 0 0 1 8 0v1zm-8 8h1.2v1a2.8 2.8 0 0 0 5.6 0v-4a2.8 2.8 0 0 0-2.8-2.8v-1.2a4 4 0 0 1 4 4v4a4 4 0 0 1-8 0v-1z",transform:"rotate(46 8.253 8.13)"})})})),D9=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",children:O.jsx("path",{d:"M8.44521878,4.21103025 C8.58299906,3.97171622 8.8886944,3.88940684 9.12800843,4.02718711 L15.242109,7.54725833 C15.3194119,7.59176394 15.3834015,7.65613893 15.4274422,7.73370766 C15.5637831,7.97384463 15.4796398,8.27904026 15.2395028,8.41538118 L9.12748155,11.8855614 C9.0176214,11.947936 8.88822223,11.9664118 8.76529593,11.9372749 C8.4965984,11.8735862 8.33040588,11.604134 8.39409456,11.3354364 L9.018,8.69941945 L1.5,8.7 C1.22385763,8.7 1,8.47614237 1,8.2 L1,8 C1,7.72385763 1.22385763,7.5 1.5,7.5 L9.075,7.49941945 L8.39165922,4.57430951 C8.3700078,4.48168206 8.37536432,4.38547957 8.40609313,4.29679626 Z"})})})),b9=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",children:O.jsx("rect",{x:"1",y:"7.5",width:"14",height:"1.2",rx:".5"})})})),WY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",fill:"currentColor",fillRule:"evenodd",children:O.jsx("path",{d:"M13,4 L13,5.2 L6,5.2 L6,4 L13,4 Z M14,7.4 L14,8.6 L6,8.6 L6,7.4 L14,7.4 Z M10,10.8 L10,12 L6,12 L6,10.8 L10,10.8 Z M1,15.0041595 L1,13.8041595 L2.79468336,13.8041595 L2.79468336,9.78041534 C2.79468336,9.50369117 2.86643344,9.23268025 3.0016431,8.99336795 L3.09031773,8.85379228 L3.67068336,8.03815953 L3.05107199,7.08070632 C2.91160731,6.86500725 2.82653611,6.61956432 2.80205305,6.36536742 L2.79468336,6.21196672 L2.79468336,2.20015953 L1,2.2 L1,1 L3.39468336,1 C3.72605421,1 3.99468365,1.26862915 3.99468365,1.6 L3.99468365,6.21196672 C3.99468365,6.28902439 4.01694112,6.3644419 4.05878052,6.42915162 L4.89853762,7.72793804 C5.03190909,7.93421321 5.02607838,8.20094898 4.88382047,8.40119903 L4.06859195,9.54875958 C4.02051339,9.61643761 3.99468365,9.69739809 3.99468365,9.78041534 L3.99468365,14.4041595 C3.99468365,14.7355304 3.72605421,15.0041595 3.39468336,15.0041595 L1,15.0041595 Z"})})})),XY=je(O.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:O.jsx("g",{stroke:"none",fill:"currentColor",fillRule:"evenodd",children:O.jsx("path",{d:"M9,4 L9,5.2 L2,5.2 L2,4 L9,4 Z M10,7.4 L10,8.6 L2,8.6 L2,7.4 L10,7.4 Z M6,10.8 L6,12 L2,12 L2,10.8 L6,10.8 Z M15.0155409,1 L15.0155409,2.2 L13.2208576,2.2 L13.2208576,6.22374419 C13.2208576,6.50046836 13.1491075,6.77147928 13.0138978,7.01079158 L12.9252232,7.15036725 L12.3448576,7.966 L12.9644689,8.92345321 C13.1039336,9.13915228 13.1890048,9.38459521 13.2134879,9.63879211 L13.2208576,9.79219281 L13.2208576,13.804 L15.0155409,13.8041595 L15.0155409,15.0041595 L12.6208576,15.0041595 C12.2894867,15.0041595 12.0208573,14.7355304 12.0208573,14.4041595 L12.0208573,9.79219281 C12.0208573,9.71513514 11.9985998,9.63971763 11.9567604,9.57500791 L11.1170033,8.2762215 C10.9836318,8.06994632 10.9894625,7.80321055 11.1317204,7.6029605 L11.946949,6.45539995 C11.9950275,6.38772192 12.0208573,6.30676144 12.0208573,6.22374419 L12.0208573,1.6 C12.0208573,1.26862915 12.2894867,1 12.6208576,1 L15.0155409,1 Z"})})})),B9={[zi.default]:{strokeColor:gr,fill:"#FFFFFF"},[zi.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[zi.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[zi.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[zi.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[zi.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}};var Yo=(e=>(e.eraser="eraser",e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(Yo||{});const P9="freehand",zs={isFreehand:e=>e.type===P9},M9=[{icon:GT,pointer:Yo.feltTipPen,titleKey:"toolbar.pen"},{icon:hY,pointer:Yo.eraser,titleKey:"toolbar.eraser"}],qY=NT(M9,5),YY=({onPointerUp:e})=>{const{t:n}=si(),i=qi();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Col,{gap:1,children:qY.map((r,o)=>O.jsx(Yr.Row,{gap:1,children:r.map((a,u)=>O.jsx(jn,{className:yn({fillable:!1}),selected:i.pointer===a.pointer,type:"icon",size:"small",visible:!0,icon:a.icon,title:n(a.titleKey),"aria-label":n(a.titleKey),onPointerDown:()=>{Vr(i,Xi.dnd),un.updatePointerType(i,a.pointer)},onPointerUp:()=>{Vr(i,Xi.drawing),e(a.pointer)}},u))},o))})})},bw=[{icon:gY,title:"toolbar.shape.rectangle",pointer:we.rectangle},{icon:mY,title:"toolbar.shape.ellipse",pointer:we.ellipse},{icon:vY,title:"toolbar.shape.triangle",pointer:we.triangle},{icon:pY,title:"toolbar.shape.terminal",pointer:me.terminal},{icon:WY,title:"toolbar.shape.noteCurlyRight",pointer:me.noteCurlyRight},{icon:XY,title:"toolbar.shape.noteCurlyLeft",pointer:me.noteCurlyLeft},{icon:yY,title:"toolbar.shape.diamond",pointer:we.diamond},{icon:wY,title:"toolbar.shape.parallelogram",pointer:we.parallelogram},{icon:xY,title:"toolbar.shape.roundRectangle",pointer:we.roundRectangle}],KY=NT(bw,5),ZY=({onPointerUp:e})=>{const n=qi(),{t:i}=si();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Col,{gap:1,children:KY.map((r,o)=>O.jsx(Yr.Row,{gap:1,children:r.map((a,u)=>O.jsx(jn,{className:yn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:G.isPointer(n,a.pointer),icon:a.icon,title:i(a.title||"toolbar.shape"),"aria-label":i(a.title||"toolbar.shape"),onPointerDown:()=>{Vr(n,Xi.dnd),un.updatePointerType(n,a.pointer)},onPointerUp:()=>{Vr(n,Xi.drawing),e(a.pointer)}},u))},o))})})},Bw=[{icon:CY,title:"toolbar.arrow.straight",pointer:qn.straight},{icon:EY,title:"toolbar.arrow.elbow",pointer:qn.elbow},{icon:SY,title:"toolbar.arrow.curve",pointer:qn.curve}],QY=({onPointerUp:e})=>{const n=qi(),{t:i}=si();return O.jsx(Jo,{padding:1,children:O.jsx(Yr.Row,{gap:1,children:Bw.map((r,o)=>O.jsx(jn,{className:yn({fillable:!1}),type:"icon",size:"small",visible:!0,selected:G.isPointer(n,r.pointer),icon:r.icon,title:i(r.title),"aria-label":i(r.title),onPointerDown:()=>{Vr(n,Xi.drawing),un.updatePointerType(n,r.pointer)},onPointerUp:()=>{e(r.pointer)}},o))})})};function lC(){return typeof window<"u"}function xf(e){return R9(e)?(e.nodeName||"").toLowerCase():"#document"}function Ts(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function Fl(e){var n;return(n=(R9(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function R9(e){return lC()?e instanceof Node||e instanceof Ts(e).Node:!1}function Li(e){return lC()?e instanceof Element||e instanceof Ts(e).Element:!1}function hr(e){return lC()?e instanceof HTMLElement||e instanceof Ts(e).HTMLElement:!1}function VS(e){return!lC()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ts(e).ShadowRoot}const JY=new Set(["inline","contents"]);function Av(e){const{overflow:n,overflowX:i,overflowY:r,display:o}=Ks(e);return/auto|scroll|overlay|hidden|clip/.test(n+r+i)&&!JY.has(o)}const tK=new Set(["table","td","th"]);function eK(e){return tK.has(xf(e))}const nK=[":popover-open",":modal"];function uC(e){return nK.some(n=>{try{return e.matches(n)}catch{return!1}})}const iK=["transform","translate","scale","rotate","perspective"],rK=["transform","translate","scale","rotate","perspective","filter"],oK=["paint","layout","strict","content"];function zT(e){const n=cC(),i=Li(e)?Ks(e):e;return iK.some(r=>i[r]?i[r]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||rK.some(r=>(i.willChange||"").includes(r))||oK.some(r=>(i.contain||"").includes(r))}function sK(e){let n=Ou(e);for(;hr(n)&&!ff(n);){if(zT(n))return n;if(uC(n))return null;n=Ou(n)}return null}function cC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aK=new Set(["html","body","#document"]);function ff(e){return aK.has(xf(e))}function Ks(e){return Ts(e).getComputedStyle(e)}function fC(e){return Li(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ou(e){if(xf(e)==="html")return e;const n=e.assignedSlot||e.parentNode||VS(e)&&e.host||Fl(e);return VS(n)?n.host:n}function O9(e){const n=Ou(e);return ff(n)?e.ownerDocument?e.ownerDocument.body:e.body:hr(n)&&Av(n)?n:O9(n)}function ef(e,n,i){var r;n===void 0&&(n=[]),i===void 0&&(i=!0);const o=O9(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),u=Ts(o);if(a){const c=WS(u);return n.concat(u,u.visualViewport||[],Av(o)?o:[],c&&i?ef(c):[])}return n.concat(o,ef(o,[],i))}function WS(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gh(e){let n=e.activeElement;for(;((i=n)==null||(i=i.shadowRoot)==null?void 0:i.activeElement)!=null;){var i;n=n.shadowRoot.activeElement}return n}function ws(e,n){if(!e||!n)return!1;const i=n.getRootNode==null?void 0:n.getRootNode();if(e.contains(n))return!0;if(i&&VS(i)){let r=n;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function L9(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function _9(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(n=>{let{brand:i,version:r}=n;return i+"/"+r}).join(" "):navigator.userAgent}function lK(e){return e.mozInputSource===0&&e.isTrusted?!0:XS()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function uK(e){return fK()?!1:!XS()&&e.width===0&&e.height===0||XS()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function cK(){return/apple/i.test(navigator.vendor)}function XS(){const e=/android/i;return e.test(L9())||e.test(_9())}function fK(){return _9().includes("jsdom/")}function J8(e,n){return["mouse","pen"].includes(e)}function hK(e){return"nativeEvent"in e}function dK(e){return e.matches("html,body")}function Ta(e){return(e==null?void 0:e.ownerDocument)||document}function E3(e,n){if(n==null)return!1;if("composedPath"in e)return e.composedPath().includes(n);const i=e;return i.target!=null&&n.contains(i.target)}function jh(e){return"composedPath"in e?e.composedPath()[0]:e.target}const gK="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function F9(e){return hr(e)&&e.matches(gK)}function S3(e){e.preventDefault(),e.stopPropagation()}function pK(e){return e?e.getAttribute("role")==="combobox"&&F9(e):!1}const mx=Math.min,Zh=Math.max,vx=Math.round,ow=Math.floor,Tl=e=>({x:e,y:e}),mK={left:"right",right:"left",bottom:"top",top:"bottom"},vK={start:"end",end:"start"};function t4(e,n,i){return Zh(e,mx(n,i))}function hC(e,n){return typeof e=="function"?e(n):e}function ad(e){return e.split("-")[0]}function dC(e){return e.split("-")[1]}function k9(e){return e==="x"?"y":"x"}function I9(e){return e==="y"?"height":"width"}const yK=new Set(["top","bottom"]);function Qc(e){return yK.has(ad(e))?"y":"x"}function H9(e){return k9(Qc(e))}function wK(e,n,i){i===void 0&&(i=!1);const r=dC(e),o=H9(e),a=I9(o);let u=o==="x"?r===(i?"end":"start")?"right":"left":r==="start"?"bottom":"top";return n.reference[a]>n.floating[a]&&(u=yx(u)),[u,yx(u)]}function xK(e){const n=yx(e);return[qS(e),n,qS(n)]}function qS(e){return e.replace(/start|end/g,n=>vK[n])}const e4=["left","right"],n4=["right","left"],CK=["top","bottom"],EK=["bottom","top"];function SK(e,n,i){switch(e){case"top":case"bottom":return i?n?n4:e4:n?e4:n4;case"left":case"right":return n?CK:EK;default:return[]}}function TK(e,n,i,r){const o=dC(e);let a=SK(ad(e),i==="start",r);return o&&(a=a.map(u=>u+"-"+o),n&&(a=a.concat(a.map(qS)))),a}function yx(e){return e.replace(/left|right|bottom|top/g,n=>mK[n])}function AK(e){return{top:0,right:0,bottom:0,left:0,...e}}function DK(e){return typeof e!="number"?AK(e):{top:e,right:e,bottom:e,left:e}}function wx(e){const{x:n,y:i,width:r,height:o}=e;return{width:r,height:o,top:i,left:n,right:n+r,bottom:i+o,x:n,y:i}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var bK=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],xx=bK.join(","),N9=typeof Element>"u",Hg=N9?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Cx=!N9&&Element.prototype.getRootNode?function(e){var n;return e==null||(n=e.getRootNode)===null||n===void 0?void 0:n.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Ex=function e(n,i){var r;i===void 0&&(i=!0);var o=n==null||(r=n.getAttribute)===null||r===void 0?void 0:r.call(n,"inert"),a=o===""||o==="true",u=a||i&&n&&e(n.parentNode);return u},BK=function(n){var i,r=n==null||(i=n.getAttribute)===null||i===void 0?void 0:i.call(n,"contenteditable");return r===""||r==="true"},PK=function(n,i,r){if(Ex(n))return[];var o=Array.prototype.slice.apply(n.querySelectorAll(xx));return i&&Hg.call(n,xx)&&o.unshift(n),o=o.filter(r),o},MK=function e(n,i,r){for(var o=[],a=Array.from(n);a.length;){var u=a.shift();if(!Ex(u,!1))if(u.tagName==="SLOT"){var c=u.assignedElements(),h=c.length?c:u.children,g=e(h,!0,r);r.flatten?o.push.apply(o,g):o.push({scopeParent:u,candidates:g})}else{var p=Hg.call(u,xx);p&&r.filter(u)&&(i||!n.includes(u))&&o.push(u);var m=u.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(u),w=!Ex(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(u));if(m&&w){var x=e(m===!0?u.children:m.children,!0,r);r.flatten?o.push.apply(o,x):o.push({scopeParent:u,candidates:x})}else a.unshift.apply(a,u.children)}}return o},G9=function(n){return!isNaN(parseInt(n.getAttribute("tabindex"),10))},z9=function(n){if(!n)throw new Error("No node provided");return n.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(n.tagName)||BK(n))&&!G9(n)?0:n.tabIndex},RK=function(n,i){var r=z9(n);return r<0&&i&&!G9(n)?0:r},OK=function(n,i){return n.tabIndex===i.tabIndex?n.documentOrder-i.documentOrder:n.tabIndex-i.tabIndex},j9=function(n){return n.tagName==="INPUT"},LK=function(n){return j9(n)&&n.type==="hidden"},_K=function(n){var i=n.tagName==="DETAILS"&&Array.prototype.slice.apply(n.children).some(function(r){return r.tagName==="SUMMARY"});return i},FK=function(n,i){for(var r=0;r<n.length;r++)if(n[r].checked&&n[r].form===i)return n[r]},kK=function(n){if(!n.name)return!0;var i=n.form||Cx(n),r=function(c){return i.querySelectorAll('input[type="radio"][name="'+c+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(n.name));else try{o=r(n.name)}catch(u){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",u.message),!1}var a=FK(o,n.form);return!a||a===n},IK=function(n){return j9(n)&&n.type==="radio"},HK=function(n){return IK(n)&&!kK(n)},NK=function(n){var i,r=n&&Cx(n),o=(i=r)===null||i===void 0?void 0:i.host,a=!1;if(r&&r!==n){var u,c,h;for(a=!!((u=o)!==null&&u!==void 0&&(c=u.ownerDocument)!==null&&c!==void 0&&c.contains(o)||n!=null&&(h=n.ownerDocument)!==null&&h!==void 0&&h.contains(n));!a&&o;){var g,p,m;r=Cx(o),o=(g=r)===null||g===void 0?void 0:g.host,a=!!((p=o)!==null&&p!==void 0&&(m=p.ownerDocument)!==null&&m!==void 0&&m.contains(o))}}return a},i4=function(n){var i=n.getBoundingClientRect(),r=i.width,o=i.height;return r===0&&o===0},GK=function(n,i){var r=i.displayCheck,o=i.getShadowRoot;if(getComputedStyle(n).visibility==="hidden")return!0;var a=Hg.call(n,"details>summary:first-of-type"),u=a?n.parentElement:n;if(Hg.call(u,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var c=n;n;){var h=n.parentElement,g=Cx(n);if(h&&!h.shadowRoot&&o(h)===!0)return i4(n);n.assignedSlot?n=n.assignedSlot:!h&&g!==n.ownerDocument?n=g.host:n=h}n=c}if(NK(n))return!n.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return i4(n);return!1},zK=function(n){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(n.tagName))for(var i=n.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var r=0;r<i.children.length;r++){var o=i.children.item(r);if(o.tagName==="LEGEND")return Hg.call(i,"fieldset[disabled] *")?!0:!o.contains(n)}return!0}i=i.parentElement}return!1},jK=function(n,i){return!(i.disabled||Ex(i)||LK(i)||GK(i,n)||_K(i)||zK(i))},YS=function(n,i){return!(HK(i)||z9(i)<0||!jK(n,i))},UK=function(n){var i=parseInt(n.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},$K=function e(n){var i=[],r=[];return n.forEach(function(o,a){var u=!!o.scopeParent,c=u?o.scopeParent:o,h=RK(c,u),g=u?e(o.candidates):c;h===0?u?i.push.apply(i,g):i.push(c):r.push({documentOrder:a,tabIndex:h,item:o,isScope:u,content:g})}),r.sort(OK).reduce(function(o,a){return a.isScope?o.push.apply(o,a.content):o.push(a.content),o},[]).concat(i)},gC=function(n,i){i=i||{};var r;return i.getShadowRoot?r=MK([n],i.includeContainer,{filter:YS.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:UK}):r=PK(n,i.includeContainer,YS.bind(null,i)),$K(r)},VK=function(n,i){if(i=i||{},!n)throw new Error("No node provided");return Hg.call(n,xx)===!1?!1:YS(i,n)};function r4(e,n,i){let{reference:r,floating:o}=e;const a=Qc(n),u=H9(n),c=I9(u),h=ad(n),g=a==="y",p=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,w=r[c]/2-o[c]/2;let x;switch(h){case"top":x={x:p,y:r.y-o.height};break;case"bottom":x={x:p,y:r.y+r.height};break;case"right":x={x:r.x+r.width,y:m};break;case"left":x={x:r.x-o.width,y:m};break;default:x={x:r.x,y:r.y}}switch(dC(n)){case"start":x[u]-=w*(i&&g?-1:1);break;case"end":x[u]+=w*(i&&g?-1:1);break}return x}const WK=async(e,n,i)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:u}=i,c=a.filter(Boolean),h=await(u.isRTL==null?void 0:u.isRTL(n));let g=await u.getElementRects({reference:e,floating:n,strategy:o}),{x:p,y:m}=r4(g,r,h),w=r,x={},T=0;for(let D=0;D<c.length;D++){const{name:b,fn:B}=c[D],{x:A,y:H,data:R,reset:k}=await B({x:p,y:m,initialPlacement:r,placement:w,strategy:o,middlewareData:x,rects:g,platform:u,elements:{reference:e,floating:n}});p=A??p,m=H??m,x={...x,[b]:{...x[b],...R}},k&&T<=50&&(T++,typeof k=="object"&&(k.placement&&(w=k.placement),k.rects&&(g=k.rects===!0?await u.getElementRects({reference:e,floating:n,strategy:o}):k.rects),{x:p,y:m}=r4(g,w,h)),D=-1)}return{x:p,y:m,placement:w,strategy:o,middlewareData:x}};async function U9(e,n){var i;n===void 0&&(n={});const{x:r,y:o,platform:a,rects:u,elements:c,strategy:h}=e,{boundary:g="clippingAncestors",rootBoundary:p="viewport",elementContext:m="floating",altBoundary:w=!1,padding:x=0}=hC(n,e),T=DK(x),b=c[w?m==="floating"?"reference":"floating":m],B=wx(await a.getClippingRect({element:(i=await(a.isElement==null?void 0:a.isElement(b)))==null||i?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:g,rootBoundary:p,strategy:h})),A=m==="floating"?{x:r,y:o,width:u.floating.width,height:u.floating.height}:u.reference,H=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),R=await(a.isElement==null?void 0:a.isElement(H))?await(a.getScale==null?void 0:a.getScale(H))||{x:1,y:1}:{x:1,y:1},k=wx(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:A,offsetParent:H,strategy:h}):A);return{top:(B.top-k.top+T.top)/R.y,bottom:(k.bottom-B.bottom+T.bottom)/R.y,left:(B.left-k.left+T.left)/R.x,right:(k.right-B.right+T.right)/R.x}}const XK=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,r;const{placement:o,middlewareData:a,rects:u,initialPlacement:c,platform:h,elements:g}=n,{mainAxis:p=!0,crossAxis:m=!0,fallbackPlacements:w,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:D=!0,...b}=hC(e,n);if((i=a.arrow)!=null&&i.alignmentOffset)return{};const B=ad(o),A=Qc(c),H=ad(c)===c,R=await(h.isRTL==null?void 0:h.isRTL(g.floating)),k=w||(H||!D?[yx(c)]:xK(c)),W=T!=="none";!w&&W&&k.push(...TK(c,D,T,R));const U=[c,...k],nt=await U9(n,b),st=[];let ft=((r=a.flip)==null?void 0:r.overflows)||[];if(p&&st.push(nt[B]),m){const wt=wK(o,u,R);st.push(nt[wt[0]],nt[wt[1]])}if(ft=[...ft,{placement:o,overflows:st}],!st.every(wt=>wt<=0)){var Et,ct;const wt=(((Et=a.flip)==null?void 0:Et.index)||0)+1,V=U[wt];if(V&&(!(m==="alignment"?A!==Qc(V):!1)||ft.every(N=>Qc(N.placement)===A?N.overflows[0]>0:!0)))return{data:{index:wt,overflows:ft},reset:{placement:V}};let P=(ct=ft.filter(_=>_.overflows[0]<=0).sort((_,N)=>_.overflows[1]-N.overflows[1])[0])==null?void 0:ct.placement;if(!P)switch(x){case"bestFit":{var mt;const _=(mt=ft.filter(N=>{if(W){const $=Qc(N.placement);return $===A||$==="y"}return!0}).map(N=>[N.placement,N.overflows.filter($=>$>0).reduce(($,Q)=>$+Q,0)]).sort((N,$)=>N[1]-$[1])[0])==null?void 0:mt[0];_&&(P=_);break}case"initialPlacement":P=c;break}if(o!==P)return{reset:{placement:P}}}return{}}}},qK=new Set(["left","top"]);async function YK(e,n){const{placement:i,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),u=ad(i),c=dC(i),h=Qc(i)==="y",g=qK.has(u)?-1:1,p=a&&h?-1:1,m=hC(n,e);let{mainAxis:w,crossAxis:x,alignmentAxis:T}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof T=="number"&&(x=c==="end"?T*-1:T),h?{x:x*p,y:w*g}:{x:w*g,y:x*p}}const KK=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var i,r;const{x:o,y:a,placement:u,middlewareData:c}=n,h=await YK(n,e);return u===((i=c.offset)==null?void 0:i.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+h.x,y:a+h.y,data:{...h,placement:u}}}}},ZK=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:r,placement:o}=n,{mainAxis:a=!0,crossAxis:u=!1,limiter:c={fn:b=>{let{x:B,y:A}=b;return{x:B,y:A}}},...h}=hC(e,n),g={x:i,y:r},p=await U9(n,h),m=Qc(ad(o)),w=k9(m);let x=g[w],T=g[m];if(a){const b=w==="y"?"top":"left",B=w==="y"?"bottom":"right",A=x+p[b],H=x-p[B];x=t4(A,x,H)}if(u){const b=m==="y"?"top":"left",B=m==="y"?"bottom":"right",A=T+p[b],H=T-p[B];T=t4(A,T,H)}const D=c.fn({...n,[w]:x,[m]:T});return{...D,data:{x:D.x-i,y:D.y-r,enabled:{[w]:a,[m]:u}}}}}};function $9(e){const n=Ks(e);let i=parseFloat(n.width)||0,r=parseFloat(n.height)||0;const o=hr(e),a=o?e.offsetWidth:i,u=o?e.offsetHeight:r,c=vx(i)!==a||vx(r)!==u;return c&&(i=a,r=u),{width:i,height:r,$:c}}function jT(e){return Li(e)?e:e.contextElement}function Sg(e){const n=jT(e);if(!hr(n))return Tl(1);const i=n.getBoundingClientRect(),{width:r,height:o,$:a}=$9(n);let u=(a?vx(i.width):i.width)/r,c=(a?vx(i.height):i.height)/o;return(!u||!Number.isFinite(u))&&(u=1),(!c||!Number.isFinite(c))&&(c=1),{x:u,y:c}}const QK=Tl(0);function V9(e){const n=Ts(e);return!cC()||!n.visualViewport?QK:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function JK(e,n,i){return n===void 0&&(n=!1),!i||n&&i!==Ts(e)?!1:n}function ld(e,n,i,r){n===void 0&&(n=!1),i===void 0&&(i=!1);const o=e.getBoundingClientRect(),a=jT(e);let u=Tl(1);n&&(r?Li(r)&&(u=Sg(r)):u=Sg(e));const c=JK(a,i,r)?V9(a):Tl(0);let h=(o.left+c.x)/u.x,g=(o.top+c.y)/u.y,p=o.width/u.x,m=o.height/u.y;if(a){const w=Ts(a),x=r&&Li(r)?Ts(r):r;let T=w,D=WS(T);for(;D&&r&&x!==T;){const b=Sg(D),B=D.getBoundingClientRect(),A=Ks(D),H=B.left+(D.clientLeft+parseFloat(A.paddingLeft))*b.x,R=B.top+(D.clientTop+parseFloat(A.paddingTop))*b.y;h*=b.x,g*=b.y,p*=b.x,m*=b.y,h+=H,g+=R,T=Ts(D),D=WS(T)}}return wx({width:p,height:m,x:h,y:g})}function pC(e,n){const i=fC(e).scrollLeft;return n?n.left+i:ld(Fl(e)).left+i}function W9(e,n){const i=e.getBoundingClientRect(),r=i.left+n.scrollLeft-pC(e,i),o=i.top+n.scrollTop;return{x:r,y:o}}function tZ(e){let{elements:n,rect:i,offsetParent:r,strategy:o}=e;const a=o==="fixed",u=Fl(r),c=n?uC(n.floating):!1;if(r===u||c&&a)return i;let h={scrollLeft:0,scrollTop:0},g=Tl(1);const p=Tl(0),m=hr(r);if((m||!m&&!a)&&((xf(r)!=="body"||Av(u))&&(h=fC(r)),hr(r))){const x=ld(r);g=Sg(r),p.x=x.x+r.clientLeft,p.y=x.y+r.clientTop}const w=u&&!m&&!a?W9(u,h):Tl(0);return{width:i.width*g.x,height:i.height*g.y,x:i.x*g.x-h.scrollLeft*g.x+p.x+w.x,y:i.y*g.y-h.scrollTop*g.y+p.y+w.y}}function eZ(e){return Array.from(e.getClientRects())}function nZ(e){const n=Fl(e),i=fC(e),r=e.ownerDocument.body,o=Zh(n.scrollWidth,n.clientWidth,r.scrollWidth,r.clientWidth),a=Zh(n.scrollHeight,n.clientHeight,r.scrollHeight,r.clientHeight);let u=-i.scrollLeft+pC(e);const c=-i.scrollTop;return Ks(r).direction==="rtl"&&(u+=Zh(n.clientWidth,r.clientWidth)-o),{width:o,height:a,x:u,y:c}}const o4=25;function iZ(e,n){const i=Ts(e),r=Fl(e),o=i.visualViewport;let a=r.clientWidth,u=r.clientHeight,c=0,h=0;if(o){a=o.width,u=o.height;const p=cC();(!p||p&&n==="fixed")&&(c=o.offsetLeft,h=o.offsetTop)}const g=pC(r);if(g<=0){const p=r.ownerDocument,m=p.body,w=getComputedStyle(m),x=p.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,T=Math.abs(r.clientWidth-m.clientWidth-x);T<=o4&&(a-=T)}else g<=o4&&(a+=g);return{width:a,height:u,x:c,y:h}}const rZ=new Set(["absolute","fixed"]);function oZ(e,n){const i=ld(e,!0,n==="fixed"),r=i.top+e.clientTop,o=i.left+e.clientLeft,a=hr(e)?Sg(e):Tl(1),u=e.clientWidth*a.x,c=e.clientHeight*a.y,h=o*a.x,g=r*a.y;return{width:u,height:c,x:h,y:g}}function s4(e,n,i){let r;if(n==="viewport")r=iZ(e,i);else if(n==="document")r=nZ(Fl(e));else if(Li(n))r=oZ(n,i);else{const o=V9(e);r={x:n.x-o.x,y:n.y-o.y,width:n.width,height:n.height}}return wx(r)}function X9(e,n){const i=Ou(e);return i===n||!Li(i)||ff(i)?!1:Ks(i).position==="fixed"||X9(i,n)}function sZ(e,n){const i=n.get(e);if(i)return i;let r=ef(e,[],!1).filter(c=>Li(c)&&xf(c)!=="body"),o=null;const a=Ks(e).position==="fixed";let u=a?Ou(e):e;for(;Li(u)&&!ff(u);){const c=Ks(u),h=zT(u);!h&&c.position==="fixed"&&(o=null),(a?!h&&!o:!h&&c.position==="static"&&!!o&&rZ.has(o.position)||Av(u)&&!h&&X9(e,u))?r=r.filter(p=>p!==u):o=c,u=Ou(u)}return n.set(e,r),r}function aZ(e){let{element:n,boundary:i,rootBoundary:r,strategy:o}=e;const u=[...i==="clippingAncestors"?uC(n)?[]:sZ(n,this._c):[].concat(i),r],c=u[0],h=u.reduce((g,p)=>{const m=s4(n,p,o);return g.top=Zh(m.top,g.top),g.right=mx(m.right,g.right),g.bottom=mx(m.bottom,g.bottom),g.left=Zh(m.left,g.left),g},s4(n,c,o));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function lZ(e){const{width:n,height:i}=$9(e);return{width:n,height:i}}function uZ(e,n,i){const r=hr(n),o=Fl(n),a=i==="fixed",u=ld(e,!0,a,n);let c={scrollLeft:0,scrollTop:0};const h=Tl(0);function g(){h.x=pC(o)}if(r||!r&&!a)if((xf(n)!=="body"||Av(o))&&(c=fC(n)),r){const x=ld(n,!0,a,n);h.x=x.x+n.clientLeft,h.y=x.y+n.clientTop}else o&&g();a&&!r&&o&&g();const p=o&&!r&&!a?W9(o,c):Tl(0),m=u.left+c.scrollLeft-h.x-p.x,w=u.top+c.scrollTop-h.y-p.y;return{x:m,y:w,width:u.width,height:u.height}}function T3(e){return Ks(e).position==="static"}function a4(e,n){if(!hr(e)||Ks(e).position==="fixed")return null;if(n)return n(e);let i=e.offsetParent;return Fl(e)===i&&(i=i.ownerDocument.body),i}function q9(e,n){const i=Ts(e);if(uC(e))return i;if(!hr(e)){let o=Ou(e);for(;o&&!ff(o);){if(Li(o)&&!T3(o))return o;o=Ou(o)}return i}let r=a4(e,n);for(;r&&eK(r)&&T3(r);)r=a4(r,n);return r&&ff(r)&&T3(r)&&!zT(r)?i:r||sK(e)||i}const cZ=async function(e){const n=this.getOffsetParent||q9,i=this.getDimensions,r=await i(e.floating);return{reference:uZ(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function fZ(e){return Ks(e).direction==="rtl"}const hZ={convertOffsetParentRelativeRectToViewportRelativeRect:tZ,getDocumentElement:Fl,getClippingRect:aZ,getOffsetParent:q9,getElementRects:cZ,getClientRects:eZ,getDimensions:lZ,getScale:Sg,isElement:Li,isRTL:fZ};function Y9(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function dZ(e,n){let i=null,r;const o=Fl(e);function a(){var c;clearTimeout(r),(c=i)==null||c.disconnect(),i=null}function u(c,h){c===void 0&&(c=!1),h===void 0&&(h=1),a();const g=e.getBoundingClientRect(),{left:p,top:m,width:w,height:x}=g;if(c||n(),!w||!x)return;const T=ow(m),D=ow(o.clientWidth-(p+w)),b=ow(o.clientHeight-(m+x)),B=ow(p),H={rootMargin:-T+"px "+-D+"px "+-b+"px "+-B+"px",threshold:Zh(0,mx(1,h))||1};let R=!0;function k(W){const U=W[0].intersectionRatio;if(U!==h){if(!R)return u();U?u(!1,U):r=setTimeout(()=>{u(!1,1e-7)},1e3)}U===1&&!Y9(g,e.getBoundingClientRect())&&u(),R=!1}try{i=new IntersectionObserver(k,{...H,root:o.ownerDocument})}catch{i=new IntersectionObserver(k,H)}i.observe(e)}return u(!0),a}function gZ(e,n,i,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:u=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,g=jT(e),p=o||a?[...g?ef(g):[],...ef(n)]:[];p.forEach(B=>{o&&B.addEventListener("scroll",i,{passive:!0}),a&&B.addEventListener("resize",i)});const m=g&&c?dZ(g,i):null;let w=-1,x=null;u&&(x=new ResizeObserver(B=>{let[A]=B;A&&A.target===g&&x&&(x.unobserve(n),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var H;(H=x)==null||H.observe(n)})),i()}),g&&!h&&x.observe(g),x.observe(n));let T,D=h?ld(e):null;h&&b();function b(){const B=ld(e);D&&!Y9(D,B)&&i(),D=B,T=requestAnimationFrame(b)}return i(),()=>{var B;p.forEach(A=>{o&&A.removeEventListener("scroll",i),a&&A.removeEventListener("resize",i)}),m==null||m(),(B=x)==null||B.disconnect(),x=null,h&&cancelAnimationFrame(T)}}const pZ=KK,mZ=ZK,vZ=XK,yZ=(e,n,i)=>{const r=new Map,o={platform:hZ,...i},a={...o.platform,_c:r};return WK(e,n,{...o,platform:a})};var wZ=typeof document<"u",xZ=function(){},Pw=wZ?K.useLayoutEffect:xZ;function Sx(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let i,r,o;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==n.length)return!1;for(r=i;r--!==0;)if(!Sx(e[r],n[r]))return!1;return!0}if(o=Object.keys(e),i=o.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!{}.hasOwnProperty.call(n,o[r]))return!1;for(r=i;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Sx(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}function K9(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function l4(e,n){const i=K9(e);return Math.round(n*i)/i}function A3(e){const n=K.useRef(e);return Pw(()=>{n.current=e}),n}function CZ(e){e===void 0&&(e={});const{placement:n="bottom",strategy:i="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:u}={},transform:c=!0,whileElementsMounted:h,open:g}=e,[p,m]=K.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[w,x]=K.useState(r);Sx(w,r)||x(r);const[T,D]=K.useState(null),[b,B]=K.useState(null),A=K.useCallback(N=>{N!==W.current&&(W.current=N,D(N))},[]),H=K.useCallback(N=>{N!==U.current&&(U.current=N,B(N))},[]),R=a||T,k=u||b,W=K.useRef(null),U=K.useRef(null),nt=K.useRef(p),st=h!=null,ft=A3(h),Et=A3(o),ct=A3(g),mt=K.useCallback(()=>{if(!W.current||!U.current)return;const N={placement:n,strategy:i,middleware:w};Et.current&&(N.platform=Et.current),yZ(W.current,U.current,N).then($=>{const Q={...$,isPositioned:ct.current!==!1};wt.current&&!Sx(nt.current,Q)&&(nt.current=Q,U5.flushSync(()=>{m(Q)}))})},[w,n,i,Et,ct]);Pw(()=>{g===!1&&nt.current.isPositioned&&(nt.current.isPositioned=!1,m(N=>({...N,isPositioned:!1})))},[g]);const wt=K.useRef(!1);Pw(()=>(wt.current=!0,()=>{wt.current=!1}),[]),Pw(()=>{if(R&&(W.current=R),k&&(U.current=k),R&&k){if(ft.current)return ft.current(R,k,mt);mt()}},[R,k,mt,ft,st]);const V=K.useMemo(()=>({reference:W,floating:U,setReference:A,setFloating:H}),[A,H]),P=K.useMemo(()=>({reference:R,floating:k}),[R,k]),_=K.useMemo(()=>{const N={position:i,left:0,top:0};if(!P.floating)return N;const $=l4(P.floating,p.x),Q=l4(P.floating,p.y);return c?{...N,transform:"translate("+$+"px, "+Q+"px)",...K9(P.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:$,top:Q}},[i,c,P.floating,p.x,p.y]);return K.useMemo(()=>({...p,update:mt,refs:V,elements:P,floatingStyles:_}),[p,mt,V,P,_])}const UT=(e,n)=>({...pZ(e),options:[e,n]}),EZ=(e,n)=>({...mZ(e),options:[e,n]}),$T=(e,n)=>({...vZ(e),options:[e,n]});function mC(e){return K.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})},e)}const Z9={...nR},SZ=Z9.useInsertionEffect,TZ=SZ||(e=>e());function Wc(e){const n=K.useRef(()=>{});return TZ(()=>{n.current=e}),K.useCallback(function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}var Ss=typeof document<"u"?K.useLayoutEffect:K.useEffect;function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ov.apply(this,arguments)}let u4=!1,AZ=0;const c4=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+AZ++;function DZ(){const[e,n]=K.useState(()=>u4?c4():void 0);return Ss(()=>{e==null&&n(c4())},[]),K.useEffect(()=>{u4=!0},[]),e}const bZ=Z9.useId,Dv=bZ||DZ;function BZ(){const e=new Map;return{emit(n,i){var r;(r=e.get(n))==null||r.forEach(o=>o(i))},on(n,i){e.set(n,[...e.get(n)||[],i])},off(n,i){var r;e.set(n,((r=e.get(n))==null?void 0:r.filter(o=>o!==i))||[])}}}const PZ=K.createContext(null),MZ=K.createContext(null),Q9=()=>{var e;return((e=K.useContext(PZ))==null?void 0:e.id)||null},VT=()=>K.useContext(MZ);function sv(e){return"data-floating-ui-"+e}function D3(e){const n=K.useRef(e);return Ss(()=>{n.current=e}),n}let f4=0;function rg(e,n){n===void 0&&(n={});const{preventScroll:i=!1,cancelPrevious:r=!0,sync:o=!1}=n;r&&cancelAnimationFrame(f4);const a=()=>e==null?void 0:e.focus({preventScroll:i});o?a():f4=requestAnimationFrame(a)}function RZ(e,n){var i;let r=[],o=(i=e.find(a=>a.id===n))==null?void 0:i.parentId;for(;o;){const a=e.find(u=>u.id===o);o=a==null?void 0:a.parentId,a&&(r=r.concat(a))}return r}function Dm(e,n){let i=e.filter(o=>{var a;return o.parentId===n&&((a=o.context)==null?void 0:a.open)}),r=i;for(;r.length;)r=e.filter(o=>{var a;return(a=r)==null?void 0:a.some(u=>{var c;return o.parentId===u.id&&((c=o.context)==null?void 0:c.open)})}),i=i.concat(r);return i}let og=new WeakMap,sw=new WeakSet,aw={},b3=0;const OZ=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,J9=e=>e&&(e.host||J9(e.parentNode)),LZ=(e,n)=>n.map(i=>{if(e.contains(i))return i;const r=J9(i);return e.contains(r)?r:null}).filter(i=>i!=null);function _Z(e,n,i,r){const o="data-floating-ui-inert",a=r?"inert":i?"aria-hidden":null,u=LZ(n,e),c=new Set,h=new Set(u),g=[];aw[o]||(aw[o]=new WeakMap);const p=aw[o];u.forEach(m),w(n),c.clear();function m(x){!x||c.has(x)||(c.add(x),x.parentNode&&m(x.parentNode))}function w(x){!x||h.has(x)||[].forEach.call(x.children,T=>{if(xf(T)!=="script")if(c.has(T))w(T);else{const D=a?T.getAttribute(a):null,b=D!==null&&D!=="false",B=(og.get(T)||0)+1,A=(p.get(T)||0)+1;og.set(T,B),p.set(T,A),g.push(T),B===1&&b&&sw.add(T),A===1&&T.setAttribute(o,""),!b&&a&&T.setAttribute(a,"true")}})}return b3++,()=>{g.forEach(x=>{const T=(og.get(x)||0)-1,D=(p.get(x)||0)-1;og.set(x,T),p.set(x,D),T||(!sw.has(x)&&a&&x.removeAttribute(a),sw.delete(x)),D||x.removeAttribute(o)}),b3--,b3||(og=new WeakMap,og=new WeakMap,sw=new WeakSet,aw={})}}function h4(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!1);const r=Ta(e[0]).body;return _Z(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,n,i)}const av=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function tM(e,n){const i=gC(e,av());n==="prev"&&i.reverse();const r=i.indexOf(Gh(Ta(e)));return i.slice(r+1)[0]}function eM(){return tM(document.body,"next")}function nM(){return tM(document.body,"prev")}function bm(e,n){const i=n||e.currentTarget,r=e.relatedTarget;return!r||!ws(i,r)}function FZ(e){gC(e,av()).forEach(i=>{i.dataset.tabindex=i.getAttribute("tabindex")||"",i.setAttribute("tabindex","-1")})}function d4(e){e.querySelectorAll("[data-tabindex]").forEach(i=>{const r=i.dataset.tabindex;delete i.dataset.tabindex,r?i.setAttribute("tabindex",r):i.removeAttribute("tabindex")})}const vC={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let kZ;function g4(e){e.key==="Tab"&&(e.target,clearTimeout(kZ))}const Tx=K.forwardRef(function(n,i){const[r,o]=K.useState();Ss(()=>(cK()&&o("button"),document.addEventListener("keydown",g4),()=>{document.removeEventListener("keydown",g4)}),[]);const a={ref:i,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[sv("focus-guard")]:"",style:vC};return K.createElement("span",ov({},n,a))}),iM=K.createContext(null),p4=sv("portal");function IZ(e){e===void 0&&(e={});const{id:n,root:i}=e,r=Dv(),o=oM(),[a,u]=K.useState(null),c=K.useRef(null);return Ss(()=>()=>{a==null||a.remove(),queueMicrotask(()=>{c.current=null})},[a]),Ss(()=>{if(!r||c.current)return;const h=n?document.getElementById(n):null;if(!h)return;const g=document.createElement("div");g.id=r,g.setAttribute(p4,""),h.appendChild(g),c.current=g,u(g)},[n,r]),Ss(()=>{if(i===null||!r||c.current)return;let h=i||(o==null?void 0:o.portalNode);h&&!Li(h)&&(h=h.current),h=h||document.body;let g=null;n&&(g=document.createElement("div"),g.id=n,h.appendChild(g));const p=document.createElement("div");p.id=r,p.setAttribute(p4,""),h=g||h,h.appendChild(p),c.current=p,u(p)},[n,i,r,o]),a}function rM(e){const{children:n,id:i,root:r,preserveTabOrder:o=!0}=e,a=IZ({id:i,root:r}),[u,c]=K.useState(null),h=K.useRef(null),g=K.useRef(null),p=K.useRef(null),m=K.useRef(null),w=u==null?void 0:u.modal,x=u==null?void 0:u.open,T=!!u&&!u.modal&&u.open&&o&&!!(r||a);return K.useEffect(()=>{if(!a||!o||w)return;function D(b){a&&bm(b)&&(b.type==="focusin"?d4:FZ)(a)}return a.addEventListener("focusin",D,!0),a.addEventListener("focusout",D,!0),()=>{a.removeEventListener("focusin",D,!0),a.removeEventListener("focusout",D,!0)}},[a,o,w]),K.useEffect(()=>{a&&(x||d4(a))},[x,a]),K.createElement(iM.Provider,{value:K.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:h,afterOutsideRef:g,beforeInsideRef:p,afterInsideRef:m,portalNode:a,setFocusManagerState:c}),[o,a])},T&&a&&K.createElement(Tx,{"data-type":"outside",ref:h,onFocus:D=>{if(bm(D,a)){var b;(b=p.current)==null||b.focus()}else{const B=nM()||(u==null?void 0:u.refs.domReference.current);B==null||B.focus()}}}),T&&a&&K.createElement("span",{"aria-owns":a.id,style:vC}),a&&U5.createPortal(n,a),T&&a&&K.createElement(Tx,{"data-type":"outside",ref:g,onFocus:D=>{if(bm(D,a)){var b;(b=m.current)==null||b.focus()}else{const B=eM()||(u==null?void 0:u.refs.domReference.current);B==null||B.focus(),u!=null&&u.closeOnFocusOut&&(u==null||u.onOpenChange(!1,D.nativeEvent,"focus-out"))}}}))}const oM=()=>K.useContext(iM),KS="data-floating-ui-focusable";function HZ(e){return e?e.hasAttribute(KS)?e:e.querySelector("["+KS+"]")||e:null}const NZ=20;let zh=[];function B3(e){zh=zh.filter(i=>i.isConnected);let n=e;if(!(!n||xf(n)==="body")){if(!VK(n,av())){const i=gC(n,av())[0];i&&(n=i)}zh.push(n),zh.length>NZ&&(zh=zh.slice(-20))}}function m4(){return zh.slice().reverse().find(e=>e.isConnected)}const GZ=K.forwardRef(function(n,i){return K.createElement("button",ov({},n,{type:"button",ref:i,tabIndex:-1,style:vC}))});function sM(e){const{context:n,children:i,disabled:r=!1,order:o=["content"],guards:a=!0,initialFocus:u=0,returnFocus:c=!0,restoreFocus:h=!1,modal:g=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:m=!0}=e,{open:w,refs:x,nodeId:T,onOpenChange:D,events:b,dataRef:B,floatingId:A,elements:{domReference:H,floating:R}}=n,k=typeof u=="number"&&u<0,W=pK(H)&&k,U=OZ()?a:!0,nt=D3(o),st=D3(u),ft=D3(c),Et=VT(),ct=oM(),mt=K.useRef(null),wt=K.useRef(null),V=K.useRef(!1),P=K.useRef(!1),_=K.useRef(-1),N=ct!=null,$=HZ(R),Q=Wc(function(it){return it===void 0&&(it=$),it?gC(it,av()):[]}),F=Wc(it=>{const xt=Q(it);return nt.current.map(gt=>H&&gt==="reference"?H:$&&gt==="floating"?$:xt).filter(Boolean).flat()});K.useEffect(()=>{if(r||!g)return;function it(gt){if(gt.key==="Tab"){ws($,Gh(Ta($)))&&Q().length===0&&!W&&S3(gt);const Lt=F(),$t=jh(gt);nt.current[0]==="reference"&&$t===H&&(S3(gt),gt.shiftKey?rg(Lt[Lt.length-1]):rg(Lt[1])),nt.current[1]==="floating"&&$t===$&&gt.shiftKey&&(S3(gt),rg(Lt[0]))}}const xt=Ta($);return xt.addEventListener("keydown",it),()=>{xt.removeEventListener("keydown",it)}},[r,H,$,g,nt,W,Q,F]),K.useEffect(()=>{if(r||!R)return;function it(xt){const gt=jh(xt),$t=Q().indexOf(gt);$t!==-1&&(_.current=$t)}return R.addEventListener("focusin",it),()=>{R.removeEventListener("focusin",it)}},[r,R,Q]),K.useEffect(()=>{if(r||!m)return;function it(){P.current=!0,setTimeout(()=>{P.current=!1})}function xt(gt){const Lt=gt.relatedTarget;queueMicrotask(()=>{const $t=!(ws(H,Lt)||ws(R,Lt)||ws(Lt,R)||ws(ct==null?void 0:ct.portalNode,Lt)||Lt!=null&&Lt.hasAttribute(sv("focus-guard"))||Et&&(Dm(Et.nodesRef.current,T).find(ot=>{var Pt,Rt;return ws((Pt=ot.context)==null?void 0:Pt.elements.floating,Lt)||ws((Rt=ot.context)==null?void 0:Rt.elements.domReference,Lt)})||RZ(Et.nodesRef.current,T).find(ot=>{var Pt,Rt;return((Pt=ot.context)==null?void 0:Pt.elements.floating)===Lt||((Rt=ot.context)==null?void 0:Rt.elements.domReference)===Lt})));if(h&&$t&&Gh(Ta($))===Ta($).body){hr($)&&$.focus();const ot=_.current,Pt=Q(),Rt=Pt[ot]||Pt[Pt.length-1]||$;hr(Rt)&&Rt.focus()}(W||!g)&&Lt&&$t&&!P.current&&Lt!==m4()&&(V.current=!0,D(!1,gt,"focus-out"))})}if(R&&hr(H))return H.addEventListener("focusout",xt),H.addEventListener("pointerdown",it),R.addEventListener("focusout",xt),()=>{H.removeEventListener("focusout",xt),H.removeEventListener("pointerdown",it),R.removeEventListener("focusout",xt)}},[r,H,R,$,g,T,Et,ct,D,m,h,Q,W]),K.useEffect(()=>{var it;if(r)return;const xt=Array.from((ct==null||(it=ct.portalNode)==null?void 0:it.querySelectorAll("["+sv("portal")+"]"))||[]);if(R){const gt=[R,...xt,mt.current,wt.current,nt.current.includes("reference")||W?H:null].filter($t=>$t!=null),Lt=g||W?h4(gt,U,!U):h4(gt);return()=>{Lt()}}},[r,H,R,g,nt,ct,W,U]),Ss(()=>{if(r||!hr($))return;const it=Ta($),xt=Gh(it);queueMicrotask(()=>{const gt=F($),Lt=st.current,$t=(typeof Lt=="number"?gt[Lt]:Lt.current)||$,ot=ws($,xt);!k&&!ot&&w&&rg($t,{preventScroll:$t===$})})},[r,w,$,k,F,st]),Ss(()=>{if(r||!$)return;let it=!1;const xt=Ta($),gt=Gh(xt);let $t=B.current.openEvent;B3(gt);function ot(It){let{open:he,reason:Nt,event:ge,nested:ae}=It;he&&($t=ge),Nt==="escape-key"&&x.domReference.current&&B3(x.domReference.current),Nt==="hover"&&ge.type==="mouseleave"&&(V.current=!0),Nt==="outside-press"&&(ae?(V.current=!1,it=!0):V.current=!(lK(ge)||uK(ge)))}b.on("openchange",ot);const Pt=xt.createElement("span");Pt.setAttribute("tabindex","-1"),Pt.setAttribute("aria-hidden","true"),Object.assign(Pt.style,vC),N&&H&&H.insertAdjacentElement("afterend",Pt);function Rt(){return typeof ft.current=="boolean"?m4()||Pt:ft.current.current||Pt}return()=>{b.off("openchange",ot);const It=Gh(xt),he=ws(R,It)||Et&&Dm(Et.nodesRef.current,T).some(ae=>{var ee;return ws((ee=ae.context)==null?void 0:ee.elements.floating,It)});(he||$t&&["click","mousedown"].includes($t.type))&&x.domReference.current&&B3(x.domReference.current);const ge=Rt();queueMicrotask(()=>{ft.current&&!V.current&&hr(ge)&&(!(ge!==It&&It!==xt.body)||he)&&ge.focus({preventScroll:it}),Pt.remove()})}},[r,R,$,ft,B,x,b,Et,T,N,H]),K.useEffect(()=>{queueMicrotask(()=>{V.current=!1})},[r]),Ss(()=>{if(!r&&ct)return ct.setFocusManagerState({modal:g,closeOnFocusOut:m,open:w,onOpenChange:D,refs:x}),()=>{ct.setFocusManagerState(null)}},[r,ct,g,w,D,x,m]),Ss(()=>{if(r||!$||typeof MutationObserver!="function"||k)return;const it=()=>{const gt=$.getAttribute("tabindex"),Lt=Q(),$t=Gh(Ta(R)),ot=Lt.indexOf($t);ot!==-1&&(_.current=ot),nt.current.includes("floating")||$t!==x.domReference.current&&Lt.length===0?gt!=="0"&&$.setAttribute("tabindex","0"):gt!=="-1"&&$.setAttribute("tabindex","-1")};it();const xt=new MutationObserver(it);return xt.observe($,{childList:!0,subtree:!0,attributes:!0}),()=>{xt.disconnect()}},[r,R,$,x,nt,Q,k]);function J(it){return r||!p||!g?null:K.createElement(GZ,{ref:it==="start"?mt:wt,onClick:xt=>D(!1,xt.nativeEvent)},typeof p=="string"?p:"Dismiss")}const tt=!r&&U&&(g?!W:!0)&&(N||g);return K.createElement(K.Fragment,null,tt&&K.createElement(Tx,{"data-type":"inside",ref:ct==null?void 0:ct.beforeInsideRef,onFocus:it=>{if(g){const gt=F();rg(o[0]==="reference"?gt[0]:gt[gt.length-1])}else if(ct!=null&&ct.preserveTabOrder&&ct.portalNode)if(V.current=!1,bm(it,ct.portalNode)){const gt=eM()||H;gt==null||gt.focus()}else{var xt;(xt=ct.beforeOutsideRef.current)==null||xt.focus()}}}),!W&&J("start"),i,J("end"),tt&&K.createElement(Tx,{"data-type":"inside",ref:ct==null?void 0:ct.afterInsideRef,onFocus:it=>{if(g)rg(F()[0]);else if(ct!=null&&ct.preserveTabOrder&&ct.portalNode)if(m&&(V.current=!0),bm(it,ct.portalNode)){const gt=nM()||H;gt==null||gt.focus()}else{var xt;(xt=ct.afterOutsideRef.current)==null||xt.focus()}}}))}let lw=0;function zZ(){const e=/iP(hone|ad|od)|iOS/.test(L9()),n=document.body.style,r=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth,a=n.left?parseFloat(n.left):window.scrollX,u=n.top?parseFloat(n.top):window.scrollY;if(n.overflow="hidden",o&&(n[r]=o+"px"),e){var c,h;const g=((c=window.visualViewport)==null?void 0:c.offsetLeft)||0,p=((h=window.visualViewport)==null?void 0:h.offsetTop)||0;Object.assign(n,{position:"fixed",top:-(u-Math.floor(p))+"px",left:-(a-Math.floor(g))+"px",right:"0"})}return()=>{Object.assign(n,{overflow:"",[r]:""}),e&&(Object.assign(n,{position:"",top:"",left:"",right:""}),window.scrollTo(a,u))}}let v4=()=>{};const jZ=K.forwardRef(function(n,i){const{lockScroll:r=!1,...o}=n;return Ss(()=>{if(r)return lw++,lw===1&&(v4=zZ()),()=>{lw--,lw===0&&v4()}},[r]),K.createElement("div",ov({ref:i},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))});function y4(e){return hr(e.target)&&e.target.tagName==="BUTTON"}function w4(e){return F9(e)}function aM(e,n){n===void 0&&(n={});const{open:i,onOpenChange:r,dataRef:o,elements:{domReference:a}}=e,{enabled:u=!0,event:c="click",toggle:h=!0,ignoreMouse:g=!1,keyboardHandlers:p=!0,stickIfOpen:m=!0}=n,w=K.useRef(),x=K.useRef(!1),T=K.useMemo(()=>({onPointerDown(D){w.current=D.pointerType},onMouseDown(D){const b=w.current;D.button===0&&c!=="click"&&(J8(b)&&g||(i&&h&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="mousedown")?r(!1,D.nativeEvent,"click"):(D.preventDefault(),r(!0,D.nativeEvent,"click"))))},onClick(D){const b=w.current;if(c==="mousedown"&&w.current){w.current=void 0;return}J8(b)&&g||(i&&h&&(!(o.current.openEvent&&m)||o.current.openEvent.type==="click")?r(!1,D.nativeEvent,"click"):r(!0,D.nativeEvent,"click"))},onKeyDown(D){w.current=void 0,!(D.defaultPrevented||!p||y4(D))&&(D.key===" "&&!w4(a)&&(D.preventDefault(),x.current=!0),D.key==="Enter"&&r(!(i&&h),D.nativeEvent,"click"))},onKeyUp(D){D.defaultPrevented||!p||y4(D)||w4(a)||D.key===" "&&x.current&&(x.current=!1,r(!(i&&h),D.nativeEvent,"click"))}}),[o,a,c,g,p,r,i,m,h]);return K.useMemo(()=>u?{reference:T}:{},[u,T])}const UZ={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},$Z={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},x4=e=>{var n,i;return{escapeKey:typeof e=="boolean"?e:(n=e==null?void 0:e.escapeKey)!=null?n:!1,outsidePress:typeof e=="boolean"?e:(i=e==null?void 0:e.outsidePress)!=null?i:!0}};function lM(e,n){n===void 0&&(n={});const{open:i,onOpenChange:r,elements:o,dataRef:a}=e,{enabled:u=!0,escapeKey:c=!0,outsidePress:h=!0,outsidePressEvent:g="pointerdown",referencePress:p=!1,referencePressEvent:m="pointerdown",ancestorScroll:w=!1,bubbles:x,capture:T}=n,D=VT(),b=Wc(typeof h=="function"?h:()=>!1),B=typeof h=="function"?b:h,A=K.useRef(!1),H=K.useRef(!1),{escapeKey:R,outsidePress:k}=x4(x),{escapeKey:W,outsidePress:U}=x4(T),nt=K.useRef(!1),st=Wc(V=>{var P;if(!i||!u||!c||V.key!=="Escape"||nt.current)return;const _=(P=a.current.floatingContext)==null?void 0:P.nodeId,N=D?Dm(D.nodesRef.current,_):[];if(!R&&(V.stopPropagation(),N.length>0)){let $=!0;if(N.forEach(Q=>{var F;if((F=Q.context)!=null&&F.open&&!Q.context.dataRef.current.__escapeKeyBubbles){$=!1;return}}),!$)return}r(!1,hK(V)?V.nativeEvent:V,"escape-key")}),ft=Wc(V=>{var P;const _=()=>{var N;st(V),(N=jh(V))==null||N.removeEventListener("keydown",_)};(P=jh(V))==null||P.addEventListener("keydown",_)}),Et=Wc(V=>{var P;const _=A.current;A.current=!1;const N=H.current;if(H.current=!1,g==="click"&&N||_||typeof B=="function"&&!B(V))return;const $=jh(V),Q="["+sv("inert")+"]",F=Ta(o.floating).querySelectorAll(Q);let J=Li($)?$:null;for(;J&&!ff(J);){const gt=Ou(J);if(ff(gt)||!Li(gt))break;J=gt}if(F.length&&Li($)&&!dK($)&&!ws($,o.floating)&&Array.from(F).every(gt=>!ws(J,gt)))return;if(hr($)&&wt){const gt=$.clientWidth>0&&$.scrollWidth>$.clientWidth,Lt=$.clientHeight>0&&$.scrollHeight>$.clientHeight;let $t=Lt&&V.offsetX>$.clientWidth;if(Lt&&Ks($).direction==="rtl"&&($t=V.offsetX<=$.offsetWidth-$.clientWidth),$t||gt&&V.offsetY>$.clientHeight)return}const tt=(P=a.current.floatingContext)==null?void 0:P.nodeId,it=D&&Dm(D.nodesRef.current,tt).some(gt=>{var Lt;return E3(V,(Lt=gt.context)==null?void 0:Lt.elements.floating)});if(E3(V,o.floating)||E3(V,o.domReference)||it)return;const xt=D?Dm(D.nodesRef.current,tt):[];if(xt.length>0){let gt=!0;if(xt.forEach(Lt=>{var $t;if(($t=Lt.context)!=null&&$t.open&&!Lt.context.dataRef.current.__outsidePressBubbles){gt=!1;return}}),!gt)return}r(!1,V,"outside-press")}),ct=Wc(V=>{var P;const _=()=>{var N;Et(V),(N=jh(V))==null||N.removeEventListener(g,_)};(P=jh(V))==null||P.addEventListener(g,_)});K.useEffect(()=>{if(!i||!u)return;a.current.__escapeKeyBubbles=R,a.current.__outsidePressBubbles=k;let V=-1;function P(F){r(!1,F,"ancestor-scroll")}function _(){window.clearTimeout(V),nt.current=!0}function N(){V=window.setTimeout(()=>{nt.current=!1},cC()?5:0)}const $=Ta(o.floating);c&&($.addEventListener("keydown",W?ft:st,W),$.addEventListener("compositionstart",_),$.addEventListener("compositionend",N)),B&&$.addEventListener(g,U?ct:Et,U);let Q=[];return w&&(Li(o.domReference)&&(Q=ef(o.domReference)),Li(o.floating)&&(Q=Q.concat(ef(o.floating))),!Li(o.reference)&&o.reference&&o.reference.contextElement&&(Q=Q.concat(ef(o.reference.contextElement)))),Q=Q.filter(F=>{var J;return F!==((J=$.defaultView)==null?void 0:J.visualViewport)}),Q.forEach(F=>{F.addEventListener("scroll",P,{passive:!0})}),()=>{c&&($.removeEventListener("keydown",W?ft:st,W),$.removeEventListener("compositionstart",_),$.removeEventListener("compositionend",N)),B&&$.removeEventListener(g,U?ct:Et,U),Q.forEach(F=>{F.removeEventListener("scroll",P)}),window.clearTimeout(V)}},[a,o,c,B,g,i,r,w,u,R,k,st,W,ft,Et,U,ct]),K.useEffect(()=>{A.current=!1},[B,g]);const mt=K.useMemo(()=>({onKeyDown:st,[UZ[m]]:V=>{p&&r(!1,V.nativeEvent,"reference-press")}}),[st,r,p,m]),wt=K.useMemo(()=>({onKeyDown:st,onMouseDown(){H.current=!0},onMouseUp(){H.current=!0},[$Z[g]]:()=>{A.current=!0}}),[st,g]);return K.useMemo(()=>u?{reference:mt,floating:wt}:{},[u,mt,wt])}function VZ(e){const{open:n=!1,onOpenChange:i,elements:r}=e,o=Dv(),a=K.useRef({}),[u]=K.useState(()=>BZ()),c=Q9()!=null,[h,g]=K.useState(r.reference),p=Wc((x,T,D)=>{a.current.openEvent=x?T:void 0,u.emit("openchange",{open:x,event:T,reason:D,nested:c}),i==null||i(x,T,D)}),m=K.useMemo(()=>({setPositionReference:g}),[]),w=K.useMemo(()=>({reference:h||r.reference||null,floating:r.floating||null,domReference:r.reference}),[h,r.reference,r.floating]);return K.useMemo(()=>({dataRef:a,open:n,onOpenChange:p,elements:w,events:u,floatingId:o,refs:m}),[n,p,w,u,o,m])}function yC(e){e===void 0&&(e={});const{nodeId:n}=e,i=VZ({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||i,o=r.elements,[a,u]=K.useState(null),[c,h]=K.useState(null),p=(o==null?void 0:o.domReference)||a,m=K.useRef(null),w=VT();Ss(()=>{p&&(m.current=p)},[p]);const x=CZ({...e,elements:{...o,...c&&{reference:c}}}),T=K.useCallback(H=>{const R=Li(H)?{getBoundingClientRect:()=>H.getBoundingClientRect(),contextElement:H}:H;h(R),x.refs.setReference(R)},[x.refs]),D=K.useCallback(H=>{(Li(H)||H===null)&&(m.current=H,u(H)),(Li(x.refs.reference.current)||x.refs.reference.current===null||H!==null&&!Li(H))&&x.refs.setReference(H)},[x.refs]),b=K.useMemo(()=>({...x.refs,setReference:D,setPositionReference:T,domReference:m}),[x.refs,D,T]),B=K.useMemo(()=>({...x.elements,domReference:p}),[x.elements,p]),A=K.useMemo(()=>({...x,...r,refs:b,elements:B,nodeId:n}),[x,b,B,n,r]);return Ss(()=>{r.dataRef.current.floatingContext=A;const H=w==null?void 0:w.nodesRef.current.find(R=>R.id===n);H&&(H.context=A)}),K.useMemo(()=>({...x,context:A,refs:b,elements:B}),[x,b,B,A])}const C4="active",E4="selected";function P3(e,n,i){const r=new Map,o=i==="item";let a=e;if(o&&e){const{[C4]:u,[E4]:c,...h}=e;a=h}return{...i==="floating"&&{tabIndex:-1,[KS]:""},...a,...n.map(u=>{const c=u?u[i]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((u,c)=>(c&&Object.entries(c).forEach(h=>{let[g,p]=h;if(!(o&&[C4,E4].includes(g)))if(g.indexOf("on")===0){if(r.has(g)||r.set(g,[]),typeof p=="function"){var m;(m=r.get(g))==null||m.push(p),u[g]=function(){for(var w,x=arguments.length,T=new Array(x),D=0;D<x;D++)T[D]=arguments[D];return(w=r.get(g))==null?void 0:w.map(b=>b(...T)).find(b=>b!==void 0)}}}else u[g]=p}),u),{})}}function uM(e){e===void 0&&(e=[]);const n=e.map(c=>c==null?void 0:c.reference),i=e.map(c=>c==null?void 0:c.floating),r=e.map(c=>c==null?void 0:c.item),o=K.useCallback(c=>P3(c,e,"reference"),n),a=K.useCallback(c=>P3(c,e,"floating"),i),u=K.useCallback(c=>P3(c,e,"item"),r);return K.useMemo(()=>({getReferenceProps:o,getFloatingProps:a,getItemProps:u}),[o,a,u])}const WZ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function cM(e,n){var i;n===void 0&&(n={});const{open:r,floatingId:o}=e,{enabled:a=!0,role:u="dialog"}=n,c=(i=WZ.get(u))!=null?i:u,h=Dv(),p=Q9()!=null,m=K.useMemo(()=>c==="tooltip"||u==="label"?{["aria-"+(u==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":c==="alertdialog"?"dialog":c,"aria-controls":r?o:void 0,...c==="listbox"&&{role:"combobox"},...c==="menu"&&{id:h},...c==="menu"&&p&&{role:"menuitem"},...u==="select"&&{"aria-autocomplete":"none"},...u==="combobox"&&{"aria-autocomplete":"list"}},[c,o,p,r,h,u]),w=K.useMemo(()=>{const T={id:o,...c&&{role:c}};return c==="tooltip"||u==="label"?T:{...T,...c==="menu"&&{"aria-labelledby":h}}},[c,o,h,u]),x=K.useCallback(T=>{let{active:D,selected:b}=T;const B={role:"option",...D&&{id:o+"-option"}};switch(u){case"select":return{...B,"aria-selected":D&&b};case"combobox":return{...B,...D&&{"aria-selected":!0}}}return{}},[o,u]);return K.useMemo(()=>a?{reference:m,floating:w,item:x}:{},[a,m,w,x])}function XZ({initialOpen:e=!1,placement:n="bottom",modal:i,sideOffset:r,open:o,onOpenChange:a}={}){const[u,c]=K.useState(e),[h,g]=K.useState(),[p,m]=K.useState(),w=o??u,x=a??c,T=yC({placement:n,open:w,onOpenChange:x,whileElementsMounted:gZ,middleware:[UT(r||4),$T({crossAxis:n.includes("-"),fallbackAxisSideDirection:"end",padding:5}),EZ({padding:5})]}),D=T.context,b=aM(D,{enabled:o==null}),B=lM(D),A=cM(D),H=uM([b,B,A]);return K.useMemo(()=>({open:w,setOpen:x,...H,...T,modal:i,labelId:h,descriptionId:p,setLabelId:g,setDescriptionId:m}),[w,x,H,T,i,h,p])}const fM=K.createContext(null),hM=()=>{const e=K.useContext(fM);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Ra({children:e,modal:n=!1,...i}){const r=XZ({modal:n,...i});return O.jsx(fM.Provider,{value:r,children:e})}const Oa=K.forwardRef(function({children:n,asChild:i=!1,...r},o){const a=hM(),u=n.ref,c=mC([a.refs.setReference,o,u]);return i&&K.isValidElement(n)?K.cloneElement(n,a.getReferenceProps({ref:c,...r,...n.props,"data-state":a.open?"open":"closed"})):O.jsx("button",{ref:c,type:"button","data-state":a.open?"open":"closed",...a.getReferenceProps(r),children:n})}),La=K.forwardRef(function({container:n,style:i,...r},o){const{context:a,...u}=hM(),c=mC([u.refs.setFloating,o]);return a.open?O.jsx(rM,{root:n,children:O.jsx(sM,{context:a,modal:u.modal,children:O.jsx("div",{ref:c,style:{...u.floatingStyles,...i},"aria-labelledby":u.labelId,"aria-describedby":u.descriptionId,...u.getFloatingProps(r),children:r.children})})}):null});var Vh=(e=>(e.mermaidToDrawnix="mermaidToDrawnix",e.markdownToDrawnix="markdownToDrawnix",e))(Vh||{});const dM=K.createContext(null),Qs=()=>{const e=K.useContext(dM);if(!e)throw new Error("The `useDrawnix` hook must be used inside the <Drawnix> component's context.");return e},qZ=()=>{const{appState:e,setAppState:n}=Qs();return i=>{n({...e,pointer:i})}},wC=Ae.createContext({}),ZS=(e="",n=!1)=>`menu-item menu-item-base ${e} ${n?"menu-item--active":""}`.trim(),gM=(e,n)=>{const i=K.useContext(wC);return rY(e,r=>{var a;const o=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});n==null||n(o),o.defaultPrevented||(a=i.onSelect)==null||a.call(i,o)})},Qg=({children:e,className:n="",onSelect:i,style:r})=>{const o=yn(`menu ${n}`).trim();return O.jsx(wC.Provider,{value:{onSelect:i},children:O.jsx("div",{className:o,style:r,"data-testid":"menu",children:O.jsx(Jo,{className:"menu-container",padding:2,children:e})})})};Qg.displayName="Menu";const pM=({icon:e,shortcut:n,children:i})=>O.jsxs(O.Fragment,{children:[e&&O.jsx("div",{className:"menu-item__icon",children:e}),O.jsx("div",{className:"menu-item__text",children:i}),n&&O.jsx("div",{className:"menu-item__shortcut",children:n})]}),er=({icon:e,onSelect:n,children:i,shortcut:r,className:o,selected:a,submenu:u,...c})=>{const[h,g]=K.useState(!1),p=K.useRef(),m=gM(c.onClick,n),w=O.jsx(pM,{icon:e,shortcut:r,children:i}),x=()=>{p.current&&window.clearTimeout(p.current),g(!0)},T=()=>{p.current=window.setTimeout(()=>{g(!1)},100)},D=b=>{var B;u?(g(!h),(B=c.onClick)==null||B.call(c,b)):m(b)};return u?O.jsxs(Ra,{open:h,onOpenChange:g,placement:"right-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx("button",{...c,type:"button",className:ZS(o,a||h),title:c.title??c["aria-label"],onClick:D,onMouseEnter:x,onMouseLeave:T,children:w})}),O.jsx(La,{onMouseEnter:x,onMouseLeave:T,children:u})]}):O.jsx("button",{...c,onClick:m,type:"button",className:ZS(o,a),title:c.title??c["aria-label"],children:w})};er.displayName="MenuItem";const mM=({children:e})=>O.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});mM.displayName="MenuItemBadge";er.Badge=mM;const vM=()=>{const{appState:e,setAppState:n}=Qs(),{t:i}=si();return O.jsx(er,{"data-testid":"marmaid-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Vh.mermaidToDrawnix})},icon:UY,"aria-label":i("extraTools.mermaidToDrawnix"),children:i("extraTools.mermaidToDrawnix")})};vM.displayName="MermaidToDrawnix";const yM=()=>{const{appState:e,setAppState:n}=Qs(),{t:i}=si();return O.jsx(er,{"data-testid":"markdown-to-drawnix-button",onSelect:()=>{n({...e,openDialogType:Vh.markdownToDrawnix})},icon:$Y,"aria-label":i("extraTools.markdownToDrawnix"),children:i("extraTools.markdownToDrawnix")})};yM.displayName="MarkdownToDrawnix";const YZ=()=>{const e=qi(),{t:n}=si(),i=G.getBoardContainer(e),[r,o]=K.useState(!1);return O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:a=>{o(a)},placement:"bottom-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:r,icon:A9,title:n("toolbar.extraTools"),"aria-label":n("toolbar.extraTools"),onPointerDown:()=>{o(!r)}})}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{o(!1)},children:[O.jsx(vM,{}),O.jsx(yM,{})]})})]},0)},KZ="TRANSPARENT",WT="NO_COLOR",Ax="#FFFFFF",wM=[{name:"color.none",value:WT},{name:"color.default",value:gr},{name:"color.white",value:Ax},{name:"color.gray",value:"#808080"},{name:"color.deepBlue",value:"#1E90FF"},{name:"color.red",value:"#FF4500"},{name:"color.green",value:"#2ECC71"},{name:"color.yellow",value:"#FFD700"},{name:"color.purple",value:"#8A2BE2"},{name:"color.orange",value:"#FFA500"},{name:"color.pastelPink",value:"#FFB3BA"},{name:"color.cyan",value:"#00CED1"},{name:"color.brown",value:"#8B4513"},{name:"color.forestGreen",value:"#228B22"},{name:"color.lightGray",value:"#D3D3D3"}];function ZZ(e){return Math.round((100-e)/100*255)}function QZ(e){return Math.round((1-e/255)*100)}function Jg(e,n){const r=ZZ(100-n).toString(16).padStart(2,"0");return`${e}${r}`}function t1(e){e=e.replace(/^#/,"");let n;if(e.length===8)n=parseInt(e.slice(6,8),16);else if(e.length===4)n=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-QZ(n)}function JZ(e){return e!=="none"}function yd(e){const n=e.replace(/^#/,"").toUpperCase();return n.length===8?"#"+n.slice(0,6):n.length===4?"#"+n.slice(0,3):n.length===6||n.length===3?"#"+n:e}function xM(e){return e===Ax||e===Ax.toLocaleLowerCase()}function CM(e){return e===0}function bv(e){return e===100}function Tg(e){return e===WT}function tQ(e){return!e||e===gr}function EM(e){const i=G.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return i==null?void 0:i.boardBackground}const eQ=e=>{const n=ne(e);return EM(e),bb(e,{padding:20,elements:n.length>0?n:void 0,inlineStyleClassNames:".plait-text-container",styleNames:["position"]}).then(i=>{const r=new Blob([i],{type:"image/svg+xml"}),o=`drawnix-${new Date().getTime()}.svg`;S9(r,o)})},Mw=(e,n)=>{const i=ne(e),r=EM(e)||"white";sY(e,{elements:i.length>0?i:void 0,fillStyle:n?"transparent":r}).then(o=>{if(o){const a=n?"png":"jpg",u=oY(o),c=`drawnix-${new Date().getTime()}.${a}`;S9(u,c)}})},SM=async e=>{const n=await y9({description:"Image",extensions:Object.keys(FT)});$S(e,n)},M3=e=>e===nn.hand||e===nn.selection,S4=[{icon:aY,pointer:nn.hand,titleKey:"toolbar.hand"},{icon:lY,pointer:nn.selection,titleKey:"toolbar.selection"},{icon:uY,pointer:wu.mind,titleKey:"toolbar.mind"},{icon:fY,pointer:we.text,titleKey:"toolbar.text"},{icon:GT,pointer:Yo.feltTipPen,titleKey:"toolbar.pen",key:"freehand"},{icon:dY,titleKey:"toolbar.arrow",key:"arrow",pointer:qn.straight},{icon:cY,titleKey:"toolbar.shape",key:"shape",pointer:we.rectangle},{icon:jY,titleKey:"toolbar.image",key:"image"},{icon:A9,titleKey:"toolbar.extraTools",key:"extra-tools"}],T4=e=>Object.keys(qn).includes(e.pointer),A4=e=>Object.keys(we).includes(e.pointer)||Object.keys(me).includes(e.pointer),nQ=()=>{const e=qi(),{appState:n}=Qs(),{t:i}=si(),r=qZ(),o=G.getBoardContainer(e),[a,u]=K.useState(!1),[c,h]=K.useState(!1),[g,p]=K.useState(!1),[m,w]=K.useState(S4.find(k=>k.key==="freehand")),[x,T]=K.useState(bw[0].pointer),[D,b]=K.useState(Bw[0].pointer),B=k=>{Vr(e,Xi.dnd),un.updatePointerType(e,k),r(k)},A=()=>{Vr(e,Xi.drawing)},H=k=>G.isPointer(e,k.pointer)&&!c&&!g&&!a,R=k=>G.isInPointer(k,[Yo.feltTipPen,Yo.eraser]);return O.jsx(Jo,{padding:1,className:yn("draw-toolbar",Ml),children:O.jsx(Yr.Row,{gap:1,children:S4.map((k,W)=>n.isMobile&&k.pointer===nn.hand?O.jsx(O.Fragment,{}):k.key==="freehand"?O.jsxs(Ra,{open:a||R(e),sideOffset:12,onOpenChange:U=>{u(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:a||R(e),icon:m.icon,title:m.titleKey?i(m.titleKey):"Freehand","aria-label":m.titleKey?i(m.titleKey):"Freehand",onPointerDown:()=>{u(!a),B(m.pointer)},onPointerUp:()=>{A()}})}),O.jsx(La,{container:o,children:O.jsx(YY,{onPointerUp:U=>{r(U),w(M9.find(nt=>nt.pointer===U))}})})]},W):k.key==="shape"?O.jsxs(Ra,{open:g,sideOffset:12,onOpenChange:U=>{p(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:g||A4(e)&&!G.isPointer(e,we.text),icon:k.icon,title:k.titleKey?i(k.titleKey):"Shape","aria-label":k.titleKey?i(k.titleKey):"Shape",onPointerDown:()=>{p(!g),A4(e)?un.updatePointerType(e,e.pointer):(r(x||bw[0].pointer),Vr(e,Xi.drawing),un.updatePointerType(e,x||bw[0].pointer))}})}),O.jsx(La,{container:o,children:O.jsx(ZY,{onPointerUp:U=>{p(!1),r(U),T(U)}})})]},W):k.key==="arrow"?O.jsxs(Ra,{open:c,sideOffset:12,onOpenChange:U=>{h(U)},children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:c||T4(e),icon:k.icon,title:k.titleKey?i(k.titleKey):"","aria-label":k.titleKey?i(k.titleKey):"",onPointerDown:()=>{h(!c),T4(e)?un.updatePointerType(e,e.pointer):(Vr(e,Xi.drawing),un.updatePointerType(e,D||Bw[0].pointer),r(D||Bw[0].pointer))}})}),O.jsx(La,{container:o,children:O.jsx(QY,{onPointerUp:U=>{h(!1),r(U),b(U)}})})]},W):k.key==="extra-tools"?O.jsx(YZ,{},W):O.jsx(jn,{type:"radio",icon:k.icon,checked:H(k),title:k.titleKey?i(k.titleKey):"","aria-label":k.titleKey?i(k.titleKey):"",onPointerDown:()=>{k.pointer&&!M3(k.pointer)&&B(k.pointer)},onPointerUp:()=>{k.pointer&&!M3(k.pointer)?A():k.pointer&&M3(k.pointer)&&(un.updatePointerType(e,k.pointer),r(k.pointer)),k.key==="image"&&SM(e)}},W))})})},iQ=()=>{var a;const e=qi(),{t:n}=si(),i=G.getBoardContainer(e),[r,o]=K.useState(!1);return O.jsx(Jo,{padding:1,className:yn("zoom-toolbar",Ml),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsx(jn,{type:"button",icon:DY,visible:!0,title:n("zoom.out"),"aria-label":n("zoom.out"),onPointerUp:()=>{un.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:u=>{o(u)},placement:"bottom-end",children:[O.jsx(Oa,{asChild:!0,children:O.jsxs("div",{title:n("zoom.fit"),"aria-label":n("zoom.fit"),className:yn("zoom-menu-trigger",{active:r}),onPointerUp:()=>{o(!r)},children:[Number(((((a=e==null?void 0:e.viewport)==null?void 0:a.zoom)||1)*100).toFixed(0)),"%"]},1)}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{o(!1)},children:[O.jsx(er,{"data-testid":"open-button",onSelect:()=>{un.fitViewport(e)},"aria-label":n("zoom.fit"),shortcut:"Cmd+Shift+=",children:n("zoom.fit")}),O.jsx(er,{"data-testid":"open-button",onSelect:()=>{un.updateZoom(e,1)},"aria-label":n("zoom.100"),shortcut:"Cmd+0",children:n("zoom.100")})]})})]}),O.jsx(jn,{type:"button",icon:bY,visible:!0,title:n("zoom.in"),"aria-label":n("zoom.in"),onPointerUp:()=>{un.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})};var dm={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var rQ=dm.exports,D4;function oQ(){return D4||(D4=1,function(e,n){(function(){var i,r="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",c="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",g=500,p="__lodash_placeholder__",m=1,w=2,x=4,T=1,D=2,b=1,B=2,A=4,H=8,R=16,k=32,W=64,U=128,nt=256,st=512,ft=30,Et="...",ct=800,mt=16,wt=1,V=2,P=3,_=1/0,N=9007199254740991,$=17976931348623157e292,Q=NaN,F=4294967295,J=F-1,tt=F>>>1,it=[["ary",U],["bind",b],["bindKey",B],["curry",H],["curryRight",R],["flip",st],["partial",k],["partialRight",W],["rearg",nt]],xt="[object Arguments]",gt="[object Array]",Lt="[object AsyncFunction]",$t="[object Boolean]",ot="[object Date]",Pt="[object DOMException]",Rt="[object Error]",It="[object Function]",he="[object GeneratorFunction]",Nt="[object Map]",ge="[object Number]",ae="[object Null]",ee="[object Object]",xe="[object Promise]",le="[object Proxy]",Re="[object RegExp]",ve="[object Set]",Qe="[object String]",ti="[object Symbol]",Fn="[object Undefined]",Kn="[object WeakMap]",Br="[object WeakSet]",ji="[object ArrayBuffer]",An="[object DataView]",Wn="[object Float32Array]",Zr="[object Float64Array]",Js="[object Int8Array]",ta="[object Int16Array]",Qr="[object Int32Array]",di="[object Uint8Array]",Pr="[object Uint8ClampedArray]",Ei="[object Uint16Array]",Ps="[object Uint32Array]",wd=/\b__p \+= '';/g,e1=/\b(__p \+=) '' \+/g,Jr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kl=/&(?:amp|lt|gt|quot|#39);/g,Il=/[&<>"']/g,Ms=RegExp(kl.source),_u=RegExp(Il.source),Hl=/<%-([\s\S]+?)%>/g,n1=/<%([\s\S]+?)%>/g,Cf=/<%=([\s\S]+?)%>/g,Ef=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nl=/^\w*$/,i1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fu=/[\\^$.*+?()[\]{}|]/g,xd=RegExp(Fu.source),ku=/^\s+/,Iu=/\s/,Sf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Cd=/\{\n\/\* \[wrapped with (.+)\] \*/,Ed=/,? & /,Rs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fi=/[()=,{}\[\]\/\s]/,or=/\\(\\)?/g,Ia=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hu=/\w*$/,r1=/^[-+]0x[0-9a-f]+$/i,o1=/^0b[01]+$/i,Sd=/^\[object .+?Constructor\]$/,Gl=/^0o[0-7]+$/i,Tf=/^(?:0|[1-9]\d*)$/,Ha=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ts=/($^)/,Na=/['\n\r\u2028\u2029\\]/g,mr="\\ud800-\\udfff",Si="\\u0300-\\u036f",ea="\\ufe20-\\ufe2f",Td="\\u20d0-\\u20ff",to=Si+ea+Td,es="\\u2700-\\u27bf",Ad="a-z\\xdf-\\xf6\\xf8-\\xff",Dd="\\xac\\xb1\\xd7\\xf7",Nu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",s1="\\u2000-\\u206f",Gu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Y="A-Z\\xc0-\\xd6\\xd8-\\xde",lt="\\ufe0e\\ufe0f",et=Dd+Nu+s1+Gu,vt="[']",St="["+mr+"]",pt="["+et+"]",Ht="["+to+"]",Xt="\\d+",Zt="["+es+"]",qt="["+Ad+"]",Jt="[^"+mr+et+Xt+es+Ad+Y+"]",ue="\\ud83c[\\udffb-\\udfff]",$e="(?:"+Ht+"|"+ue+")",tn="[^"+mr+"]",mn="(?:\\ud83c[\\udde6-\\uddff]){2}",Zn="[\\ud800-\\udbff][\\udc00-\\udfff]",wn="["+Y+"]",vr="\\u200d",na="(?:"+qt+"|"+Jt+")",zu="(?:"+wn+"|"+Jt+")",ju="(?:"+vt+"(?:d|ll|m|re|s|t|ve))?",Uu="(?:"+vt+"(?:D|LL|M|RE|S|T|VE))?",a1=$e+"?",zl="["+lt+"]?",ns="(?:"+vr+"(?:"+[tn,mn,Zn].join("|")+")"+zl+a1+")*",$u="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",l1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jl=zl+a1+ns,Vu="(?:"+[Zt,mn,Zn].join("|")+")"+jl,Pv="(?:"+[tn+Ht+"?",Ht,mn,Zn,St].join("|")+")",u1=RegExp(vt,"g"),Mv=RegExp(Ht,"g"),Ul=RegExp(ue+"(?="+ue+")|"+Pv+jl,"g"),ia=RegExp([wn+"?"+qt+"+"+ju+"(?="+[pt,wn,"$"].join("|")+")",zu+"+"+Uu+"(?="+[pt,wn+na,"$"].join("|")+")",wn+"?"+na+"+"+ju,wn+"+"+Uu,l1,$u,Xt,Vu].join("|"),"g"),c1=RegExp("["+vr+mr+to+lt+"]"),Af=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ga=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],f1=-1,kn={};kn[Wn]=kn[Zr]=kn[Js]=kn[ta]=kn[Qr]=kn[di]=kn[Pr]=kn[Ei]=kn[Ps]=!0,kn[xt]=kn[gt]=kn[ji]=kn[$t]=kn[An]=kn[ot]=kn[Rt]=kn[It]=kn[Nt]=kn[ge]=kn[ee]=kn[Re]=kn[ve]=kn[Qe]=kn[Kn]=!1;var Un={};Un[xt]=Un[gt]=Un[ji]=Un[An]=Un[$t]=Un[ot]=Un[Wn]=Un[Zr]=Un[Js]=Un[ta]=Un[Qr]=Un[Nt]=Un[ge]=Un[ee]=Un[Re]=Un[ve]=Un[Qe]=Un[ti]=Un[di]=Un[Pr]=Un[Ei]=Un[Ps]=!0,Un[Rt]=Un[It]=Un[Kn]=!1;var bd={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Bd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rv={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Mr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$l=parseFloat,Pd=parseInt,Wu=typeof Vs=="object"&&Vs&&Vs.Object===Object&&Vs,xC=typeof self=="object"&&self&&self.Object===Object&&self,ki=Wu||xC||Function("return this")(),Df=n&&!n.nodeType&&n,is=Df&&!0&&e&&!e.nodeType&&e,bf=is&&is.exports===Df,Md=bf&&Wu.process,bo=function(){try{var yt=is&&is.require&&is.require("util").types;return yt||Md&&Md.binding&&Md.binding("util")}catch{}}(),Ov=bo&&bo.isArrayBuffer,Lv=bo&&bo.isDate,Rd=bo&&bo.isMap,_v=bo&&bo.isRegExp,Fv=bo&&bo.isSet,kv=bo&&bo.isTypedArray;function eo(yt,Ft,Mt){switch(Mt.length){case 0:return yt.call(Ft);case 1:return yt.call(Ft,Mt[0]);case 2:return yt.call(Ft,Mt[0],Mt[1]);case 3:return yt.call(Ft,Mt[0],Mt[1],Mt[2])}return yt.apply(Ft,Mt)}function CC(yt,Ft,Mt,oe){for(var Ne=-1,rn=yt==null?0:yt.length;++Ne<rn;){var ni=yt[Ne];Ft(oe,ni,Mt(ni),yt)}return oe}function no(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe&&Ft(yt[Mt],Mt,yt)!==!1;);return yt}function EC(yt,Ft){for(var Mt=yt==null?0:yt.length;Mt--&&Ft(yt[Mt],Mt,yt)!==!1;);return yt}function Iv(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe;)if(!Ft(yt[Mt],Mt,yt))return!1;return!0}function za(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length,Ne=0,rn=[];++Mt<oe;){var ni=yt[Mt];Ft(ni,Mt,yt)&&(rn[Ne++]=ni)}return rn}function Od(yt,Ft){var Mt=yt==null?0:yt.length;return!!Mt&&Xu(yt,Ft,0)>-1}function Bf(yt,Ft,Mt){for(var oe=-1,Ne=yt==null?0:yt.length;++oe<Ne;)if(Mt(Ft,yt[oe]))return!0;return!1}function ei(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length,Ne=Array(oe);++Mt<oe;)Ne[Mt]=Ft(yt[Mt],Mt,yt);return Ne}function ja(yt,Ft){for(var Mt=-1,oe=Ft.length,Ne=yt.length;++Mt<oe;)yt[Ne+Mt]=Ft[Mt];return yt}function h1(yt,Ft,Mt,oe){var Ne=-1,rn=yt==null?0:yt.length;for(oe&&rn&&(Mt=yt[++Ne]);++Ne<rn;)Mt=Ft(Mt,yt[Ne],Ne,yt);return Mt}function Hv(yt,Ft,Mt,oe){var Ne=yt==null?0:yt.length;for(oe&&Ne&&(Mt=yt[--Ne]);Ne--;)Mt=Ft(Mt,yt[Ne],Ne,yt);return Mt}function d1(yt,Ft){for(var Mt=-1,oe=yt==null?0:yt.length;++Mt<oe;)if(Ft(yt[Mt],Mt,yt))return!0;return!1}var SC=Vl("length");function TC(yt){return yt.split("")}function AC(yt){return yt.match(Rs)||[]}function Nv(yt,Ft,Mt){var oe;return Mt(yt,function(Ne,rn,ni){if(Ft(Ne,rn,ni))return oe=rn,!1}),oe}function Ld(yt,Ft,Mt,oe){for(var Ne=yt.length,rn=Mt+(oe?1:-1);oe?rn--:++rn<Ne;)if(Ft(yt[rn],rn,yt))return rn;return-1}function Xu(yt,Ft,Mt){return Ft===Ft?PC(yt,Ft,Mt):Ld(yt,Gv,Mt)}function DC(yt,Ft,Mt,oe){for(var Ne=Mt-1,rn=yt.length;++Ne<rn;)if(oe(yt[Ne],Ft))return Ne;return-1}function Gv(yt){return yt!==yt}function _d(yt,Ft){var Mt=yt==null?0:yt.length;return Mt?Fd(yt,Ft)/Mt:Q}function Vl(yt){return function(Ft){return Ft==null?i:Ft[yt]}}function g1(yt){return function(Ft){return yt==null?i:yt[Ft]}}function p1(yt,Ft,Mt,oe,Ne){return Ne(yt,function(rn,ni,Rn){Mt=oe?(oe=!1,rn):Ft(Mt,rn,ni,Rn)}),Mt}function zv(yt,Ft){var Mt=yt.length;for(yt.sort(Ft);Mt--;)yt[Mt]=yt[Mt].value;return yt}function Fd(yt,Ft){for(var Mt,oe=-1,Ne=yt.length;++oe<Ne;){var rn=Ft(yt[oe]);rn!==i&&(Mt=Mt===i?rn:Mt+rn)}return Mt}function kd(yt,Ft){for(var Mt=-1,oe=Array(yt);++Mt<yt;)oe[Mt]=Ft(Mt);return oe}function jv(yt,Ft){return ei(Ft,function(Mt){return[Mt,yt[Mt]]})}function Wl(yt){return yt&&yt.slice(0,Yu(yt)+1).replace(ku,"")}function io(yt){return function(Ft){return yt(Ft)}}function m1(yt,Ft){return ei(Ft,function(Mt){return yt[Mt]})}function Pf(yt,Ft){return yt.has(Ft)}function v1(yt,Ft){for(var Mt=-1,oe=yt.length;++Mt<oe&&Xu(Ft,yt[Mt],0)>-1;);return Mt}function y1(yt,Ft){for(var Mt=yt.length;Mt--&&Xu(Ft,yt[Mt],0)>-1;);return Mt}function Mf(yt,Ft){for(var Mt=yt.length,oe=0;Mt--;)yt[Mt]===Ft&&++oe;return oe}var Rf=g1(bd),bC=g1(Bd);function Id(yt){return"\\"+Mr[yt]}function Uv(yt,Ft){return yt==null?i:yt[Ft]}function Xl(yt){return c1.test(yt)}function w1(yt){return Af.test(yt)}function x1(yt){for(var Ft,Mt=[];!(Ft=yt.next()).done;)Mt.push(Ft.value);return Mt}function Hd(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe,Ne){Mt[++Ft]=[Ne,oe]}),Mt}function C1(yt,Ft){return function(Mt){return yt(Ft(Mt))}}function ra(yt,Ft){for(var Mt=-1,oe=yt.length,Ne=0,rn=[];++Mt<oe;){var ni=yt[Mt];(ni===Ft||ni===p)&&(yt[Mt]=p,rn[Ne++]=Mt)}return rn}function Nd(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe){Mt[++Ft]=oe}),Mt}function BC(yt){var Ft=-1,Mt=Array(yt.size);return yt.forEach(function(oe){Mt[++Ft]=[oe,oe]}),Mt}function PC(yt,Ft,Mt){for(var oe=Mt-1,Ne=yt.length;++oe<Ne;)if(yt[oe]===Ft)return oe;return-1}function MC(yt,Ft,Mt){for(var oe=Mt+1;oe--;)if(yt[oe]===Ft)return oe;return oe}function qu(yt){return Xl(yt)?Vv(yt):SC(yt)}function ai(yt){return Xl(yt)?Wv(yt):TC(yt)}function Yu(yt){for(var Ft=yt.length;Ft--&&Iu.test(yt.charAt(Ft)););return Ft}var $v=g1(Rv);function Vv(yt){for(var Ft=Ul.lastIndex=0;Ul.test(yt);)++Ft;return Ft}function Wv(yt){return yt.match(Ul)||[]}function Xv(yt){return yt.match(ia)||[]}var E1=function yt(Ft){Ft=Ft==null?ki:Ku.defaults(ki.Object(),Ft,Ku.pick(ki,Ga));var Mt=Ft.Array,oe=Ft.Date,Ne=Ft.Error,rn=Ft.Function,ni=Ft.Math,Rn=Ft.Object,Gd=Ft.RegExp,ql=Ft.String,ro=Ft.TypeError,Of=Mt.prototype,qv=rn.prototype,Zu=Rn.prototype,zd=Ft["__core-js_shared__"],jd=qv.toString,bn=Zu.hasOwnProperty,Yv=0,Ud=function(){var d=/[^.]+$/.exec(zd&&zd.keys&&zd.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Rr=Zu.toString,$d=jd.call(Rn),Bo=ki._,Qu=Gd("^"+jd.call(bn).replace(Fu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ju=bf?Ft.Buffer:i,rs=Ft.Symbol,Yl=Ft.Uint8Array,Vd=Ju?Ju.allocUnsafe:i,Os=C1(Rn.getPrototypeOf,Rn),S1=Rn.create,Lf=Zu.propertyIsEnumerable,oa=Of.splice,Kv=rs?rs.isConcatSpreadable:i,Yi=rs?rs.iterator:i,sa=rs?rs.toStringTag:i,Po=function(){try{var d=el(Rn,"defineProperty");return d({},"",{}),d}catch{}}(),Zv=Ft.clearTimeout!==ki.clearTimeout&&Ft.clearTimeout,Wd=oe&&oe.now!==ki.Date.now&&oe.now,Kl=Ft.setTimeout!==ki.setTimeout&&Ft.setTimeout,tc=ni.ceil,_f=ni.floor,Ff=Rn.getOwnPropertySymbols,Qv=Ju?Ju.isBuffer:i,oo=Ft.isFinite,ec=Of.join,nc=C1(Rn.keys,Rn),gi=ni.max,Pi=ni.min,Mo=oe.now,Ro=Ft.parseInt,aa=ni.random,Ls=Of.reverse,Oo=el(Ft,"DataView"),so=el(Ft,"Map"),Xd=el(Ft,"Promise"),Ua=el(Ft,"Set"),Zl=el(Ft,"WeakMap"),ic=el(Rn,"create"),Mi=Zl&&new Zl,Bn={},hn=lr(Oo),$a=lr(so),Lo=lr(Xd),T1=lr(Ua),Va=lr(Zl),kf=rs?rs.prototype:i,rc=kf?kf.valueOf:i,Ql=kf?kf.toString:i;function q(d){if(vi(d)&&!Ge(d)&&!(d instanceof Ve)){if(d instanceof Or)return d;if(bn.call(d,"__wrapped__"))return T0(d)}return new Or(d)}var Wa=function(){function d(){}return function(y){if(!ri(y))return{};if(S1)return S1(y);d.prototype=y;var E=new d;return d.prototype=i,E}}();function Xa(){}function Or(d,y){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!y,this.__index__=0,this.__values__=i}q.templateSettings={escape:Hl,evaluate:n1,interpolate:Cf,variable:"",imports:{_:q}},q.prototype=Xa.prototype,q.prototype.constructor=q,Or.prototype=Wa(Xa.prototype),Or.prototype.constructor=Or;function Ve(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=F,this.__views__=[]}function la(){var d=new Ve(this.__wrapped__);return d.__actions__=wr(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=wr(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=wr(this.__views__),d}function qa(){if(this.__filtered__){var d=new Ve(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function ua(){var d=this.__wrapped__.value(),y=this.__dir__,E=Ge(d),M=y<0,z=E?d.length:0,Z=NC(0,z,this.__views__),rt=Z.start,ht=Z.end,Tt=ht-rt,Vt=M?ht:rt-1,Wt=this.__iteratees__,Yt=Wt.length,re=0,ye=Pi(Tt,this.__takeCount__);if(!E||!M&&z==Tt&&ye==Tt)return N1(d,this.__actions__);var Le=[];t:for(;Tt--&&re<ye;){Vt+=y;for(var en=-1,_e=d[Vt];++en<Yt;){var dn=Wt[en],xn=dn.iteratee,ms=dn.type,wo=xn(_e);if(ms==V)_e=wo;else if(!wo){if(ms==wt)continue t;break t}}Le[re++]=_e}return Le}Ve.prototype=Wa(Xa.prototype),Ve.prototype.constructor=Ve;function ca(d){var y=-1,E=d==null?0:d.length;for(this.clear();++y<E;){var M=d[y];this.set(M[0],M[1])}}function A1(){this.__data__=ic?ic(null):{},this.size=0}function oc(d){var y=this.has(d)&&delete this.__data__[d];return this.size-=y?1:0,y}function qd(d){var y=this.__data__;if(ic){var E=y[d];return E===h?i:E}return bn.call(y,d)?y[d]:i}function Jl(d){var y=this.__data__;return ic?y[d]!==i:bn.call(y,d)}function Ki(d,y){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=ic&&y===i?h:y,this}ca.prototype.clear=A1,ca.prototype.delete=oc,ca.prototype.get=qd,ca.prototype.has=Jl,ca.prototype.set=Ki;function _o(d){var y=-1,E=d==null?0:d.length;for(this.clear();++y<E;){var M=d[y];this.set(M[0],M[1])}}function Jv(){this.__data__=[],this.size=0}function RC(d){var y=this.__data__,E=_s(y,d);if(E<0)return!1;var M=y.length-1;return E==M?y.pop():oa.call(y,E,1),--this.size,!0}function OC(d){var y=this.__data__,E=_s(y,d);return E<0?i:y[E][1]}function LC(d){return _s(this.__data__,d)>-1}function Ri(d,y){var E=this.__data__,M=_s(E,d);return M<0?(++this.size,E.push([d,y])):E[M][1]=y,this}_o.prototype.clear=Jv,_o.prototype.delete=RC,_o.prototype.get=OC,_o.prototype.has=LC,_o.prototype.set=Ri;function os(d){var y=-1,E=d==null?0:d.length;for(this.clear();++y<E;){var M=d[y];this.set(M[0],M[1])}}function If(){this.size=0,this.__data__={hash:new ca,map:new(so||_o),string:new ca}}function Hf(d){var y=nh(this,d).delete(d);return this.size-=y?1:0,y}function D1(d){return nh(this,d).get(d)}function sc(d){return nh(this,d).has(d)}function ac(d,y){var E=nh(this,d),M=E.size;return E.set(d,y),this.size+=E.size==M?0:1,this}os.prototype.clear=If,os.prototype.delete=Hf,os.prototype.get=D1,os.prototype.has=sc,os.prototype.set=ac;function tu(d){var y=-1,E=d==null?0:d.length;for(this.__data__=new os;++y<E;)this.add(d[y])}function ty(d){return this.__data__.set(d,h),this}function _C(d){return this.__data__.has(d)}tu.prototype.add=tu.prototype.push=ty,tu.prototype.has=_C;function Fo(d){var y=this.__data__=new _o(d);this.size=y.size}function eu(){this.__data__=new _o,this.size=0}function b1(d){var y=this.__data__,E=y.delete(d);return this.size=y.size,E}function Yd(d){return this.__data__.get(d)}function ey(d){return this.__data__.has(d)}function lc(d,y){var E=this.__data__;if(E instanceof _o){var M=E.__data__;if(!so||M.length<o-1)return M.push([d,y]),this.size=++E.size,this;E=this.__data__=new os(M)}return E.set(d,y),this.size=E.size,this}Fo.prototype.clear=eu,Fo.prototype.delete=b1,Fo.prototype.get=Yd,Fo.prototype.has=ey,Fo.prototype.set=lc;function Kd(d,y){var E=Ge(d),M=!E&&uu(d),z=!E&&!M&&ll(d),Z=!E&&!M&&!z&&ul(d),rt=E||M||z||Z,ht=rt?kd(d.length,ql):[],Tt=ht.length;for(var Vt in d)(y||bn.call(d,Vt))&&!(rt&&(Vt=="length"||z&&(Vt=="offset"||Vt=="parent")||Z&&(Vt=="buffer"||Vt=="byteLength"||Vt=="byteOffset")||hs(Vt,Tt)))&&ht.push(Vt);return ht}function Nf(d){var y=d.length;return y?d[mc(0,y-1)]:i}function Zd(d,y){return ch(wr(d),as(y,0,d.length))}function ny(d){return ch(wr(d))}function Qd(d,y,E){(E!==i&&!mo(d[y],E)||E===i&&!(y in d))&&ao(d,y,E)}function ss(d,y,E){var M=d[y];(!(bn.call(d,y)&&mo(M,E))||E===i&&!(y in d))&&ao(d,y,E)}function _s(d,y){for(var E=d.length;E--;)if(mo(d[E][0],y))return E;return-1}function iy(d,y,E,M){return Fs(d,function(z,Z,rt){y(M,z,E(z),rt)}),M}function B1(d,y){return d&&No(y,$i(y),d)}function uc(d,y){return d&&No(y,jr(y),d)}function ao(d,y,E){y=="__proto__"&&Po?Po(d,y,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[y]=E}function cc(d,y){for(var E=-1,M=y.length,z=Mt(M),Z=d==null;++E<M;)z[E]=Z?i:cl(d,y[E]);return z}function as(d,y,E){return d===d&&(E!==i&&(d=d<=E?d:E),y!==i&&(d=d>=y?d:y)),d}function yr(d,y,E,M,z,Z){var rt,ht=y&m,Tt=y&w,Vt=y&x;if(E&&(rt=z?E(d,M,z,Z):E(d)),rt!==i)return rt;if(!ri(d))return d;var Wt=Ge(d);if(Wt){if(rt=xy(d),!ht)return wr(d,rt)}else{var Yt=Qi(d),re=Yt==It||Yt==he;if(ll(d))return j1(d,ht);if(Yt==ee||Yt==xt||re&&!z){if(rt=Tt||re?{}:np(d),!ht)return Tt?py(d,uc(rt,d)):gy(d,B1(rt,d))}else{if(!Un[Yt])return z?d:{};rt=Cy(d,Yt,ht)}}Z||(Z=new Fo);var ye=Z.get(d);if(ye)return ye;Z.set(d,rt),Dh(d)?d.forEach(function(_e){rt.add(yr(_e,y,E,_e,d,Z))}):i2(d)&&d.forEach(function(_e,dn){rt.set(dn,yr(_e,y,E,dn,d,Z))});var Le=Vt?Tt?ep:m0:Tt?jr:$i,en=Wt?i:Le(d);return no(en||d,function(_e,dn){en&&(dn=_e,_e=d[dn]),ss(rt,dn,yr(_e,y,E,dn,d,Z))}),rt}function ry(d){var y=$i(d);return function(E){return Ya(E,d,y)}}function Ya(d,y,E){var M=E.length;if(d==null)return!M;for(d=Rn(d);M--;){var z=E[M],Z=y[z],rt=d[z];if(rt===i&&!(z in d)||!Z(rt))return!1}return!0}function P1(d,y,E){if(typeof d!="function")throw new ro(u);return uh(function(){d.apply(i,E)},y)}function ko(d,y,E,M){var z=-1,Z=Od,rt=!0,ht=d.length,Tt=[],Vt=y.length;if(!ht)return Tt;E&&(y=ei(y,io(E))),M?(Z=Bf,rt=!1):y.length>=o&&(Z=Pf,rt=!1,y=new tu(y));t:for(;++z<ht;){var Wt=d[z],Yt=E==null?Wt:E(Wt);if(Wt=M||Wt!==0?Wt:0,rt&&Yt===Yt){for(var re=Vt;re--;)if(y[re]===Yt)continue t;Tt.push(Wt)}else Z(y,Yt,M)||Tt.push(Wt)}return Tt}var Fs=W1(us),Jd=W1(e0,!0);function Ka(d,y){var E=!0;return Fs(d,function(M,z,Z){return E=!!y(M,z,Z),E}),E}function ls(d,y,E){for(var M=-1,z=d.length;++M<z;){var Z=d[M],rt=y(Z);if(rt!=null&&(ht===i?rt===rt&&!zr(rt):E(rt,ht)))var ht=rt,Tt=Z}return Tt}function Gf(d,y,E,M){var z=d.length;for(E=Oe(E),E<0&&(E=-E>z?0:z+E),M=M===i||M>z?z:Oe(M),M<0&&(M+=z),M=E>M?0:zp(M);E<M;)d[E++]=y;return d}function t0(d,y){var E=[];return Fs(d,function(M,z,Z){y(M,z,Z)&&E.push(M)}),E}function Ii(d,y,E,M,z){var Z=-1,rt=d.length;for(E||(E=rp),z||(z=[]);++Z<rt;){var ht=d[Z];y>0&&E(ht)?y>1?Ii(ht,y-1,E,M,z):ja(z,ht):M||(z[z.length]=ht)}return z}var nu=X1(),fc=X1(!0);function us(d,y){return d&&nu(d,y,$i)}function e0(d,y){return d&&fc(d,y,$i)}function fa(d,y){return za(y,function(E){return vo(d[E])})}function ks(d,y){y=fo(y,d);for(var E=0,M=y.length;d!=null&&E<M;)d=d[Fr(y[E++])];return E&&E==M?d:i}function M1(d,y,E){var M=y(d);return Ge(d)?M:ja(M,E(d))}function Zi(d){return d==null?d===i?Fn:ae:sa&&sa in Rn(d)?ih(d):sp(d)}function zf(d,y){return d>y}function lo(d,y){return d!=null&&bn.call(d,y)}function Io(d,y){return d!=null&&y in Rn(d)}function Za(d,y,E){return d>=Pi(y,E)&&d<gi(y,E)}function jf(d,y,E){for(var M=E?Bf:Od,z=d[0].length,Z=d.length,rt=Z,ht=Mt(Z),Tt=1/0,Vt=[];rt--;){var Wt=d[rt];rt&&y&&(Wt=ei(Wt,io(y))),Tt=Pi(Wt.length,Tt),ht[rt]=!E&&(y||z>=120&&Wt.length>=120)?new tu(rt&&Wt):i}Wt=d[0];var Yt=-1,re=ht[0];t:for(;++Yt<z&&Vt.length<Tt;){var ye=Wt[Yt],Le=y?y(ye):ye;if(ye=E||ye!==0?ye:0,!(re?Pf(re,Le):M(Vt,Le,E))){for(rt=Z;--rt;){var en=ht[rt];if(!(en?Pf(en,Le):M(d[rt],Le,E)))continue t}re&&re.push(Le),Vt.push(ye)}}return Vt}function oy(d,y,E,M){return us(d,function(z,Z,rt){y(M,E(z),Z,rt)}),M}function Ho(d,y,E){y=fo(y,d),d=ah(d,y);var M=d==null?d:d[Fr(Jn(y))];return M==null?i:eo(M,d,E)}function Lr(d){return vi(d)&&Zi(d)==xt}function Ti(d){return vi(d)&&Zi(d)==ji}function n0(d){return vi(d)&&Zi(d)==ot}function uo(d,y,E,M,z){return d===y?!0:d==null||y==null||!vi(d)&&!vi(y)?d!==d&&y!==y:We(d,y,E,M,uo,z)}function We(d,y,E,M,z,Z){var rt=Ge(d),ht=Ge(y),Tt=rt?gt:Qi(d),Vt=ht?gt:Qi(y);Tt=Tt==xt?ee:Tt,Vt=Vt==xt?ee:Vt;var Wt=Tt==ee,Yt=Vt==ee,re=Tt==Vt;if(re&&ll(d)){if(!ll(y))return!1;rt=!0,Wt=!1}if(re&&!Wt)return Z||(Z=new Fo),rt||ul(d)?th(d,y,E,M,z,Z):wy(d,y,Tt,E,M,z,Z);if(!(E&T)){var ye=Wt&&bn.call(d,"__wrapped__"),Le=Yt&&bn.call(y,"__wrapped__");if(ye||Le){var en=ye?d.value():d,_e=Le?y.value():y;return Z||(Z=new Fo),z(en,_e,E,M,Z)}}return re?(Z||(Z=new Fo),tp(d,y,E,M,z,Z)):!1}function In(d){return vi(d)&&Qi(d)==Nt}function pi(d,y,E,M){var z=E.length,Z=z,rt=!M;if(d==null)return!Z;for(d=Rn(d);z--;){var ht=E[z];if(rt&&ht[2]?ht[1]!==d[ht[0]]:!(ht[0]in d))return!1}for(;++z<Z;){ht=E[z];var Tt=ht[0],Vt=d[Tt],Wt=ht[1];if(rt&&ht[2]){if(Vt===i&&!(Tt in d))return!1}else{var Yt=new Fo;if(M)var re=M(Vt,Wt,Tt,d,y,Yt);if(!(re===i?uo(Wt,Vt,T|D,M,Yt):re))return!1}}return!0}function Uf(d){if(!ri(d)||Ey(d))return!1;var y=vo(d)?Qu:Sd;return y.test(lr(d))}function hc(d){return vi(d)&&Zi(d)==Re}function iu(d){return vi(d)&&Qi(d)==ve}function i0(d){return vi(d)&&I0(d.length)&&!!kn[Zi(d)]}function dc(d){return typeof d=="function"?d:d==null?Cr:typeof d=="object"?Ge(d)?R1(d[0],d[1]):o0(d):X(d)}function Qa(d){if(!Cc(d))return nc(d);var y=[];for(var E in Rn(d))bn.call(d,E)&&E!="constructor"&&y.push(E);return y}function FC(d){if(!ri(d))return da(d);var y=Cc(d),E=[];for(var M in d)M=="constructor"&&(y||!bn.call(d,M))||E.push(M);return E}function ii(d,y){return d<y}function r0(d,y){var E=-1,M=Gr(d)?Mt(d.length):[];return Fs(d,function(z,Z,rt){M[++E]=y(z,Z,rt)}),M}function o0(d){var y=v0(d);return y.length==1&&y[0][2]?E0(y[0][0],y[0][1]):function(E){return E===d||pi(E,d,y)}}function R1(d,y){return oh(d)&&Hs(y)?E0(Fr(d),y):function(E){var M=cl(E,d);return M===i&&M===y?Up(E,d):uo(y,M,T|D)}}function $f(d,y,E,M,z){d!==y&&nu(y,function(Z,rt){if(z||(z=new Fo),ri(Z))kC(d,y,rt,E,$f,M,z);else{var ht=M?M($n(d,rt),Z,rt+"",d,y,z):i;ht===i&&(ht=Z),Qd(d,rt,ht)}},jr)}function kC(d,y,E,M,z,Z,rt){var ht=$n(d,E),Tt=$n(y,E),Vt=rt.get(Tt);if(Vt){Qd(d,E,Vt);return}var Wt=Z?Z(ht,Tt,E+"",d,y,rt):i,Yt=Wt===i;if(Yt){var re=Ge(Tt),ye=!re&&ll(Tt),Le=!re&&!ye&&ul(Tt);Wt=Tt,re||ye||Le?Ge(ht)?Wt=ht:Di(ht)?Wt=wr(ht):ye?(Yt=!1,Wt=j1(Tt,!0)):Le?(Yt=!1,Wt=U1(Tt,!0)):Wt=[]:Th(Tt)||uu(Tt)?(Wt=ht,uu(ht)?Wt=H0(ht):(!ri(ht)||vo(ht))&&(Wt=np(Tt))):Yt=!1}Yt&&(rt.set(Tt,Wt),z(Wt,Tt,M,Z,rt),rt.delete(Tt)),Qd(d,E,Wt)}function s0(d,y){var E=d.length;if(E)return y+=y<0?E:0,hs(y,E)?d[y]:i}function a0(d,y,E){y.length?y=ei(y,function(Z){return Ge(Z)?function(rt){return ks(rt,Z.length===1?Z[0]:Z)}:Z}):y=[Cr];var M=-1;y=ei(y,io(De()));var z=r0(d,function(Z,rt,ht){var Tt=ei(y,function(Vt){return Vt(Z)});return{criteria:Tt,index:++M,value:Z}});return zv(z,function(Z,rt){return dy(Z,rt,E)})}function O1(d,y){return sr(d,y,function(E,M){return Up(d,M)})}function sr(d,y,E){for(var M=-1,z=y.length,Z={};++M<z;){var rt=y[M],ht=ks(d,rt);E(ht,rt)&&vc(Z,fo(rt,d),ht)}return Z}function Ai(d){return function(y){return ks(y,d)}}function gc(d,y,E,M){var z=M?DC:Xu,Z=-1,rt=y.length,ht=d;for(d===y&&(y=wr(y)),E&&(ht=ei(d,io(E)));++Z<rt;)for(var Tt=0,Vt=y[Z],Wt=E?E(Vt):Vt;(Tt=z(ht,Wt,Tt,M))>-1;)ht!==d&&oa.call(ht,Tt,1),oa.call(d,Tt,1);return d}function pc(d,y){for(var E=d?y.length:0,M=E-1;E--;){var z=y[E];if(E==M||z!==Z){var Z=z;hs(z)?oa.call(d,z,1):Vf(d,z)}}return d}function mc(d,y){return d+_f(aa()*(y-d+1))}function L1(d,y,E,M){for(var z=-1,Z=gi(tc((y-d)/(E||1)),0),rt=Mt(Z);Z--;)rt[M?Z:++z]=d,d+=E;return rt}function cs(d,y){var E="";if(!d||y<1||y>N)return E;do y%2&&(E+=d),y=_f(y/2),y&&(d+=d);while(y);return E}function Xe(d,y){return S0(ap(d,y,Cr),d+"")}function _1(d){return Nf(Fc(d))}function F1(d,y){var E=Fc(d);return ch(E,as(y,0,E.length))}function vc(d,y,E,M){if(!ri(d))return d;y=fo(y,d);for(var z=-1,Z=y.length,rt=Z-1,ht=d;ht!=null&&++z<Z;){var Tt=Fr(y[z]),Vt=E;if(Tt==="__proto__"||Tt==="constructor"||Tt==="prototype")return d;if(z!=rt){var Wt=ht[Tt];Vt=M?M(Wt,Tt,ht):i,Vt===i&&(Vt=ri(Wt)?Wt:hs(y[z+1])?[]:{})}ss(ht,Tt,Vt),ht=ht[Tt]}return d}var k1=Mi?function(d,y){return Mi.set(d,y),d}:Cr,sy=Po?function(d,y){return Po(d,"toString",{configurable:!0,enumerable:!1,value:Ic(y),writable:!0})}:Cr;function ay(d){return ch(Fc(d))}function co(d,y,E){var M=-1,z=d.length;y<0&&(y=-y>z?0:z+y),E=E>z?z:E,E<0&&(E+=z),z=y>E?0:E-y>>>0,y>>>=0;for(var Z=Mt(z);++M<z;)Z[M]=d[M+y];return Z}function ly(d,y){var E;return Fs(d,function(M,z,Z){return E=y(M,z,Z),!E}),!!E}function yc(d,y,E){var M=0,z=d==null?M:d.length;if(typeof y=="number"&&y===y&&z<=tt){for(;M<z;){var Z=M+z>>>1,rt=d[Z];rt!==null&&!zr(rt)&&(E?rt<=y:rt<y)?M=Z+1:z=Z}return z}return l0(d,y,Cr,E)}function l0(d,y,E,M){var z=0,Z=d==null?0:d.length;if(Z===0)return 0;y=E(y);for(var rt=y!==y,ht=y===null,Tt=zr(y),Vt=y===i;z<Z;){var Wt=_f((z+Z)/2),Yt=E(d[Wt]),re=Yt!==i,ye=Yt===null,Le=Yt===Yt,en=zr(Yt);if(rt)var _e=M||Le;else Vt?_e=Le&&(M||re):ht?_e=Le&&re&&(M||!ye):Tt?_e=Le&&re&&!ye&&(M||!en):ye||en?_e=!1:_e=M?Yt<=y:Yt<y;_e?z=Wt+1:Z=Wt}return Pi(Z,J)}function uy(d,y){for(var E=-1,M=d.length,z=0,Z=[];++E<M;){var rt=d[E],ht=y?y(rt):rt;if(!E||!mo(ht,Tt)){var Tt=ht;Z[z++]=rt===0?0:rt}}return Z}function I1(d){return typeof d=="number"?d:zr(d)?Q:+d}function _r(d){if(typeof d=="string")return d;if(Ge(d))return ei(d,_r)+"";if(zr(d))return Ql?Ql.call(d):"";var y=d+"";return y=="0"&&1/d==-1/0?"-0":y}function ha(d,y,E){var M=-1,z=Od,Z=d.length,rt=!0,ht=[],Tt=ht;if(E)rt=!1,z=Bf;else if(Z>=o){var Vt=y?null:vy(d);if(Vt)return Nd(Vt);rt=!1,z=Pf,Tt=new tu}else Tt=y?[]:ht;t:for(;++M<Z;){var Wt=d[M],Yt=y?y(Wt):Wt;if(Wt=E||Wt!==0?Wt:0,rt&&Yt===Yt){for(var re=Tt.length;re--;)if(Tt[re]===Yt)continue t;y&&Tt.push(Yt),ht.push(Wt)}else z(Tt,Yt,E)||(Tt!==ht&&Tt.push(Yt),ht.push(Wt))}return ht}function Vf(d,y){return y=fo(y,d),d=ah(d,y),d==null||delete d[Fr(Jn(y))]}function H1(d,y,E,M){return vc(d,y,E(ks(d,y)),M)}function Wf(d,y,E,M){for(var z=d.length,Z=M?z:-1;(M?Z--:++Z<z)&&y(d[Z],Z,d););return E?co(d,M?0:Z,M?Z+1:z):co(d,M?Z+1:0,M?z:Z)}function N1(d,y){var E=d;return E instanceof Ve&&(E=E.value()),h1(y,function(M,z){return z.func.apply(z.thisArg,ja([M],z.args))},E)}function u0(d,y,E){var M=d.length;if(M<2)return M?ha(d[0]):[];for(var z=-1,Z=Mt(M);++z<M;)for(var rt=d[z],ht=-1;++ht<M;)ht!=z&&(Z[z]=ko(Z[z]||rt,d[ht],y,E));return ha(Ii(Z,1),y,E)}function G1(d,y,E){for(var M=-1,z=d.length,Z=y.length,rt={};++M<z;){var ht=M<Z?y[M]:i;E(rt,d[M],ht)}return rt}function z1(d){return Di(d)?d:[]}function c0(d){return typeof d=="function"?d:Cr}function fo(d,y){return Ge(d)?d:oh(d,y)?[d]:lp(Pn(d))}var cy=Xe;function fs(d,y,E){var M=d.length;return E=E===i?M:E,!y&&E>=M?d:co(d,y,E)}var Xf=Zv||function(d){return ki.clearTimeout(d)};function j1(d,y){if(y)return d.slice();var E=d.length,M=Vd?Vd(E):new d.constructor(E);return d.copy(M),M}function qf(d){var y=new d.constructor(d.byteLength);return new Yl(y).set(new Yl(d)),y}function IC(d,y){var E=y?qf(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.byteLength)}function fy(d){var y=new d.constructor(d.source,Hu.exec(d));return y.lastIndex=d.lastIndex,y}function hy(d){return rc?Rn(rc.call(d)):{}}function U1(d,y){var E=y?qf(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function $1(d,y){if(d!==y){var E=d!==i,M=d===null,z=d===d,Z=zr(d),rt=y!==i,ht=y===null,Tt=y===y,Vt=zr(y);if(!ht&&!Vt&&!Z&&d>y||Z&&rt&&Tt&&!ht&&!Vt||M&&rt&&Tt||!E&&Tt||!z)return 1;if(!M&&!Z&&!Vt&&d<y||Vt&&E&&z&&!M&&!Z||ht&&E&&z||!rt&&z||!Tt)return-1}return 0}function dy(d,y,E){for(var M=-1,z=d.criteria,Z=y.criteria,rt=z.length,ht=E.length;++M<rt;){var Tt=$1(z[M],Z[M]);if(Tt){if(M>=ht)return Tt;var Vt=E[M];return Tt*(Vt=="desc"?-1:1)}}return d.index-y.index}function f0(d,y,E,M){for(var z=-1,Z=d.length,rt=E.length,ht=-1,Tt=y.length,Vt=gi(Z-rt,0),Wt=Mt(Tt+Vt),Yt=!M;++ht<Tt;)Wt[ht]=y[ht];for(;++z<rt;)(Yt||z<Z)&&(Wt[E[z]]=d[z]);for(;Vt--;)Wt[ht++]=d[z++];return Wt}function V1(d,y,E,M){for(var z=-1,Z=d.length,rt=-1,ht=E.length,Tt=-1,Vt=y.length,Wt=gi(Z-ht,0),Yt=Mt(Wt+Vt),re=!M;++z<Wt;)Yt[z]=d[z];for(var ye=z;++Tt<Vt;)Yt[ye+Tt]=y[Tt];for(;++rt<ht;)(re||z<Z)&&(Yt[ye+E[rt]]=d[z++]);return Yt}function wr(d,y){var E=-1,M=d.length;for(y||(y=Mt(M));++E<M;)y[E]=d[E];return y}function No(d,y,E,M){var z=!E;E||(E={});for(var Z=-1,rt=y.length;++Z<rt;){var ht=y[Z],Tt=M?M(E[ht],d[ht],ht,E,d):i;Tt===i&&(Tt=d[ht]),z?ao(E,ht,Tt):ss(E,ht,Tt)}return E}function gy(d,y){return No(d,y0(d),y)}function py(d,y){return No(d,rh(d),y)}function h0(d,y){return function(E,M){var z=Ge(E)?CC:iy,Z=y?y():{};return z(E,d,De(M,2),Z)}}function Ja(d){return Xe(function(y,E){var M=-1,z=E.length,Z=z>1?E[z-1]:i,rt=z>2?E[2]:i;for(Z=d.length>3&&typeof Z=="function"?(z--,Z):i,rt&&ar(E[0],E[1],rt)&&(Z=z<3?i:Z,z=1),y=Rn(y);++M<z;){var ht=E[M];ht&&d(y,ht,M,Z)}return y})}function W1(d,y){return function(E,M){if(E==null)return E;if(!Gr(E))return d(E,M);for(var z=E.length,Z=y?z:-1,rt=Rn(E);(y?Z--:++Z<z)&&M(rt[Z],Z,rt)!==!1;);return E}}function X1(d){return function(y,E,M){for(var z=-1,Z=Rn(y),rt=M(y),ht=rt.length;ht--;){var Tt=rt[d?ht:++z];if(E(Z[Tt],Tt,Z)===!1)break}return y}}function q1(d,y,E){var M=y&b,z=Yf(d);function Z(){var rt=this&&this!==ki&&this instanceof Z?z:d;return rt.apply(M?E:this,arguments)}return Z}function Y1(d){return function(y){y=Pn(y);var E=Xl(y)?ai(y):i,M=E?E[0]:y.charAt(0),z=E?fs(E,1).join(""):y.slice(1);return M[d]()+z}}function ru(d){return function(y){return h1(M2(kc(y).replace(u1,"")),d,"")}}function Yf(d){return function(){var y=arguments;switch(y.length){case 0:return new d;case 1:return new d(y[0]);case 2:return new d(y[0],y[1]);case 3:return new d(y[0],y[1],y[2]);case 4:return new d(y[0],y[1],y[2],y[3]);case 5:return new d(y[0],y[1],y[2],y[3],y[4]);case 6:return new d(y[0],y[1],y[2],y[3],y[4],y[5]);case 7:return new d(y[0],y[1],y[2],y[3],y[4],y[5],y[6])}var E=Wa(d.prototype),M=d.apply(E,y);return ri(M)?M:E}}function HC(d,y,E){var M=Yf(d);function z(){for(var Z=arguments.length,rt=Mt(Z),ht=Z,Tt=mi(z);ht--;)rt[ht]=arguments[ht];var Vt=Z<3&&rt[0]!==Tt&&rt[Z-1]!==Tt?[]:ra(rt,Tt);if(Z-=Vt.length,Z<E)return p0(d,y,xc,z.placeholder,i,rt,Vt,i,i,E-Z);var Wt=this&&this!==ki&&this instanceof z?M:d;return eo(Wt,this,rt)}return z}function K1(d){return function(y,E,M){var z=Rn(y);if(!Gr(y)){var Z=De(E,3);y=$i(y),E=function(ht){return Z(z[ht],ht,z)}}var rt=d(y,E,M);return rt>-1?z[Z?y[rt]:rt]:i}}function wc(d){return Is(function(y){var E=y.length,M=E,z=Or.prototype.thru;for(d&&y.reverse();M--;){var Z=y[M];if(typeof Z!="function")throw new ro(u);if(z&&!rt&&li(Z)=="wrapper")var rt=new Or([],!0)}for(M=rt?M:E;++M<E;){Z=y[M];var ht=li(Z),Tt=ht=="wrapper"?eh(Z):i;Tt&&sh(Tt[0])&&Tt[1]==(U|H|k|nt)&&!Tt[4].length&&Tt[9]==1?rt=rt[li(Tt[0])].apply(rt,Tt[3]):rt=Z.length==1&&sh(Z)?rt[ht]():rt.thru(Z)}return function(){var Vt=arguments,Wt=Vt[0];if(rt&&Vt.length==1&&Ge(Wt))return rt.plant(Wt).value();for(var Yt=0,re=E?y[Yt].apply(this,Vt):Wt;++Yt<E;)re=y[Yt].call(this,re);return re}})}function xc(d,y,E,M,z,Z,rt,ht,Tt,Vt){var Wt=y&U,Yt=y&b,re=y&B,ye=y&(H|R),Le=y&st,en=re?i:Yf(d);function _e(){for(var dn=arguments.length,xn=Mt(dn),ms=dn;ms--;)xn[ms]=arguments[ms];if(ye)var wo=mi(_e),vs=Mf(xn,wo);if(M&&(xn=f0(xn,M,z,ye)),Z&&(xn=V1(xn,Z,rt,ye)),dn-=vs,ye&&dn<Vt){var Ni=ra(xn,wo);return p0(d,y,xc,_e.placeholder,E,xn,Ni,ht,Tt,Vt-dn)}var Ea=Yt?E:this,fu=re?Ea[d]:d;return dn=xn.length,ht?xn=lh(xn,ht):Le&&dn>1&&xn.reverse(),Wt&&Tt<dn&&(xn.length=Tt),this&&this!==ki&&this instanceof _e&&(fu=en||Yf(fu)),fu.apply(Ea,xn)}return _e}function Kf(d,y){return function(E,M){return oy(E,d,y(M),{})}}function Zf(d,y){return function(E,M){var z;if(E===i&&M===i)return y;if(E!==i&&(z=E),M!==i){if(z===i)return M;typeof E=="string"||typeof M=="string"?(E=_r(E),M=_r(M)):(E=I1(E),M=I1(M)),z=d(E,M)}return z}}function d0(d){return Is(function(y){return y=ei(y,io(De())),Xe(function(E){var M=this;return d(y,function(z){return eo(z,M,E)})})})}function tl(d,y){y=y===i?" ":_r(y);var E=y.length;if(E<2)return E?cs(y,d):y;var M=cs(y,tc(d/qu(y)));return Xl(y)?fs(ai(M),0,d).join(""):M.slice(0,d)}function my(d,y,E,M){var z=y&b,Z=Yf(d);function rt(){for(var ht=-1,Tt=arguments.length,Vt=-1,Wt=M.length,Yt=Mt(Wt+Tt),re=this&&this!==ki&&this instanceof rt?Z:d;++Vt<Wt;)Yt[Vt]=M[Vt];for(;Tt--;)Yt[Vt++]=arguments[++ht];return eo(re,z?E:this,Yt)}return rt}function g0(d){return function(y,E,M){return M&&typeof M!="number"&&ar(y,E,M)&&(E=M=i),y=xa(y),E===i?(E=y,y=0):E=xa(E),M=M===i?y<E?1:-1:xa(M),L1(y,E,M,d)}}function Qf(d){return function(y,E){return typeof y=="string"&&typeof E=="string"||(y=yo(y),E=yo(E)),d(y,E)}}function p0(d,y,E,M,z,Z,rt,ht,Tt,Vt){var Wt=y&H,Yt=Wt?rt:i,re=Wt?i:rt,ye=Wt?Z:i,Le=Wt?i:Z;y|=Wt?k:W,y&=~(Wt?W:k),y&A||(y&=-4);var en=[d,y,z,ye,Yt,Le,re,ht,Tt,Vt],_e=E.apply(i,en);return sh(d)&&Ty(_e,en),_e.placeholder=M,Ec(_e,d,y)}function Jf(d){var y=ni[d];return function(E,M){if(E=yo(E),M=M==null?0:Pi(Oe(M),292),M&&oo(E)){var z=(Pn(E)+"e").split("e"),Z=y(z[0]+"e"+(+z[1]+M));return z=(Pn(Z)+"e").split("e"),+(z[0]+"e"+(+z[1]-M))}return y(E)}}var vy=Ua&&1/Nd(new Ua([,-0]))[1]==_?function(d){return new Ua(d)}:f;function Z1(d){return function(y){var E=Qi(y);return E==Nt?Hd(y):E==ve?BC(y):jv(y,d(y))}}function xr(d,y,E,M,z,Z,rt,ht){var Tt=y&B;if(!Tt&&typeof d!="function")throw new ro(u);var Vt=M?M.length:0;if(Vt||(y&=-97,M=z=i),rt=rt===i?rt:gi(Oe(rt),0),ht=ht===i?ht:Oe(ht),Vt-=z?z.length:0,y&W){var Wt=M,Yt=z;M=z=i}var re=Tt?i:eh(d),ye=[d,y,E,M,z,Wt,Yt,Z,rt,ht];if(re&&Sy(ye,re),d=ye[0],y=ye[1],E=ye[2],M=ye[3],z=ye[4],ht=ye[9]=ye[9]===i?Tt?0:d.length:gi(ye[9]-Vt,0),!ht&&y&(H|R)&&(y&=-25),!y||y==b)var Le=q1(d,y,E);else y==H||y==R?Le=HC(d,y,ht):(y==k||y==(b|k))&&!z.length?Le=my(d,y,E,M):Le=xc.apply(i,ye);var en=re?k1:Ty;return Ec(en(Le,ye),d,y)}function Q1(d,y,E,M){return d===i||mo(d,Zu[E])&&!bn.call(M,E)?y:d}function J1(d,y,E,M,z,Z){return ri(d)&&ri(y)&&(Z.set(y,d),$f(d,y,i,J1,Z),Z.delete(y)),d}function yy(d){return Th(d)?i:d}function th(d,y,E,M,z,Z){var rt=E&T,ht=d.length,Tt=y.length;if(ht!=Tt&&!(rt&&Tt>ht))return!1;var Vt=Z.get(d),Wt=Z.get(y);if(Vt&&Wt)return Vt==y&&Wt==d;var Yt=-1,re=!0,ye=E&D?new tu:i;for(Z.set(d,y),Z.set(y,d);++Yt<ht;){var Le=d[Yt],en=y[Yt];if(M)var _e=rt?M(en,Le,Yt,y,d,Z):M(Le,en,Yt,d,y,Z);if(_e!==i){if(_e)continue;re=!1;break}if(ye){if(!d1(y,function(dn,xn){if(!Pf(ye,xn)&&(Le===dn||z(Le,dn,E,M,Z)))return ye.push(xn)})){re=!1;break}}else if(!(Le===en||z(Le,en,E,M,Z))){re=!1;break}}return Z.delete(d),Z.delete(y),re}function wy(d,y,E,M,z,Z,rt){switch(E){case An:if(d.byteLength!=y.byteLength||d.byteOffset!=y.byteOffset)return!1;d=d.buffer,y=y.buffer;case ji:return!(d.byteLength!=y.byteLength||!Z(new Yl(d),new Yl(y)));case $t:case ot:case ge:return mo(+d,+y);case Rt:return d.name==y.name&&d.message==y.message;case Re:case Qe:return d==y+"";case Nt:var ht=Hd;case ve:var Tt=M&T;if(ht||(ht=Nd),d.size!=y.size&&!Tt)return!1;var Vt=rt.get(d);if(Vt)return Vt==y;M|=D,rt.set(d,y);var Wt=th(ht(d),ht(y),M,z,Z,rt);return rt.delete(d),Wt;case ti:if(rc)return rc.call(d)==rc.call(y)}return!1}function tp(d,y,E,M,z,Z){var rt=E&T,ht=m0(d),Tt=ht.length,Vt=m0(y),Wt=Vt.length;if(Tt!=Wt&&!rt)return!1;for(var Yt=Tt;Yt--;){var re=ht[Yt];if(!(rt?re in y:bn.call(y,re)))return!1}var ye=Z.get(d),Le=Z.get(y);if(ye&&Le)return ye==y&&Le==d;var en=!0;Z.set(d,y),Z.set(y,d);for(var _e=rt;++Yt<Tt;){re=ht[Yt];var dn=d[re],xn=y[re];if(M)var ms=rt?M(xn,dn,re,y,d,Z):M(dn,xn,re,d,y,Z);if(!(ms===i?dn===xn||z(dn,xn,E,M,Z):ms)){en=!1;break}_e||(_e=re=="constructor")}if(en&&!_e){var wo=d.constructor,vs=y.constructor;wo!=vs&&"constructor"in d&&"constructor"in y&&!(typeof wo=="function"&&wo instanceof wo&&typeof vs=="function"&&vs instanceof vs)&&(en=!1)}return Z.delete(d),Z.delete(y),en}function Is(d){return S0(ap(d,i,Qn),d+"")}function m0(d){return M1(d,$i,y0)}function ep(d){return M1(d,jr,rh)}var eh=Mi?function(d){return Mi.get(d)}:f;function li(d){for(var y=d.name+"",E=Bn[y],M=bn.call(Bn,y)?E.length:0;M--;){var z=E[M],Z=z.func;if(Z==null||Z==d)return z.name}return y}function mi(d){var y=bn.call(q,"placeholder")?q:d;return y.placeholder}function De(){var d=q.iteratee||Oh;return d=d===Oh?dc:d,arguments.length?d(arguments[0],arguments[1]):d}function nh(d,y){var E=d.__data__;return C0(y)?E[typeof y=="string"?"string":"hash"]:E.map}function v0(d){for(var y=$i(d),E=y.length;E--;){var M=y[E],z=d[M];y[E]=[M,z,Hs(z)]}return y}function el(d,y){var E=Uv(d,y);return Uf(E)?E:i}function ih(d){var y=bn.call(d,sa),E=d[sa];try{d[sa]=i;var M=!0}catch{}var z=Rr.call(d);return M&&(y?d[sa]=E:delete d[sa]),z}var y0=Ff?function(d){return d==null?[]:(d=Rn(d),za(Ff(d),function(y){return Lf.call(d,y)}))}:zt,rh=Ff?function(d){for(var y=[];d;)ja(y,y0(d)),d=Os(d);return y}:zt,Qi=Zi;(Oo&&Qi(new Oo(new ArrayBuffer(1)))!=An||so&&Qi(new so)!=Nt||Xd&&Qi(Xd.resolve())!=xe||Ua&&Qi(new Ua)!=ve||Zl&&Qi(new Zl)!=Kn)&&(Qi=function(d){var y=Zi(d),E=y==ee?d.constructor:i,M=E?lr(E):"";if(M)switch(M){case hn:return An;case $a:return Nt;case Lo:return xe;case T1:return ve;case Va:return Kn}return y});function NC(d,y,E){for(var M=-1,z=E.length;++M<z;){var Z=E[M],rt=Z.size;switch(Z.type){case"drop":d+=rt;break;case"dropRight":y-=rt;break;case"take":y=Pi(y,d+rt);break;case"takeRight":d=gi(d,y-rt);break}}return{start:d,end:y}}function w0(d){var y=d.match(Cd);return y?y[1].split(Ed):[]}function x0(d,y,E){y=fo(y,d);for(var M=-1,z=y.length,Z=!1;++M<z;){var rt=Fr(y[M]);if(!(Z=d!=null&&E(d,rt)))break;d=d[rt]}return Z||++M!=z?Z:(z=d==null?0:d.length,!!z&&I0(z)&&hs(rt,z)&&(Ge(d)||uu(d)))}function xy(d){var y=d.length,E=new d.constructor(y);return y&&typeof d[0]=="string"&&bn.call(d,"index")&&(E.index=d.index,E.input=d.input),E}function np(d){return typeof d.constructor=="function"&&!Cc(d)?Wa(Os(d)):{}}function Cy(d,y,E){var M=d.constructor;switch(y){case ji:return qf(d);case $t:case ot:return new M(+d);case An:return IC(d,E);case Wn:case Zr:case Js:case ta:case Qr:case di:case Pr:case Ei:case Ps:return U1(d,E);case Nt:return new M;case ge:case Qe:return new M(d);case Re:return fy(d);case ve:return new M;case ti:return hy(d)}}function ip(d,y){var E=y.length;if(!E)return d;var M=E-1;return y[M]=(E>1?"& ":"")+y[M],y=y.join(E>2?", ":" "),d.replace(Sf,`{
/* [wrapped with `+y+`] */
`)}function rp(d){return Ge(d)||uu(d)||!!(Kv&&d&&d[Kv])}function hs(d,y){var E=typeof d;return y=y??N,!!y&&(E=="number"||E!="symbol"&&Tf.test(d))&&d>-1&&d%1==0&&d<y}function ar(d,y,E){if(!ri(E))return!1;var M=typeof y;return(M=="number"?Gr(E)&&hs(y,E.length):M=="string"&&y in E)?mo(E[y],d):!1}function oh(d,y){if(Ge(d))return!1;var E=typeof d;return E=="number"||E=="symbol"||E=="boolean"||d==null||zr(d)?!0:Nl.test(d)||!Ef.test(d)||y!=null&&d in Rn(y)}function C0(d){var y=typeof d;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?d!=="__proto__":d===null}function sh(d){var y=li(d),E=q[y];if(typeof E!="function"||!(y in Ve.prototype))return!1;if(d===E)return!0;var M=eh(E);return!!M&&d===M[0]}function Ey(d){return!!Ud&&Ud in d}var op=zd?vo:Bt;function Cc(d){var y=d&&d.constructor,E=typeof y=="function"&&y.prototype||Zu;return d===E}function Hs(d){return d===d&&!ri(d)}function E0(d,y){return function(E){return E==null?!1:E[d]===y&&(y!==i||d in Rn(E))}}function GC(d){var y=xh(d,function(M){return E.size===g&&E.clear(),M}),E=y.cache;return y}function Sy(d,y){var E=d[1],M=y[1],z=E|M,Z=z<(b|B|U),rt=M==U&&E==H||M==U&&E==nt&&d[7].length<=y[8]||M==(U|nt)&&y[7].length<=y[8]&&E==H;if(!(Z||rt))return d;M&b&&(d[2]=y[2],z|=E&b?0:A);var ht=y[3];if(ht){var Tt=d[3];d[3]=Tt?f0(Tt,ht,y[4]):ht,d[4]=Tt?ra(d[3],p):y[4]}return ht=y[5],ht&&(Tt=d[5],d[5]=Tt?V1(Tt,ht,y[6]):ht,d[6]=Tt?ra(d[5],p):y[6]),ht=y[7],ht&&(d[7]=ht),M&U&&(d[8]=d[8]==null?y[8]:Pi(d[8],y[8])),d[9]==null&&(d[9]=y[9]),d[0]=y[0],d[1]=z,d}function da(d){var y=[];if(d!=null)for(var E in Rn(d))y.push(E);return y}function sp(d){return Rr.call(d)}function ap(d,y,E){return y=gi(y===i?d.length-1:y,0),function(){for(var M=arguments,z=-1,Z=gi(M.length-y,0),rt=Mt(Z);++z<Z;)rt[z]=M[y+z];z=-1;for(var ht=Mt(y+1);++z<y;)ht[z]=M[z];return ht[y]=E(rt),eo(d,this,ht)}}function ah(d,y){return y.length<2?d:ks(d,co(y,0,-1))}function lh(d,y){for(var E=d.length,M=Pi(y.length,E),z=wr(d);M--;){var Z=y[M];d[M]=hs(Z,E)?z[Z]:i}return d}function $n(d,y){if(!(y==="constructor"&&typeof d[y]=="function")&&y!="__proto__")return d[y]}var Ty=ga(k1),uh=Kl||function(d,y){return ki.setTimeout(d,y)},S0=ga(sy);function Ec(d,y,E){var M=y+"";return S0(d,ip(M,Ay(w0(M),E)))}function ga(d){var y=0,E=0;return function(){var M=Mo(),z=mt-(M-E);if(E=M,z>0){if(++y>=ct)return arguments[0]}else y=0;return d.apply(i,arguments)}}function ch(d,y){var E=-1,M=d.length,z=M-1;for(y=y===i?M:y;++E<y;){var Z=mc(E,z),rt=d[Z];d[Z]=d[E],d[E]=rt}return d.length=y,d}var lp=GC(function(d){var y=[];return d.charCodeAt(0)===46&&y.push(""),d.replace(i1,function(E,M,z,Z){y.push(z?Z.replace(or,"$1"):M||E)}),y});function Fr(d){if(typeof d=="string"||zr(d))return d;var y=d+"";return y=="0"&&1/d==-1/0?"-0":y}function lr(d){if(d!=null){try{return jd.call(d)}catch{}try{return d+""}catch{}}return""}function Ay(d,y){return no(it,function(E){var M="_."+E[0];y&E[1]&&!Od(d,M)&&d.push(M)}),d.sort()}function T0(d){if(d instanceof Ve)return d.clone();var y=new Or(d.__wrapped__,d.__chain__);return y.__actions__=wr(d.__actions__),y.__index__=d.__index__,y.__values__=d.__values__,y}function Dy(d,y,E){(E?ar(d,y,E):y===i)?y=1:y=gi(Oe(y),0);var M=d==null?0:d.length;if(!M||y<1)return[];for(var z=0,Z=0,rt=Mt(tc(M/y));z<M;)rt[Z++]=co(d,z,z+=y);return rt}function up(d){for(var y=-1,E=d==null?0:d.length,M=0,z=[];++y<E;){var Z=d[y];Z&&(z[M++]=Z)}return z}function cp(){var d=arguments.length;if(!d)return[];for(var y=Mt(d-1),E=arguments[0],M=d;M--;)y[M-1]=arguments[M];return ja(Ge(E)?wr(E):[E],Ii(y,1))}var A0=Xe(function(d,y){return Di(d)?ko(d,Ii(y,1,Di,!0)):[]}),by=Xe(function(d,y){var E=Jn(y);return Di(E)&&(E=i),Di(d)?ko(d,Ii(y,1,Di,!0),De(E,2)):[]}),pa=Xe(function(d,y){var E=Jn(y);return Di(E)&&(E=i),Di(d)?ko(d,Ii(y,1,Di,!0),i,E):[]});function Oi(d,y,E){var M=d==null?0:d.length;return M?(y=E||y===i?1:Oe(y),co(d,y<0?0:y,M)):[]}function fp(d,y,E){var M=d==null?0:d.length;return M?(y=E||y===i?1:Oe(y),y=M-y,co(d,0,y<0?0:y)):[]}function By(d,y){return d&&d.length?Wf(d,De(y,3),!0,!0):[]}function Ui(d,y){return d&&d.length?Wf(d,De(y,3),!0):[]}function zC(d,y,E,M){var z=d==null?0:d.length;return z?(E&&typeof E!="number"&&ar(d,y,E)&&(E=0,M=z),Gf(d,y,E,M)):[]}function hp(d,y,E){var M=d==null?0:d.length;if(!M)return-1;var z=E==null?0:Oe(E);return z<0&&(z=gi(M+z,0)),Ld(d,De(y,3),z)}function dp(d,y,E){var M=d==null?0:d.length;if(!M)return-1;var z=M-1;return E!==i&&(z=Oe(E),z=E<0?gi(M+z,0):Pi(z,M-1)),Ld(d,De(y,3),z,!0)}function Qn(d){var y=d==null?0:d.length;return y?Ii(d,1):[]}function kr(d){var y=d==null?0:d.length;return y?Ii(d,_):[]}function ma(d,y){var E=d==null?0:d.length;return E?(y=y===i?1:Oe(y),Ii(d,y)):[]}function Py(d){for(var y=-1,E=d==null?0:d.length,M={};++y<E;){var z=d[y];M[z[0]]=z[1]}return M}function gp(d){return d&&d.length?d[0]:i}function My(d,y,E){var M=d==null?0:d.length;if(!M)return-1;var z=E==null?0:Oe(E);return z<0&&(z=gi(M+z,0)),Xu(d,y,z)}function jC(d){var y=d==null?0:d.length;return y?co(d,0,-1):[]}var D0=Xe(function(d){var y=ei(d,z1);return y.length&&y[0]===d[0]?jf(y):[]}),Ir=Xe(function(d){var y=Jn(d),E=ei(d,z1);return y===Jn(E)?y=i:E.pop(),E.length&&E[0]===d[0]?jf(E,De(y,2)):[]}),ds=Xe(function(d){var y=Jn(d),E=ei(d,z1);return y=typeof y=="function"?y:i,y&&E.pop(),E.length&&E[0]===d[0]?jf(E,i,y):[]});function Ry(d,y){return d==null?"":ec.call(d,y)}function Jn(d){var y=d==null?0:d.length;return y?d[y-1]:i}function Oy(d,y,E){var M=d==null?0:d.length;if(!M)return-1;var z=M;return E!==i&&(z=Oe(E),z=z<0?gi(M+z,0):Pi(z,M-1)),y===y?MC(d,y,z):Ld(d,Gv,z,!0)}function va(d,y){return d&&d.length?s0(d,Oe(y)):i}var ou=Xe(Ns);function Ns(d,y){return d&&d.length&&y&&y.length?gc(d,y):d}function pp(d,y,E){return d&&d.length&&y&&y.length?gc(d,y,De(E,2)):d}function mp(d,y,E){return d&&d.length&&y&&y.length?gc(d,y,i,E):d}var gs=Is(function(d,y){var E=d==null?0:d.length,M=cc(d,y);return pc(d,ei(y,function(z){return hs(z,E)?+z:z}).sort($1)),M});function Ly(d,y){var E=[];if(!(d&&d.length))return E;var M=-1,z=[],Z=d.length;for(y=De(y,3);++M<Z;){var rt=d[M];y(rt,M,d)&&(E.push(rt),z.push(M))}return pc(d,z),E}function nl(d){return d==null?d:Ls.call(d)}function fh(d,y,E){var M=d==null?0:d.length;return M?(E&&typeof E!="number"&&ar(d,y,E)?(y=0,E=M):(y=y==null?0:Oe(y),E=E===i?M:Oe(E)),co(d,y,E)):[]}function hh(d,y){return yc(d,y)}function Sc(d,y,E){return l0(d,y,De(E,2))}function _y(d,y){var E=d==null?0:d.length;if(E){var M=yc(d,y);if(M<E&&mo(d[M],y))return M}return-1}function Fy(d,y){return yc(d,y,!0)}function dh(d,y,E){return l0(d,y,De(E,2),!0)}function ky(d,y){var E=d==null?0:d.length;if(E){var M=yc(d,y,!0)-1;if(mo(d[M],y))return M}return-1}function b0(d){return d&&d.length?uy(d):[]}function Iy(d,y){return d&&d.length?uy(d,De(y,2)):[]}function UC(d){var y=d==null?0:d.length;return y?co(d,1,y):[]}function $C(d,y,E){return d&&d.length?(y=E||y===i?1:Oe(y),co(d,0,y<0?0:y)):[]}function Dn(d,y,E){var M=d==null?0:d.length;return M?(y=E||y===i?1:Oe(y),y=M-y,co(d,y<0?0:y,M)):[]}function Vn(d,y){return d&&d.length?Wf(d,De(y,3),!1,!0):[]}function on(d,y){return d&&d.length?Wf(d,De(y,3)):[]}var cn=Xe(function(d){return ha(Ii(d,1,Di,!0))}),On=Xe(function(d){var y=Jn(d);return Di(y)&&(y=i),ha(Ii(d,1,Di,!0),De(y,2))}),ho=Xe(function(d){var y=Jn(d);return y=typeof y=="function"?y:i,ha(Ii(d,1,Di,!0),i,y)});function il(d){return d&&d.length?ha(d):[]}function Tc(d,y){return d&&d.length?ha(d,De(y,2)):[]}function vp(d,y){return y=typeof y=="function"?y:i,d&&d.length?ha(d,i,y):[]}function ps(d){if(!(d&&d.length))return[];var y=0;return d=za(d,function(E){if(Di(E))return y=gi(E.length,y),!0}),kd(y,function(E){return ei(d,Vl(E))})}function ui(d,y){if(!(d&&d.length))return[];var E=ps(d);return y==null?E:ei(E,function(M){return eo(y,i,M)})}var rl=Xe(function(d,y){return Di(d)?ko(d,y):[]}),su=Xe(function(d){return u0(za(d,Di))}),yp=Xe(function(d){var y=Jn(d);return Di(y)&&(y=i),u0(za(d,Di),De(y,2))}),go=Xe(function(d){var y=Jn(d);return y=typeof y=="function"?y:i,u0(za(d,Di),i,y)}),Ac=Xe(ps);function gh(d,y){return G1(d||[],y||[],ss)}function Hr(d,y){return G1(d||[],y||[],vc)}var wp=Xe(function(d){var y=d.length,E=y>1?d[y-1]:i;return E=typeof E=="function"?(d.pop(),E):i,ui(d,E)});function ph(d){var y=q(d);return y.__chain__=!0,y}function Hy(d,y){return y(d),d}function au(d,y){return y(d)}var B0=Is(function(d){var y=d.length,E=y?d[0]:0,M=this.__wrapped__,z=function(Z){return cc(Z,d)};return y>1||this.__actions__.length||!(M instanceof Ve)||!hs(E)?this.thru(z):(M=M.slice(E,+E+(y?1:0)),M.__actions__.push({func:au,args:[z],thisArg:i}),new Or(M,this.__chain__).thru(function(Z){return y&&!Z.length&&Z.push(i),Z}))});function ol(){return ph(this)}function Hi(){return new Or(this.value(),this.__chain__)}function sl(){this.__values__===i&&(this.__values__=l2(this.value()));var d=this.__index__>=this.__values__.length,y=d?i:this.__values__[this.__index__++];return{done:d,value:y}}function Dc(){return this}function ya(d){for(var y,E=this;E instanceof Xa;){var M=T0(E);M.__index__=0,M.__values__=i,y?z.__wrapped__=M:y=M;var z=M;E=E.__wrapped__}return z.__wrapped__=d,y}function xp(){var d=this.__wrapped__;if(d instanceof Ve){var y=d;return this.__actions__.length&&(y=new Ve(this)),y=y.reverse(),y.__actions__.push({func:au,args:[nl],thisArg:i}),new Or(y,this.__chain__)}return this.thru(nl)}function Cp(){return N1(this.__wrapped__,this.__actions__)}var Ny=h0(function(d,y,E){bn.call(d,E)?++d[E]:ao(d,E,1)});function mh(d,y,E){var M=Ge(d)?Iv:Ka;return E&&ar(d,y,E)&&(y=i),M(d,De(y,3))}function Ep(d,y){var E=Ge(d)?za:t0;return E(d,De(y,3))}var po=K1(hp),Gy=K1(dp);function Nr(d,y){return Ii(vh(d,y),1)}function zy(d,y){return Ii(vh(d,y),_)}function jy(d,y,E){return E=E===i?1:Oe(E),Ii(vh(d,y),E)}function Uy(d,y){var E=Ge(d)?no:Fs;return E(d,De(y,3))}function wa(d,y){var E=Ge(d)?EC:Jd;return E(d,De(y,3))}var P0=h0(function(d,y,E){bn.call(d,E)?d[E].push(y):ao(d,E,[y])});function Sp(d,y,E,M){d=Gr(d)?d:Fc(d),E=E&&!M?Oe(E):0;var z=d.length;return E<0&&(E=gi(z+E,0)),bh(d)?E<=z&&d.indexOf(y,E)>-1:!!z&&Xu(d,y,E)>-1}var bc=Xe(function(d,y,E){var M=-1,z=typeof y=="function",Z=Gr(d)?Mt(d.length):[];return Fs(d,function(rt){Z[++M]=z?eo(y,rt,E):Ho(rt,y,E)}),Z}),$y=h0(function(d,y,E){ao(d,E,y)});function vh(d,y){var E=Ge(d)?ei:r0;return E(d,De(y,3))}function Vy(d,y,E,M){return d==null?[]:(Ge(y)||(y=y==null?[]:[y]),E=M?i:E,Ge(E)||(E=E==null?[]:[E]),a0(d,y,E))}var Wy=h0(function(d,y,E){d[E?0:1].push(y)},function(){return[[],[]]});function M0(d,y,E){var M=Ge(d)?h1:p1,z=arguments.length<3;return M(d,De(y,4),E,z,Fs)}function Tp(d,y,E){var M=Ge(d)?Hv:p1,z=arguments.length<3;return M(d,De(y,4),E,z,Jd)}function VC(d,y){var E=Ge(d)?za:t0;return E(d,L0(De(y,3)))}function WC(d){var y=Ge(d)?Nf:_1;return y(d)}function XC(d,y,E){(E?ar(d,y,E):y===i)?y=1:y=Oe(y);var M=Ge(d)?Zd:F1;return M(d,y)}function Xy(d){var y=Ge(d)?ny:ay;return y(d)}function qy(d){if(d==null)return 0;if(Gr(d))return bh(d)?qu(d):d.length;var y=Qi(d);return y==Nt||y==ve?d.size:Qa(d).length}function Bc(d,y,E){var M=Ge(d)?d1:ly;return E&&ar(d,y,E)&&(y=i),M(d,De(y,3))}var R0=Xe(function(d,y){if(d==null)return[];var E=y.length;return E>1&&ar(d,y[0],y[1])?y=[]:E>2&&ar(y[0],y[1],y[2])&&(y=[y[0]]),a0(d,Ii(y,1),[])}),yh=Wd||function(){return ki.Date.now()};function Yy(d,y){if(typeof y!="function")throw new ro(u);return d=Oe(d),function(){if(--d<1)return y.apply(this,arguments)}}function Ap(d,y,E){return y=E?i:y,y=d&&y==null?d.length:y,xr(d,U,i,i,i,i,y)}function Dp(d,y){var E;if(typeof y!="function")throw new ro(u);return d=Oe(d),function(){return--d>0&&(E=y.apply(this,arguments)),d<=1&&(y=i),E}}var O0=Xe(function(d,y,E){var M=b;if(E.length){var z=ra(E,mi(O0));M|=k}return xr(d,M,y,E,z)}),bp=Xe(function(d,y,E){var M=b|B;if(E.length){var z=ra(E,mi(bp));M|=k}return xr(y,M,d,E,z)});function wh(d,y,E){y=E?i:y;var M=xr(d,H,i,i,i,i,i,y);return M.placeholder=wh.placeholder,M}function Bp(d,y,E){y=E?i:y;var M=xr(d,R,i,i,i,i,i,y);return M.placeholder=Bp.placeholder,M}function Pp(d,y,E){var M,z,Z,rt,ht,Tt,Vt=0,Wt=!1,Yt=!1,re=!0;if(typeof d!="function")throw new ro(u);y=yo(y)||0,ri(E)&&(Wt=!!E.leading,Yt="maxWait"in E,Z=Yt?gi(yo(E.maxWait)||0,y):Z,re="trailing"in E?!!E.trailing:re);function ye(Ni){var Ea=M,fu=z;return M=z=i,Vt=Ni,rt=d.apply(fu,Ea),rt}function Le(Ni){return Vt=Ni,ht=uh(dn,y),Wt?ye(Ni):rt}function en(Ni){var Ea=Ni-Tt,fu=Ni-Vt,eA=y-Ea;return Yt?Pi(eA,Z-fu):eA}function _e(Ni){var Ea=Ni-Tt,fu=Ni-Vt;return Tt===i||Ea>=y||Ea<0||Yt&&fu>=Z}function dn(){var Ni=yh();if(_e(Ni))return xn(Ni);ht=uh(dn,en(Ni))}function xn(Ni){return ht=i,re&&M?ye(Ni):(M=z=i,rt)}function ms(){ht!==i&&Xf(ht),Vt=0,M=Tt=z=ht=i}function wo(){return ht===i?rt:xn(yh())}function vs(){var Ni=yh(),Ea=_e(Ni);if(M=arguments,z=this,Tt=Ni,Ea){if(ht===i)return Le(Tt);if(Yt)return Xf(ht),ht=uh(dn,y),ye(Tt)}return ht===i&&(ht=uh(dn,y)),rt}return vs.cancel=ms,vs.flush=wo,vs}var Ln=Xe(function(d,y){return P1(d,1,y)}),Mp=Xe(function(d,y,E){return P1(d,yo(y)||0,E)});function qC(d){return xr(d,st)}function xh(d,y){if(typeof d!="function"||y!=null&&typeof y!="function")throw new ro(u);var E=function(){var M=arguments,z=y?y.apply(this,M):M[0],Z=E.cache;if(Z.has(z))return Z.get(z);var rt=d.apply(this,M);return E.cache=Z.set(z,rt)||Z,rt};return E.cache=new(xh.Cache||os),E}xh.Cache=os;function L0(d){if(typeof d!="function")throw new ro(u);return function(){var y=arguments;switch(y.length){case 0:return!d.call(this);case 1:return!d.call(this,y[0]);case 2:return!d.call(this,y[0],y[1]);case 3:return!d.call(this,y[0],y[1],y[2])}return!d.apply(this,y)}}function YC(d){return Dp(2,d)}var KC=cy(function(d,y){y=y.length==1&&Ge(y[0])?ei(y[0],io(De())):ei(Ii(y,1),io(De()));var E=y.length;return Xe(function(M){for(var z=-1,Z=Pi(M.length,E);++z<Z;)M[z]=y[z].call(this,M[z]);return eo(d,this,M)})}),Pc=Xe(function(d,y){var E=ra(y,mi(Pc));return xr(d,k,i,y,E)}),lu=Xe(function(d,y){var E=ra(y,mi(lu));return xr(d,W,i,y,E)}),Rp=Is(function(d,y){return xr(d,nt,i,i,i,y)});function _0(d,y){if(typeof d!="function")throw new ro(u);return y=y===i?y:Oe(y),Xe(d,y)}function Op(d,y){if(typeof d!="function")throw new ro(u);return y=y==null?0:gi(Oe(y),0),Xe(function(E){var M=E[y],z=fs(E,0,y);return M&&ja(z,M),eo(d,this,z)})}function al(d,y,E){var M=!0,z=!0;if(typeof d!="function")throw new ro(u);return ri(E)&&(M="leading"in E?!!E.leading:M,z="trailing"in E?!!E.trailing:z),Pp(d,y,{leading:M,maxWait:y,trailing:z})}function Gs(d){return Ap(d,1)}function Ch(d,y){return Pc(c0(y),d)}function ZC(){if(!arguments.length)return[];var d=arguments[0];return Ge(d)?d:[d]}function Ky(d){return yr(d,x)}function Zy(d,y){return y=typeof y=="function"?y:i,yr(d,x,y)}function Qy(d){return yr(d,m|x)}function Jy(d,y){return y=typeof y=="function"?y:i,yr(d,m|x,y)}function QC(d,y){return y==null||Ya(d,y,$i(y))}function mo(d,y){return d===y||d!==d&&y!==y}var t2=Qf(zf),e2=Qf(function(d,y){return d>=y}),uu=Lr(function(){return arguments}())?Lr:function(d){return vi(d)&&bn.call(d,"callee")&&!Lf.call(d,"callee")},Ge=Mt.isArray,Lp=Ov?io(Ov):Ti;function Gr(d){return d!=null&&I0(d.length)&&!vo(d)}function Di(d){return vi(d)&&Gr(d)}function Eh(d){return d===!0||d===!1||vi(d)&&Zi(d)==$t}var ll=Qv||Bt,n2=Lv?io(Lv):n0;function sn(d){return vi(d)&&d.nodeType===1&&!Th(d)}function _p(d){if(d==null)return!0;if(Gr(d)&&(Ge(d)||typeof d=="string"||typeof d.splice=="function"||ll(d)||ul(d)||uu(d)))return!d.length;var y=Qi(d);if(y==Nt||y==ve)return!d.size;if(Cc(d))return!Qa(d).length;for(var E in d)if(bn.call(d,E))return!1;return!0}function F0(d,y){return uo(d,y)}function Fp(d,y,E){E=typeof E=="function"?E:i;var M=E?E(d,y):i;return M===i?uo(d,y,i,E):!!M}function k0(d){if(!vi(d))return!1;var y=Zi(d);return y==Rt||y==Pt||typeof d.message=="string"&&typeof d.name=="string"&&!Th(d)}function kp(d){return typeof d=="number"&&oo(d)}function vo(d){if(!ri(d))return!1;var y=Zi(d);return y==It||y==he||y==Lt||y==le}function Sh(d){return typeof d=="number"&&d==Oe(d)}function I0(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=N}function ri(d){var y=typeof d;return d!=null&&(y=="object"||y=="function")}function vi(d){return d!=null&&typeof d=="object"}var i2=Rd?io(Rd):In;function r2(d,y){return d===y||pi(d,y,v0(y))}function o2(d,y,E){return E=typeof E=="function"?E:i,pi(d,y,v0(y),E)}function Hn(d){return Hp(d)&&d!=+d}function Ip(d){if(op(d))throw new Ne(a);return Uf(d)}function Ji(d){return d===null}function JC(d){return d==null}function Hp(d){return typeof d=="number"||vi(d)&&Zi(d)==ge}function Th(d){if(!vi(d)||Zi(d)!=ee)return!1;var y=Os(d);if(y===null)return!0;var E=bn.call(y,"constructor")&&y.constructor;return typeof E=="function"&&E instanceof E&&jd.call(E)==$d}var Ah=_v?io(_v):hc;function Np(d){return Sh(d)&&d>=-9007199254740991&&d<=N}var Dh=Fv?io(Fv):iu;function bh(d){return typeof d=="string"||!Ge(d)&&vi(d)&&Zi(d)==Qe}function zr(d){return typeof d=="symbol"||vi(d)&&Zi(d)==ti}var ul=kv?io(kv):i0;function Gp(d){return d===i}function tE(d){return vi(d)&&Qi(d)==Kn}function s2(d){return vi(d)&&Zi(d)==Br}var eE=Qf(ii),a2=Qf(function(d,y){return d<=y});function l2(d){if(!d)return[];if(Gr(d))return bh(d)?ai(d):wr(d);if(Yi&&d[Yi])return x1(d[Yi]());var y=Qi(d),E=y==Nt?Hd:y==ve?Nd:Fc;return E(d)}function xa(d){if(!d)return d===0?d:0;if(d=yo(d),d===_||d===-1/0){var y=d<0?-1:1;return y*$}return d===d?d:0}function Oe(d){var y=xa(d),E=y%1;return y===y?E?y-E:y:0}function zp(d){return d?as(Oe(d),0,F):0}function yo(d){if(typeof d=="number")return d;if(zr(d))return Q;if(ri(d)){var y=typeof d.valueOf=="function"?d.valueOf():d;d=ri(y)?y+"":y}if(typeof d!="string")return d===0?d:+d;d=Wl(d);var E=o1.test(d);return E||Gl.test(d)?Pd(d.slice(2),E?2:8):r1.test(d)?Q:+d}function H0(d){return No(d,jr(d))}function nE(d){return d?as(Oe(d),-9007199254740991,N):d===0?d:0}function Pn(d){return d==null?"":_r(d)}var u2=Ja(function(d,y){if(Cc(y)||Gr(y)){No(y,$i(y),d);return}for(var E in y)bn.call(y,E)&&ss(d,E,y[E])}),N0=Ja(function(d,y){No(y,jr(y),d)}),Mc=Ja(function(d,y,E,M){No(y,jr(y),d,M)}),iE=Ja(function(d,y,E,M){No(y,$i(y),d,M)}),Go=Is(cc);function jp(d,y){var E=Wa(d);return y==null?E:B1(E,y)}var c2=Xe(function(d,y){d=Rn(d);var E=-1,M=y.length,z=M>2?y[2]:i;for(z&&ar(y[0],y[1],z)&&(M=1);++E<M;)for(var Z=y[E],rt=jr(Z),ht=-1,Tt=rt.length;++ht<Tt;){var Vt=rt[ht],Wt=d[Vt];(Wt===i||mo(Wt,Zu[Vt])&&!bn.call(d,Vt))&&(d[Vt]=Z[Vt])}return d}),f2=Xe(function(d){return d.push(i,J1),eo(Oc,i,d)});function h2(d,y){return Nv(d,De(y,3),us)}function Bh(d,y){return Nv(d,De(y,3),e0)}function zo(d,y){return d==null?d:nu(d,De(y,3),jr)}function d2(d,y){return d==null?d:fc(d,De(y,3),jr)}function G0(d,y){return d&&us(d,De(y,3))}function Ca(d,y){return d&&e0(d,De(y,3))}function rE(d){return d==null?[]:fa(d,$i(d))}function oE(d){return d==null?[]:fa(d,jr(d))}function cl(d,y,E){var M=d==null?i:ks(d,y);return M===i?E:M}function g2(d,y){return d!=null&&x0(d,y,lo)}function Up(d,y){return d!=null&&x0(d,y,Io)}var sE=Kf(function(d,y,E){y!=null&&typeof y.toString!="function"&&(y=Rr.call(y)),d[y]=E},Ic(Cr)),aE=Kf(function(d,y,E){y!=null&&typeof y.toString!="function"&&(y=Rr.call(y)),bn.call(d,y)?d[y].push(E):d[y]=[E]},De),lE=Xe(Ho);function $i(d){return Gr(d)?Kd(d):Qa(d)}function jr(d){return Gr(d)?Kd(d,!0):FC(d)}function uE(d,y){var E={};return y=De(y,3),us(d,function(M,z,Z){ao(E,y(M,z,Z),M)}),E}function p2(d,y){var E={};return y=De(y,3),us(d,function(M,z,Z){ao(E,z,y(M,z,Z))}),E}var Rc=Ja(function(d,y,E){$f(d,y,E)}),Oc=Ja(function(d,y,E,M){$f(d,y,E,M)}),m2=Is(function(d,y){var E={};if(d==null)return E;var M=!1;y=ei(y,function(Z){return Z=fo(Z,d),M||(M=Z.length>1),Z}),No(d,ep(d),E),M&&(E=yr(E,m|w|x,yy));for(var z=y.length;z--;)Vf(E,y[z]);return E});function cE(d,y){return _c(d,L0(De(y)))}var Lc=Is(function(d,y){return d==null?{}:O1(d,y)});function _c(d,y){if(d==null)return{};var E=ei(ep(d),function(M){return[M]});return y=De(y),sr(d,E,function(M,z){return y(M,z[0])})}function v2(d,y,E){y=fo(y,d);var M=-1,z=y.length;for(z||(z=1,d=i);++M<z;){var Z=d==null?i:d[Fr(y[M])];Z===i&&(M=z,Z=E),d=vo(Z)?Z.call(d):Z}return d}function z0(d,y,E){return d==null?d:vc(d,y,E)}function $p(d,y,E,M){return M=typeof M=="function"?M:i,d==null?d:vc(d,y,E,M)}var j0=Z1($i),Ph=Z1(jr);function y2(d,y,E){var M=Ge(d),z=M||ll(d)||ul(d);if(y=De(y,4),E==null){var Z=d&&d.constructor;z?E=M?new Z:[]:ri(d)?E=vo(Z)?Wa(Os(d)):{}:E={}}return(z?no:us)(d,function(rt,ht,Tt){return y(E,rt,ht,Tt)}),E}function w2(d,y){return d==null?!0:Vf(d,y)}function fE(d,y,E){return d==null?d:H1(d,y,c0(E))}function x2(d,y,E,M){return M=typeof M=="function"?M:i,d==null?d:H1(d,y,c0(E),M)}function Fc(d){return d==null?[]:m1(d,$i(d))}function Vp(d){return d==null?[]:m1(d,jr(d))}function hE(d,y,E){return E===i&&(E=y,y=i),E!==i&&(E=yo(E),E=E===E?E:0),y!==i&&(y=yo(y),y=y===y?y:0),as(yo(d),y,E)}function U0(d,y,E){return y=xa(y),E===i?(E=y,y=0):E=xa(E),d=yo(d),Za(d,y,E)}function $0(d,y,E){if(E&&typeof E!="boolean"&&ar(d,y,E)&&(y=E=i),E===i&&(typeof y=="boolean"?(E=y,y=i):typeof d=="boolean"&&(E=d,d=i)),d===i&&y===i?(d=0,y=1):(d=xa(d),y===i?(y=d,d=0):y=xa(y)),d>y){var M=d;d=y,y=M}if(E||d%1||y%1){var z=aa();return Pi(d+z*(y-d+$l("1e-"+((z+"").length-1))),y)}return mc(d,y)}var V0=ru(function(d,y,E){return y=y.toLowerCase(),d+(E?C2(y):y)});function C2(d){return cu(Pn(d).toLowerCase())}function kc(d){return d=Pn(d),d&&d.replace(Ha,Rf).replace(Mv,"")}function dE(d,y,E){d=Pn(d),y=_r(y);var M=d.length;E=E===i?M:as(Oe(E),0,M);var z=E;return E-=y.length,E>=0&&d.slice(E,z)==y}function E2(d){return d=Pn(d),d&&_u.test(d)?d.replace(Il,bC):d}function S2(d){return d=Pn(d),d&&xd.test(d)?d.replace(Fu,"\\$&"):d}var T2=ru(function(d,y,E){return d+(E?"-":"")+y.toLowerCase()}),A2=ru(function(d,y,E){return d+(E?" ":"")+y.toLowerCase()}),Wp=Y1("toLowerCase");function D2(d,y,E){d=Pn(d),y=Oe(y);var M=y?qu(d):0;if(!y||M>=y)return d;var z=(y-M)/2;return tl(_f(z),E)+d+tl(tc(z),E)}function b2(d,y,E){d=Pn(d),y=Oe(y);var M=y?qu(d):0;return y&&M<y?d+tl(y-M,E):d}function W0(d,y,E){d=Pn(d),y=Oe(y);var M=y?qu(d):0;return y&&M<y?tl(y-M,E)+d:d}function gE(d,y,E){return E||y==null?y=0:y&&(y=+y),Ro(Pn(d).replace(ku,""),y||0)}function pE(d,y,E){return(E?ar(d,y,E):y===i)?y=1:y=Oe(y),cs(Pn(d),y)}function Xp(){var d=arguments,y=Pn(d[0]);return d.length<3?y:y.replace(d[1],d[2])}var qp=ru(function(d,y,E){return d+(E?"_":"")+y.toLowerCase()});function X0(d,y,E){return E&&typeof E!="number"&&ar(d,y,E)&&(y=E=i),E=E===i?F:E>>>0,E?(d=Pn(d),d&&(typeof y=="string"||y!=null&&!Ah(y))&&(y=_r(y),!y&&Xl(d))?fs(ai(d),0,E):d.split(y,E)):[]}var Yp=ru(function(d,y,E){return d+(E?" ":"")+cu(y)});function B2(d,y,E){return d=Pn(d),E=E==null?0:as(Oe(E),0,d.length),y=_r(y),d.slice(E,E+y.length)==y}function Kp(d,y,E){var M=q.templateSettings;E&&ar(d,y,E)&&(y=i),d=Pn(d),y=Mc({},y,M,Q1);var z=Mc({},y.imports,M.imports,Q1),Z=$i(z),rt=m1(z,Z),ht,Tt,Vt=0,Wt=y.interpolate||ts,Yt="__p += '",re=Gd((y.escape||ts).source+"|"+Wt.source+"|"+(Wt===Cf?Ia:ts).source+"|"+(y.evaluate||ts).source+"|$","g"),ye="//# sourceURL="+(bn.call(y,"sourceURL")?(y.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++f1+"]")+`
`;d.replace(re,function(_e,dn,xn,ms,wo,vs){return xn||(xn=ms),Yt+=d.slice(Vt,vs).replace(Na,Id),dn&&(ht=!0,Yt+=`' +
__e(`+dn+`) +
'`),wo&&(Tt=!0,Yt+=`';
`+wo+`;
__p += '`),xn&&(Yt+=`' +
((__t = (`+xn+`)) == null ? '' : __t) +
'`),Vt=vs+_e.length,_e}),Yt+=`';
`;var Le=bn.call(y,"variable")&&y.variable;if(!Le)Yt=`with (obj) {
`+Yt+`
}
`;else if(Fi.test(Le))throw new Ne(c);Yt=(Tt?Yt.replace(wd,""):Yt).replace(e1,"$1").replace(Jr,"$1;"),Yt="function("+(Le||"obj")+`) {
`+(Le?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ht?", __e = _.escape":"")+(Tt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Yt+`return __p
}`;var en=Zp(function(){return rn(Z,ye+"return "+Yt).apply(i,rt)});if(en.source=Yt,k0(en))throw en;return en}function fl(d){return Pn(d).toLowerCase()}function hl(d){return Pn(d).toUpperCase()}function dl(d,y,E){if(d=Pn(d),d&&(E||y===i))return Wl(d);if(!d||!(y=_r(y)))return d;var M=ai(d),z=ai(y),Z=v1(M,z),rt=y1(M,z)+1;return fs(M,Z,rt).join("")}function Mh(d,y,E){if(d=Pn(d),d&&(E||y===i))return d.slice(0,Yu(d)+1);if(!d||!(y=_r(y)))return d;var M=ai(d),z=y1(M,ai(y))+1;return fs(M,0,z).join("")}function Rh(d,y,E){if(d=Pn(d),d&&(E||y===i))return d.replace(ku,"");if(!d||!(y=_r(y)))return d;var M=ai(d),z=v1(M,ai(y));return fs(M,z).join("")}function gl(d,y){var E=ft,M=Et;if(ri(y)){var z="separator"in y?y.separator:z;E="length"in y?Oe(y.length):E,M="omission"in y?_r(y.omission):M}d=Pn(d);var Z=d.length;if(Xl(d)){var rt=ai(d);Z=rt.length}if(E>=Z)return d;var ht=E-qu(M);if(ht<1)return M;var Tt=rt?fs(rt,0,ht).join(""):d.slice(0,ht);if(z===i)return Tt+M;if(rt&&(ht+=Tt.length-ht),Ah(z)){if(d.slice(ht).search(z)){var Vt,Wt=Tt;for(z.global||(z=Gd(z.source,Pn(Hu.exec(z))+"g")),z.lastIndex=0;Vt=z.exec(Wt);)var Yt=Vt.index;Tt=Tt.slice(0,Yt===i?ht:Yt)}}else if(d.indexOf(_r(z),ht)!=ht){var re=Tt.lastIndexOf(z);re>-1&&(Tt=Tt.slice(0,re))}return Tt+M}function mE(d){return d=Pn(d),d&&Ms.test(d)?d.replace(kl,$v):d}var P2=ru(function(d,y,E){return d+(E?" ":"")+y.toUpperCase()}),cu=Y1("toUpperCase");function M2(d,y,E){return d=Pn(d),y=E?i:y,y===i?w1(d)?Xv(d):AC(d):d.match(y)||[]}var Zp=Xe(function(d,y){try{return eo(d,i,y)}catch(E){return k0(E)?E:new Ne(E)}}),q0=Is(function(d,y){return no(y,function(E){E=Fr(E),ao(d,E,O0(d[E],d))}),d});function R2(d){var y=d==null?0:d.length,E=De();return d=y?ei(d,function(M){if(typeof M[1]!="function")throw new ro(u);return[E(M[0]),M[1]]}):[],Xe(function(M){for(var z=-1;++z<y;){var Z=d[z];if(eo(Z[0],this,M))return eo(Z[1],this,M)}})}function vE(d){return ry(yr(d,m))}function Ic(d){return function(){return d}}function Y0(d,y){return d==null||d!==d?y:d}var O2=wc(),Hc=wc(!0);function Cr(d){return d}function Oh(d){return dc(typeof d=="function"?d:yr(d,m))}function K0(d){return o0(yr(d,m))}function L2(d,y){return R1(d,yr(y,m))}var yE=Xe(function(d,y){return function(E){return Ho(E,d,y)}}),Z0=Xe(function(d,y){return function(E){return Ho(d,E,y)}});function s(d,y,E){var M=$i(y),z=fa(y,M);E==null&&!(ri(y)&&(z.length||!M.length))&&(E=y,y=d,d=this,z=fa(y,$i(y)));var Z=!(ri(E)&&"chain"in E)||!!E.chain,rt=vo(d);return no(z,function(ht){var Tt=y[ht];d[ht]=Tt,rt&&(d.prototype[ht]=function(){var Vt=this.__chain__;if(Z||Vt){var Wt=d(this.__wrapped__),Yt=Wt.__actions__=wr(this.__actions__);return Yt.push({func:Tt,args:arguments,thisArg:d}),Wt.__chain__=Vt,Wt}return Tt.apply(d,ja([this.value()],arguments))})}),d}function l(){return ki._===this&&(ki._=Bo),this}function f(){}function v(d){return d=Oe(d),Xe(function(y){return s0(y,d)})}var C=d0(ei),S=d0(Iv),L=d0(d1);function X(d){return oh(d)?Vl(Fr(d)):Ai(d)}function at(d){return function(y){return d==null?i:ks(d,y)}}var bt=g0(),kt=g0(!0);function zt(){return[]}function Bt(){return!1}function Ot(){return{}}function ce(){return""}function Be(){return!0}function Nn(d,y){if(d=Oe(d),d<1||d>N)return[];var E=F,M=Pi(d,F);y=De(y),d-=F;for(var z=kd(M,y);++E<d;)y(E);return z}function Ct(d){return Ge(d)?ei(d,Fr):zr(d)?[d]:wr(lp(Pn(d)))}function dt(d){var y=++Yv;return Pn(d)+y}var Dt=Zf(function(d,y){return d+y},0),Gt=Jf("ceil"),Ee=Zf(function(d,y){return d/y},1),Cn=Jf("floor");function pe(d){return d&&d.length?ls(d,Cr,zf):i}function Ke(d,y){return d&&d.length?ls(d,De(y,2),zf):i}function fn(d){return _d(d,Cr)}function En(d,y){return _d(d,De(y,2))}function pl(d){return d&&d.length?ls(d,Cr,ii):i}function wE(d,y){return d&&d.length?ls(d,De(y,2),ii):i}var XM=Zf(function(d,y){return d*y},1),qM=Jf("round"),YM=Zf(function(d,y){return d-y},0);function KM(d){return d&&d.length?Fd(d,Cr):0}function ZM(d,y){return d&&d.length?Fd(d,De(y,2)):0}return q.after=Yy,q.ary=Ap,q.assign=u2,q.assignIn=N0,q.assignInWith=Mc,q.assignWith=iE,q.at=Go,q.before=Dp,q.bind=O0,q.bindAll=q0,q.bindKey=bp,q.castArray=ZC,q.chain=ph,q.chunk=Dy,q.compact=up,q.concat=cp,q.cond=R2,q.conforms=vE,q.constant=Ic,q.countBy=Ny,q.create=jp,q.curry=wh,q.curryRight=Bp,q.debounce=Pp,q.defaults=c2,q.defaultsDeep=f2,q.defer=Ln,q.delay=Mp,q.difference=A0,q.differenceBy=by,q.differenceWith=pa,q.drop=Oi,q.dropRight=fp,q.dropRightWhile=By,q.dropWhile=Ui,q.fill=zC,q.filter=Ep,q.flatMap=Nr,q.flatMapDeep=zy,q.flatMapDepth=jy,q.flatten=Qn,q.flattenDeep=kr,q.flattenDepth=ma,q.flip=qC,q.flow=O2,q.flowRight=Hc,q.fromPairs=Py,q.functions=rE,q.functionsIn=oE,q.groupBy=P0,q.initial=jC,q.intersection=D0,q.intersectionBy=Ir,q.intersectionWith=ds,q.invert=sE,q.invertBy=aE,q.invokeMap=bc,q.iteratee=Oh,q.keyBy=$y,q.keys=$i,q.keysIn=jr,q.map=vh,q.mapKeys=uE,q.mapValues=p2,q.matches=K0,q.matchesProperty=L2,q.memoize=xh,q.merge=Rc,q.mergeWith=Oc,q.method=yE,q.methodOf=Z0,q.mixin=s,q.negate=L0,q.nthArg=v,q.omit=m2,q.omitBy=cE,q.once=YC,q.orderBy=Vy,q.over=C,q.overArgs=KC,q.overEvery=S,q.overSome=L,q.partial=Pc,q.partialRight=lu,q.partition=Wy,q.pick=Lc,q.pickBy=_c,q.property=X,q.propertyOf=at,q.pull=ou,q.pullAll=Ns,q.pullAllBy=pp,q.pullAllWith=mp,q.pullAt=gs,q.range=bt,q.rangeRight=kt,q.rearg=Rp,q.reject=VC,q.remove=Ly,q.rest=_0,q.reverse=nl,q.sampleSize=XC,q.set=z0,q.setWith=$p,q.shuffle=Xy,q.slice=fh,q.sortBy=R0,q.sortedUniq=b0,q.sortedUniqBy=Iy,q.split=X0,q.spread=Op,q.tail=UC,q.take=$C,q.takeRight=Dn,q.takeRightWhile=Vn,q.takeWhile=on,q.tap=Hy,q.throttle=al,q.thru=au,q.toArray=l2,q.toPairs=j0,q.toPairsIn=Ph,q.toPath=Ct,q.toPlainObject=H0,q.transform=y2,q.unary=Gs,q.union=cn,q.unionBy=On,q.unionWith=ho,q.uniq=il,q.uniqBy=Tc,q.uniqWith=vp,q.unset=w2,q.unzip=ps,q.unzipWith=ui,q.update=fE,q.updateWith=x2,q.values=Fc,q.valuesIn=Vp,q.without=rl,q.words=M2,q.wrap=Ch,q.xor=su,q.xorBy=yp,q.xorWith=go,q.zip=Ac,q.zipObject=gh,q.zipObjectDeep=Hr,q.zipWith=wp,q.entries=j0,q.entriesIn=Ph,q.extend=N0,q.extendWith=Mc,s(q,q),q.add=Dt,q.attempt=Zp,q.camelCase=V0,q.capitalize=C2,q.ceil=Gt,q.clamp=hE,q.clone=Ky,q.cloneDeep=Qy,q.cloneDeepWith=Jy,q.cloneWith=Zy,q.conformsTo=QC,q.deburr=kc,q.defaultTo=Y0,q.divide=Ee,q.endsWith=dE,q.eq=mo,q.escape=E2,q.escapeRegExp=S2,q.every=mh,q.find=po,q.findIndex=hp,q.findKey=h2,q.findLast=Gy,q.findLastIndex=dp,q.findLastKey=Bh,q.floor=Cn,q.forEach=Uy,q.forEachRight=wa,q.forIn=zo,q.forInRight=d2,q.forOwn=G0,q.forOwnRight=Ca,q.get=cl,q.gt=t2,q.gte=e2,q.has=g2,q.hasIn=Up,q.head=gp,q.identity=Cr,q.includes=Sp,q.indexOf=My,q.inRange=U0,q.invoke=lE,q.isArguments=uu,q.isArray=Ge,q.isArrayBuffer=Lp,q.isArrayLike=Gr,q.isArrayLikeObject=Di,q.isBoolean=Eh,q.isBuffer=ll,q.isDate=n2,q.isElement=sn,q.isEmpty=_p,q.isEqual=F0,q.isEqualWith=Fp,q.isError=k0,q.isFinite=kp,q.isFunction=vo,q.isInteger=Sh,q.isLength=I0,q.isMap=i2,q.isMatch=r2,q.isMatchWith=o2,q.isNaN=Hn,q.isNative=Ip,q.isNil=JC,q.isNull=Ji,q.isNumber=Hp,q.isObject=ri,q.isObjectLike=vi,q.isPlainObject=Th,q.isRegExp=Ah,q.isSafeInteger=Np,q.isSet=Dh,q.isString=bh,q.isSymbol=zr,q.isTypedArray=ul,q.isUndefined=Gp,q.isWeakMap=tE,q.isWeakSet=s2,q.join=Ry,q.kebabCase=T2,q.last=Jn,q.lastIndexOf=Oy,q.lowerCase=A2,q.lowerFirst=Wp,q.lt=eE,q.lte=a2,q.max=pe,q.maxBy=Ke,q.mean=fn,q.meanBy=En,q.min=pl,q.minBy=wE,q.stubArray=zt,q.stubFalse=Bt,q.stubObject=Ot,q.stubString=ce,q.stubTrue=Be,q.multiply=XM,q.nth=va,q.noConflict=l,q.noop=f,q.now=yh,q.pad=D2,q.padEnd=b2,q.padStart=W0,q.parseInt=gE,q.random=$0,q.reduce=M0,q.reduceRight=Tp,q.repeat=pE,q.replace=Xp,q.result=v2,q.round=qM,q.runInContext=yt,q.sample=WC,q.size=qy,q.snakeCase=qp,q.some=Bc,q.sortedIndex=hh,q.sortedIndexBy=Sc,q.sortedIndexOf=_y,q.sortedLastIndex=Fy,q.sortedLastIndexBy=dh,q.sortedLastIndexOf=ky,q.startCase=Yp,q.startsWith=B2,q.subtract=YM,q.sum=KM,q.sumBy=ZM,q.template=Kp,q.times=Nn,q.toFinite=xa,q.toInteger=Oe,q.toLength=zp,q.toLower=fl,q.toNumber=yo,q.toSafeInteger=nE,q.toString=Pn,q.toUpper=hl,q.trim=dl,q.trimEnd=Mh,q.trimStart=Rh,q.truncate=gl,q.unescape=mE,q.uniqueId=dt,q.upperCase=P2,q.upperFirst=cu,q.each=Uy,q.eachRight=wa,q.first=gp,s(q,function(){var d={};return us(q,function(y,E){bn.call(q.prototype,E)||(d[E]=y)}),d}(),{chain:!1}),q.VERSION=r,no(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){q[d].placeholder=q}),no(["drop","take"],function(d,y){Ve.prototype[d]=function(E){E=E===i?1:gi(Oe(E),0);var M=this.__filtered__&&!y?new Ve(this):this.clone();return M.__filtered__?M.__takeCount__=Pi(E,M.__takeCount__):M.__views__.push({size:Pi(E,F),type:d+(M.__dir__<0?"Right":"")}),M},Ve.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),no(["filter","map","takeWhile"],function(d,y){var E=y+1,M=E==wt||E==P;Ve.prototype[d]=function(z){var Z=this.clone();return Z.__iteratees__.push({iteratee:De(z,3),type:E}),Z.__filtered__=Z.__filtered__||M,Z}}),no(["head","last"],function(d,y){var E="take"+(y?"Right":"");Ve.prototype[d]=function(){return this[E](1).value()[0]}}),no(["initial","tail"],function(d,y){var E="drop"+(y?"":"Right");Ve.prototype[d]=function(){return this.__filtered__?new Ve(this):this[E](1)}}),Ve.prototype.compact=function(){return this.filter(Cr)},Ve.prototype.find=function(d){return this.filter(d).head()},Ve.prototype.findLast=function(d){return this.reverse().find(d)},Ve.prototype.invokeMap=Xe(function(d,y){return typeof d=="function"?new Ve(this):this.map(function(E){return Ho(E,d,y)})}),Ve.prototype.reject=function(d){return this.filter(L0(De(d)))},Ve.prototype.slice=function(d,y){d=Oe(d);var E=this;return E.__filtered__&&(d>0||y<0)?new Ve(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),y!==i&&(y=Oe(y),E=y<0?E.dropRight(-y):E.take(y-d)),E)},Ve.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Ve.prototype.toArray=function(){return this.take(F)},us(Ve.prototype,function(d,y){var E=/^(?:filter|find|map|reject)|While$/.test(y),M=/^(?:head|last)$/.test(y),z=q[M?"take"+(y=="last"?"Right":""):y],Z=M||/^find/.test(y);z&&(q.prototype[y]=function(){var rt=this.__wrapped__,ht=M?[1]:arguments,Tt=rt instanceof Ve,Vt=ht[0],Wt=Tt||Ge(rt),Yt=function(dn){var xn=z.apply(q,ja([dn],ht));return M&&re?xn[0]:xn};Wt&&E&&typeof Vt=="function"&&Vt.length!=1&&(Tt=Wt=!1);var re=this.__chain__,ye=!!this.__actions__.length,Le=Z&&!re,en=Tt&&!ye;if(!Z&&Wt){rt=en?rt:new Ve(this);var _e=d.apply(rt,ht);return _e.__actions__.push({func:au,args:[Yt],thisArg:i}),new Or(_e,re)}return Le&&en?d.apply(this,ht):(_e=this.thru(Yt),Le?M?_e.value()[0]:_e.value():_e)})}),no(["pop","push","shift","sort","splice","unshift"],function(d){var y=Of[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",M=/^(?:pop|shift)$/.test(d);q.prototype[d]=function(){var z=arguments;if(M&&!this.__chain__){var Z=this.value();return y.apply(Ge(Z)?Z:[],z)}return this[E](function(rt){return y.apply(Ge(rt)?rt:[],z)})}}),us(Ve.prototype,function(d,y){var E=q[y];if(E){var M=E.name+"";bn.call(Bn,M)||(Bn[M]=[]),Bn[M].push({name:y,func:E})}}),Bn[xc(i,B).name]=[{name:"wrapper",func:i}],Ve.prototype.clone=la,Ve.prototype.reverse=qa,Ve.prototype.value=ua,q.prototype.at=B0,q.prototype.chain=ol,q.prototype.commit=Hi,q.prototype.next=sl,q.prototype.plant=ya,q.prototype.reverse=xp,q.prototype.toJSON=q.prototype.valueOf=q.prototype.value=Cp,q.prototype.first=q.prototype.head,Yi&&(q.prototype[Yi]=Dc),q},Ku=E1();is?((is.exports=Ku)._=Ku,Df._=Ku):ki._=Ku}).call(rQ)}(dm,dm.exports)),dm.exports}var sQ=oQ();const aQ=({min:e=0,max:n=100,step:i=1,defaultValue:r=100,disabled:o=!1,onChange:a,beforeStart:u,afterEnd:c,title:h})=>{const[g,p]=K.useState(!1),[m,w]=K.useState(r),x=K.useRef(null),T=K.useRef(null),D=(m-e)/(n-e)*100,b=K.useCallback(sQ.throttle(A=>{if(x.current&&T.current){const H=x.current.getBoundingClientRect(),R=T.current.getBoundingClientRect(),k=A.clientX-H.left,W=yO(R.width/2/H.width*100);let U=Math.min(Math.max(k/H.width,0),1);U>=(100-W)/100?U=1:U<=W/100&&(U=0);const nt=Math.round(U*(n-e)/i)*i+e;w(nt),a&&a(nt)}},50,{leading:!0,trailing:!0}),[e,n,i,a]),B=K.useCallback(()=>{const A=R=>{p(!0),b(R)},H=()=>{document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",H),c&&c(),setTimeout(()=>{p(!1)},0)};document.addEventListener("pointermove",A),document.addEventListener("pointerup",H)},[b]);return K.useEffect(()=>{w(r)},[r]),O.jsx("div",{"data-tooltip":!0,title:h,className:yn("slider-container",{disabled:o}),children:O.jsxs("div",{ref:x,className:"slider-track",onClick:A=>{o||g||b(A)},onPointerDown:A=>{A.preventDefault(),!o&&(u&&u(),B())},children:[O.jsx("div",{className:"slider-range",style:{width:`${D}%`}}),O.jsx("div",{ref:T,className:"slider-thumb",style:{left:`${D}%`}})]})})},b4=NT(wM,4),XT=Ae.forwardRef((e,n)=>{const i=qi(),{t:r}=si(),{currentColor:o,onColorChange:a,onOpacityChange:u}=e,[c,h]=K.useState(o&&yd(o)||b4[0][0].value),[g,p]=K.useState(()=>{const m=o&&t1(o);return td(m)?100:m});return O.jsxs(Yr.Col,{gap:3,children:[O.jsx(aQ,{title:r("popupToolbar.opacity"),step:5,defaultValue:g,onChange:m=>{p(m),u(m)},beforeStart:()=>{tr.set(i,!0),js.setSplittingOnce(i,!0)},afterEnd:()=>{tr.set(i,!1)},disabled:c===wM[0].value}),O.jsx(Yr.Col,{gap:2,children:b4.map((m,w)=>O.jsx(Yr.Row,{gap:2,children:m.map(x=>O.jsxs("button",{className:`color-select-item ${c===x.value?"active":""} ${Tg(x.value)?"no-color":""}`,style:{backgroundColor:Tg(x.value)?KZ:x.value,color:tQ(x.value)?Ax:gr},onClick:()=>{h(x.value),x.value===WT&&p(100),a(x.value)},title:r(x.name||"color.unknown"),"aria-label":r(x.name||"color.unknown"),children:[Tg(x.value)&&RY,c===x.value&&OY]},x.value))},w))})]})}),TM=(e,n)=>Ut.isMindElement(e,n)||At.isDrawElement(n)&&wv(n)||Zx(e,n),AM=(e,n)=>{let i=n.fill;return i||(Ut.isMindElement(e,n)&&(i=WP(e,n)),(At.isDrawElement(n)||At.isCustomGeometryElement(e,n))&&(i=Qx(e,n))),i},DM=(e,n)=>{let i=n.strokeColor;return i||(Ut.isMindElement(e,n)&&(i=DT(e,n)),(At.isDrawElement(n)||At.isCustomGeometryElement(e,n))&&(i=Kg(e,n))),i},lQ=(e,n)=>{ka.setFillColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{if(!TM(e,i))return;const o=AM(e,i);if(!JZ(o))return;const a=yd(o),u=bv(n)?a:Jg(a,n);Qt.setNode(e,{fill:u},r)}})},uQ=(e,n)=>{ka.setFillColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{if(!TM(e,i))return;const o=AM(e,i),a=t1(o);Tg(n)?Qt.setNode(e,{fill:null},r):td(a)||bv(a)?Qt.setNode(e,{fill:n},r):Qt.setNode(e,{fill:Jg(n,a)},r)}})},cQ=(e,n)=>{ka.setStrokeColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{const o=DM(e,i),a=yd(o),u=bv(n)?a:Jg(a,n);Qt.setNode(e,{strokeColor:u},r)}})},fQ=(e,n)=>{ka.setStrokeColor(e,null,{getMemorizeKey:qg,callback:(i,r)=>{const o=DM(e,i),a=t1(o);Tg(n)?Qt.setNode(e,{strokeColor:null},r):td(a)||bv(a)?Qt.setNode(e,{strokeColor:n},r):Qt.setNode(e,{strokeColor:Jg(n,a)},r)}})},hQ=(e,n,i)=>{const r=t1(n);Tg(i)?TS.setTextColor(e,null):TS.setTextColor(e,Jg(i,r))},dQ=(e,n,i)=>{const r=yd(n),o=bv(i)?r:Jg(r,i);TS.setTextColor(e,o)},gQ=({board:e,currentColor:n,fontColorIcon:i,title:r})=>{const[o,a]=K.useState(!1),u=G.getBoardContainer(e);return O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:c=>{a(c)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:yn("property-button"),selected:o,visible:!0,icon:i,type:"button",title:r,"aria-label":r,onPointerUp:()=>{a(!o)}})}),O.jsx(La,{container:u,children:O.jsx(Jo,{padding:4,className:yn(`${Ml}`),children:O.jsx(XT,{onColorChange:c=>{hQ(e,n||c,c)},onOpacityChange:c=>{n&&dQ(e,n,c)},currentColor:n})})})]})},pQ=({board:e,currentColor:n,currentStyle:i,title:r,hasStrokeStyle:o,children:a})=>{const[u,c]=K.useState(!1),h=n&&yd(n),g=n?t1(n):100,p=G.getBoardContainer(e),{t:m}=si(),w=CM(g)?LY:xM(h)?_Y:void 0,x=T=>{ka.setStrokeStyle(e,T,{getMemorizeKey:qg})};return O.jsxs(Ra,{sideOffset:12,open:u,onOpenChange:T=>{c(T)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:yn("property-button"),visible:!0,icon:w,type:"button",title:r,"aria-label":r,onPointerUp:()=>{c(!u)},children:!w&&a})}),O.jsx(La,{container:p,children:O.jsx(Jo,{padding:4,className:yn(`${Ml}`,"stroke-setting",{"has-stroke-style":o}),children:O.jsxs(Yr.Col,{children:[o&&O.jsxs(Yr.Row,{className:yn("stroke-style-picker"),children:[O.jsx(jn,{visible:!0,selected:!i||i===Co.solid,icon:FY,type:"button",title:`${r}  ${m("stroke.solid")}`,"aria-label":`${r}  ${m("stroke.solid")}`,onPointerUp:()=>{x(Co.solid)}}),O.jsx(jn,{visible:!0,selected:i===Co.dashed,icon:kY,type:"button",title:`${r}  ${m("stroke.dashed")}`,"aria-label":`${r}  ${m("stroke.dashed")}`,onPointerUp:()=>{x(Co.dashed)}}),O.jsx(jn,{visible:!0,selected:i===Co.dotted,icon:IY,type:"button",title:`${r}  ${m("stroke.dotted")}`,"aria-label":`${r}  ${m("stroke.dotted")}`,onPointerUp:()=>{x(Co.dotted)}})]}),O.jsx(XT,{onColorChange:T=>{fQ(e,T)},onOpacityChange:T=>{cQ(e,T)},currentColor:n})]})})})]})},mQ=({board:e,currentColor:n,title:i,children:r})=>{const[o,a]=K.useState(!1),u=n&&yd(n),c=n?t1(n):100,h=G.getBoardContainer(e),g=!u||CM(c)?MY:void 0;return O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:p=>{a(p)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:yn("property-button"),visible:!0,icon:g,type:"button",title:i,"aria-label":i,onPointerUp:()=>{a(!o)},children:!g&&r})}),O.jsx(La,{container:h,children:O.jsx(Jo,{padding:4,className:yn(`${Ml}`),children:O.jsx(XT,{onColorChange:p=>{uQ(e,p)},onOpacityChange:p=>{lQ(e,p)},currentColor:n})})})]})},vQ=({board:e,title:n})=>{const{t:i}=si(),{appState:r,setAppState:o}=Qs();return O.jsx(jn,{className:yn("property-button"),visible:!0,icon:VY,type:"button",title:n,"aria-label":n,onPointerUp:()=>{const a=ne(e)[0],u=K5(a);Sl.getLinkElement(u)||Sl.wrapLink(u,i("textPlaceholders.link"),""),setTimeout(()=>{const g=Sl.getLinkElement(u)[0],p=Kt.toDOMNode(u,g);o({...r,linkState:{editor:u,targetDom:p,targetElement:g,isEditing:!0,isHovering:!1,isHoveringOrigin:!1}})},0)}})},yQ=({end:e,property:n})=>{const i=qi(),{marker:r}=n,{t:o}=si(),a=u=>{ka.setProperty(i,{[e]:{...n,marker:u}})};return O.jsx(Jo,{padding:2,className:yn(`${Ml} ${e==="source"?"source-arrow-island":""} `),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsx(jn,{className:yn("property-button"),visible:!0,icon:b9,type:"button",title:o("line.none"),"aria-label":o("line.none"),selected:r==="none",onPointerUp:()=>{a("none")}}),O.jsx(jn,{className:yn("property-button"),visible:!0,icon:D9,type:"button",title:o("line.arrow"),"aria-label":o("line.arrow"),selected:r==="arrow",onPointerUp:()=>{a("arrow")}})]})})},B4=({board:e,end:n,endProperty:i})=>{const[r,o]=K.useState(!1),a=i==null?void 0:i.marker,u=G.getBoardContainer(e),{t:c}=si(),h=`${c(`line.${n}`)}  ${c(`line.${a}`)}`;return O.jsxs(Ra,{sideOffset:12,open:r,onOpenChange:g=>{o(g)},placement:"top",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{className:yn(`property-button  ${n==="source"?"source-arrow-button":""}`),visible:!0,icon:a==="none"?b9:D9,type:"button",title:h,"aria-label":h,selected:r,onPointerUp:()=>{o(!r)}})}),O.jsx(La,{container:u,children:O.jsx(yQ,{end:n,property:i})})]})},wQ=()=>{var x,T;const e=qi(),{t:n}=si(),i=ne(e),[r,o]=K.useState(!1),a=K.useRef(r),u=i.length>0&&!Dr(e)&&!i.some(At.isImage),{viewport:c,selection:h,children:g}=e,{refs:p,floatingStyles:m}=yC({placement:"right-start",middleware:[UT(32),$T()]});let w={fill:"red"};if(u&&!r){const D=i.some(R=>SQ(e,R))&&!G.hasBeenTextEditing(e),b=i.some(R=>AQ(e,R)),B=i.some(R=>bM(e,R))&&!G.hasBeenTextEditing(e),A=i.some(R=>TQ(e,R))&&!G.hasBeenTextEditing(e),H=i.every(R=>At.isArrowLine(R));w={...EQ(e),hasFill:D,hasFontColor:b,hasStroke:B,hasStrokeStyle:A,hasText:b,isLine:H}}return K.useEffect(()=>{if(u){const D=i.length>0;if(!r&&D){const b=ne(e),B=pn(e,b,!1),[A,H]=I.getPoints(B),R=nS(e,jw(e,A)),k=nS(e,jw(e,H)),W=k[0]-R[0],U=k[1]-R[1];p.setPositionReference({getBoundingClientRect(){return{width:W,height:U,x:R[0],y:R[1],top:R[1],left:R[0],right:R[0]+W,bottom:R[1]+U}}})}}},[c,h,g,r]),K.useEffect(()=>{a.current=r},[r]),K.useEffect(()=>{const{pointerUp:D,pointerMove:b}=e;return e.pointerMove=B=>{(sf(e)||of(e))&&!a.current&&o(!0),b(B)},e.pointerUp=B=>{a.current&&(sf(e)||of(e))&&o(!1),D(B)},()=>{e.pointerUp=D,e.pointerMove=b}},[e]),O.jsx(O.Fragment,{children:u&&!r&&O.jsx(Jo,{padding:1,className:yn("popup-toolbar",Ml),ref:p.setFloating,style:m,children:O.jsxs(Yr.Row,{gap:1,children:[w.hasFontColor&&O.jsx(gQ,{board:e,currentColor:(x=w.marks)==null?void 0:x.color,title:n("popupToolbar.fontColor"),fontColorIcon:O.jsx(HY,{currentColor:(T=w.marks)==null?void 0:T.color})},0),w.hasStroke&&O.jsx(pQ,{board:e,currentColor:w.strokeColor,currentStyle:w.strokeStyle,title:n("popupToolbar.stroke"),hasStrokeStyle:w.hasStrokeStyle||!1,children:O.jsx("label",{className:yn("stroke-label","color-label"),style:{borderColor:w.strokeColor}})},1),w.hasFill&&O.jsx(mQ,{board:e,currentColor:w.fill,title:n("popupToolbar.fillColor"),children:O.jsx("label",{className:yn("fill-label","color-label",{"color-white":w.fill&&xM(yd(w.fill))}),style:{backgroundColor:w.fill}})},2),w.hasText&&O.jsx(vQ,{board:e,title:n("popupToolbar.link")},3),w.isLine&&O.jsxs(O.Fragment,{children:[O.jsx(B4,{board:e,end:"source",endProperty:w.source},4),O.jsx(B4,{board:e,end:"target",endProperty:w.target},5)]})]})})})},xQ=(e,n)=>{const i=hB(n);return{fill:n.fill,strokeColor:DT(e,n),strokeStyle:Zg(e,n),marks:i}},CQ=(e,n)=>{const i=hB(n);return{fill:n.fill,strokeColor:Kg(e,n),strokeStyle:Zg(e,n),marks:i,source:(n==null?void 0:n.source)||{},target:(n==null?void 0:n.target)||{}}},EQ=e=>{const n=ne(e)[0];return Ut.isMindElement(e,n)?xQ(e,n):CQ(e,n)},SQ=(e,n)=>Ut.isMindElement(e,n)||Zx(e,n)?!0:At.isDrawElement(n)?At.isShapeElement(n)&&!At.isImage(n)&&!At.isText(n)&&wv(n):!1,bM=(e,n)=>Ut.isMindElement(e,n)||zs.isFreehand(n)?!0:At.isDrawElement(n)?At.isShapeElement(n)&&!At.isImage(n)&&!At.isText(n)||At.isArrowLine(n)||At.isVectorLine(n)||At.isTable(n):!1,TQ=(e,n)=>bM(e,n),AQ=(e,n)=>Ut.isMindElement(e,n)?!0:At.isDrawElement(n)?yU([n]):!1,BM=({icon:e,shortcut:n,href:i,children:r,onSelect:o,className:a="",selected:u,...c})=>{const h=gM(c.onClick,o);return O.jsx("a",{...c,href:i,target:"_blank",rel:"noreferrer",className:ZS(a,u),title:c.title??c["aria-label"],onClick:h,children:O.jsx(pM,{icon:e,shortcut:n,children:r})})};BM.displayName="MenuItemLink";const PM=()=>{const e=qi(),{t:n}=si();return O.jsx(er,{"data-testid":"save-button",onSelect:()=>{w9(e)},icon:BY,"aria-label":n("menu.saveFile"),shortcut:rv("CtrlOrCmd+S"),children:n("menu.saveFile")})};PM.displayName="SaveToFile";const MM=()=>{const e=qi(),n=o6(),{t:i}=si(),r=(o,a,u)=>{e.children=o,e.viewport=a||{zoom:1},u&&(e.theme=u),n.update(e.children,{board:e,parent:e,parentG:G.getElementHost(e)}),un.fitViewport(e)};return O.jsx(er,{"data-testid":"open-button",onSelect:()=>{_q(e).then(o=>{r(o.elements,o.viewport,o.theme)})},icon:PY,"aria-label":i("menu.open"),children:i("menu.open")})};MM.displayName="OpenFile";const RM=()=>{const e=qi(),n=K.useContext(wC),{t:i}=si();return O.jsx(er,{icon:AY,"data-testid":"image-export-button",onSelect:()=>{Mw(e,!0)},submenu:O.jsxs(Qg,{onSelect:()=>{var o;const r=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(o=n.onSelect)==null||o.call(n,r)},children:[O.jsx(er,{onSelect:()=>{eQ(e)},"aria-label":i("menu.exportImage.svg"),children:i("menu.exportImage.svg")}),O.jsx(er,{onSelect:()=>{Mw(e,!0)},"aria-label":i("menu.exportImage.png"),children:i("menu.exportImage.png")}),O.jsx(er,{onSelect:()=>{Mw(e,!1)},"aria-label":i("menu.exportImage.jpg"),children:i("menu.exportImage.jpg")})]}),shortcut:rv("CtrlOrCmd+Shift+E"),"aria-label":i("menu.exportImage"),children:i("menu.exportImage")})};RM.displayName="SaveAsImage";const OM=()=>{const{appState:e,setAppState:n}=Qs(),{t:i}=si();return O.jsx(er,{icon:px,"data-testid":"reset-button",onSelect:()=>{n({...e,openCleanConfirm:!0})},shortcut:rv("CtrlOrCmd+Backspace"),"aria-label":i("menu.cleanBoard"),children:i("menu.cleanBoard")})};OM.displayName="CleanBoard";const LM=()=>O.jsx(BM,{icon:TY,href:"https://github.com/plait-board/drawnix","aria-label":"GitHub",children:"GitHub"});LM.displayName="Socials";const _M=()=>{const{language:e,setLanguage:n,t:i}=si(),r=K.useContext(wC);return O.jsx(er,{icon:T9,"data-testid":"language-switcher-button",onSelect:()=>{},submenu:O.jsxs(Qg,{onSelect:()=>{var a;const o=new CustomEvent(Ig.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});(a=r.onSelect)==null||a.call(r,o)},children:[O.jsx(er,{onSelect:()=>{n("zh")},"aria-label":i("language.chinese"),selected:e==="zh",children:i("language.chinese")}),O.jsx(er,{onSelect:()=>{n("en")},"aria-label":i("language.english"),selected:e==="en",children:i("language.english")}),O.jsx(er,{onSelect:()=>{n("ru")},"aria-label":i("language.russian"),selected:e==="ru",children:i("language.russian")}),O.jsx(er,{onSelect:()=>{n("ar")},"aria-label":i("language.arabic"),selected:e==="ar",children:i("language.arabic")}),O.jsx(er,{onSelect:()=>{n("vi")},"aria-label":i("language.vietnamese"),selected:e==="vi",children:i("language.vietnamese")})]}),"aria-label":i("language.switcher"),children:i("language.switcher")})};_M.displayName="LanguageSwitcherMenu";const FM=()=>O.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});FM.displayName="MenuSeparator";const DQ=()=>{const e=qi(),{t:n}=si(),i=G.getBoardContainer(e),r=ne(e),[o,a]=K.useState(!1),u=e.history.undos.length<=0,c=e.history.redos.length<=0;return O.jsx(Jo,{padding:1,className:yn("app-toolbar",Ml),children:O.jsxs(Yr.Row,{gap:1,children:[O.jsxs(Ra,{sideOffset:12,open:o,onOpenChange:h=>{a(h)},placement:"bottom-start",children:[O.jsx(Oa,{asChild:!0,children:O.jsx(jn,{type:"icon",visible:!0,selected:o,icon:T9,title:n("general.menu"),"aria-label":n("general.menu"),onPointerDown:()=>{a(!o)}})}),O.jsx(La,{container:i,children:O.jsxs(Qg,{onSelect:()=>{a(!1)},children:[O.jsx(MM,{}),O.jsx(PM,{}),O.jsx(RM,{}),O.jsx(OM,{}),O.jsx(FM,{}),O.jsx(_M,{}),O.jsx(LM,{})]})})]},0),O.jsx(jn,{type:"icon",icon:NY,visible:!0,title:n("general.undo"),"aria-label":n("general.undo"),onPointerUp:()=>{e.undo()},disabled:u},1),O.jsx(jn,{type:"icon",icon:GY,visible:!0,title:n("general.redo"),"aria-label":n("general.redo"),onPointerUp:()=>{e.redo()},disabled:c},2),r.length>0&&O.jsx(jn,{className:"duplicate",type:"icon",icon:zY,visible:!0,title:n("general.duplicate"),"aria-label":n("general.duplicate"),onPointerUp:()=>{B5(e)}},3),r.length>0&&O.jsx(jn,{className:"trash",type:"icon",icon:px,visible:!0,title:n("general.delete"),"aria-label":n("general.delete"),onPointerUp:()=>{b5(e)}},4)]})})},bQ=e=>i=>{const{globalKeyDown:r,keyDown:o}=i;return i.globalKeyDown=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement)&&(G.getMovingPointInBoard(i)||G.isMovingPointInBoard(i))&&!G.hasBeenTextEditing(i)){if(ln.isHotkey(["mod+shift+e"],{byKey:!0})(a)){Mw(i,!0),a.preventDefault();return}if(ln.isHotkey(["mod+s"],{byKey:!0})(a)){w9(i),a.preventDefault();return}if(ln.isHotkey(["mod+backspace"])(a)||ln.isHotkey(["mod+delete"])(a)){e({openCleanConfirm:!0}),a.preventDefault();return}if(ln.isHotkey(["mod+u"])(a)){SM(i),a.preventDefault();return}if(!a.altKey&&!a.metaKey&&!a.ctrlKey){if(a.key==="h"){un.updatePointerType(i,nn.hand),e({pointer:nn.hand}),a.preventDefault();return}if(a.key==="v"){un.updatePointerType(i,nn.selection),e({pointer:nn.selection}),a.preventDefault();return}if(a.key==="m"){Vr(i,Xi.dnd),un.updatePointerType(i,wu.mind),e({pointer:wu.mind}),a.preventDefault();return}if(a.key==="e"){Vr(i,Xi.drawing),un.updatePointerType(i,Yo.eraser),e({pointer:Yo.eraser}),a.preventDefault();return}if(a.key==="p"){Vr(i,Xi.drawing),un.updatePointerType(i,Yo.feltTipPen),e({pointer:Yo.feltTipPen}),a.preventDefault();return}if(a.key==="a"&&!ln.isHotkey(["mod+a"])(a)&&ne(i).length===0){Vr(i,Xi.drawing),un.updatePointerType(i,qn.straight),e({pointer:qn.straight}),a.preventDefault();return}if(a.key==="r"||a.key==="o"||a.key==="t"){const c={r:we.rectangle,o:we.ellipse,t:we.text};c[a.key]===we.text?Vr(i,Xi.dnd):Vr(i,Xi.drawing),un.updatePointerType(i,c[a.key]),e({pointer:c[a.key]}),a.preventDefault();return}}}r(a)},i.keyDown=a=>{if(ln.isHotkey(["mod+z"],{byKey:!0})(a)){i.undo(),a.preventDefault();return}if(ln.isHotkey(["mod+shift+z"],{byKey:!0})(a)){i.redo(),a.preventDefault();return}o(a)},i};function P4(){return[Yo.feltTipPen,Yo.eraser]}const M4=(e,n)=>({id:Mn(),type:"freehand",shape:e,points:n}),kM=(e,n,i)=>{const r=af(e,i,n)||i,o=n.points;return xv(n.points)&&rf(r,o)||Xm(o,r)},BQ=(e,n,i)=>{const r=I.getRectangleByPoints([i.anchor,i.focus]);return sx(r,n.points,n.angle)},R4=e=>ne(e).filter(n=>zs.isFreehand(n)),PQ=e=>B9[e].strokeColor,MQ=e=>B9[e].fill,RQ=(e,n)=>{const i=PQ(e.theme.themeColorMode);return n.strokeColor||i},OQ=(e,n)=>{const i=zs.isFreehand(n)&&Zx(e,n)?MQ(e.theme.themeColorMode):Kx.fill;return n.fill||i};function LQ(e,n){return Math.exp(-(e*e)/(2*n*n))}function _Q(e,n,i){if(e.length<2)return e;const r=Math.floor(i/2),o=[];function a(c){if(c<0){const h=-c-1;if(h<e.length)return[2*e[0][0]-e[h][0],2*e[0][1]-e[h][1]]}else if(c>=e.length){const h=2*e.length-c-1;if(h>=0)return[2*e[e.length-1][0]-e[h][0],2*e[e.length-1][1]-e[h][1]]}return e[c]}function u(c){const h=Math.min(c,e.length-1-c);return Math.min(r,h+Math.floor(r/2))}for(let c=0;c<e.length;c++){let h=0,g=0,p=0;const m=u(c);for(let w=-m;w<=m;w++){const x=c+w,T=a(x);let D=LQ(w,n);if(c<r||c>=e.length-r){const b=1+.5*(1-Math.abs(w)/m);D*=w===0?b:1}h+=T[0]*D,g+=T[1]*D,p+=D}c===0||c===e.length-1?o.push([e[c][0],e[c][1]]):o.push([h/p,g/p])}return o}class IM extends Bs{draw(n){const i=Tn(n),r=RQ(this.board,n),o=OQ(this.board,n),a={strokeWidth:i,stroke:r,fill:o,fillStyle:"solid"},u=G.getRoughSVG(this.board).curve(_Q(n.points,1,3),a);return Ze(u,"round"),u}canDraw(n){return!0}}class FQ extends mf{constructor(){super()}initializeGenerator(){this.activeGenerator=gv(this.board,{getRectangle:n=>I.getRectangleByPoints(n.points),getStrokeWidth:()=>_i,getStrokeOpacity:()=>1,hasResizeHandle:()=>Wx(this.board,this.element)}),this.generator=new IM(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(n,i){n.element!==i.element||n.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})):(n.selected!==i.selected||n.selected)&&this.activeGenerator.processDrawing(this.element,G.getActiveHost(this.board),{selected:this.selected})}destroy(){var n;super.destroy(),(n=this.activeGenerator)==null||n.destroy()}}class kQ{constructor(n={}){this.defaultOptions={smoothing:.65,velocityWeight:.2,curvatureWeight:.3,minDistance:.2,maxPoints:8,pressureSensitivity:.5,tiltSensitivity:.3,velocityThreshold:800,samplingRate:5},this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[],this.velocityWindowSize=3,this.options={...this.defaultOptions,...n}}process(n,i={}){const r=i.timestamp??Date.now();if(this.points.length===0){const h={point:n,timestamp:r,...i};return this.points.push(h),this.lastProcessedTime=r,n}if(r-this.lastProcessedTime<this.options.samplingRate&&r-this.lastProcessedTime<2)return null;const o={point:n,timestamp:r,...i};if(!this.checkDistance(n)&&this.points.length>1&&r-this.lastProcessedTime<32)return null;this.updatePoints(o);const u=this.calculateDynamicParameters(o),c=this.smooth(n,u);return this.lastProcessedTime=r,c}reset(){this.points=[],this.lastProcessedTime=0,this.movingAverageVelocity=[]}updatePoints(n){this.points.push(n),this.points.length>this.options.maxPoints&&this.points.shift()}checkDistance(n){if(this.points.length===0)return!0;const i=this.points[this.points.length-1].point,r=this.getDistance(i,n);let o=this.options.minDistance;if(this.movingAverageVelocity.length>0){const a=this.getAverageVelocity();o*=Math.max(.5,Math.min(1.5,a/200))}return r>=o}calculateDynamicParameters(n){const i=this.calculateVelocity(n);this.updateMovingAverage(i);const r=this.getAverageVelocity(),o={...this.options};if(n.pressure!==void 0){const u=Math.pow(n.pressure,1.2);o.smoothing*=1-u*o.pressureSensitivity*.8}const a=Math.min(r/o.velocityThreshold,1);if(o.velocityWeight=.2+a*.3,o.smoothing*=1+a*.2,n.tiltX!==void 0&&n.tiltY!==void 0){const u=Math.sqrt(n.tiltX**2+n.tiltY**2)/90;o.smoothing*=1+u*o.tiltSensitivity*.7}return o}smooth(n,i){if(this.points.length<2)return n;const r=this.calculateWeights(i),o=r.reduce((u,c)=>u+c,0);if(o===0)return n;const a=[0,0];for(let u=0;u<this.points.length;u++){const c=r[u]/o;a[0]+=this.points[u].point[0]*c,a[1]+=this.points[u].point[1]*c}return a}calculateWeights(n){const i=[],r=this.points.length-1;for(let o=0;o<this.points.length;o++){let a=Math.pow(n.smoothing,(r-o)*.8);if(o<r){const u=this.getPointVelocity(o);a*=1+u*n.velocityWeight*.8}if(o>0&&o<r){const u=this.getPointCurvature(o);a*=1+u*n.curvatureWeight*.7}i.push(a)}return i}getDistance(n,i){return be(n[0],n[1],i[0],i[1])}calculateVelocity(n){if(this.points.length<2)return 0;const i=this.points[this.points.length-1],r=this.getDistance(i.point,n.point),o=n.timestamp-i.timestamp;return o>0?r/o:0}updateMovingAverage(n){this.movingAverageVelocity.push(n),this.movingAverageVelocity.length>this.velocityWindowSize&&this.movingAverageVelocity.shift()}getAverageVelocity(){return this.movingAverageVelocity.length===0?0:this.movingAverageVelocity.reduce((n,i)=>n+i)/this.movingAverageVelocity.length}getPointVelocity(n){if(n>=this.points.length-1)return 0;const i=this.points[n],r=this.points[n+1],o=this.getDistance(i.point,r.point),a=r.timestamp-i.timestamp;return a>0?o/a:0}getPointCurvature(n){if(n<=0||n>=this.points.length-1)return 0;const i=this.points[n-1].point,r=this.points[n].point,o=this.points[n+1].point,a=this.getDistance(i,r),u=this.getDistance(r,o),c=this.getDistance(i,o),h=(a+u+c)/2;return 4*Math.sqrt(Math.max(0,h*(h-a)*(h-u)*(h-c)))/(a*u*c+1e-4)}}const IQ=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,globalPointerUp:o,touchStart:a}=e;let u=!1,c=!1,h=[],g=null;const p=new IM(e),m=new kQ({smoothing:.7,pressureSensitivity:.6});let w=null;const x=T=>{if(u){const D=G.getPointer(e);c&&h.push(h[0]),w=M4(D,h)}w&&!T&&Qt.insertNode(e,w,[e.children.length]),p==null||p.destroy(),w=null,u=!1,h=[],m.reset()};return e.touchStart=T=>{const D=P4();if(G.isInPointer(e,D)&&Bl(e))return T.preventDefault();a(T)},e.pointerDown=T=>{const D=P4();if(G.isInPointer(e,D)&&Bl(e)){u=!0,g=[T.x,T.y];const B=m.process(g),A=Pe(e,ke(e,B[0],B[1]));h.push(A)}n(T)},e.pointerMove=T=>{if(u&&!ix(e)){const D=[T.x,T.y];g&&be(g[0],g[1],D[0],D[1])<8?c=!0:c=!1;const b=m.process(D);if(b){p==null||p.destroy();const B=Pe(e,ke(e,b[0],b[1]));h.push(B);const A=G.getPointer(e);w=M4(A,h),p.processDrawing(w,G.getElementTopHost(e))}return}if(ix(e)&&u){x(!0);return}i(T)},e.pointerUp=T=>{x(),r(T)},e.globalPointerUp=T=>{x(!0),o(T)},e},HQ=e=>{const n=e,{getDeletedFragment:i,buildFragment:r,insertFragment:o}=n;return n.getDeletedFragment=a=>{const u=R4(n);return u.length&&a.push(...u),i(a)},n.buildFragment=(a,u,c,h)=>{const g=R4(n);if(g.length){const p=aB(n,g,u?[u.x,u.y]:[0,0]);a=jx(a,{text:"",type:Au.elements,elements:p})}return r(a,u,c,h)},n.insertFragment=(a,u,c)=>{var g;const h=(g=a==null?void 0:a.elements)==null?void 0:g.filter(p=>zs.isFreehand(p));h&&h.length>0&&lB(n,h,u),o(a,u,c)},n};var Rw={exports:{}},NQ=Rw.exports,O4;function GQ(){return O4||(O4=1,function(e,n){(function(i,r){e.exports=r()})(NQ,function(){return(()=>{var i={607:(o,a,u)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.drawLaserPen=a.drawRoundCap=a.drawDrawingBezierData=a.calDrawingData=a.transformPointToBezier=a.calControlPoints=a.drainPoints=a.setRoundCap=a.setColor=a.setOpacity=a.setTension=a.setMinWidth=a.setMaxWidth=a.setDelay=void 0;var c=u(405),h=10,g=0,p=300,m=.3,w=0,x=255,T=0,D=0,b=!1;function B(A,H){return Math.sqrt(A*A+H*H)}a.setDelay=function(A){p=A},a.setMaxWidth=function(A){h=A},a.setMinWidth=function(A){g=A},a.setTension=function(A){m=A},a.setOpacity=function(A){w=A},a.setColor=function(A,H,R){x=A,T=H,D=R},a.setRoundCap=function(A){b=A},a.drainPoints=function(A){for(var H,R=Date.now()-p,k=0;k<A.length;k++)if(A[k].time>=R){H=k;break}var W=H===0?A:H===void 0?[]:A.slice(H);for(k=W.length-1;k>0;k--)(U=W[k]).x===W[k-1].x&&U.y===W[k-1].y&&W.splice(k,1);for(k=W.length-1;k>1;k--){var U;(U=W[k]).x===W[k-2].x&&U.y===W[k-2].y&&(W.splice(k-1,2),k--)}return W},a.calControlPoints=function(A){if(A.length<3)throw new Error("to calculate control points, the point counts should be larger than 3");for(var H=Array(A.length),R=A.length,k=R-2;k>0;k--){var W=A[k],U=A[k+1],nt=A[k-1],st=nt.x-U.x,ft=nt.y-U.y,Et=B(st,ft),ct=st/Et,mt=ft/Et,wt=B(W.x-U.x,W.y-U.y),V=B(W.x-nt.x,W.y-nt.y),P=W.x-ct*wt*m,_=W.y-mt*wt*m,N=W.x+ct*V*m,$=W.y+mt*V*m;H[k]={cn:{x:P,y:_},cp:{x:N,y:$}},(isNaN(P)||isNaN(_)||isNaN(N)||isNaN($))&&console.log("a")}return H[R-1]={cn:{x:A[R-1].x,y:A[R-1].y},cp:{x:(A[R-1].x+A[R-2].x)/2,y:(A[R-1].y+A[R-2].y)/2}},H[0]={cn:{x:(A[0].x+A[k+1].x)/2,y:(A[0].y+A[k+1].y)/2},cp:{x:A[0].x,y:A[0].y}},H},a.transformPointToBezier=function(A,H){for(var R=[],k=1;k<A.length;k++){var W=A[k-1],U=A[k],nt=H[k-1].cn,st=H[k].cp,ft=new c.Bezier(W.x,W.y,nt.x,nt.y,st.x,st.y,U.x,U.y);R.push(ft)}return R},a.calDrawingData=function(A,H){for(var R=[],k=1-w,W=h-g,U=0,nt=0;nt<A.length;nt++){var st=A[nt],ft=st.length(),Et=w+(U+=ft)/H*k,ct=g+U/H*W;R.push({bezier:st,opacity:Et,width:ct})}return R},a.drawDrawingBezierData=function(A,H){A.save(),A.lineCap="butt";for(var R=0;R<H.length;R++){A.beginPath();var k=H[R],W=k.bezier,U=k.width,nt=k.opacity;A.lineWidth=U,A.strokeStyle="rgba(".concat(x,",").concat(T,",").concat(D,",").concat(nt,")");var st=W.points[0].x,ft=W.points[0].y;if(W.points[0].x!==W.points[1].x){var Et=W.points[0].x,ct=W.points[0].y,mt=(ct-W.points[1].y)/(Et-W.points[1].x),wt=ct-mt*Et,V=Math.sqrt(.005/(1+mt*mt));ft=mt*(st=(W.points[1].x>Et?-V:V)+Et)+wt}else ft+=W.points[0].y>W.points[1].y?.005:-.005;var P=W.points[3].x,_=W.points[3].y;if(W.points[2].x!==W.points[3].x){var N=W.points[3].x,$=W.points[3].y,Q=($-W.points[2].y)/(N-W.points[2].x),F=$-Q*N;V=Math.sqrt(.005/(1+Q*Q)),_=Q*(P=(W.points[2].x>N?-V:V)+N)+F}else _+=W.points[2].y>W.points[3].y?-.005:.005;A.moveTo(st,ft),A.bezierCurveTo(W.points[1].x,W.points[1].y,W.points[2].x,W.points[2].y,P,_),A.stroke(),A.closePath()}A.restore()},a.drawRoundCap=function(A,H){var R=H.bezier.points[3];A.save(),A.beginPath(),A.fillStyle="rgba(".concat(x,",").concat(T,",").concat(D,",").concat(H.opacity,")"),A.arc(R.x,R.y,H.width/2,0,2*Math.PI,!1),A.closePath(),A.fill(),A.restore()},a.drawLaserPen=function(A,H){if(H.length<3)throw new Error("too less points");var R=(0,a.calControlPoints)(H),k=(0,a.transformPointToBezier)(H,R),W=k.reduce(function(ct,mt){return ct+mt.length()},0),U=W/50,nt=[];k.forEach(function(ct,mt){var wt=ct.length(),V=Math.ceil(wt/U)+2,P=ct.getLUT(V);mt<k.length-1&&P.pop(),nt.push.apply(nt,P)});var st=(0,a.calControlPoints)(nt),ft=(0,a.transformPointToBezier)(nt,st),Et=(0,a.calDrawingData)(ft,W);(0,a.drawDrawingBezierData)(A,Et),b&&(0,a.drawRoundCap)(A,Et[Et.length-1])}},405:(o,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Bezier=void 0;const{abs:u,cos:c,sin:h,acos:g,atan2:p,sqrt:m,pow:w}=Math;function x(V){return V<0?-w(-V,.3333333333333333):w(V,.3333333333333333)}const T=Math.PI,D=2*T,b=T/2,B=Number.MAX_SAFE_INTEGER||9007199254740991,A=Number.MIN_SAFE_INTEGER||-9007199254740991,H={x:0,y:0,z:0},R={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(V,P){const _=P(V);let N=_.x*_.x+_.y*_.y;return _.z!==void 0&&(N+=_.z*_.z),m(N)},compute:function(V,P,_){if(V===0)return P[0].t=0,P[0];const N=P.length-1;if(V===1)return P[N].t=1,P[N];const $=1-V;let Q=P;if(N===0)return P[0].t=V,P[0];if(N===1){const J={x:$*Q[0].x+V*Q[1].x,y:$*Q[0].y+V*Q[1].y,t:V};return _&&(J.z=$*Q[0].z+V*Q[1].z),J}if(N<4){let J,tt,it,xt=$*$,gt=V*V,Lt=0;N===2?(Q=[Q[0],Q[1],Q[2],H],J=xt,tt=$*V*2,it=gt):N===3&&(J=xt*$,tt=xt*V*3,it=$*gt*3,Lt=V*gt);const $t={x:J*Q[0].x+tt*Q[1].x+it*Q[2].x+Lt*Q[3].x,y:J*Q[0].y+tt*Q[1].y+it*Q[2].y+Lt*Q[3].y,t:V};return _&&($t.z=J*Q[0].z+tt*Q[1].z+it*Q[2].z+Lt*Q[3].z),$t}const F=JSON.parse(JSON.stringify(P));for(;F.length>1;){for(let J=0;J<F.length-1;J++)F[J]={x:F[J].x+(F[J+1].x-F[J].x)*V,y:F[J].y+(F[J+1].y-F[J].y)*V},F[J].z!==void 0&&(F[J]=F[J].z+(F[J+1].z-F[J].z)*V);F.splice(F.length-1,1)}return F[0].t=V,F[0]},computeWithRatios:function(V,P,_,N){const $=1-V,Q=_,F=P;let J,tt=Q[0],it=Q[1],xt=Q[2],gt=Q[3];return tt*=$,it*=V,F.length===2?(J=tt+it,{x:(tt*F[0].x+it*F[1].x)/J,y:(tt*F[0].y+it*F[1].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z)/J,t:V}):(tt*=$,it*=2*$,xt*=V*V,F.length===3?(J=tt+it+xt,{x:(tt*F[0].x+it*F[1].x+xt*F[2].x)/J,y:(tt*F[0].y+it*F[1].y+xt*F[2].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z+xt*F[2].z)/J,t:V}):(tt*=$,it*=1.5*$,xt*=3*$,gt*=V*V*V,F.length===4?(J=tt+it+xt+gt,{x:(tt*F[0].x+it*F[1].x+xt*F[2].x+gt*F[3].x)/J,y:(tt*F[0].y+it*F[1].y+xt*F[2].y+gt*F[3].y)/J,z:!!N&&(tt*F[0].z+it*F[1].z+xt*F[2].z+gt*F[3].z)/J,t:V}):void 0))},derive:function(V,P){const _=[];for(let N=V,$=N.length,Q=$-1;$>1;$--,Q--){const F=[];for(let J,tt=0;tt<Q;tt++)J={x:Q*(N[tt+1].x-N[tt].x),y:Q*(N[tt+1].y-N[tt].y)},P&&(J.z=Q*(N[tt+1].z-N[tt].z)),F.push(J);_.push(F),N=F}return _},between:function(V,P,_){return P<=V&&V<=_||R.approximately(V,P)||R.approximately(V,_)},approximately:function(V,P,_){return u(V-P)<=(_||1e-6)},length:function(V){const P=R.Tvalues.length;let _=0;for(let N,$=0;$<P;$++)N=.5*R.Tvalues[$]+.5,_+=R.Cvalues[$]*R.arcfn(N,V);return .5*_},map:function(V,P,_,N,$){return N+(V-P)/(_-P)*($-N)},lerp:function(V,P,_){const N={x:P.x+V*(_.x-P.x),y:P.y+V*(_.y-P.y)};return P.z!==void 0&&_.z!==void 0&&(N.z=P.z+V*(_.z-P.z)),N},pointToString:function(V){let P=V.x+"/"+V.y;return V.z!==void 0&&(P+="/"+V.z),P},pointsToString:function(V){return"["+V.map(R.pointToString).join(", ")+"]"},copy:function(V){return JSON.parse(JSON.stringify(V))},angle:function(V,P,_){const N=P.x-V.x,$=P.y-V.y,Q=_.x-V.x,F=_.y-V.y;return p(N*F-$*Q,N*Q+$*F)},round:function(V,P){const _=""+V,N=_.indexOf(".");return parseFloat(_.substring(0,N+1+P))},dist:function(V,P){const _=V.x-P.x,N=V.y-P.y;return m(_*_+N*N)},closest:function(V,P){let _,N,$=w(2,63);return V.forEach(function(Q,F){N=R.dist(P,Q),N<$&&($=N,_=F)}),{mdist:$,mpos:_}},abcratio:function(V,P){if(P!==2&&P!==3)return!1;if(V===void 0)V=.5;else if(V===0||V===1)return V;const _=w(V,P)+w(1-V,P);return u((_-1)/_)},projectionratio:function(V,P){if(P!==2&&P!==3)return!1;if(V===void 0)V=.5;else if(V===0||V===1)return V;const _=w(1-V,P);return _/(w(V,P)+_)},lli8:function(V,P,_,N,$,Q,F,J){const tt=(V-_)*(Q-J)-(P-N)*($-F);return tt!=0&&{x:((V*N-P*_)*($-F)-(V-_)*($*J-Q*F))/tt,y:((V*N-P*_)*(Q-J)-(P-N)*($*J-Q*F))/tt}},lli4:function(V,P,_,N){const $=V.x,Q=V.y,F=P.x,J=P.y,tt=_.x,it=_.y,xt=N.x,gt=N.y;return R.lli8($,Q,F,J,tt,it,xt,gt)},lli:function(V,P){return R.lli4(V,V.c,P,P.c)},makeline:function(V,P){return new wt(V.x,V.y,(V.x+P.x)/2,(V.y+P.y)/2,P.x,P.y)},findbbox:function(V){let P=B,_=B,N=A,$=A;return V.forEach(function(Q){const F=Q.bbox();P>F.x.min&&(P=F.x.min),_>F.y.min&&(_=F.y.min),N<F.x.max&&(N=F.x.max),$<F.y.max&&($=F.y.max)}),{x:{min:P,mid:(P+N)/2,max:N,size:N-P},y:{min:_,mid:(_+$)/2,max:$,size:$-_}}},shapeintersections:function(V,P,_,N,$){if(!R.bboxoverlap(P,N))return[];const Q=[],F=[V.startcap,V.forward,V.back,V.endcap],J=[_.startcap,_.forward,_.back,_.endcap];return F.forEach(function(tt){tt.virtual||J.forEach(function(it){if(it.virtual)return;const xt=tt.intersects(it,$);xt.length>0&&(xt.c1=tt,xt.c2=it,xt.s1=V,xt.s2=_,Q.push(xt))})}),Q},makeshape:function(V,P,_){const N=P.points.length,$=V.points.length,Q=R.makeline(P.points[N-1],V.points[0]),F=R.makeline(V.points[$-1],P.points[0]),J={startcap:Q,forward:V,back:P,endcap:F,bbox:R.findbbox([Q,V,P,F]),intersections:function(tt){return R.shapeintersections(J,J.bbox,tt,tt.bbox,_)}};return J},getminmax:function(V,P,_){if(!_)return{min:0,max:0};let N,$,Q=B,F=A;_.indexOf(0)===-1&&(_=[0].concat(_)),_.indexOf(1)===-1&&_.push(1);for(let J=0,tt=_.length;J<tt;J++)N=_[J],$=V.get(N),$[P]<Q&&(Q=$[P]),$[P]>F&&(F=$[P]);return{min:Q,mid:(Q+F)/2,max:F,size:F-Q}},align:function(V,P){const _=P.p1.x,N=P.p1.y,$=-p(P.p2.y-N,P.p2.x-_);return V.map(function(Q){return{x:(Q.x-_)*c($)-(Q.y-N)*h($),y:(Q.x-_)*h($)+(Q.y-N)*c($)}})},roots:function(V,P){P=P||{p1:{x:0,y:0},p2:{x:1,y:0}};const _=V.length-1,N=R.align(V,P),$=function(ee){return 0<=ee&&ee<=1};if(_===2){const ee=N[0].y,xe=N[1].y,le=N[2].y,Re=ee-2*xe+le;if(Re!==0){const ve=-m(xe*xe-ee*le),Qe=-ee+xe;return[-(ve+Qe)/Re,-(-ve+Qe)/Re].filter($)}return xe!==le&&Re===0?[(2*xe-le)/(2*xe-2*le)].filter($):[]}const Q=N[0].y,F=N[1].y,J=N[2].y;let tt=3*F-Q-3*J+N[3].y,it=3*Q-6*F+3*J,xt=-3*Q+3*F,gt=Q;if(R.approximately(tt,0)){if(R.approximately(it,0))return R.approximately(xt,0)?[]:[-gt/xt].filter($);const ee=m(xt*xt-4*it*gt),xe=2*it;return[(ee-xt)/xe,(-xt-ee)/xe].filter($)}it/=tt,xt/=tt,gt/=tt;const Lt=(3*xt-it*it)/3,$t=Lt/3,ot=(2*it*it*it-9*it*xt+27*gt)/27,Pt=ot/2,Rt=Pt*Pt+$t*$t*$t;let It,he,Nt,ge,ae;if(Rt<0){const ee=-Lt/3,xe=m(ee*ee*ee),le=-ot/(2*xe),Re=g(le<-1?-1:le>1?1:le),ve=2*x(xe);return Nt=ve*c(Re/3)-it/3,ge=ve*c((Re+D)/3)-it/3,ae=ve*c((Re+2*D)/3)-it/3,[Nt,ge,ae].filter($)}if(Rt===0)return It=Pt<0?x(-Pt):-x(Pt),Nt=2*It-it/3,ge=-It-it/3,[Nt,ge].filter($);{const ee=m(Rt);return It=x(-Pt+ee),he=x(Pt+ee),[It-he-it/3].filter($)}},droots:function(V){if(V.length===3){const P=V[0],_=V[1],N=V[2],$=P-2*_+N;if($!==0){const Q=-m(_*_-P*N),F=-P+_;return[-(Q+F)/$,-(-Q+F)/$]}return _!==N&&$===0?[(2*_-N)/(2*(_-N))]:[]}if(V.length===2){const P=V[0],_=V[1];return P!==_?[P/(P-_)]:[]}return[]},curvature:function(V,P,_,N,$){let Q,F,J,tt,it=0,xt=0;const gt=R.compute(V,P),Lt=R.compute(V,_),$t=gt.x*gt.x+gt.y*gt.y;if(N?(Q=m(w(gt.y*Lt.z-Lt.y*gt.z,2)+w(gt.z*Lt.x-Lt.z*gt.x,2)+w(gt.x*Lt.y-Lt.x*gt.y,2)),F=w($t+gt.z*gt.z,1.5)):(Q=gt.x*Lt.y-gt.y*Lt.x,F=w($t,1.5)),Q===0||F===0)return{k:0,r:0};if(it=Q/F,xt=F/Q,!$){const ot=R.curvature(V-.001,P,_,N,!0).k,Pt=R.curvature(V+.001,P,_,N,!0).k;tt=(Pt-it+(it-ot))/2,J=(u(Pt-it)+u(it-ot))/2}return{k:it,r:xt,dk:tt,adk:J}},inflections:function(V){if(V.length<4)return[];const P=R.align(V,{p1:V[0],p2:V.slice(-1)[0]}),_=P[2].x*P[1].y,N=P[3].x*P[1].y,$=P[1].x*P[2].y,Q=18*(-3*_+2*N+3*$-P[3].x*P[2].y),F=18*(3*_-N-3*$),J=18*($-_);if(R.approximately(Q,0)){if(!R.approximately(F,0)){let gt=-J/F;if(0<=gt&&gt<=1)return[gt]}return[]}const tt=F*F-4*Q*J,it=Math.sqrt(tt),xt=2*Q;return R.approximately(xt,0)?[]:[(it-F)/xt,-(F+it)/xt].filter(function(gt){return 0<=gt&&gt<=1})},bboxoverlap:function(V,P){const _=["x","y"],N=_.length;for(let $,Q,F,J,tt=0;tt<N;tt++)if($=_[tt],Q=V[$].mid,F=P[$].mid,J=(V[$].size+P[$].size)/2,u(Q-F)>=J)return!1;return!0},expandbox:function(V,P){P.x.min<V.x.min&&(V.x.min=P.x.min),P.y.min<V.y.min&&(V.y.min=P.y.min),P.z&&P.z.min<V.z.min&&(V.z.min=P.z.min),P.x.max>V.x.max&&(V.x.max=P.x.max),P.y.max>V.y.max&&(V.y.max=P.y.max),P.z&&P.z.max>V.z.max&&(V.z.max=P.z.max),V.x.mid=(V.x.min+V.x.max)/2,V.y.mid=(V.y.min+V.y.max)/2,V.z&&(V.z.mid=(V.z.min+V.z.max)/2),V.x.size=V.x.max-V.x.min,V.y.size=V.y.max-V.y.min,V.z&&(V.z.size=V.z.max-V.z.min)},pairiteration:function(V,P,_){const N=V.bbox(),$=P.bbox(),Q=1e5,F=_||.5;if(N.x.size+N.y.size<F&&$.x.size+$.y.size<F)return[(Q*(V._t1+V._t2)/2|0)/Q+"/"+(Q*(P._t1+P._t2)/2|0)/Q];let J=V.split(.5),tt=P.split(.5),it=[{left:J.left,right:tt.left},{left:J.left,right:tt.right},{left:J.right,right:tt.right},{left:J.right,right:tt.left}];it=it.filter(function(gt){return R.bboxoverlap(gt.left.bbox(),gt.right.bbox())});let xt=[];return it.length===0||(it.forEach(function(gt){xt=xt.concat(R.pairiteration(gt.left,gt.right,F))}),xt=xt.filter(function(gt,Lt){return xt.indexOf(gt)===Lt})),xt},getccenter:function(V,P,_){const N=P.x-V.x,$=P.y-V.y,Q=_.x-P.x,F=_.y-P.y,J=N*c(b)-$*h(b),tt=N*h(b)+$*c(b),it=Q*c(b)-F*h(b),xt=Q*h(b)+F*c(b),gt=(V.x+P.x)/2,Lt=(V.y+P.y)/2,$t=(P.x+_.x)/2,ot=(P.y+_.y)/2,Pt=gt+J,Rt=Lt+tt,It=$t+it,he=ot+xt,Nt=R.lli8(gt,Lt,Pt,Rt,$t,ot,It,he),ge=R.dist(Nt,V);let ae,ee=p(V.y-Nt.y,V.x-Nt.x),xe=p(P.y-Nt.y,P.x-Nt.x),le=p(_.y-Nt.y,_.x-Nt.x);return ee<le?((ee>xe||xe>le)&&(ee+=D),ee>le&&(ae=le,le=ee,ee=ae)):le<xe&&xe<ee?(ae=le,le=ee,ee=ae):le+=D,Nt.s=ee,Nt.e=le,Nt.r=ge,Nt},numberSort:function(V,P){return V-P}};class k{constructor(P){this.curves=[],this._3d=!1,P&&(this.curves=P,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(P){return R.pointsToString(P.points)}).join(", ")+"]"}addCurve(P){this.curves.push(P),this._3d=this._3d||P._3d}length(){return this.curves.map(function(P){return P.length()}).reduce(function(P,_){return P+_})}curve(P){return this.curves[P]}bbox(){const P=this.curves;for(var _=P[0].bbox(),N=1;N<P.length;N++)R.expandbox(_,P[N].bbox());return _}offset(P){const _=[];return this.curves.forEach(function(N){_.push(...N.offset(P))}),new k(_)}}const{abs:W,min:U,max:nt,cos:st,sin:ft,acos:Et,sqrt:ct}=Math,mt=Math.PI;class wt{constructor(P){let _=P&&P.forEach?P:Array.from(arguments).slice(),N=!1;if(typeof _[0]=="object"){N=_.length;const $t=[];_.forEach(function(ot){["x","y","z"].forEach(function(Pt){ot[Pt]!==void 0&&$t.push(ot[Pt])})}),_=$t}let $=!1;const Q=_.length;if(N){if(N>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");$=!0}}else if(Q!==6&&Q!==8&&Q!==9&&Q!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const F=this._3d=!$&&(Q===9||Q===12)||P&&P[0]&&P[0].z!==void 0,J=this.points=[];for(let $t=0,ot=F?3:2;$t<Q;$t+=ot){var tt={x:_[$t],y:_[$t+1]};F&&(tt.z=_[$t+2]),J.push(tt)}const it=this.order=J.length-1,xt=this.dims=["x","y"];F&&xt.push("z"),this.dimlen=xt.length;const gt=R.align(J,{p1:J[0],p2:J[it]}),Lt=R.dist(J[0],J[it]);this._linear=gt.reduce(($t,ot)=>$t+W(ot.y),0)<Lt/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(P,_,N,$){if($===void 0&&($=.5),$===0)return new wt(_,_,N);if($===1)return new wt(P,_,_);const Q=wt.getABC(2,P,_,N,$);return new wt(P,Q.A,N)}static cubicFromPoints(P,_,N,$,Q){$===void 0&&($=.5);const F=wt.getABC(3,P,_,N,$);Q===void 0&&(Q=R.dist(_,F.C));const J=Q*(1-$)/$,tt=R.dist(P,N),it=(N.x-P.x)/tt,xt=(N.y-P.y)/tt,gt=Q*it,Lt=Q*xt,$t=J*it,ot=J*xt,Pt=_.x-gt,Rt=_.y-Lt,It=_.x+$t,he=_.y+ot,Nt=F.A,ge=Nt.x+(Pt-Nt.x)/(1-$),ae=Nt.y+(Rt-Nt.y)/(1-$),ee=Nt.x+(It-Nt.x)/$,xe=Nt.y+(he-Nt.y)/$,le={x:P.x+(ge-P.x)/$,y:P.y+(ae-P.y)/$},Re={x:N.x+(ee-N.x)/(1-$),y:N.y+(xe-N.y)/(1-$)};return new wt(P,le,Re,N)}static getUtils(){return R}getUtils(){return wt.getUtils()}static get PolyBezier(){return k}valueOf(){return this.toString()}toString(){return R.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const P=this.points,_=["M",P[0].x,P[0].y,this.order===2?"Q":"C"];for(let N=1,$=P.length;N<$;N++)_.push(P[N].x),_.push(P[N].y);return _.join(" ")}setRatios(P){if(P.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=P,this._lut=[]}verify(){const P=this.coordDigest();P!==this._print&&(this._print=P,this.update())}coordDigest(){return this.points.map(function(P,_){return""+_+P.x+P.y+(P.z?P.z:0)}).join("")}update(){this._lut=[],this.dpoints=R.derive(this.points,this._3d),this.computedirection()}computedirection(){const P=this.points,_=R.angle(P[0],P[this.order],P[1]);this.clockwise=_>0}length(){return R.length(this.derivative.bind(this))}static getABC(P=2,_,N,$,Q=.5){const F=R.projectionratio(Q,P),J=1-F,tt={x:F*_.x+J*$.x,y:F*_.y+J*$.y},it=R.abcratio(Q,P);return{A:{x:N.x+(N.x-tt.x)/it,y:N.y+(N.y-tt.y)/it},B:N,C:tt,S:_,E:$}}getABC(P,_){_=_||this.get(P);let N=this.points[0],$=this.points[this.order];return wt.getABC(this.order,N,_,$,P)}getLUT(P){if(this.verify(),P=P||100,this._lut.length===P)return this._lut;this._lut=[],P++,this._lut=[];for(let _,N,$=0;$<P;$++)N=$/(P-1),_=this.compute(N),_.t=N,this._lut.push(_);return this._lut}on(P,_){_=_||5;const N=this.getLUT(),$=[];for(let Q,F=0,J=0;F<N.length;F++)Q=N[F],R.dist(Q,P)<_&&($.push(Q),J+=F/N.length);return!!$.length&&(t/=$.length)}project(P){const _=this.getLUT(),N=_.length-1,$=R.closest(_,P),Q=$.mpos,F=(Q-1)/N,J=(Q+1)/N,tt=.1/N;let it,xt,gt=$.mdist,Lt=F,$t=Lt;for(gt+=1;Lt<J+tt;Lt+=tt)it=this.compute(Lt),xt=R.dist(P,it),xt<gt&&(gt=xt,$t=Lt);return $t=$t<0?0:$t>1?1:$t,it=this.compute($t),it.t=$t,it.d=gt,it}get(P){return this.compute(P)}point(P){return this.points[P]}compute(P){return this.ratios?R.computeWithRatios(P,this.points,this.ratios,this._3d):R.compute(P,this.points,this._3d,this.ratios)}raise(){const P=this.points,_=[P[0]],N=P.length;for(let $,Q,F=1;F<N;F++)$=P[F],Q=P[F-1],_[F]={x:(N-F)/N*$.x+F/N*Q.x,y:(N-F)/N*$.y+F/N*Q.y};return _[N]=P[N-1],new wt(_)}derivative(P){return R.compute(P,this.dpoints[0],this._3d)}dderivative(P){return R.compute(P,this.dpoints[1],this._3d)}align(){let P=this.points;return new wt(R.align(P,{p1:P[0],p2:P[P.length-1]}))}curvature(P){return R.curvature(P,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return R.inflections(this.points)}normal(P){return this._3d?this.__normal3(P):this.__normal2(P)}__normal2(P){const _=this.derivative(P),N=ct(_.x*_.x+_.y*_.y);return{x:-_.y/N,y:_.x/N}}__normal3(P){const _=this.derivative(P),N=this.derivative(P+.01),$=ct(_.x*_.x+_.y*_.y+_.z*_.z),Q=ct(N.x*N.x+N.y*N.y+N.z*N.z);_.x/=$,_.y/=$,_.z/=$,N.x/=Q,N.y/=Q,N.z/=Q;const F={x:N.y*_.z-N.z*_.y,y:N.z*_.x-N.x*_.z,z:N.x*_.y-N.y*_.x},J=ct(F.x*F.x+F.y*F.y+F.z*F.z);F.x/=J,F.y/=J,F.z/=J;const tt=[F.x*F.x,F.x*F.y-F.z,F.x*F.z+F.y,F.x*F.y+F.z,F.y*F.y,F.y*F.z-F.x,F.x*F.z-F.y,F.y*F.z+F.x,F.z*F.z];return{x:tt[0]*_.x+tt[1]*_.y+tt[2]*_.z,y:tt[3]*_.x+tt[4]*_.y+tt[5]*_.z,z:tt[6]*_.x+tt[7]*_.y+tt[8]*_.z}}hull(P){let _=this.points,N=[],$=[],Q=0;for($[Q++]=_[0],$[Q++]=_[1],$[Q++]=_[2],this.order===3&&($[Q++]=_[3]);_.length>1;){N=[];for(let F,J=0,tt=_.length-1;J<tt;J++)F=R.lerp(P,_[J],_[J+1]),$[Q++]=F,N.push(F);_=N}return $}split(P,_){if(P===0&&_)return this.split(_).left;if(_===1)return this.split(P).right;const N=this.hull(P),$={left:this.order===2?new wt([N[0],N[3],N[5]]):new wt([N[0],N[4],N[7],N[9]]),right:this.order===2?new wt([N[5],N[4],N[2]]):new wt([N[9],N[8],N[6],N[3]]),span:N};return $.left._t1=R.map(0,0,1,this._t1,this._t2),$.left._t2=R.map(P,0,1,this._t1,this._t2),$.right._t1=R.map(P,0,1,this._t1,this._t2),$.right._t2=R.map(1,0,1,this._t1,this._t2),_?(_=R.map(_,P,1,0,1),$.right.split(_).left):$}extrema(){const P={};let _=[];return this.dims.forEach((function(N){let $=function(F){return F[N]},Q=this.dpoints[0].map($);P[N]=R.droots(Q),this.order===3&&(Q=this.dpoints[1].map($),P[N]=P[N].concat(R.droots(Q))),P[N]=P[N].filter(function(F){return F>=0&&F<=1}),_=_.concat(P[N].sort(R.numberSort))}).bind(this)),P.values=_.sort(R.numberSort).filter(function(N,$){return _.indexOf(N)===$}),P}bbox(){const P=this.extrema(),_={};return this.dims.forEach((function(N){_[N]=R.getminmax(this,N,P[N])}).bind(this)),_}overlaps(P){const _=this.bbox(),N=P.bbox();return R.bboxoverlap(_,N)}offset(P,_){if(_!==void 0){const N=this.get(P),$=this.normal(P),Q={c:N,n:$,x:N.x+$.x*_,y:N.y+$.y*_};return this._3d&&(Q.z=N.z+$.z*_),Q}if(this._linear){const N=this.normal(0),$=this.points.map(function(Q){const F={x:Q.x+P*N.x,y:Q.y+P*N.y};return Q.z&&N.z&&(F.z=Q.z+P*N.z),F});return[new wt($)]}return this.reduce().map(function(N){return N._linear?N.offset(P)[0]:N.scale(P)})}simple(){if(this.order===3){const $=R.angle(this.points[0],this.points[3],this.points[1]),Q=R.angle(this.points[0],this.points[3],this.points[2]);if($>0&&Q<0||$<0&&Q>0)return!1}const P=this.normal(0),_=this.normal(1);let N=P.x*_.x+P.y*_.y;return this._3d&&(N+=P.z*_.z),W(Et(N))<mt/3}reduce(){let P,_,N=0,$=0,Q=.01,F=[],J=[],tt=this.extrema().values;for(tt.indexOf(0)===-1&&(tt=[0].concat(tt)),tt.indexOf(1)===-1&&tt.push(1),N=tt[0],P=1;P<tt.length;P++)$=tt[P],_=this.split(N,$),_._t1=N,_._t2=$,F.push(_),N=$;return F.forEach(function(it){for(N=0,$=0;$<=1;)for($=N+Q;$<=1.01;$+=Q)if(_=it.split(N,$),!_.simple()){if($-=Q,W(N-$)<Q)return[];_=it.split(N,$),_._t1=R.map(N,0,1,it._t1,it._t2),_._t2=R.map($,0,1,it._t1,it._t2),J.push(_),N=$;break}N<1&&(_=it.split(N,1),_._t1=R.map(N,0,1,it._t1,it._t2),_._t2=it._t2,J.push(_))}),J}translate(P,_,N){N=typeof N=="number"?N:_;const $=this.order;let Q=this.points.map((F,J)=>(1-J/$)*_+J/$*N);return new wt(this.points.map((F,J)=>({x:F.x+P.x*Q[J],y:F.y+P.y*Q[J]})))}scale(P){const _=this.order;let N=!1;if(typeof P=="function"&&(N=P),N&&_===2)return this.raise().scale(N);const $=this.clockwise,Q=this.points;if(this._linear)return this.translate(this.normal(0),N?N(0):P,N?N(1):P);const F=N?N(0):P,J=N?N(1):P,tt=[this.offset(0,10),this.offset(1,10)],it=[],xt=R.lli4(tt[0],tt[0].c,tt[1],tt[1].c);if(!xt)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(gt){const Lt=it[gt*_]=R.copy(Q[gt*_]);Lt.x+=(gt?J:F)*tt[gt].n.x,Lt.y+=(gt?J:F)*tt[gt].n.y}),N?([0,1].forEach(function(gt){if(_!==2||!gt){var Lt=Q[gt+1],$t={x:Lt.x-xt.x,y:Lt.y-xt.y},ot=N?N((gt+1)/_):P;N&&!$&&(ot=-ot);var Pt=ct($t.x*$t.x+$t.y*$t.y);$t.x/=Pt,$t.y/=Pt,it[gt+1]={x:Lt.x+ot*$t.x,y:Lt.y+ot*$t.y}}}),new wt(it)):([0,1].forEach(gt=>{if(_===2&&gt)return;const Lt=it[gt*_],$t=this.derivative(gt),ot={x:Lt.x+$t.x,y:Lt.y+$t.y};it[gt+1]=R.lli4(Lt,ot,xt,Q[gt+1])}),new wt(it))}outline(P,_,N,$){if(_=_===void 0?P:_,this._linear){const ae=this.normal(0),ee=this.points[0],xe=this.points[this.points.length-1];let le,Re,ve;N===void 0&&(N=P,$=_),le={x:ee.x+ae.x*P,y:ee.y+ae.y*P},ve={x:xe.x+ae.x*N,y:xe.y+ae.y*N},Re={x:(le.x+ve.x)/2,y:(le.y+ve.y)/2};const Qe=[le,Re,ve];le={x:ee.x-ae.x*_,y:ee.y-ae.y*_},ve={x:xe.x-ae.x*$,y:xe.y-ae.y*$},Re={x:(le.x+ve.x)/2,y:(le.y+ve.y)/2};const ti=[ve,Re,le],Fn=R.makeline(ti[2],Qe[0]),Kn=R.makeline(Qe[2],ti[0]),Br=[Fn,new wt(Qe),Kn,new wt(ti)];return new k(Br)}const Q=this.reduce(),F=Q.length,J=[];let tt,it=[],xt=0,gt=this.length();const Lt=N!==void 0&&$!==void 0;function $t(ae,ee,xe,le,Re){return function(ve){const Qe=le/xe,ti=(le+Re)/xe,Fn=ee-ae;return R.map(ve,0,1,ae+Qe*Fn,ae+ti*Fn)}}Q.forEach(function(ae){const ee=ae.length();Lt?(J.push(ae.scale($t(P,N,gt,xt,ee))),it.push(ae.scale($t(-_,-$,gt,xt,ee)))):(J.push(ae.scale(P)),it.push(ae.scale(-_))),xt+=ee}),it=it.map(function(ae){return tt=ae.points,tt[3]?ae.points=[tt[3],tt[2],tt[1],tt[0]]:ae.points=[tt[2],tt[1],tt[0]],ae}).reverse();const ot=J[0].points[0],Pt=J[F-1].points[J[F-1].points.length-1],Rt=it[F-1].points[it[F-1].points.length-1],It=it[0].points[0],he=R.makeline(Rt,ot),Nt=R.makeline(Pt,It),ge=[he].concat(J).concat([Nt]).concat(it);return new k(ge)}outlineshapes(P,_,N){_=_||P;const $=this.outline(P,_).curves,Q=[];for(let F=1,J=$.length;F<J/2;F++){const tt=R.makeshape($[F],$[J-F],N);tt.startcap.virtual=F>1,tt.endcap.virtual=F<J/2-1,Q.push(tt)}return Q}intersects(P,_){return P?P.p1&&P.p2?this.lineIntersects(P):(P instanceof wt&&(P=P.reduce()),this.curveintersects(this.reduce(),P,_)):this.selfintersects(_)}lineIntersects(P){const _=U(P.p1.x,P.p2.x),N=U(P.p1.y,P.p2.y),$=nt(P.p1.x,P.p2.x),Q=nt(P.p1.y,P.p2.y);return R.roots(this.points,P).filter(F=>{var J=this.get(F);return R.between(J.x,_,$)&&R.between(J.y,N,Q)})}selfintersects(P){const _=this.reduce(),N=_.length-2,$=[];for(let Q,F,J,tt=0;tt<N;tt++)F=_.slice(tt,tt+1),J=_.slice(tt+2),Q=this.curveintersects(F,J,P),$.push(...Q);return $}curveintersects(P,_,N){const $=[];P.forEach(function(F){_.forEach(function(J){F.overlaps(J)&&$.push({left:F,right:J})})});let Q=[];return $.forEach(function(F){const J=R.pairiteration(F.left,F.right,N);J.length>0&&(Q=Q.concat(J))}),Q}arcs(P){return P=P||.5,this._iterate(P,[])}_error(P,_,N,$){const Q=($-N)/4,F=this.get(N+Q),J=this.get($-Q),tt=R.dist(P,_),it=R.dist(P,F),xt=R.dist(P,J);return W(it-tt)+W(xt-tt)}_iterate(P,_){let N,$=0,Q=1;do{N=0,Q=1;let F,J,tt,it,xt,gt=this.get($),Lt=!1,$t=!1,ot=Q,Pt=1;do if($t=Lt,it=tt,ot=($+Q)/2,F=this.get(ot),J=this.get(Q),tt=R.getccenter(gt,F,J),tt.interval={start:$,end:Q},Lt=this._error(tt,gt,$,Q)<=P,xt=$t&&!Lt,xt||(Pt=Q),Lt){if(Q>=1){if(tt.interval.end=Pt=1,it=tt,Q>1){let Rt={x:tt.x+tt.r*st(tt.e),y:tt.y+tt.r*ft(tt.e)};tt.e+=R.angle({x:tt.x,y:tt.y},Rt,this.get(1))}break}Q+=(Q-$)/2}else Q=ot;while(!xt&&N++<100);if(N>=100)break;it=it||tt,_.push(it),$=Pt}while(Q<1);return _}}a.Bezier=wt}},r={};return function o(a){var u=r[a];if(u!==void 0)return u.exports;var c=r[a]={exports:{}};return i[a](c,c.exports,o),c.exports}(607)})()})}(Rw)),Rw.exports}var zc=GQ();const HM="laser-pointer",zQ=e=>{const n=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/n};class jQ{constructor(){this.mouseTrack=[],this.mouseMoveHandler=null,this.resizeHandler=null,this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1,this.container=null}init(n){this.container=G.getBoardContainer(n).closest(".drawnix"),this.cvsDom=this.container.querySelector(`.${HM}`),this.ctx=this.cvsDom.getContext("2d"),this.canvasPos=this.cvsDom.getBoundingClientRect(),this.mouseMoveHandler=i=>{if(!this.canvasPos)return;const r=i.clientX-this.canvasPos.x,o=i.clientY-this.canvasPos.y;this.mouseTrack.push({x:r,y:o,time:Date.now()}),this.ctx&&this.startDraw()},this.resizeHandler=()=>this.setCanvasSize(),this.container.addEventListener("pointermove",this.mouseMoveHandler),window.addEventListener("resize",this.resizeHandler),this.setCanvasSize()}destroy(){this.mouseMoveHandler&&this.container&&(this.container.removeEventListener("pointermove",this.mouseMoveHandler),this.mouseMoveHandler=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.ctx&&this.cvsDom&&this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height),this.cvsDom=null,this.ctx=null,this.canvasPos=null,this.drawing=!1}startDraw(){this.drawing||(this.drawing=!0,this.draw())}draw(){if(!this.ctx||!this.cvsDom)return;this.ctx.clearRect(0,0,this.cvsDom.width,this.cvsDom.height);let n=!1;if(this.mouseTrack=zc.drainPoints(this.mouseTrack),this.mouseTrack.length>=3)zc.setColor(211,211,211),zc.setDelay(180),zc.setRoundCap(!0),zc.setMaxWidth(10),zc.setMinWidth(0),zc.setOpacity(.6),zc.drawLaserPen(this.ctx,this.mouseTrack),n=!0;else{const i=this.mouseTrack[this.mouseTrack.length-1];if(!i)return;this.ctx.save(),this.ctx.beginPath(),this.ctx.fillStyle="rgba(211, 211, 211)",this.ctx.arc(i.x,i.y,5,0,Math.PI*2,!1),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}n?requestAnimationFrame(()=>this.draw()):this.drawing=!1}setCanvasSize(){if(!this.cvsDom||!this.ctx)return;const n=this.cvsDom.getBoundingClientRect(),i=zQ(this.ctx);this.cvsDom.setAttribute("width",`${n.width*i}px`),this.cvsDom.setAttribute("height",`${n.height*i}px`),this.ctx.scale(i,i),this.canvasPos=this.cvsDom.getBoundingClientRect()}}const UQ=e=>{const{pointerDown:n,pointerMove:i,pointerUp:r,globalPointerUp:o,touchStart:a}=e,u=new jQ;let c=!1;const h=new Set,g=w=>{const x=Pe(e,ke(e,w[0],w[1]));e.children.filter(D=>zs.isFreehand(D)).forEach(D=>{!h.has(D.id)&&kM(e,D,x)&&(gn.getElementG(D).style.opacity="0.2",h.add(D.id))})},p=()=>{if(h.size>0){const w=e.children.filter(x=>h.has(x.id));w.length>0&&P5.removeElements(e,w)}},m=()=>{c&&(p(),c=!1,h.clear(),u.destroy())};return e.touchStart=w=>{if(G.isInPointer(e,[Yo.eraser])&&Bl(e))return w.preventDefault();a(w)},e.pointerDown=w=>{if(G.isInPointer(e,[Yo.eraser])&&Bl(e)){c=!0,h.clear();const T=[w.x,w.y];g(T),u.init(e);return}n(w)},e.pointerMove=w=>{if(c&&!ix(e)){_a(e,"with-freehand-erase",()=>{const x=[w.x,w.y];g(x)});return}if(c&&ix(e)){m();return}i(w)},e.pointerUp=w=>{if(c){m();return}r(w)},e.globalPointerUp=w=>{if(c){m();return}o(w)},e},$Q=e=>{const{getRectangle:n,drawElement:i,isHit:r,isRectangleHit:o,getOneHitElement:a,isMovable:u,isAlign:c}=e;return e.drawElement=h=>zs.isFreehand(h.element)?FQ:i(h),e.getRectangle=h=>zs.isFreehand(h)?I.getRectangleByPoints(h.points):n(h),e.isRectangleHit=(h,g)=>zs.isFreehand(h)?BQ(e,h,g):o(h,g),e.isHit=(h,g,p)=>zs.isFreehand(h)?kM(e,h,g):r(h,g,p),e.getOneHitElement=h=>h.every(p=>zs.isFreehand(p))?UB(e,h):a(h),e.isMovable=h=>zs.isFreehand(h)?!0:u(h),e.isAlign=h=>zs.isFreehand(h)?!0:c(h),e.setPluginOptions(gB,{customGeometryTypes:[P9]}),UQ(HQ(IQ(e)))},VQ=()=>{const e=qi(),{t:n}=si(),i=e.theme;return O.jsx(Jo,{padding:1,className:yn("theme-toolbar",Ml),children:O.jsxs("select",{onChange:r=>{const o=r.target.value;un.updateThemeColor(e,o)},value:i.themeColorMode,children:[O.jsx("option",{value:"default",children:n("theme.default")}),O.jsx("option",{value:"colorful",children:n("theme.colorful")}),O.jsx("option",{value:"soft",children:n("theme.soft")}),O.jsx("option",{value:"retro",children:n("theme.retro")}),O.jsx("option",{value:"dark",children:n("theme.dark")}),O.jsx("option",{value:"starry",children:n("theme.starry")})]})})},NM=new WeakMap,L4=e=>!!NM.get(e),GM=(e,n)=>{NM.set(e,n)},WQ=e=>i=>{const{pointerDown:r}=i;return i.pointerDown=o=>{aS(o)&&!L4(i)&&(GM(i,!0),e({isPencilMode:!0})),!(L4(i)&&!aS(o))&&r(o)},i},XQ=()=>{const e=qi(),{appState:n,setAppState:i}=Qs();return O.jsx(O.Fragment,{children:n.isPencilMode&&O.jsx("div",{className:"pencil-mode-toolbar",children:O.jsx(jn,{type:"button",visible:!0,title:"X Pencil","aria-label":"Arrow",label:"Pencil X",onPointerDown:()=>{i({...n,isPencilMode:!1}),GM(e,!1)}})})})};function qQ({initialOpen:e=!1,open:n,onOpenChange:i}={}){const[r,o]=K.useState(e),[a,u]=K.useState(),[c,h]=K.useState(),g=n??r,p=i??o,m=yC({open:g,onOpenChange:p}),w=m.context,x=aM(w,{enabled:n==null}),T=lM(w,{outsidePressEvent:"mousedown"}),D=cM(w),b=uM([x,T,D]);return K.useMemo(()=>({open:g,setOpen:p,...b,...m,labelId:a,descriptionId:c,setLabelId:u,setDescriptionId:h}),[g,p,b,m,a,c])}const zM=K.createContext(null),Bv=()=>{const e=K.useContext(zM);if(e==null)throw new Error("Dialog components must be wrapped in <Dialog />");return e};function QS({children:e,...n}){const i=qQ(n);return O.jsx(zM.Provider,{value:i,children:e})}K.forwardRef(function({children:n,asChild:i=!1,...r},o){const a=Bv(),u=n.ref,c=mC([a.refs.setReference,o,u]);return i&&K.isValidElement(n)?K.cloneElement(n,a.getReferenceProps({ref:c,...r,...n.props,"data-state":a.open?"open":"closed"})):O.jsx("button",{ref:c,"data-state":a.open?"open":"closed",...a.getReferenceProps(r),children:n})});const JS=K.forwardRef(function(n,i){const{context:r,...o}=Bv(),a=mC([o.refs.setFloating,i]);return r.open?O.jsx(rM,{root:n.container,children:O.jsx(jZ,{className:"Dialog-overlay",lockScroll:!0,children:O.jsx(sM,{context:r,children:O.jsx("div",{ref:a,"aria-labelledby":o.labelId,"aria-describedby":o.descriptionId,...o.getFloatingProps(n),children:n.children})})})}):null});K.forwardRef(function({children:n,...i},r){const{setLabelId:o}=Bv(),a=Dv();return K.useLayoutEffect(()=>(o(a),()=>o(void 0)),[a,o]),O.jsx("h2",{...i,ref:r,id:a,children:n})});K.forwardRef(function({children:n,...i},r){const{setDescriptionId:o}=Bv(),a=Dv();return K.useLayoutEffect(()=>(o(a),()=>o(void 0)),[a,o]),O.jsx("p",{...i,ref:r,id:a,children:n})});K.forwardRef(function(n,i){const{setOpen:r}=Bv();return O.jsx("button",{type:"button",...n,ref:i,onClick:()=>r(!1)})});const YQ="modulepreload",KQ=function(e){return"/"+e},_4={},jM=function(n,i,r){let o=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),c=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(i.map(h=>{if(h=KQ(h),h in _4)return;_4[h]=!0;const g=h.endsWith(".css"),p=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const m=document.createElement("link");if(m.rel=g?"stylesheet":YQ,g||(m.as="script"),m.crossOrigin="",m.href=h,c&&m.setAttribute("nonce",c),document.head.appendChild(m),g)return new Promise((w,x)=>{m.addEventListener("load",w),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return o.then(u=>{for(const c of u||[])c.status==="rejected"&&a(c.reason);return n().catch(a)})},UM=({children:e})=>O.jsx("div",{className:"ttd-dialog-panels",children:e}),Dx=({label:e,children:n,panelAction:i,panelActionDisabled:r=!1,onTextSubmitInProgress:o,renderTopRight:a,renderSubmitShortcut:u,renderBottomRight:c})=>O.jsxs("div",{className:"ttd-dialog-panel",children:[O.jsxs("div",{className:"ttd-dialog-panel__header",children:[O.jsx("label",{children:e}),a==null?void 0:a()]}),n,O.jsxs("div",{className:yn("ttd-dialog-panel-button-container",{invisible:!i}),style:{display:"flex",alignItems:"center"},children:[O.jsx("button",{className:"ttd-dialog-panel-button drawnix-button ",onClick:i&&i.action,disabled:r||o,children:O.jsxs("div",{className:yn({invisible:o}),children:[i==null?void 0:i.label,(i==null?void 0:i.icon)&&O.jsx("span",{children:i.icon})]})}),!r&&!o&&(u==null?void 0:u()),c==null?void 0:c()]})]}),F4={CTRL_OR_CMD:RO||zw?"metaKey":"ctrlKey",ENTER:"Enter"},$M=({input:e,placeholder:n,onChange:i,onKeyboardSubmit:r})=>{const o=K.useRef(null),a=K.useRef(r);return a.current=r,K.useEffect(()=>{if(!a.current)return;const u=o.current;if(u){const c=h=>{var g;h[F4.CTRL_OR_CMD]&&h.key===F4.ENTER&&(h.preventDefault(),(g=a.current)==null||g.call(a))};return u.addEventListener(Ig.KEYDOWN,c),()=>{u.removeEventListener(Ig.KEYDOWN,c)}}},[]),O.jsx("textarea",{className:"ttd-dialog-input",onChange:i,value:e,placeholder:n,autoFocus:!0,ref:o})},ZQ=({error:e})=>O.jsxs("div",{"data-testid":"ttd-dialog-output-error",className:"ttd-dialog-output-error",children:["Error! ",O.jsx("p",{children:e})]}),VM=({error:e,value:n,loaded:i})=>{const r=[SP,m9,cB,E9],o={readonly:!0,hideScrollbar:!1,disabledScrollOnNonFocus:!0,themeColors:_P};return O.jsxs("div",{className:"ttd-dialog-output-wrapper",children:[e&&O.jsx(ZQ,{error:e.message}),O.jsx("div",{style:{opacity:e?"0.15":1},className:"ttd-dialog-output-canvas-container",children:O.jsx(dB,{value:n,options:o,plugins:r,children:O.jsx(s6,{})})})]})},WM=()=>O.jsxs("div",{className:"ttd-dialog-submit-shortcut",children:[O.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rv("CtrlOrCmd")}),O.jsx("div",{className:"ttd-dialog-submit-shortcut__key",children:rv("Enter")})]}),QQ=`flowchart TD
 A[Christmas] -->|Get money| B(Go shopping)
 B --> C{Let me think}
 C -->|One| D[Laptop]
 C -->|Two| E[iPhone]
 C -->|Three| F[Car]`,JQ=()=>{const{appState:e,setAppState:n}=Qs(),{t:i,language:r}=si(),[o,a]=K.useState({loaded:!1,api:Promise.resolve({parseMermaidToDrawnix:async()=>({elements:[]})})});K.useEffect(()=>{(async()=>{try{const b=await jM(()=>import("./index-rjGOcw8R.js").then(B=>B.b6),[]);a({loaded:!0,api:Promise.resolve(b)})}catch(b){console.error("Failed to load mermaid library:",b),w(new Error(i("dialog.error.loadMermaid")))}})()},[]);const[u,c]=K.useState(()=>QQ),[h,g]=K.useState(()=>[]),p=K.useDeferredValue(u.trim()),[m,w]=K.useState(null),x=qi();K.useEffect(()=>{(async()=>{try{const b=await o.api;let B;try{B=await b.parseMermaidToDrawnix(p)}catch{B=await b.parseMermaidToDrawnix(p.replace(/"/g,"'"))}const{elements:A}=B;g(A),w(null)}catch(b){w(b)}})()},[p,o]);const T=()=>{if(!h.length)return;const D=G.getBoardContainer(x).getBoundingClientRect(),b=[D.width/2,D.height/2],B=x.viewport.zoom,A=$g(x),H=A[0]+b[0]/B,R=A[1]+b[1]/B,k=h,W=I.getBoundingRectangle(k.filter(nt=>!So.isGroup(nt)).map(nt=>I.getRectangleByPoints(nt.points))),U=[H-W.width/2,R-W.height/2];x.insertFragment({elements:JSON.parse(JSON.stringify(k))},U,Ma.paste),n({...e,openDialogType:null})};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"ttd-dialog-desc",children:r==="zh"?O.jsxs(O.Fragment,{children:[i("dialog.mermaid.description")," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.flowchart")}),"",O.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.sequence")})," ",""," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.class")}),i("dialog.mermaid.otherTypes")]}):O.jsxs(O.Fragment,{children:[i("dialog.mermaid.description")," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/flowchart.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.flowchart")}),","," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/sequenceDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.sequence")}),","," ",O.jsx("a",{href:"https://mermaid.js.org/syntax/classDiagram.html",target:"_blank",rel:"noreferrer",children:i("dialog.mermaid.class")}),i("dialog.mermaid.otherTypes")]})}),O.jsxs(UM,{children:[O.jsx(Dx,{label:i("dialog.mermaid.syntax"),children:O.jsx($M,{input:u,placeholder:i("dialog.mermaid.placeholder"),onChange:D=>c(D.target.value),onKeyboardSubmit:()=>{T()}})}),O.jsx(Dx,{label:i("dialog.mermaid.preview"),panelAction:{action:()=>{T()},label:i("dialog.mermaid.insert")},renderSubmitShortcut:()=>O.jsx(WM,{}),children:O.jsx(VM,{value:h,loaded:o.loaded,error:m})})]})]})},tJ=()=>{const{appState:e,setAppState:n}=Qs(),{t:i,language:r}=si(),[o,a]=K.useState({loaded:!1,api:Promise.resolve({parseMarkdownToDrawnix:(D,b)=>null})});K.useEffect(()=>{(async()=>{try{const b=await jM(()=>import("./index-DAnc6_hP.js"),__vite__mapDeps([0,1]));a({loaded:!0,api:Promise.resolve(b)})}catch(b){console.error("Failed to load mermaid library:",b),w(new Error(i("dialog.error.loadMermaid")))}})()},[]);const[u,c]=K.useState(()=>i("markdown.example")),[h,g]=K.useState(()=>[]),p=K.useDeferredValue(u.trim()),[m,w]=K.useState(null),x=qi();K.useEffect(()=>{c(i("markdown.example"))},[r]),K.useEffect(()=>{(async()=>{try{const b=await o.api;let B;try{B=await b.parseMarkdownToDrawnix(p)}catch{B=await b.parseMarkdownToDrawnix(p.replace(/"/g,"'"))}const A=B;A.points=[[0,0]],A&&(g([A]),w(null))}catch(b){w(b)}})()},[p,o]);const T=()=>{if(!h.length)return;const D=G.getBoardContainer(x).getBoundingClientRect(),b=[D.width/4,D.height/2-20],B=x.viewport.zoom,A=$g(x),H=A[0]+b[0]/B,R=A[1]+b[1]/B,k=h;x.insertFragment({elements:JSON.parse(JSON.stringify(k))},[H,R],Ma.paste),n({...e,openDialogType:null})};return O.jsxs(O.Fragment,{children:[O.jsx("div",{className:"ttd-dialog-desc",children:i("dialog.markdown.description")}),O.jsxs(UM,{children:[O.jsx(Dx,{label:i("dialog.markdown.syntax"),children:O.jsx($M,{input:u,placeholder:i("dialog.markdown.placeholder"),onChange:D=>c(D.target.value),onKeyboardSubmit:()=>{T()}})}),O.jsx(Dx,{label:i("dialog.markdown.preview"),panelAction:{action:()=>{T()},label:i("dialog.markdown.insert")},renderSubmitShortcut:()=>O.jsx(WM,{}),children:O.jsx(VM,{value:h,loaded:o.loaded,error:m})})]})]})},eJ=({container:e})=>{const{appState:n,setAppState:i}=Qs();return O.jsxs(O.Fragment,{children:[O.jsx(QS,{open:n.openDialogType===Vh.mermaidToDrawnix,onOpenChange:r=>{i({...n,openDialogType:r?Vh.mermaidToDrawnix:null})},children:O.jsx(JS,{className:"Dialog ttd-dialog",container:e,children:O.jsx(JQ,{})})}),O.jsx(QS,{open:n.openDialogType===Vh.markdownToDrawnix,onOpenChange:r=>{i({...n,openDialogType:r?Vh.markdownToDrawnix:null})},children:O.jsx(JS,{className:"Dialog ttd-dialog",container:e,children:O.jsx(tJ,{})})})]})},nJ=({container:e})=>{const{appState:n,setAppState:i}=Qs(),{t:r}=si(),o=qi();return O.jsx(QS,{open:n.openCleanConfirm,onOpenChange:a=>{i({...n,openCleanConfirm:a})},children:O.jsxs(JS,{className:"clean-confirm",container:e,children:[O.jsx("h2",{className:"clean-confirm__title",children:r("cleanConfirm.title")}),O.jsx("p",{className:"clean-confirm__description",children:r("cleanConfirm.description")}),O.jsxs("div",{className:"clean-confirm__actions",children:[O.jsx("button",{className:"clean-confirm__button clean-confirm__button--cancel",onClick:()=>{i({...n,openCleanConfirm:!1})},children:r("cleanConfirm.cancel")}),O.jsx("button",{className:"clean-confirm__button clean-confirm__button--ok",autoFocus:!0,onClick:()=>{o.deleteFragment(o.children),i({...n,openCleanConfirm:!1})},children:r("cleanConfirm.ok")})]})]})})},k4=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isHovering},I4=e=>{const{appState:n}=e;return n&&n.linkState&&n.linkState.isEditing},iJ=e=>i=>{const{pointerMove:r}=i;let o=null,a=null;return i.pointerMove=u=>{(G.isPointer(i,nn.selection)||G.isPointer(i,nn.hand))&&!sf(i)&&!vu(i)&&!k4(i)&&!I4(i)&&_a(i,"with-text-link",()=>{const c=u.target.closest(".plait-board-link");if(c&&c!==o){const h=c.closest(".plait-text-container"),g=Kt.toSlateNode(void 0,h),p=Kt.toSlateNode(void 0,c);o=c,e({linkState:{targetDom:c,targetElement:p,editor:g,isEditing:!1,isHovering:!1,isHoveringOrigin:!0}}),clearTimeout(a)}else!c&&o&&(a=setTimeout(()=>{!k4(i)&&!I4(i)&&e({linkState:null})},300),o=null)}),r(u)},i},rJ=()=>{var b,B,A,H;const{t:e}=si(),[n,i]=K.useState(""),{appState:r,setAppState:o}=Qs(),a=qi(),{refs:u,floatingStyles:c}=yC({placement:"top",middleware:[UT(20),$T()]}),h=r.linkState,g=((b=r.linkState)==null?void 0:b.targetDom)||null,p=((B=r.linkState)==null?void 0:B.isEditing)||!1,m=((A=r.linkState)==null?void 0:A.isHoveringOrigin)||!1,w=((H=r.linkState)==null?void 0:H.isHovering)||!1,x=p||m||w,T=K.useRef(r.linkState);K.useEffect(()=>{T.current=r.linkState,r.linkState?i(r.linkState.targetElement.url):i("")},[r.linkState]),K.useEffect(()=>{if(g){const R=g.getBoundingClientRect();u.setPositionReference({getBoundingClientRect(){return{x:R.x,y:R.y,width:R.width,height:R.height,top:R.y,left:R.x,right:R.x+R.width,bottom:R.y+R.height}}})}},[a.viewport,g]),K.useEffect(()=>{const R=k=>{if(u.floating.current&&!u.floating.current.contains(k.target)){if(T.current){const W=Sl.getLinkElement(T.current.editor);W&&!W[0].url.trim()&&Sl.unwrapLink(T.current.editor)}o({...r,linkState:null})}};return document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}},[]);const D=()=>{if(n!==h.targetElement.url){const k=h.editor,W=h.targetElement,U=Kt.findPath(k,W);jt.setNodes(k,{url:n},{at:U})}const R=Sl.getLinkElement(h.editor);o({...r,linkState:{...r.linkState,targetElement:R[0],isEditing:!1,isHoveringOrigin:!0}})};return x&&O.jsx(Jo,{ref:u.setFloating,style:c,padding:1,className:yn("link-popup"),onPointerEnter:()=>{w||o({...r,linkState:{...r.linkState,isHovering:!0}})},onPointerLeave:()=>{p||o({...r,linkState:{...r.linkState,isHovering:!1}})},children:O.jsx(Yr.Row,{gap:1,align:"center",children:p?O.jsxs(O.Fragment,{children:[O.jsx("input",{type:"text",value:n,onChange:R=>{i(R.target.value)},onKeyDown:R=>{R.key==="Enter"&&D()},className:"link-popup__input",autoFocus:!0}),O.jsx(jn,{type:"icon",visible:!0,icon:px,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=h.editor,k=h.targetElement,W=Kt.findPath(R,k);jt.unwrapNodes(R,{at:W}),o({...r,linkState:null})}})]}):O.jsxs(O.Fragment,{children:[O.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"link-popup__link",children:n}),O.jsx(jn,{className:"link-popup__edit",type:"icon",visible:!0,icon:GT,title:"Edit link","aria-label":"Edit link",onPointerDown:({event:R})=>{R.preventDefault(),o({...r,linkState:{...r.linkState,isEditing:!0}})}}),O.jsx(jn,{type:"icon",visible:!0,icon:px,title:e("popupLink.delLink"),"aria-label":e("popupLink.delLink"),onPointerDown:()=>{const R=h.editor,k=h.targetElement,W=Kt.findPath(R,k);jt.unwrapNodes(R,{at:W}),o({...r,linkState:null})}})]})})})},oJ=()=>{const{t:e}=si();return O.jsx("div",{className:"drawnix-tutorial",children:O.jsx("div",{className:"tutorial-overlay",children:O.jsxs("div",{className:"tutorial-content",children:[O.jsx("h1",{className:"brand-title",children:e("tutorial.title")}),O.jsx("p",{className:"brand-description",children:e("tutorial.description")}),O.jsx("p",{className:"brand-tooltip",children:e("tutorial.dataDescription")}),O.jsxs("div",{className:"feature-pointer top-left",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"130",height:"100",viewBox:"0 0 130 100",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-left",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 80,70 Q 35,60 15,15",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-left)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.appToolbar")})})]}),O.jsxs("div",{className:"feature-pointer top-center",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"100",height:"130",viewBox:"0 0 100 130",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-top",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 45,90 Q 20,50 45,10",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-top)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.creationToolbar")})})]}),O.jsxs("div",{className:"feature-pointer bottom-right",children:[O.jsxs("svg",{className:"pointer-arrow-svg",width:"180",height:"100",viewBox:"0 0 180 100",children:[O.jsx("defs",{children:O.jsx("marker",{id:"arrow-right",markerWidth:"10",markerHeight:"10",refX:"0",refY:"3",orient:"auto",markerUnits:"strokeWidth",children:O.jsx("path",{d:"M0,0 L0,6 L6,3 z",fill:"#888"})})}),O.jsx("path",{d:"M 20,25 Q 75,20 105,70",fill:"none",stroke:"#aaa",strokeWidth:"1.5",markerEnd:"url(#arrow-right)"})]}),O.jsx("div",{className:"pointer-content",children:O.jsx("p",{children:e("tutorial.themeDescription")})})]})]})})})},sJ=({value:e,viewport:n,theme:i,onChange:r,onSelectionChange:o,onViewportChange:a,onThemeChange:u,onValueChange:c,afterInit:h,tutorial:g=!1})=>{const p={readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1,themeColors:_P},[m,w]=K.useState(()=>{const A=new hq(window.navigator.userAgent);return{pointer:nn.hand,isMobile:A.mobile()!==null,isPencilMode:!1,openDialogType:null,openCleanConfirm:!1}}),[x,T]=K.useState(null);x&&(x.appState=m);const D=A=>{w({...m,...A})},b=[SP,cB,m9,dq,E9,bQ(D),$Q,WQ(D),iJ(D)],B=K.useRef(null);return O.jsx(Qq,{children:O.jsx(dM.Provider,{value:{appState:m,setAppState:w},children:O.jsxs("div",{className:yn("drawnix",{"drawnix--mobile":m.isMobile}),ref:B,children:[O.jsxs(dB,{value:e,viewport:n,theme:i,options:p,plugins:b,onChange:A=>{r&&r(A)},onSelectionChange:o,onViewportChange:a,onThemeChange:u,onValueChange:c,children:[O.jsx(s6,{afterInit:A=>{T(A),h&&h(A)},children:g&&x&&G.isPointer(x,nn.selection)&&O.jsx(oJ,{})}),O.jsx(DQ,{}),O.jsx(nQ,{}),O.jsx(iQ,{}),O.jsx(VQ,{}),O.jsx(wQ,{}),O.jsx(rJ,{}),O.jsx(XQ,{}),O.jsx(eJ,{container:B.current}),O.jsx(nJ,{container:B.current})]}),O.jsx("canvas",{className:`${HM} mouse-course-hidden`})]})})})};function uw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var R3={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var H4;function aJ(){return H4||(H4=1,function(e,n){(function(i){e.exports=i()})(function(){return function i(r,o,a){function u(g,p){if(!o[g]){if(!r[g]){var m=typeof uw=="function"&&uw;if(!p&&m)return m(g,!0);if(c)return c(g,!0);var w=new Error("Cannot find module '"+g+"'");throw w.code="MODULE_NOT_FOUND",w}var x=o[g]={exports:{}};r[g][0].call(x.exports,function(T){var D=r[g][1][T];return u(D||T)},x,x.exports,i,r,o,a)}return o[g].exports}for(var c=typeof uw=="function"&&uw,h=0;h<a.length;h++)u(a[h]);return u}({1:[function(i,r,o){(function(a){var u=a.MutationObserver||a.WebKitMutationObserver,c;if(u){var h=0,g=new u(T),p=a.document.createTextNode("");g.observe(p,{characterData:!0}),c=function(){p.data=h=++h%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var m=new a.MessageChannel;m.port1.onmessage=T,c=function(){m.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?c=function(){var b=a.document.createElement("script");b.onreadystatechange=function(){T(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:c=function(){setTimeout(T,0)};var w,x=[];function T(){w=!0;for(var b,B,A=x.length;A;){for(B=x,x=[],b=-1;++b<A;)B[b]();A=x.length}w=!1}r.exports=D;function D(b){x.push(b)===1&&!w&&c()}}).call(this,typeof Vs<"u"?Vs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(i,r,o){var a=i(1);function u(){}var c={},h=["REJECTED"],g=["FULFILLED"],p=["PENDING"];r.exports=m;function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,k!==u&&D(this,k)}m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,W){if(typeof k!="function"&&this.state===g||typeof W!="function"&&this.state===h)return this;var U=new this.constructor(u);if(this.state!==p){var nt=this.state===g?k:W;x(U,nt,this.outcome)}else this.queue.push(new w(U,k,W));return U};function w(k,W,U){this.promise=k,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}w.prototype.callFulfilled=function(k){c.resolve(this.promise,k)},w.prototype.otherCallFulfilled=function(k){x(this.promise,this.onFulfilled,k)},w.prototype.callRejected=function(k){c.reject(this.promise,k)},w.prototype.otherCallRejected=function(k){x(this.promise,this.onRejected,k)};function x(k,W,U){a(function(){var nt;try{nt=W(U)}catch(st){return c.reject(k,st)}nt===k?c.reject(k,new TypeError("Cannot resolve promise with itself")):c.resolve(k,nt)})}c.resolve=function(k,W){var U=b(T,W);if(U.status==="error")return c.reject(k,U.value);var nt=U.value;if(nt)D(k,nt);else{k.state=g,k.outcome=W;for(var st=-1,ft=k.queue.length;++st<ft;)k.queue[st].callFulfilled(W)}return k},c.reject=function(k,W){k.state=h,k.outcome=W;for(var U=-1,nt=k.queue.length;++U<nt;)k.queue[U].callRejected(W);return k};function T(k){var W=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof W=="function")return function(){W.apply(k,arguments)}}function D(k,W){var U=!1;function nt(ct){U||(U=!0,c.reject(k,ct))}function st(ct){U||(U=!0,c.resolve(k,ct))}function ft(){W(st,nt)}var Et=b(ft);Et.status==="error"&&nt(Et.value)}function b(k,W){var U={};try{U.value=k(W),U.status="success"}catch(nt){U.status="error",U.value=nt}return U}m.resolve=B;function B(k){return k instanceof this?k:c.resolve(new this(u),k)}m.reject=A;function A(k){var W=new this(u);return c.reject(W,k)}m.all=H;function H(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=k.length,nt=!1;if(!U)return this.resolve([]);for(var st=new Array(U),ft=0,Et=-1,ct=new this(u);++Et<U;)mt(k[Et],Et);return ct;function mt(wt,V){W.resolve(wt).then(P,function(_){nt||(nt=!0,c.reject(ct,_))});function P(_){st[V]=_,++ft===U&&!nt&&(nt=!0,c.resolve(ct,st))}}}m.race=R;function R(k){var W=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=k.length,nt=!1;if(!U)return this.resolve([]);for(var st=-1,ft=new this(u);++st<U;)Et(k[st]);return ft;function Et(ct){W.resolve(ct).then(function(mt){nt||(nt=!0,c.resolve(ft,mt))},function(mt){nt||(nt=!0,c.reject(ft,mt))})}}},{1:1}],3:[function(i,r,o){(function(a){typeof a.Promise!="function"&&(a.Promise=i(2))}).call(this,typeof Vs<"u"?Vs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(i,r,o){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function u(Y,lt){if(!(Y instanceof lt))throw new TypeError("Cannot call a class as a function")}function c(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var h=c();function g(){try{if(!h||!h.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),lt=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||lt)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(Y,lt){Y=Y||[],lt=lt||{};try{return new Blob(Y,lt)}catch(pt){if(pt.name!=="TypeError")throw pt;for(var et=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,vt=new et,St=0;St<Y.length;St+=1)vt.append(Y[St]);return vt.getBlob(lt.type)}}typeof Promise>"u"&&i(3);var m=Promise;function w(Y,lt){lt&&Y.then(function(et){lt(null,et)},function(et){lt(et)})}function x(Y,lt,et){typeof lt=="function"&&Y.then(lt),typeof et=="function"&&Y.catch(et)}function T(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function D(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var b="local-forage-detect-blob-support",B=void 0,A={},H=Object.prototype.toString,R="readonly",k="readwrite";function W(Y){for(var lt=Y.length,et=new ArrayBuffer(lt),vt=new Uint8Array(et),St=0;St<lt;St++)vt[St]=Y.charCodeAt(St);return et}function U(Y){return new m(function(lt){var et=Y.transaction(b,k),vt=p([""]);et.objectStore(b).put(vt,"key"),et.onabort=function(St){St.preventDefault(),St.stopPropagation(),lt(!1)},et.oncomplete=function(){var St=navigator.userAgent.match(/Chrome\/(\d+)/),pt=navigator.userAgent.match(/Edge\//);lt(pt||!St||parseInt(St[1],10)>=43)}}).catch(function(){return!1})}function nt(Y){return typeof B=="boolean"?m.resolve(B):U(Y).then(function(lt){return B=lt,B})}function st(Y){var lt=A[Y.name],et={};et.promise=new m(function(vt,St){et.resolve=vt,et.reject=St}),lt.deferredOperations.push(et),lt.dbReady?lt.dbReady=lt.dbReady.then(function(){return et.promise}):lt.dbReady=et.promise}function ft(Y){var lt=A[Y.name],et=lt.deferredOperations.pop();if(et)return et.resolve(),et.promise}function Et(Y,lt){var et=A[Y.name],vt=et.deferredOperations.pop();if(vt)return vt.reject(lt),vt.promise}function ct(Y,lt){return new m(function(et,vt){if(A[Y.name]=A[Y.name]||J(),Y.db)if(lt)st(Y),Y.db.close();else return et(Y.db);var St=[Y.name];lt&&St.push(Y.version);var pt=h.open.apply(h,St);lt&&(pt.onupgradeneeded=function(Ht){var Xt=pt.result;try{Xt.createObjectStore(Y.storeName),Ht.oldVersion<=1&&Xt.createObjectStore(b)}catch(Zt){if(Zt.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Ht.oldVersion+" to version "+Ht.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Zt}}),pt.onerror=function(Ht){Ht.preventDefault(),vt(pt.error)},pt.onsuccess=function(){var Ht=pt.result;Ht.onversionchange=function(Xt){Xt.target.close()},et(Ht),ft(Y)}})}function mt(Y){return ct(Y,!1)}function wt(Y){return ct(Y,!0)}function V(Y,lt){if(!Y.db)return!0;var et=!Y.db.objectStoreNames.contains(Y.storeName),vt=Y.version<Y.db.version,St=Y.version>Y.db.version;if(vt&&(Y.version!==lt&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),St||et){if(et){var pt=Y.db.version+1;pt>Y.version&&(Y.version=pt)}return!0}return!1}function P(Y){return new m(function(lt,et){var vt=new FileReader;vt.onerror=et,vt.onloadend=function(St){var pt=btoa(St.target.result||"");lt({__local_forage_encoded_blob:!0,data:pt,type:Y.type})},vt.readAsBinaryString(Y)})}function _(Y){var lt=W(atob(Y.data));return p([lt],{type:Y.type})}function N(Y){return Y&&Y.__local_forage_encoded_blob}function $(Y){var lt=this,et=lt._initReady().then(function(){var vt=A[lt._dbInfo.name];if(vt&&vt.dbReady)return vt.dbReady});return x(et,Y,Y),et}function Q(Y){st(Y);for(var lt=A[Y.name],et=lt.forages,vt=0;vt<et.length;vt++){var St=et[vt];St._dbInfo.db&&(St._dbInfo.db.close(),St._dbInfo.db=null)}return Y.db=null,mt(Y).then(function(pt){return Y.db=pt,V(Y)?wt(Y):pt}).then(function(pt){Y.db=lt.db=pt;for(var Ht=0;Ht<et.length;Ht++)et[Ht]._dbInfo.db=pt}).catch(function(pt){throw Et(Y,pt),pt})}function F(Y,lt,et,vt){vt===void 0&&(vt=1);try{var St=Y.db.transaction(Y.storeName,lt);et(null,St)}catch(pt){if(vt>0&&(!Y.db||pt.name==="InvalidStateError"||pt.name==="NotFoundError"))return m.resolve().then(function(){if(!Y.db||pt.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),wt(Y)}).then(function(){return Q(Y).then(function(){F(Y,lt,et,vt-1)})}).catch(et);et(pt)}}function J(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function tt(Y){var lt=this,et={db:null};if(Y)for(var vt in Y)et[vt]=Y[vt];var St=A[et.name];St||(St=J(),A[et.name]=St),St.forages.push(lt),lt._initReady||(lt._initReady=lt.ready,lt.ready=$);var pt=[];function Ht(){return m.resolve()}for(var Xt=0;Xt<St.forages.length;Xt++){var Zt=St.forages[Xt];Zt!==lt&&pt.push(Zt._initReady().catch(Ht))}var qt=St.forages.slice(0);return m.all(pt).then(function(){return et.db=St.db,mt(et)}).then(function(Jt){return et.db=Jt,V(et,lt._defaultConfig.version)?wt(et):Jt}).then(function(Jt){et.db=St.db=Jt,lt._dbInfo=et;for(var ue=0;ue<qt.length;ue++){var $e=qt[ue];$e!==lt&&($e._dbInfo.db=et.db,$e._dbInfo.version=et.version)}})}function it(Y,lt){var et=this;Y=T(Y);var vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.get(Y);qt.onsuccess=function(){var Jt=qt.result;Jt===void 0&&(Jt=null),N(Jt)&&(Jt=_(Jt)),St(Jt)},qt.onerror=function(){pt(qt.error)}}catch(Jt){pt(Jt)}})}).catch(pt)});return w(vt,lt),vt}function xt(Y,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.openCursor(),Jt=1;qt.onsuccess=function(){var ue=qt.result;if(ue){var $e=ue.value;N($e)&&($e=_($e));var tn=Y($e,ue.key,Jt++);tn!==void 0?St(tn):ue.continue()}else St()},qt.onerror=function(){pt(qt.error)}}catch(ue){pt(ue)}})}).catch(pt)});return w(vt,lt),vt}function gt(Y,lt,et){var vt=this;Y=T(Y);var St=new m(function(pt,Ht){var Xt;vt.ready().then(function(){return Xt=vt._dbInfo,H.call(lt)==="[object Blob]"?nt(Xt.db).then(function(Zt){return Zt?lt:P(lt)}):lt}).then(function(Zt){F(vt._dbInfo,k,function(qt,Jt){if(qt)return Ht(qt);try{var ue=Jt.objectStore(vt._dbInfo.storeName);Zt===null&&(Zt=void 0);var $e=ue.put(Zt,Y);Jt.oncomplete=function(){Zt===void 0&&(Zt=null),pt(Zt)},Jt.onabort=Jt.onerror=function(){var tn=$e.error?$e.error:$e.transaction.error;Ht(tn)}}catch(tn){Ht(tn)}})}).catch(Ht)});return w(St,et),St}function Lt(Y,lt){var et=this;Y=T(Y);var vt=new m(function(St,pt){et.ready().then(function(){F(et._dbInfo,k,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=Zt.delete(Y);Xt.oncomplete=function(){St()},Xt.onerror=function(){pt(qt.error)},Xt.onabort=function(){var Jt=qt.error?qt.error:qt.transaction.error;pt(Jt)}}catch(Jt){pt(Jt)}})}).catch(pt)});return w(vt,lt),vt}function $t(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,k,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.clear();Ht.oncomplete=function(){vt()},Ht.onabort=Ht.onerror=function(){var qt=Zt.error?Zt.error:Zt.transaction.error;St(qt)}}catch(qt){St(qt)}})}).catch(St)});return w(et,Y),et}function ot(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,R,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.count();Zt.onsuccess=function(){vt(Zt.result)},Zt.onerror=function(){St(Zt.error)}}catch(qt){St(qt)}})}).catch(St)});return w(et,Y),et}function Pt(Y,lt){var et=this,vt=new m(function(St,pt){if(Y<0){St(null);return}et.ready().then(function(){F(et._dbInfo,R,function(Ht,Xt){if(Ht)return pt(Ht);try{var Zt=Xt.objectStore(et._dbInfo.storeName),qt=!1,Jt=Zt.openKeyCursor();Jt.onsuccess=function(){var ue=Jt.result;if(!ue){St(null);return}Y===0||qt?St(ue.key):(qt=!0,ue.advance(Y))},Jt.onerror=function(){pt(Jt.error)}}catch(ue){pt(ue)}})}).catch(pt)});return w(vt,lt),vt}function Rt(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){F(lt._dbInfo,R,function(pt,Ht){if(pt)return St(pt);try{var Xt=Ht.objectStore(lt._dbInfo.storeName),Zt=Xt.openKeyCursor(),qt=[];Zt.onsuccess=function(){var Jt=Zt.result;if(!Jt){vt(qt);return}qt.push(Jt.key),Jt.continue()},Zt.onerror=function(){St(Zt.error)}}catch(Jt){St(Jt)}})}).catch(St)});return w(et,Y),et}function It(Y,lt){lt=D.apply(this,arguments);var et=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||et.name,Y.storeName=Y.storeName||et.storeName);var vt=this,St;if(!Y.name)St=m.reject("Invalid arguments");else{var pt=Y.name===et.name&&vt._dbInfo.db,Ht=pt?m.resolve(vt._dbInfo.db):mt(Y).then(function(Xt){var Zt=A[Y.name],qt=Zt.forages;Zt.db=Xt;for(var Jt=0;Jt<qt.length;Jt++)qt[Jt]._dbInfo.db=Xt;return Xt});Y.storeName?St=Ht.then(function(Xt){if(Xt.objectStoreNames.contains(Y.storeName)){var Zt=Xt.version+1;st(Y);var qt=A[Y.name],Jt=qt.forages;Xt.close();for(var ue=0;ue<Jt.length;ue++){var $e=Jt[ue];$e._dbInfo.db=null,$e._dbInfo.version=Zt}var tn=new m(function(mn,Zn){var wn=h.open(Y.name,Zt);wn.onerror=function(vr){var na=wn.result;na.close(),Zn(vr)},wn.onupgradeneeded=function(){var vr=wn.result;vr.deleteObjectStore(Y.storeName)},wn.onsuccess=function(){var vr=wn.result;vr.close(),mn(vr)}});return tn.then(function(mn){qt.db=mn;for(var Zn=0;Zn<Jt.length;Zn++){var wn=Jt[Zn];wn._dbInfo.db=mn,ft(wn._dbInfo)}}).catch(function(mn){throw(Et(Y,mn)||m.resolve()).catch(function(){}),mn})}}):St=Ht.then(function(Xt){st(Y);var Zt=A[Y.name],qt=Zt.forages;Xt.close();for(var Jt=0;Jt<qt.length;Jt++){var ue=qt[Jt];ue._dbInfo.db=null}var $e=new m(function(tn,mn){var Zn=h.deleteDatabase(Y.name);Zn.onerror=function(){var wn=Zn.result;wn&&wn.close(),mn(Zn.error)},Zn.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Zn.onsuccess=function(){var wn=Zn.result;wn&&wn.close(),tn(wn)}});return $e.then(function(tn){Zt.db=tn;for(var mn=0;mn<qt.length;mn++){var Zn=qt[mn];ft(Zn._dbInfo)}}).catch(function(tn){throw(Et(Y,tn)||m.resolve()).catch(function(){}),tn})})}return w(St,lt),St}var he={_driver:"asyncStorage",_initStorage:tt,_support:g(),iterate:xt,getItem:it,setItem:gt,removeItem:Lt,clear:$t,length:ot,key:Pt,keys:Rt,dropInstance:It};function Nt(){return typeof openDatabase=="function"}var ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae="~~local_forage_type~",ee=/^~~local_forage_type~([^~]+)~/,xe="__lfsc__:",le=xe.length,Re="arbf",ve="blob",Qe="si08",ti="ui08",Fn="uic8",Kn="si16",Br="si32",ji="ur16",An="ui32",Wn="fl32",Zr="fl64",Js=le+Re.length,ta=Object.prototype.toString;function Qr(Y){var lt=Y.length*.75,et=Y.length,vt,St=0,pt,Ht,Xt,Zt;Y[Y.length-1]==="="&&(lt--,Y[Y.length-2]==="="&&lt--);var qt=new ArrayBuffer(lt),Jt=new Uint8Array(qt);for(vt=0;vt<et;vt+=4)pt=ge.indexOf(Y[vt]),Ht=ge.indexOf(Y[vt+1]),Xt=ge.indexOf(Y[vt+2]),Zt=ge.indexOf(Y[vt+3]),Jt[St++]=pt<<2|Ht>>4,Jt[St++]=(Ht&15)<<4|Xt>>2,Jt[St++]=(Xt&3)<<6|Zt&63;return qt}function di(Y){var lt=new Uint8Array(Y),et="",vt;for(vt=0;vt<lt.length;vt+=3)et+=ge[lt[vt]>>2],et+=ge[(lt[vt]&3)<<4|lt[vt+1]>>4],et+=ge[(lt[vt+1]&15)<<2|lt[vt+2]>>6],et+=ge[lt[vt+2]&63];return lt.length%3===2?et=et.substring(0,et.length-1)+"=":lt.length%3===1&&(et=et.substring(0,et.length-2)+"=="),et}function Pr(Y,lt){var et="";if(Y&&(et=ta.call(Y)),Y&&(et==="[object ArrayBuffer]"||Y.buffer&&ta.call(Y.buffer)==="[object ArrayBuffer]")){var vt,St=xe;Y instanceof ArrayBuffer?(vt=Y,St+=Re):(vt=Y.buffer,et==="[object Int8Array]"?St+=Qe:et==="[object Uint8Array]"?St+=ti:et==="[object Uint8ClampedArray]"?St+=Fn:et==="[object Int16Array]"?St+=Kn:et==="[object Uint16Array]"?St+=ji:et==="[object Int32Array]"?St+=Br:et==="[object Uint32Array]"?St+=An:et==="[object Float32Array]"?St+=Wn:et==="[object Float64Array]"?St+=Zr:lt(new Error("Failed to get type for BinaryArray"))),lt(St+di(vt))}else if(et==="[object Blob]"){var pt=new FileReader;pt.onload=function(){var Ht=ae+Y.type+"~"+di(this.result);lt(xe+ve+Ht)},pt.readAsArrayBuffer(Y)}else try{lt(JSON.stringify(Y))}catch(Ht){console.error("Couldn't convert value into a JSON string: ",Y),lt(null,Ht)}}function Ei(Y){if(Y.substring(0,le)!==xe)return JSON.parse(Y);var lt=Y.substring(Js),et=Y.substring(le,Js),vt;if(et===ve&&ee.test(lt)){var St=lt.match(ee);vt=St[1],lt=lt.substring(St[0].length)}var pt=Qr(lt);switch(et){case Re:return pt;case ve:return p([pt],{type:vt});case Qe:return new Int8Array(pt);case ti:return new Uint8Array(pt);case Fn:return new Uint8ClampedArray(pt);case Kn:return new Int16Array(pt);case ji:return new Uint16Array(pt);case Br:return new Int32Array(pt);case An:return new Uint32Array(pt);case Wn:return new Float32Array(pt);case Zr:return new Float64Array(pt);default:throw new Error("Unkown type: "+et)}}var Ps={serialize:Pr,deserialize:Ei,stringToBuffer:Qr,bufferToString:di};function wd(Y,lt,et,vt){Y.executeSql("CREATE TABLE IF NOT EXISTS "+lt.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],et,vt)}function e1(Y){var lt=this,et={db:null};if(Y)for(var vt in Y)et[vt]=typeof Y[vt]!="string"?Y[vt].toString():Y[vt];var St=new m(function(pt,Ht){try{et.db=openDatabase(et.name,String(et.version),et.description,et.size)}catch(Xt){return Ht(Xt)}et.db.transaction(function(Xt){wd(Xt,et,function(){lt._dbInfo=et,pt()},function(Zt,qt){Ht(qt)})},Ht)});return et.serializer=Ps,St}function Jr(Y,lt,et,vt,St,pt){Y.executeSql(et,vt,St,function(Ht,Xt){Xt.code===Xt.SYNTAX_ERR?Ht.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[lt.storeName],function(Zt,qt){qt.rows.length?pt(Zt,Xt):wd(Zt,lt,function(){Zt.executeSql(et,vt,St,pt)},pt)},pt):pt(Ht,Xt)},pt)}function kl(Y,lt){var et=this;Y=T(Y);var vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT * FROM "+Ht.storeName+" WHERE key = ? LIMIT 1",[Y],function(Zt,qt){var Jt=qt.rows.length?qt.rows.item(0).value:null;Jt&&(Jt=Ht.serializer.deserialize(Jt)),St(Jt)},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Il(Y,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT * FROM "+Ht.storeName,[],function(Zt,qt){for(var Jt=qt.rows,ue=Jt.length,$e=0;$e<ue;$e++){var tn=Jt.item($e),mn=tn.value;if(mn&&(mn=Ht.serializer.deserialize(mn)),mn=Y(mn,tn.key,$e+1),mn!==void 0){St(mn);return}}St()},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Ms(Y,lt,et,vt){var St=this;Y=T(Y);var pt=new m(function(Ht,Xt){St.ready().then(function(){lt===void 0&&(lt=null);var Zt=lt,qt=St._dbInfo;qt.serializer.serialize(lt,function(Jt,ue){ue?Xt(ue):qt.db.transaction(function($e){Jr($e,qt,"INSERT OR REPLACE INTO "+qt.storeName+" (key, value) VALUES (?, ?)",[Y,Jt],function(){Ht(Zt)},function(tn,mn){Xt(mn)})},function($e){if($e.code===$e.QUOTA_ERR){if(vt>0){Ht(Ms.apply(St,[Y,Zt,et,vt-1]));return}Xt($e)}})})}).catch(Xt)});return w(pt,et),pt}function _u(Y,lt,et){return Ms.apply(this,[Y,lt,et,1])}function Hl(Y,lt){var et=this;Y=T(Y);var vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"DELETE FROM "+Ht.storeName+" WHERE key = ?",[Y],function(){St()},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function n1(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"DELETE FROM "+pt.storeName,[],function(){vt()},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,Y),et}function Cf(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"SELECT COUNT(key) as c FROM "+pt.storeName,[],function(Xt,Zt){var qt=Zt.rows.item(0).c;vt(qt)},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,Y),et}function Ef(Y,lt){var et=this,vt=new m(function(St,pt){et.ready().then(function(){var Ht=et._dbInfo;Ht.db.transaction(function(Xt){Jr(Xt,Ht,"SELECT key FROM "+Ht.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Zt,qt){var Jt=qt.rows.length?qt.rows.item(0).key:null;St(Jt)},function(Zt,qt){pt(qt)})})}).catch(pt)});return w(vt,lt),vt}function Nl(Y){var lt=this,et=new m(function(vt,St){lt.ready().then(function(){var pt=lt._dbInfo;pt.db.transaction(function(Ht){Jr(Ht,pt,"SELECT key FROM "+pt.storeName,[],function(Xt,Zt){for(var qt=[],Jt=0;Jt<Zt.rows.length;Jt++)qt.push(Zt.rows.item(Jt).key);vt(qt)},function(Xt,Zt){St(Zt)})})}).catch(St)});return w(et,Y),et}function i1(Y){return new m(function(lt,et){Y.transaction(function(vt){vt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(St,pt){for(var Ht=[],Xt=0;Xt<pt.rows.length;Xt++)Ht.push(pt.rows.item(Xt).name);lt({db:Y,storeNames:Ht})},function(St,pt){et(pt)})},function(vt){et(vt)})})}function Fu(Y,lt){lt=D.apply(this,arguments);var et=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||et.name,Y.storeName=Y.storeName||et.storeName);var vt=this,St;return Y.name?St=new m(function(pt){var Ht;Y.name===et.name?Ht=vt._dbInfo.db:Ht=openDatabase(Y.name,"","",0),Y.storeName?pt({db:Ht,storeNames:[Y.storeName]}):pt(i1(Ht))}).then(function(pt){return new m(function(Ht,Xt){pt.db.transaction(function(Zt){function qt(tn){return new m(function(mn,Zn){Zt.executeSql("DROP TABLE IF EXISTS "+tn,[],function(){mn()},function(wn,vr){Zn(vr)})})}for(var Jt=[],ue=0,$e=pt.storeNames.length;ue<$e;ue++)Jt.push(qt(pt.storeNames[ue]));m.all(Jt).then(function(){Ht()}).catch(function(tn){Xt(tn)})},function(Zt){Xt(Zt)})})}):St=m.reject("Invalid arguments"),w(St,lt),St}var xd={_driver:"webSQLStorage",_initStorage:e1,_support:Nt(),iterate:Il,getItem:kl,setItem:_u,removeItem:Hl,clear:n1,length:Cf,key:Ef,keys:Nl,dropInstance:Fu};function ku(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Iu(Y,lt){var et=Y.name+"/";return Y.storeName!==lt.storeName&&(et+=Y.storeName+"/"),et}function Sf(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function Cd(){return!Sf()||localStorage.length>0}function Ed(Y){var lt=this,et={};if(Y)for(var vt in Y)et[vt]=Y[vt];return et.keyPrefix=Iu(Y,lt._defaultConfig),Cd()?(lt._dbInfo=et,et.serializer=Ps,m.resolve()):m.reject()}function Rs(Y){var lt=this,et=lt.ready().then(function(){for(var vt=lt._dbInfo.keyPrefix,St=localStorage.length-1;St>=0;St--){var pt=localStorage.key(St);pt.indexOf(vt)===0&&localStorage.removeItem(pt)}});return w(et,Y),et}function Fi(Y,lt){var et=this;Y=T(Y);var vt=et.ready().then(function(){var St=et._dbInfo,pt=localStorage.getItem(St.keyPrefix+Y);return pt&&(pt=St.serializer.deserialize(pt)),pt});return w(vt,lt),vt}function or(Y,lt){var et=this,vt=et.ready().then(function(){for(var St=et._dbInfo,pt=St.keyPrefix,Ht=pt.length,Xt=localStorage.length,Zt=1,qt=0;qt<Xt;qt++){var Jt=localStorage.key(qt);if(Jt.indexOf(pt)===0){var ue=localStorage.getItem(Jt);if(ue&&(ue=St.serializer.deserialize(ue)),ue=Y(ue,Jt.substring(Ht),Zt++),ue!==void 0)return ue}}});return w(vt,lt),vt}function Ia(Y,lt){var et=this,vt=et.ready().then(function(){var St=et._dbInfo,pt;try{pt=localStorage.key(Y)}catch{pt=null}return pt&&(pt=pt.substring(St.keyPrefix.length)),pt});return w(vt,lt),vt}function Hu(Y){var lt=this,et=lt.ready().then(function(){for(var vt=lt._dbInfo,St=localStorage.length,pt=[],Ht=0;Ht<St;Ht++){var Xt=localStorage.key(Ht);Xt.indexOf(vt.keyPrefix)===0&&pt.push(Xt.substring(vt.keyPrefix.length))}return pt});return w(et,Y),et}function r1(Y){var lt=this,et=lt.keys().then(function(vt){return vt.length});return w(et,Y),et}function o1(Y,lt){var et=this;Y=T(Y);var vt=et.ready().then(function(){var St=et._dbInfo;localStorage.removeItem(St.keyPrefix+Y)});return w(vt,lt),vt}function Sd(Y,lt,et){var vt=this;Y=T(Y);var St=vt.ready().then(function(){lt===void 0&&(lt=null);var pt=lt;return new m(function(Ht,Xt){var Zt=vt._dbInfo;Zt.serializer.serialize(lt,function(qt,Jt){if(Jt)Xt(Jt);else try{localStorage.setItem(Zt.keyPrefix+Y,qt),Ht(pt)}catch(ue){(ue.name==="QuotaExceededError"||ue.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Xt(ue),Xt(ue)}})})});return w(St,et),St}function Gl(Y,lt){if(lt=D.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var et=this.config();Y.name=Y.name||et.name,Y.storeName=Y.storeName||et.storeName}var vt=this,St;return Y.name?St=new m(function(pt){Y.storeName?pt(Iu(Y,vt._defaultConfig)):pt(Y.name+"/")}).then(function(pt){for(var Ht=localStorage.length-1;Ht>=0;Ht--){var Xt=localStorage.key(Ht);Xt.indexOf(pt)===0&&localStorage.removeItem(Xt)}}):St=m.reject("Invalid arguments"),w(St,lt),St}var Tf={_driver:"localStorageWrapper",_initStorage:Ed,_support:ku(),iterate:or,getItem:Fi,setItem:Sd,removeItem:o1,clear:Rs,length:r1,key:Ia,keys:Hu,dropInstance:Gl},Ha=function(lt,et){return lt===et||typeof lt=="number"&&typeof et=="number"&&isNaN(lt)&&isNaN(et)},ts=function(lt,et){for(var vt=lt.length,St=0;St<vt;){if(Ha(lt[St],et))return!0;St++}return!1},Na=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},mr={},Si={},ea={INDEXEDDB:he,WEBSQL:xd,LOCALSTORAGE:Tf},Td=[ea.INDEXEDDB._driver,ea.WEBSQL._driver,ea.LOCALSTORAGE._driver],to=["dropInstance"],es=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(to),Ad={description:"",driver:Td.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Dd(Y,lt){Y[lt]=function(){var et=arguments;return Y.ready().then(function(){return Y[lt].apply(Y,et)})}}function Nu(){for(var Y=1;Y<arguments.length;Y++){var lt=arguments[Y];if(lt)for(var et in lt)lt.hasOwnProperty(et)&&(Na(lt[et])?arguments[0][et]=lt[et].slice():arguments[0][et]=lt[et])}return arguments[0]}var s1=function(){function Y(lt){u(this,Y);for(var et in ea)if(ea.hasOwnProperty(et)){var vt=ea[et],St=vt._driver;this[et]=St,mr[St]||this.defineDriver(vt)}this._defaultConfig=Nu({},Ad),this._config=Nu({},this._defaultConfig,lt),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(et){if((typeof et>"u"?"undefined":a(et))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var vt in et){if(vt==="storeName"&&(et[vt]=et[vt].replace(/\W/g,"_")),vt==="version"&&typeof et[vt]!="number")return new Error("Database version must be a number.");this._config[vt]=et[vt]}return"driver"in et&&et.driver?this.setDriver(this._config.driver):!0}else return typeof et=="string"?this._config[et]:this._config},Y.prototype.defineDriver=function(et,vt,St){var pt=new m(function(Ht,Xt){try{var Zt=et._driver,qt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!et._driver){Xt(qt);return}for(var Jt=es.concat("_initStorage"),ue=0,$e=Jt.length;ue<$e;ue++){var tn=Jt[ue],mn=!ts(to,tn);if((mn||et[tn])&&typeof et[tn]!="function"){Xt(qt);return}}var Zn=function(){for(var na=function(zl){return function(){var ns=new Error("Method "+zl+" is not implemented by the current driver"),$u=m.reject(ns);return w($u,arguments[arguments.length-1]),$u}},zu=0,ju=to.length;zu<ju;zu++){var Uu=to[zu];et[Uu]||(et[Uu]=na(Uu))}};Zn();var wn=function(na){mr[Zt]&&console.info("Redefining LocalForage driver: "+Zt),mr[Zt]=et,Si[Zt]=na,Ht()};"_support"in et?et._support&&typeof et._support=="function"?et._support().then(wn,Xt):wn(!!et._support):wn(!0)}catch(vr){Xt(vr)}});return x(pt,vt,St),pt},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(et,vt,St){var pt=mr[et]?m.resolve(mr[et]):m.reject(new Error("Driver not found."));return x(pt,vt,St),pt},Y.prototype.getSerializer=function(et){var vt=m.resolve(Ps);return x(vt,et),vt},Y.prototype.ready=function(et){var vt=this,St=vt._driverSet.then(function(){return vt._ready===null&&(vt._ready=vt._initDriver()),vt._ready});return x(St,et,et),St},Y.prototype.setDriver=function(et,vt,St){var pt=this;Na(et)||(et=[et]);var Ht=this._getSupportedDrivers(et);function Xt(){pt._config.driver=pt.driver()}function Zt(ue){return pt._extend(ue),Xt(),pt._ready=pt._initStorage(pt._config),pt._ready}function qt(ue){return function(){var $e=0;function tn(){for(;$e<ue.length;){var mn=ue[$e];return $e++,pt._dbInfo=null,pt._ready=null,pt.getDriver(mn).then(Zt).catch(tn)}Xt();var Zn=new Error("No available storage method found.");return pt._driverSet=m.reject(Zn),pt._driverSet}return tn()}}var Jt=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=Jt.then(function(){var ue=Ht[0];return pt._dbInfo=null,pt._ready=null,pt.getDriver(ue).then(function($e){pt._driver=$e._driver,Xt(),pt._wrapLibraryMethodsWithReady(),pt._initDriver=qt(Ht)})}).catch(function(){Xt();var ue=new Error("No available storage method found.");return pt._driverSet=m.reject(ue),pt._driverSet}),x(this._driverSet,vt,St),this._driverSet},Y.prototype.supports=function(et){return!!Si[et]},Y.prototype._extend=function(et){Nu(this,et)},Y.prototype._getSupportedDrivers=function(et){for(var vt=[],St=0,pt=et.length;St<pt;St++){var Ht=et[St];this.supports(Ht)&&vt.push(Ht)}return vt},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var et=0,vt=es.length;et<vt;et++)Dd(this,es[et])},Y.prototype.createInstance=function(et){return new Y(et)},Y}(),Gu=new s1;r.exports=Gu},{3:3}]},{},[4])(4)})}(R3)),R3.exports}var lJ=aJ();const Bm=hf(lJ),N4="main_board_content";Bm.config({name:"Drawnix",storeName:"drawnix_store",driver:[Bm.INDEXEDDB,Bm.LOCALSTORAGE]});function uJ(){const[e,n]=K.useState({children:[]}),[i,r]=K.useState(!1);return K.useEffect(()=>{(async()=>{const a=await Bm.getItem(N4);if(a){n(a),a.children&&a.children.length===0&&r(!0);return}r(!0)})()},[]),O.jsx(sJ,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:o=>{const a=o;Bm.setItem(N4,a),n(a),a.children&&a.children.length>0&&r(!1)},tutorial:i,afterInit:o=>{console.log("board initialized")}})}const cJ=bx.createRoot(document.getElementById("root"));cJ.render(O.jsx(K.StrictMode,{children:O.jsx(uJ,{})}));export{ur as A,we as B,Um as D,me as F,ie as M,te as N,So as P,I as R,Co as S,jM as _,mT as a,gd as b,QL as c,gT as d,xg as e,Yj as f,hf as g,SB as h,qn as i,Me as j,Mn as k,sC as l,Yx as m,Vs as n,uw as o};
